const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BmyzT6Ba.js","./C0jZ-yIj.js","./entry.D65hdFuw.css"])))=>i.map(i=>d[i]);
var ma=Object.defineProperty;var ha=(e,t,i)=>t in e?ma(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var U=(e,t,i)=>ha(e,typeof t!="symbol"?t+"":t,i);import{aT as A,aU as ga,aV as va,aW as fa,aX as h,aY as Wo,aZ as we,a_ as K,a$ as $,b0 as D,b1 as d,b2 as r,b3 as p,b4 as g,b5 as io,b6 as J,b7 as Ce,b8 as _,b9 as oe,ba as S,bb as n,bc as E,bd as Qt,be as w,bf as z,bg as ba,bh as Go,bi as N,bj as q,bk as F,bl as W,bm as V,bn as Qe,bo as ya,bp as Ea,bq as Sa,br as Xo,bs as Yo,bt as ka,bu as jt,bv as dt,bw as ae,bx as pe,by as y,bz as Vt,bA as oo,bB as Ca,bC as Tt,bD as Ta,bE as le,bF as In,bG as Fi,bH as De,bI as ue,bJ as Ci,bK as Ht,bL as $t,bM as wt,bN as $a,bO as Ln,bP as On,bQ as X,bR as k,bS as G,bT as Yt,bU as Kt,bV as Yi,bW as wa,bX as ze,bY as Fn,bZ as Dn,b_ as no,b$ as pt,c0 as Vn,c1 as Ki,c2 as so,c3 as lt,c4 as Ko,c5 as Nn,c6 as ao,c7 as Ee,c8 as $e,c9 as ge,ca as Se,cb as Ie,cc as ro,cd as Bn,ce as Aa,cf as Ma,cg as jn,ch as ke,ci as Ra,cj as Pa,ck as Ia,cl as La,cm as Zi,cn as H,co as zn,cp as Oa,cq as Ze,cr as yt,cs as yi,ct as Q,cu as Zo,cv as ui,cw as Pe,cx as Qi,cy as lo,cz as qe,cA as et,cB as Fa,cC as Qo,cD as Da,cE as Nt,cF as je,cG as Ti,cH as Hn,cI as Va,cJ as Na,cK as Ba,cL as Di,cM as ja,cN as za,cO as vi,cP as Vi,cQ as Ha,cR as _a,cS as Jo,cT as Ua,cU as qa,cV as Wa,cW as Ga,cX as Xa,cY as Ya,cZ as Ka,c_ as Za,c$ as vt,d0 as Ni,d1 as Qa,d2 as Ja,d3 as Me,d4 as Bi,d5 as xa,d6 as er,d7 as tr,d8 as ir,d9 as xo,da as or,aR as nr,db as sr,dc as ar,dd as rr,de as It,df as Lt,dg as ji,dh as Re,di as Be,dj as lr,dk as dr,dl as en,dm as _e,dn as se,dp as ur,dq as pr,dr as cr,ds as mr,dt as zi,du as hr,dv as tn,dw as gr}from"./C0jZ-yIj.js";import{f as Ue,d as _t,t as ut,_ as tt,s as Jt,R as Ut,c as uo,a as po,o as co,b as vr,e as fr,g as br,h as _n,p as Hi,i as yr,j as Er,k as Sr,l as kr,m as Ei,n as Cr,q as Tr}from"./B-hWy-RB.js";import{d as $r}from"./BpQt0zxb.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0775cf39-1127-43f7-9e7d-8e51e3026911",e._sentryDebugIdIdentifier="sentry-dbid-0775cf39-1127-43f7-9e7d-8e51e3026911")}catch{}})();const wr=Symbol.for("nuxt:client-only"),Ar=A({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:t,attrs:i}){const o=ga(!1);return va(()=>{o.value=!0}),fa(wr,!0),s=>{if(o.value)return t.default?.();const l=t.fallback||t.placeholder;if(l)return l();const a=s.fallback||s.placeholder||"",u=s.fallbackTag||s.placeholderTag||"span";return h(u,i,a)}}});class on{constructor(t,i=void 0){U(this,"waveformBuffer");U(this,"waveformData");U(this,"waveformResampler");this.waveformBuffer=t,this.waveformResampler=i}async parse(){try{this.waveformData=await Wo.create(this.waveformBuffer)}catch{throw new Error("Unable to parse waveform")}}get data(){if(this.waveformData===void 0)throw new Error("waveformData has not been initialized yet");return this.waveformData}async resampleWaveform(t){try{if(this.waveformResampler!==void 0)return Wo.create(await this.waveformResampler(this.data.toArrayBuffer(),t))}catch{}return this.data.resample({width:t})}async getScaledWaveform(t,i){const o=this.data,s=Math.floor(o.duration*t/i);return{waveform:await this.resampleWaveform(s),width:s}}async getPlots(t,i,o){const{waveform:s,width:l}=await this.getScaledWaveform(i,o),a=s.channel(0).min_array(),u=s.channel(0).max_array(),m=l<=t?1:Math.ceil(l/t),b=Array.from({length:m},(C,M)=>({start:M*t,width:M===m-1?l%t:t})).map(({start:C,width:M})=>({left:0,width:M,points:Array.from({length:M},(L,I)=>({min:a[C+I],max:u[C+I]}))}));for(let C=0;C<b.length-1;C++)b[C].points.push(b[C+1].points[0]);let T=0;for(let C=0;C<b.length;C++)b[C].left=T,T+=b[C].width;return b}}function Mr(e,t,i,o,s){const l=T=>T,a=T=>i.height-(T+128)*i.height/256-.5,u=t.getContext("2d");if(u===null)throw new Error("context2D is null");t.style.height=`${i.height}px`,t.style.width=`${i.width}px`,t.width=i.width*s,t.height=i.height*s,u.scale(s,s),u.fillStyle=o.background,u.fillRect(0,0,t.width,t.height),u.fillStyle=o.waves,u.lineWidth=0;const{points:m}=e,f=m.map((T,C)=>({x:l(C),y:a(T.max)})),b=[...m].reverse().map((T,C)=>({x:l(m.length-C-1),y:a(T.min)}));u.beginPath(),f.concat(b).forEach(T=>u.lineTo(T.x,T.y)),u.closePath(),u.fill()}const Rr=180,Pr=0,Si=(e,{rowHeight:t=Rr,gap:i=Pr,containerWidth:o})=>{const s=o+i,l=e.map(T=>({width:T.width,height:T.height,normalizedWidth:T.width*(t/T.height)})),a=[];let u=[],m=0,f=t,b=1;for(let T=0;T<l.length;T++){const C=l[T];u.push(C),m+=C.normalizedWidth+i;const M=u.length*i;if(b=(s-M)/(m-M),f=Math.ceil(t*b),m>=s||a.length===0&&l.length-1===T||u.some(L=>L.normalizedWidth*b<150)&&u.length>1){let L=0;for(let I=0;I<u.length;I++){let P=Math.ceil(u[I].normalizedWidth*b);L+=P+i,L>s&&(P-=L-s),a.push({height:f,width:P})}u=[],m=0}}for(let T=a.length;T<=l.length-1;T++){const C=a[a.length-1].height,M=l[T].height/C,L=Math.floor(l[T].width/M);a.push({height:C,width:L})}return a},Un=(e,t={})=>{const i=new IntersectionObserver(([s])=>{s.isIntersecting?t.onVisible!==void 0&&t.onVisible():t.onHide!==void 0&&t.onHide()},t);return i.observe(e),()=>{i.unobserve(e)}};class Ir extends Error{constructor(){super(...arguments);U(this,"name","MediaElementAlreadyUploadedException");U(this,"message","Media element already uploaded!")}}function Ji(e){return e.type===we.EMOJI}const Lr=A({name:"app-editor-layout-upload-drop-zone",components:{AppSvgSymbol:K}}),Or={class:"app-editor-layout-drop-zone"},Fr={class:"app-editor-layout-drop-zone__text"};function Dr(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",Or,[r(a,{symbol:"app-editor-layout-drop-zone-plus",width:54,height:54}),p("div",Fr,g(e.$t("appEditorLayoutUploadDropZone.text")),1)])}const Vr=$(Lr,[["render",Dr]]),Nr=A({name:"app-project-title-input",props:{value:{type:String,required:!0},placeholder:{type:String,default:""},isMobile:{type:Boolean,default:!1}},emits:{input:e=>!0,"set-width":null},data(){return{rawInputWidth:0,isFocused:!1}},computed:{inputWidth(){return this.rawInputWidth+(this.isFocused?6:0)}},watch:{isMobile(){this.expandInputWidth()},async inputWidth(){if(!this.isFocused){const e=this.$refs.input;await Promise.race([new Promise(t=>{e.addEventListener("transitionend",t,{once:!0})}),io(150)])}this.$emit("set-width",this.inputWidth)}},mounted(){this.expandInputWidth(),document.addEventListener("mousedown",this.checkClickOutsideTitleAndBlur,{capture:!0}),document.addEventListener("touchstart",this.checkClickOutsideTitleAndBlur,{capture:!0})},beforeUnmount(){document.removeEventListener("mousedown",this.checkClickOutsideTitleAndBlur,{capture:!0}),document.removeEventListener("touchstart",this.checkClickOutsideTitleAndBlur,{capture:!0})},methods:{expandInputWidth(){const e=this.$refs.input,t=this.$refs.buffer,i=e.value;t.textContent=i.trim()===""?this.placeholder:i;const o=t.offsetWidth+2;this.rawInputWidth=Math.max(1,o)},blurInput(){this.$refs.input.blur()},checkClickOutsideTitleAndBlur(e){const t=e.target;!this.$el.contains(t)&&this.$el!==t&&this.blurInput()}}}),Br={class:"app-project-title-input"},jr=["placeholder","value"];function zr(e,t,i,o,s,l){return d(),h("div",Br,[p("input",J({ref:"input",type:"text",class:"app-project-title-input__input",placeholder:e.placeholder,value:e.value,spellcheck:"false"},{...e.$attrs,onInput:a=>{e.expandInputWidth(),e.$emit("input",a.target.value)}},{onKeyup:t[0]||(t[0]=Ce(_(a=>{e.blurInput()},["prevent"]),["enter"])),onFocus:t[1]||(t[1]=a=>e.isFocused=!0),onBlur:t[2]||(t[2]=a=>e.isFocused=!1)}),null,16,jr),p("div",{ref:"buffer",class:"app-project-title-input__buffer"},g(e.value),513)])}const Hr=$(Nr,[["render",zr]]),_r=A({name:"app-project-save-status",components:{AppButton:oe,AppSvgSymbol:K},props:{isMobile:{type:Boolean,required:!0},status:{type:String,required:!0}}}),Ur={class:"app-project-save-status"},qr={key:0,class:"app-project-save-status__processing"},Wr={class:"app-project-save-status__processing-icon app-project-save-status__processing-icon--mobile"},Gr={class:"app-project-save-status__processing-icon app-project-save-status__processing-icon--desktop"},Xr={key:1,class:"app-project-save-status__error"},Yr={key:2,class:"app-project-save-status__success"},Kr={class:"app-project-save-status__success-icon"};function Zr(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppButton");return d(),h("div",Ur,[e.status==="in-progress"?(d(),h("div",qr,[e.isMobile?(d(),S(u,{key:0,variant:"icon",onClick:e.$attrs.onClick},{default:n(()=>[p("div",Wr,[r(a,{symbol:"saving-spinner-mobile",width:44,height:34})])]),_:1},8,["onClick"])):(d(),S(u,{key:1,variant:"icon","is-disabled":""},{default:n(()=>[p("div",Gr,[r(a,{symbol:"svg-project-saving",width:24,height:24})])]),_:1}))])):E("",!0),e.status==="error"?(d(),h("div",Xr,[r(u,{variant:"icon",onClick:e.$attrs.onClick},{default:n(()=>[r(a,{symbol:e.isMobile?"saving-error-mobile":"saving-error-desktop",width:e.isMobile?44:24,height:e.isMobile?34:24},null,8,["symbol","width","height"])]),_:1},8,["onClick"])])):E("",!0),e.status==="success"&&!e.isMobile?(d(),h("div",Yr,[r(u,{variant:"icon","is-disabled":""},{default:n(()=>[p("div",Kr,[r(a,{symbol:"svg-project-saved",width:24,height:24})])]),_:1})])):E("",!0)])}const Qr=$(_r,[["render",Zr]]),Jr=A({name:"app-header",emits:{"mousedown-on-free-space":null},data(){return{projectNameWidth:void 0}},methods:{checkIfMouseDownOnFreeSpace(e){const t=e.target;!(t instanceof HTMLButtonElement)&&t.closest("button")===null&&this.$emit("mousedown-on-free-space")},callCallbackOnlyAfterBlurOnActiveInputElement:Qt,setProjectNameWidth(e){this.projectNameWidth=e}}}),xr={class:"app-header__logo-and-name"},el={class:"app-header__logo"},tl={class:"app-header__button-back"},il={key:0,class:"app-header__saving-status-desktop"},ol={class:"app-header__undo-redo"},nl={class:"app-header__undo-button app-header__undo-button--desktop"},sl={class:"app-header__undo-button app-header__undo-button--mobile"},al={class:"app-header__redo-button app-header__redo-button--desktop"},rl={class:"app-header__redo-button app-header__redo-button--mobile"},ll={class:"app-header__upgrade-and-export"},dl={key:0,class:"app-header__upgrade-button"},ul={key:1,class:"app-header__saving-status-mobile"},pl={class:"app-header__export-button-desktop"},cl={class:"app-header__export-button-mobile"};function ml(e,t,i,o,s,l){return d(),h("div",{class:"app-header",onMousedown:t[0]||(t[0]=a=>e.callCallbackOnlyAfterBlurOnActiveInputElement(()=>e.checkIfMouseDownOnFreeSpace(a)))},[p("div",xr,[p("div",el,[w(e.$slots,"logo")]),p("div",tl,[w(e.$slots,"button-back")]),p("div",{class:"app-header__project-name",style:z({width:e.projectNameWidth!==void 0?`${e.projectNameWidth}px`:void 0})},[w(e.$slots,"project-name",{setWidth:e.setProjectNameWidth})],4),e.$slots["saving-status-desktop"]!==void 0?(d(),h("div",il,[w(e.$slots,"saving-status-desktop")])):E("",!0)]),p("div",ol,[p("div",nl,[w(e.$slots,"undo-button-desktop")]),p("div",sl,[w(e.$slots,"undo-button-mobile")]),p("div",al,[w(e.$slots,"redo-button-desktop")]),p("div",rl,[w(e.$slots,"redo-button-mobile")])]),p("div",ll,[e.$slots["upgrade-button"]!==void 0?(d(),h("div",dl,[w(e.$slots,"upgrade-button")])):E("",!0),e.$slots["saving-status-mobile"]!==void 0?(d(),h("div",ul,[w(e.$slots,"saving-status-mobile")])):E("",!0),p("div",pl,[w(e.$slots,"export-button-desktop")]),p("div",cl,[w(e.$slots,"export-button-mobile")])])],32)}const hl=$(Jr,[["render",ml]]),gl=A({name:"app-snap-renderer",props:{canvasSnapState:{type:Object,required:!0},playerLayoutWidth:{type:Number,required:!0},playerLayoutHeight:{type:Number,required:!0}},computed:{canvasSnapGuidesStyles(){return this.canvasSnapState.snapGuides.map(t=>t.isFinite?t:ba(this.playerLayoutWidth,this.playerLayoutHeight,t)).filter(t=>t!==null).map(t=>Go(t)).concat(...this.canvasSnapState.rotationGuides.map(t=>t.guides).flatMap(t=>t).map(t=>Go(t))).map(t=>{const o=t.angle%90===0&&[[0,0],[0,this.playerLayoutHeight],[this.playerLayoutWidth,0],[this.playerLayoutWidth,this.playerLayoutHeight]].some(([s,l])=>t.x===s&&t.y===l)?2:1;return{position:"absolute",transformOrigin:`${o/2}px ${o/2}px`,height:`${o}px`,width:`${t.length+o}px`,left:`-${o/2}px`,top:`-${o/2}px`,backgroundColor:"#feca28",transform:`translate(${t.x}px, ${t.y}px) rotate(${t.angle}deg)`,zIndex:"1001"}})}}}),vl={class:"app-snap-renderer"};function fl(e,t,i,o,s,l){return d(),h("div",vl,[(d(!0),h(N,null,q(e.canvasSnapGuidesStyles,(a,u)=>(d(),h("div",{key:u,style:z(a)},null,4))),128))])}const bl=$(gl,[["render",fl]]),yl=A({name:"app-player-timeline",props:{currentTime:{type:Number,required:!0},timelineLength:{type:Number,required:!0},isPlaying:{type:Boolean,required:!0}},emits:{"current-time-update":e=>!0,"cursor-start-move":null,"cursor-stop-move":null,"stop-play":null,"start-play":null},data(){return{originalCurrentTime:0,cursorOriginalPosition:0,isCursorMoving:!1,isVideoPlayingBeforeScroll:!1}},computed:{progressBarPercent(){return{width:`${this.currentTime/this.timelineLength*100}%`}}},methods:{async startDraggingFromNewPosition(e){const t=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,i=this.$refs.timeline,o=i.offsetWidth,s=t-i.getBoundingClientRect().left,l=this.timelineLength/o*s,a=Math.min(l,this.timelineLength);this.cursorOriginalPosition=t,this.originalCurrentTime=a;const u=this.isPlaying;this.$emit("stop-play"),await this.$nextTick(),this.$emit("current-time-update",a),u&&this.$emit("start-play")},startDragging(){this.isCursorMoving=!0,this.isVideoPlayingBeforeScroll=this.isPlaying,this.$emit("stop-play"),this.bindMouseEventListeners()},stopDragging(){this.isCursorMoving&&(this.isCursorMoving=!1,this.isVideoPlayingBeforeScroll&&this.$emit("start-play")),this.unbindMouseEventListeners()},bindMouseEventListeners(){document.addEventListener("touchmove",this.moveCursor),document.addEventListener("mousemove",this.moveCursor),document.addEventListener("touchend",this.stopDragging),document.addEventListener("mouseup",this.stopDragging)},unbindMouseEventListeners(){document.removeEventListener("touchmove",this.moveCursor),document.removeEventListener("mousemove",this.moveCursor),document.removeEventListener("touchend",this.stopDragging),document.removeEventListener("mouseup",this.stopDragging)},moveCursor(e){this.isCursorMoving||this.startDragging();const i=(e instanceof MouseEvent?e.pageX:e.touches[0].pageX)-this.cursorOriginalPosition,s=this.$refs.timeline.offsetWidth,l=this.timelineLength/s*i,a=Math.min(this.originalCurrentTime+l,this.timelineLength);this.$emit("current-time-update",a)}}});function El(e,t,i,o,s,l){return d(),h("div",{ref:"timeline",class:F(["timeline-bar",{active:e.isCursorMoving}]),onMousedown:t[0]||(t[0]=a=>{e.startDraggingFromNewPosition(a),e.bindMouseEventListeners()}),onTouchstart:t[1]||(t[1]=_(a=>{e.startDraggingFromNewPosition(a),e.bindMouseEventListeners()},["prevent"]))},[p("div",{class:"bar",style:z([{"pointer-events":"none"},e.progressBarPercent])},[p("div",{style:{"pointer-events":"none"},class:F(["handle",{active:e.isCursorMoving}])},null,2)],4)],34)}const Sl=$(yl,[["render",El]]),kl=A({name:"app-player-timings",props:{currentTime:{type:Number,required:!0},totalTime:{type:Number,required:!0}},computed:{formattedCurrentTime(){return Ue(this.currentTime,{referenceTime:this.totalTime})},formattedTotalTime(){return Ue(this.totalTime)}}}),Cl={class:"timer"},Tl={class:"total"};function $l(e,t,i,o,s,l){return d(),h("div",Cl,[p("span",{class:F(["current",{"current--inactive":e.totalTime===0}])},g(e.formattedCurrentTime),3),t[0]||(t[0]=p("span",{class:"divider"},null,-1)),p("span",Tl,g(e.formattedTotalTime),1)])}const wl=$(kl,[["render",$l]]),Al=A({name:"app-drag-resize-rotate-stick",components:{AppSvgSymbol:K},props:{stick:{type:String,required:!0},isCropBox:{type:Boolean,required:!0}},computed:{shape(){switch(this.stick){case W.ROTATE:return"rotate";case W.TOP_LEFT:case W.TOP_RIGHT:case W.BOTTOM_LEFT:case W.BOTTOM_RIGHT:return this.isCropBox?"corner":"circle";case W.MIDDLE_LEFT:case W.MIDDLE_RIGHT:return"middle-vertical";case W.TOP_MIDDLE:case W.BOTTOM_MIDDLE:return"middle-horizontal";default:throw new Error(`Unknown stick: ${this.stick}`)}}}}),Ml={key:2,class:"app-drag-resize-rotate-stick__shape-circle"},Rl={key:3,class:"app-drag-resize-rotate-stick__shape-middle-vertical"},Pl={key:4,class:"app-drag-resize-rotate-stick__shape-middle-horizontal"};function Il(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",{class:F({"app-drag-resize-rotate-stick":!0,[`app-drag-resize-rotate-stick--${e.stick}`]:!0,...e.shape==="corner"&&e.isCropBox?{[`app-drag-resize-rotate-stick--shape-${e.stick}`]:!0}:{}})},[e.shape==="rotate"?(d(),S(a,{key:0,symbol:"drag-resize-rotate-stick-rotate",width:16,height:16})):E("",!0),e.shape==="corner"?(d(),S(a,{key:1,class:"app-drag-resize-rotate-stick__shape-corner",symbol:"drag-resize-rotate-corner-shape",width:22,height:22})):E("",!0),e.shape==="circle"?(d(),h("div",Ml,"   ")):E("",!0),e.shape==="middle-vertical"?(d(),h("div",Rl,"   ")):E("",!0),e.shape==="middle-horizontal"?(d(),h("div",Pl,"   ")):E("",!0)],2)}const qn=$(Al,[["render",Il],["__scopeId","data-v-ffd30e07"]]);class ye{constructor(t,i){U(this,"x");U(this,"y");if(typeof i>"u"){if(!(t instanceof ye))throw new TypeError("Single parameter should be a vector");this.x=t.x,this.y=t.y}else{if(typeof t!="number")throw new TypeError("Must provide numeric parameters");this.x=t,this.y=i}}static zero(){return new ye(0,0)}add(t){return new ye(this.x+t.x,this.y+t.y)}sub(t){return new ye(this.x-t.x,this.y-t.y)}neg(){return new ye(-this.x,-this.y)}mul(t){return typeof t=="number"?new ye(this.x*t,this.y*t):this.x*t.x+this.y*t.y}norm(){return Math.sqrt(this.x*this.x+this.y*this.y)}unit(){const t=this.norm();return new ye(this.x/t,this.y/t)}rotate(t){return new ye(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t))}angle(){return Math.atan2(this.y,this.x)}static _equals(t,i,o=Number.EPSILON){return Math.abs(t-i)<o}equals(t,i=Number.EPSILON){return ye._equals(this.x,t.x,i)&&ye._equals(this.y,t.y,i)}clone(){return new ye(this)}static rad(t){return t*Math.PI/180}static deg(t){return t*180/Math.PI}}const Ll={[W.BOTTOM_MIDDLE]:"ns-resize",[W.BOTTOM_LEFT]:"nesw-resize",[W.MIDDLE_LEFT]:"ew-resize",[W.TOP_LEFT]:"nwse-resize",[W.TOP_MIDDLE]:"ns-resize",[W.TOP_RIGHT]:"nesw-resize",[W.MIDDLE_RIGHT]:"ew-resize",[W.BOTTOM_RIGHT]:"nwse-resize"},Ol={[W.BOTTOM_MIDDLE]:0,[W.BOTTOM_LEFT]:45,[W.MIDDLE_LEFT]:90,[W.TOP_LEFT]:135,[W.TOP_MIDDLE]:180,[W.TOP_RIGHT]:225,[W.MIDDLE_RIGHT]:270,[W.BOTTOM_RIGHT]:315},Fl=`
    <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" viewBox="0 0 100 100">
        <svg viewBox="0 0 18 18" height="100%" width="100%">
            <polygon fill="#FFFFFF" points="11.7,9.1 7.7,13.2 10.5,16 2,16 2,7.5 4.9,10.3 8.9,6.3 10.3,4.9 7.5,2 16,2 16,10.5 13.2,7.7 " />
            <polygon fill="#000000" points="10.7,8.7 6.3,13.2 8.1,15 3,15 3,9.9 4.9,11.8 9.3,7.3 11.8,4.9 9.9,3 15,3 15,8.1 13.2,6.3 " />
        </svg>
    </svg>
  `;function Dl(e,t){return V(!0,"Function can be executed only on client side"),new Promise((i,o)=>{const s={},l=document.createElement("canvas"),a=l.getContext("2d");if(a===null){o(new Error("Unable to get context"));return}const u=f=>f*Math.PI/180,m=new Image;m.onload=function(){l.width=m.width,l.height=m.height;for(const f of t)a.save(),a.clearRect(0,0,l.width,l.height),a.translate(m.width/2,m.height/2),a.rotate(u(f)),a.drawImage(m,-m.width/2,-m.height/2),a.restore(),s[f]=l.toDataURL("image/png");i(s)},m.onerror=()=>{o(new Error("Unable to load image"))},m.src=e})}const St=class St{static init(){return new Promise((t,i)=>{if(St.angleImageCalculated!==void 0){t();return}const o=[...new Array(180)].map((u,m)=>m),a="data:image/svg+xml;base64,"+window.btoa(Fl);Dl(a,o).then(u=>{St.angleImageCalculated=u,t()}).catch(u=>{i(u)})})}static getCursorBase64(t){const i=St.angleImageCalculated;return V(i!==void 0,"Run init first"),i[Math.round(360+t-45)%180]}static getCursorStyle(t,i){const o=t!==W.ROTATE?St.getCursorBase64(Math.round(Ol[t]+i)):0;return t===W.ROTATE?"pointer":`url(${o}) 9 9 , ${Ll[t]}`}};U(St,"angleImageCalculated");let Xt=St;const Vl=20,Nl=A({name:"app-drag-resize-rotate",components:{AppDragResizeRotateStick:qn},props:{x:{type:Number,required:!0,validator(e){return typeof e=="number"}},y:{type:Number,required:!0,validator(e){return typeof e=="number"}},w:{type:Number,required:!0,validator:e=>typeof e=="number"&&e>=0},h:{type:Number,required:!0,validator:e=>typeof e=="number"&&e>=0},angle:{type:Number,default:0,validator(e){return typeof e=="number"}},isSelected:{type:Boolean,default:!1},isSelectable:{type:Boolean,default:!0},isDraggable:{type:Boolean,default:!0},ignoreDragEvents:{type:Boolean,default:!0},isResizable:{type:Boolean,default:!0},isResizableBySide:{type:Boolean,default:!1},isRotatable:{type:Boolean,default:!0},isFixedAspectRatio:{type:Boolean,default:!1},isCropBox:{type:Boolean,default:!1},zIndex:{type:Number,default:void 0},dragResizeRotateEventTarget:{type:Object,default:void 0},cropEmitter:{type:Object,default:void 0}},emits:{"ui-interaction-start":e=>!0,"media-element-select":null,"toggle-snap-line-x-left":e=>!0,"toggle-snap-line-x-center":e=>!0,"toggle-snap-line-x-right":e=>!0,"toggle-snap-line-y-left":e=>!0,"toggle-snap-line-y-center":e=>!0,"toggle-snap-line-y-right":e=>!0,dragstart:e=>!0,drag:e=>!0,dragstop:(e,t)=>!0,change:e=>!0,rotatestart:e=>!0,rotate:e=>!0,rotatestop:(e,t)=>!0,resizestart:e=>!0,resize:e=>!0,resizestop:(e,t)=>!0},data(){return{cx:this.x,cy:this.y,width:this.w,height:this.h,isBodyDragging:!1,isBodyDragged:!1,isStickDragging:!1,isResized:!1,isRotated:!1,stickStartPos:{mouseX:0,mouseY:0,x:0,y:0,w:0,h:0,cx:0,cy:0,width:0,height:0,angle:0},currentStick:void 0,onlyStickToShow:void 0,dragStartEmitted:!1,startRect:{x:0,y:0,w:0,h:0,angle:0,stick:void 0},resizeStartEmitted:!1,rotateStartEmitted:!1,cursorElement:void 0,cursorStyles:{},setSticksCursorsDebounced:()=>{},hideAllSticks:!1}},computed:{sticks(){if(this.hideAllSticks)return[];if(this.onlyStickToShow!==void 0)return[this.onlyStickToShow];const e=[];return this.isSelected&&(this.isResizable&&(e.push(W.TOP_LEFT),e.push(W.TOP_RIGHT),e.push(W.BOTTOM_RIGHT),e.push(W.BOTTOM_LEFT)),this.isResizableBySide&&(this.w>30&&(e.push(W.TOP_MIDDLE),e.push(W.BOTTOM_MIDDLE)),this.h>30&&(e.push(W.MIDDLE_LEFT),e.push(W.MIDDLE_RIGHT))),this.isRotatable&&e.push(W.ROTATE)),e},styleOnlyRotate(){let e;return this.angle>179.8&&this.angle<180.2?e="rotateX(180deg) scaleX(-1)":e=`rotate(${this.angle}deg)`,{transform:e,width:this.width+"px",height:this.height+"px"}},styleOnlyPosition(){const e=this.cx-this.width/2;return{position:"absolute",top:`${this.cy-this.height/2}px`,left:`${e}px`,width:"0",height:"0",zIndex:this.zIndex!==void 0?String(this.zIndex):void 0,...this.ignoreDragEvents?{pointerEvents:"none"}:{},...this.isBodyDragging?{cursor:"move"}:{}}},rect(){return{x:this.cx,y:this.cy,w:this.width,h:this.height,angle:this.angle,stick:this.currentStick}}},watch:{x(){this.cx=this.x},y(){this.cy=this.y},w(){this.width=this.w},h(){this.height=this.h},angle(){this.setSticksCursorsDebounced()}},async mounted(){document.documentElement.addEventListener("mousemove",this.move),document.documentElement.addEventListener("mouseup",this.up),document.documentElement.addEventListener("mouseleave",this.up),document.documentElement.addEventListener("touchmove",this.move,!0),document.documentElement.addEventListener("touchend",this.up,!0),document.documentElement.addEventListener("touchcancel",this.up,!0),document.documentElement.addEventListener("touchstart",this.up,!0),this.dragResizeRotateEventTarget?.on("mousedown",this.customMousedownHandler),this.cursorElement=document.createElement("div");const e=this.cursorElement;document.body.append(e),e.style.display="none",e.style.width="500px",e.style.height="500px",e.style.transform="translate(-50%, -50%)",e.style.position="fixed",e.style.backgroundColor="rgba(0, 0, 0, 0.001)",e.style.zIndex="1005001",await Xt.init(),this.setSticksCursors(),this.setSticksCursorsDebounced=_t(this.setSticksCursors,10)},beforeUnmount(){document.documentElement.removeEventListener("mousemove",this.move),document.documentElement.removeEventListener("mouseup",this.up),document.documentElement.removeEventListener("mouseleave",this.up),document.documentElement.removeEventListener("touchmove",this.move,!0),document.documentElement.removeEventListener("touchend",this.up,!0),document.documentElement.removeEventListener("touchcancel",this.up,!0),document.documentElement.removeEventListener("touchstart",this.up,!0),this.dragResizeRotateEventTarget?.off("mousedown",this.customMousedownHandler),this.cursorElement.remove()},methods:{setSticksCursors(){const e=[W.TOP_RIGHT,W.TOP_LEFT,W.BOTTOM_LEFT,W.BOTTOM_RIGHT,W.MIDDLE_LEFT,W.MIDDLE_RIGHT,W.TOP_MIDDLE,W.BOTTOM_MIDDLE];for(const t of e)this.cursorStyles[t]=Xt.getCursorStyle(t,this.angle)},async customMousedownHandler(e){this.$emit("media-element-select"),await this.$nextTick(),V(e.data instanceof MouseEvent||window.TouchEvent!==void 0&&e.data instanceof TouchEvent,"event.data is not mouse or touch event"),this.bodyMouseDown(e.data)},move(e){!this.isStickDragging&&!this.isBodyDragging||(this.cursorElement.style.display="block",this.cursorElement.style.left=`${e.clientX}px`,this.cursorElement.style.top=`${e.clientY}px`,e.stopPropagation(),this.isStickDragging&&this.stickMove(e),this.isBodyDragging&&this.bodyMove(e))},up(){this.cursorElement.style.display="none",this.cursorElement.style.cursor="auto",this.hideAllSticks=!1,this.isStickDragging&&this.stickUp(),this.isBodyDragging&&this.bodyUp()},bodyMouseDown(e){if(this.isSelectable)e.stopPropagation(),e.preventDefault();else return;const t=e.target??e.srcElement;if(e instanceof MouseEvent&&e.button!==0||!(t instanceof Element)||!this.isDraggable)return;const i=this.$refs.targetArea;if(document.elementsFromPoint!==void 0){const s=(window.TouchEvent??void 0)!==void 0&&e instanceof window.TouchEvent,l=s?e.touches[0]?.clientX:e.clientX,a=s?e.touches[0]?.clientY:e.clientY;if(!document.elementsFromPoint(l,a).includes(i))return}this.isBodyDragging=!0,this.isBodyDragged=!1,this.dragStartEmitted=!1,this.startRect={...this.rect},this.stickStartPos.mouseX=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,this.stickStartPos.mouseY=e instanceof MouseEvent?e.pageY:e.touches[0].pageY,this.stickStartPos.cx=this.cx,this.stickStartPos.cy=this.cy,this.cursorElement.style.cursor="move"},bodyMove(e){const t=this.stickStartPos,i={mouseX:e instanceof MouseEvent?e.pageX:e.touches[0].pageX,mouseY:e instanceof MouseEvent?e.pageY:e.touches[0].pageY},o={x:i.mouseX-t.mouseX,y:i.mouseY-t.mouseY};Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))>1&&(this.hideAllSticks=!0);const l={x:t.cx+o.x,y:t.cy+o.y,w:this.w,h:this.h};this.dragStartEmitted||(this.$emit("dragstart",this.startRect),this.dragStartEmitted=!0),this.isBodyDragged=!0,this.$emit("drag",l)},bodyUp(){this.isBodyDragging=!1,this.isBodyDragged&&(this.$emit("dragstop",this.rect,this.startRect),this.$emit("change",this.rect)),this.stickStartPos={...this.stickStartPos,mouseX:0,mouseY:0,x:0,y:0,w:0,h:0}},stickDown(e,t){!this.isResizable||!this.isSelected||(this.resizeStartEmitted=!1,this.rotateStartEmitted=!1,this.startRect={...this.rect},this.isStickDragging=!0,this.isResized=!1,this.isRotated=!1,this.stickStartPos.mouseX=t instanceof MouseEvent?t.pageX:t.touches[0].pageX,this.stickStartPos.mouseY=t instanceof MouseEvent?t.pageY:t.touches[0].pageY,this.stickStartPos.cx=this.cx,this.stickStartPos.cy=this.cy,this.stickStartPos.width=this.width,this.stickStartPos.height=this.height,this.stickStartPos.angle=this.angle,this.currentStick=e,this.onlyStickToShow=e,this.currentStick!==void 0&&(this.cursorElement.style.cursor=Xt.getCursorStyle(this.currentStick,this.angle)),this.cropEmitter?.fire("stick-down"))},stickMove(e){const t=this.stickStartPos,i=new ye((e instanceof MouseEvent?e.pageX:e.touches[0].pageX)-t.mouseX,(e instanceof MouseEvent?e.pageY:e.touches[0].pageY)-t.mouseY);switch(this.currentStick){case void 0:return;case W.ROTATE:{let o=new ye(0,-this.height/2-Vl);const s=ye.rad(t.angle);o=o.rotate(s);const l=o.sub(i);this.rotateStartEmitted||(this.$emit("rotatestart",this.startRect),this.rotateStartEmitted=!0);const a={...this.rect,angle:ye.deg(l.angle())+90};this.isRotated=!0,this.$emit("rotate",a);break}default:{const[o,s]=this.currentStick.split("-"),l={left:-1,middle:0,right:1}[s]??0,a={top:-1,middle:0,bottom:1}[o]??0,u=ye.rad(t.angle);let m;if(this.isFixedAspectRatio){let T=new ye(l*t.width/2,a*t.height/2);T=T.rotate(u).unit(),m=T.mul(T.mul(i))}else m=i;let f=m.rotate(-u);f=m.rotate(-u);const b={...this.rect,x:t.cx+m.x/2,y:t.cy+m.y/2,w:t.width+l*f.x,h:t.height+a*f.y};this.resizeStartEmitted||(this.$emit("resizestart",b),this.resizeStartEmitted=!0),this.isResized=!0,this.$emit("resize",b)}}},stickUp(){this.onlyStickToShow=void 0,this.isStickDragging=!1,this.stickStartPos={...this.stickStartPos,mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.isResized&&(this.$emit("resizestop",this.rect,this.startRect),this.$emit("change",this.rect)),this.isRotated&&(this.$emit("rotatestop",this.rect,this.startRect),this.$emit("change",this.rect)),this.cropEmitter?.fire("stick-up")}}}),Bl={key:0,class:"drag-resize-rotate--crop-box-dashed"};function jl(e,t,i,o,s,l){const a=qn;return d(),h("div",J({style:e.styleOnlyPosition},e.$attrs,{onMousedown:t[0]||(t[0]=_(u=>{e.$emit("ui-interaction-start",u),e.$nextTick(()=>e.bodyMouseDown(u))},["stop","prevent"])),onTouchstart:t[1]||(t[1]=_(u=>{e.$emit("ui-interaction-start",u),e.$nextTick(()=>e.bodyMouseDown(u))},["stop","prevent"]))}),[p("div",{ref:"targetArea",class:F(["drag-resize-rotate",{"drag-resize-rotate--crop-box":e.isCropBox,"drag-resize-rotate--active":e.isSelected,"drag-resize-rotate--inactive":!e.isSelected,"drag-resize-rotate--dragging":e.isBodyDragging,"drag-resize-rotate--not-resizable":!e.isResizable}]),style:z(e.styleOnlyRotate)},[e.isCropBox?(d(),h("div",Bl,t[2]||(t[2]=[p("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none"},[p("rect",{x:"0",y:"0",width:"100",height:"100",fill:"none",stroke:"#feca28","stroke-width":"2","stroke-dasharray":"4 4","vector-effect":"non-scaling-stroke"})],-1)]))):E("",!0),(d(!0),h(N,null,q(e.sticks,u=>(d(),S(a,{key:u,stick:u,"is-crop-box":e.isCropBox,style:z({pointerEvents:"auto",cursor:e.cursorStyles[u]}),onTouchstart:_(m=>e.stickDown(u,m),["stop","prevent"]),onMousedown:_(m=>e.stickDown(u,m),["stop","prevent"])},null,8,["stick","is-crop-box","style","onTouchstart","onMousedown"]))),128))],6),p("div",{ref:"mediaElementContainer",class:"drag-resize-rotate__media-element-container",style:z(e.styleOnlyRotate)},[w(e.$slots,"default")],4)],16)}const zl=$(Nl,[["render",jl]]);var fi=(e=>(e.DRAG="media-element-drag",e.RESIZE="media-element-resize",e.ROTATE="media-element-rotate",e))(fi||{});const Hl=A({name:"app-player-element-drag-resize-rotate",props:{variant:{type:String,default:()=>"default"},isRotatable:{type:Boolean,required:!0},isSelected:{type:Boolean,required:!0},topLeftX:{type:Number,required:!0},topLeftY:{type:Number,required:!0},bottomRightX:{type:Number,required:!0},bottomRightY:{type:Number,required:!0},playerSizeWidth:{type:Number,required:!0},playerSizeHeight:{type:Number,required:!0},angle:{type:Number,default:0},padding:{type:Number,default:0},zIndex:{type:Number,default:void 0},dragResizeRotateEventTarget:{type:Object,default:void 0},contentStartX:{type:Number,default:0},contentStartY:{type:Number,default:0},contentFinishX:{type:Number,default:100},contentFinishY:{type:Number,default:100},contentRotateAngle:{type:Number,default:0},mediaWidth:{type:Number,default:void 0},mediaHeight:{type:Number,default:void 0},cropStrategy:{type:String,default:()=>Qe.FREEFORM},isFlipXApplied:{type:Boolean,default:!1},isFlipYApplied:{type:Boolean,default:!1},cropEmitter:{type:Object,default:void 0}},emits:{"media-element-drag-start":null,"media-element-drag":e=>!0,"media-element-drag-stop":null,"media-element-resize-start":null,"media-element-resize":e=>!0,"media-element-resize-stop":null,"media-element-rotate-start":null,"media-element-rotate":e=>!0,"media-element-rotate-stop":null,"media-element-select":null,"toggle-snap-line-x-left":e=>!0,"toggle-snap-line-x-center":e=>!0,"toggle-snap-line-x-right":e=>!0,"toggle-snap-line-y-left":e=>!0,"toggle-snap-line-y-center":e=>!0,"toggle-snap-line-y-right":e=>!0,"ui-interaction-start":e=>!0,"open-crop-tab":null},data(){return{}},computed:{contentRotateAngleFlipped(){return ya(this.contentRotateAngle,this.isFlipXApplied,this.isFlipYApplied)},canResizeBySide(){switch(this.variant){case"smart-transform":return!0;case"crop-preview":return!1;case"crop-box":return this.cropStrategy===Qe.FREEFORM;default:return!1}},viewAngle(){switch(this.variant){case"crop-preview":return-this.contentRotateAngleFlipped+this.angle;default:return this.angle}},noMedia(){if(this.mediaHeight===void 0!==this.mediaWidth===void 0)throw new Error("Xor media happened");return this.mediaWidth===void 0&&this.mediaHeight===void 0},canvasRect(){return Ea(0,0,this.playerSizeWidth>0?this.playerSizeWidth:1,this.playerSizeHeight>0?this.playerSizeHeight:1)},mediaPolygonInCanvas(){if(!this.noMedia)return Sa(this.contentRectInCanvas,this.angle,{startX:this.contentStartX,startY:this.contentStartY,finishX:this.contentFinishX,finishY:this.contentFinishY},this.contentRotateAngle,this.mediaWidth,this.mediaHeight,this.isFlipXApplied,this.isFlipYApplied)},mediaRectangleInCanvas(){if(!this.noMedia)return Xo(this.mediaPolygonInCanvas.rotate(Yo(this.contentRotateAngleFlipped-this.angle),this.mediaPolygonInCanvas.centroid))},contentRectInCanvas(){return ka(this.topLeftX,this.topLeftY,this.bottomRightX,this.bottomRightY,this.canvasRect)},viewRect(){if(this.noMedia)return this.contentRectInCanvas;switch(this.variant){case"crop-box":case"smart-transform":return this.contentRectInCanvas;case"crop-preview":case"default":default:return this.mediaRectangleInCanvas}},mediaElementStyles(){if(this.variant==="default"||this.noMedia)return{};const e={overflow:"hidden",width:`${this.mediaRectangleInCanvas.w}px`,height:`${this.mediaRectangleInCanvas.h}px`};switch(this.variant){case"smart-transform":case"crop-box":{const t=Xo(this.mediaPolygonInCanvas.rotate(Yo(this.contentRotateAngleFlipped-this.angle),this.contentRectInCanvas.center)),i=t.p.x-this.contentRectInCanvas.p.x,o=t.p.y-this.contentRectInCanvas.p.y,s=this.contentRectInCanvas.w/2-i,l=this.contentRectInCanvas.h/2-o;return{...e,transformOrigin:`${s}px ${l}px`,transform:`
              translate3d(${i}px, ${o}px, 0)
              rotate(${-this.contentRotateAngleFlipped}deg)
            `}}default:return e}},zIndexCompound(){return this.variant==="crop-box"?100501:this.variant==="crop-preview"?100500:this.zIndex}},methods:{onStopRect(e){switch(e.variant=this.variant,e.stick){case W.ROTATE:this.$emit(fi.ROTATE,e);break;case W.TOP_MIDDLE:case W.BOTTOM_MIDDLE:case W.MIDDLE_RIGHT:case W.MIDDLE_LEFT:case W.TOP_LEFT:case W.TOP_RIGHT:case W.BOTTOM_LEFT:case W.BOTTOM_RIGHT:this.$emit(fi.RESIZE,e);break;default:this.$emit(fi.DRAG,e)}},doubleClick(){this.variant==="smart-transform"&&this.$emit("open-crop-tab")}}});function _l(e,t,i,o,s,l){const a=zl;return d(),S(a,J({ref:"drr",x:e.viewRect.center.x,y:e.viewRect.center.y,w:e.viewRect.w,h:e.viewRect.h,angle:e.viewAngle,"is-draggable":e.isSelected&&e.variant!=="crop-box","is-resizable":e.isSelected,"is-resizable-by-side":e.isSelected&&e.canResizeBySide,"is-rotatable":e.isSelected&&e.isRotatable&&e.variant!=="crop-box","ignore-drag-events":e.isSelected&&e.variant==="crop-box","is-selected":e.isSelected,"is-selectable":e.variant!=="crop-box","is-fixed-aspect-ratio":!0,"is-crop-box":e.variant==="crop-box","z-index":e.zIndexCompound,"drag-resize-rotate-event-target":e.dragResizeRotateEventTarget,"crop-emitter":e.cropEmitter},e.$attrs,{onDragstart:t[0]||(t[0]=u=>e.$emit("media-element-drag-start")),onDrag:e.onStopRect,onDragstop:t[1]||(t[1]=u=>e.$emit("media-element-drag-stop")),onResizestart:t[2]||(t[2]=u=>e.$emit("media-element-resize-start")),onResize:e.onStopRect,onResizestop:t[3]||(t[3]=u=>e.$emit("media-element-resize-stop")),onRotatestart:t[4]||(t[4]=u=>e.$emit("media-element-rotate-start")),onRotate:e.onStopRect,onRotatestop:t[5]||(t[5]=u=>{e.$emit("media-element-rotate-stop")}),onMediaElementSelect:t[6]||(t[6]=u=>e.variant!=="crop-box"&&e.$emit("media-element-select")),onUiInteractionStart:t[7]||(t[7]=u=>(e.variant==="default"||e.variant==="smart-transform")&&e.$emit("ui-interaction-start",u)),onDblclick:e.doubleClick}),{default:n(()=>[p("div",{ref:"cw",style:z({padding:`${e.padding}px`,willChange:"transform",...e.mediaElementStyles}),class:"drag-resize-rotate__content-wrapper"},[w(e.$slots,"default")],4)]),_:3},16,["x","y","w","h","angle","is-draggable","is-resizable","is-resizable-by-side","is-rotatable","ignore-drag-events","is-selected","is-selectable","is-crop-box","z-index","drag-resize-rotate-event-target","crop-emitter","onDrag","onResize","onRotate","onDblclick"])}const xt=$(Hl,[["render",_l]]),Ul=A({name:"app-player-media-element-video",props:{trackElementId:{type:String,required:!0},source:{type:String,required:!0},convertedSource:{type:String,default:void 0},convertedSourceType:{type:String,default:void 0},mimeType:{type:String,default:null},previewImage:{type:String,required:!0},positionStartX:{type:Number,required:!0},positionStartY:{type:Number,required:!0},positionFinishX:{type:Number,required:!0},positionFinishY:{type:Number,required:!0},playbackStartTime:{type:Number,required:!0},playbackLength:{type:Number,required:!0},trimFromStartTime:{type:Number,required:!0},currentTime:{type:Number,default:0},isPlaying:{type:Boolean,default:!1},isSelected:{type:Boolean,required:!0},playerSizeWidth:{type:Number,required:!0},playerSizeHeight:{type:Number,required:!0},isFlipXApplied:{type:Boolean,default:!1},isFlipYApplied:{type:Boolean,default:!1},adjustOpacity:{type:Number,default:0},adjustHue:{type:Number,default:0},adjustSaturation:{type:Number,default:0},adjustBrightness:{type:Number,default:0},adjustContrast:{type:Number,default:0},adjustBlur:{type:Number,default:0},rotateAngle:{type:Number,default:0},volume:{type:Number,required:!0},basicSpeed:{type:Number,required:!0},isForceActive:{type:Boolean,default:!1},dragResizeRotateEventTarget:{type:Object,default:void 0},baseAbstractWidthForScaleBlur:{type:Number,default:0},isShouldLoop:{type:Boolean,required:!0},loopCycleLength:{type:Number,required:!0},isNoiseReduced:{type:Boolean,required:!0},rnnoiseAdapter:{type:Object,required:!0},contentStartX:{type:Number,required:!0},contentStartY:{type:Number,required:!0},contentFinishX:{type:Number,required:!0},contentFinishY:{type:Number,required:!0},contentRotateAngle:{type:Number,required:!0},mediaWidth:{type:Number,required:!0},mediaHeight:{type:Number,required:!0},variant:{type:String,required:!0},cropStrategy:{type:String,default:Qe.FREEFORM},isCropMaster:{type:Boolean,required:!0},cropEmitter:{type:Object,required:!0}},emits:{"media-element-select":null,"media-element-drag-start":null,"media-element-drag":e=>!0,"media-element-drag-stop":null,"media-element-resize-start":null,"media-element-resize":e=>!0,"media-element-resize-stop":null,"media-element-rotate-start":null,"media-element-rotate":e=>!0,"media-element-rotate-stop":null,"toggle-snap-line-x-left":e=>!0,"toggle-snap-line-x-center":e=>!0,"toggle-snap-line-x-right":e=>!0,"toggle-snap-line-y-left":e=>!0,"toggle-snap-line-y-center":e=>!0,"toggle-snap-line-y-right":e=>!0,"ui-interaction-start":null,"media-element-mounted":null,"media-element-unmounted":null,"open-crop-tab":null},data:()=>({playPromise:void 0,isVideoLoadedData:!1,isWebAudioApiSupported:!1,audioContext:void 0,audioSourceNode:void 0,audioContextGainNode:void 0,audioRNNoiseNode:void 0,isWaitingToPlay:!1,isWaitingToStop:!1}),computed:{isActive(){if(this.isForceActive)return!0;const e=this.playbackStartTime+this.playbackLength;return this.currentTime>=this.playbackStartTime&&this.currentTime<=e},currentTimeInMediaElement(){return this.isShouldLoop?(this.currentTime-this.playbackStartTime+this.trimFromStartTime)%(this.loopCycleLength/this.basicSpeed)*this.basicSpeed:(this.currentTime-this.playbackStartTime+this.trimFromStartTime)*this.basicSpeed},mediaElementStyles(){return{objectFit:"cover",filter:this.filterStyle,opacity:String(this.opacityStyle),width:"100%",height:"100%",transform:`scale3d(${this.isFlipXApplied?-1:1}, ${this.isFlipYApplied?-1:1}, 1)`}},canvasElementStyles(){return{position:"absolute",left:"0",top:"0",width:"100%",height:"100%"}},filterStyle(){const e=(100+this.adjustBrightness)*.01,t=(100+this.adjustContrast)*.01,i=(100+this.adjustSaturation)*.01,o=this.adjustHue,s=this.playerSizeWidth*(this.positionFinishX-this.positionStartX)/100,l=this.playerSizeHeight*(this.positionFinishY-this.positionStartY)/100,a=this.adjustBlur*.2/this.baseAbstractWidthForScaleBlur*Math.sqrt(s**2+l**2);return`brightness(${e}) contrast(${t}) saturate(${i}) hue-rotate(${o}deg) blur(${a}px)`},opacityStyle(){return this.variant==="crop-preview"?.5:this.adjustOpacity*.01},volumeInMediaElement(){return this.isCropMaster?this.volume/100:0},cropEmitterEventName(){return`crop-video-balance:${this.trackElementId}`}},watch:{isActive(e){e&&this.isPlaying?this.play():this.stop(),e||this.throttledSeek(this.trimFromStartTime*this.basicSpeed)},isPlaying(e){e&&this.isActive?this.play():this.stop()},volumeInMediaElement(e){this.setVolume(e)},currentTime(){this.isActive&&!this.isPlaying&&!this.isForceActive&&this.seek(this.currentTimeInMediaElement)},playbackStartTime(){this.isActive&&!this.isPlaying&&!this.isForceActive&&this.seek(this.currentTimeInMediaElement)},isForceActive(e){e&&this.throttledSeek(this.trimFromStartTime*this.basicSpeed)},trimFromStartTime(){this.throttledSeek(this.trimFromStartTime*this.basicSpeed)},async basicSpeed(){this.isPlaying&&(await this.stop(),this.play())},isNoiseReduced(e){this.audioRNNoiseNode!==void 0&&this.audioRNNoiseNode.toggle(e)}},mounted(){const{engine:e,browser:t}=new jt(window.navigator.userAgent).getResult();this.isWebAudioApiSupported=!(/^webkit$/i.test(e.name??"unknown")||/^safari$/i.test(t.name??"unknown")),this.isWebAudioApiSupported&&(this.audioContext=new AudioContext({sampleRate:48e3}),this.audioContextGainNode=this.audioContext.createGain());const i=this.$refs.player;i.addEventListener("loadeddata",this.prepareVideoElement),i.load(),this.setVolume(this.volumeInMediaElement),this.$emit("media-element-mounted",i),this.isCropMaster?this.loadRNNoise():this.cropEmitter.on(this.cropEmitterEventName,this.balanceCropTime)},beforeUnmount(){this.audioRNNoiseNode!==void 0&&this.audioRNNoiseNode.disconnect(),this.audioContextGainNode!==void 0&&this.audioContextGainNode.disconnect(),this.audioSourceNode!==void 0&&this.audioSourceNode.disconnect(),this.audioContext!==void 0&&this.audioContext.close(),this.cancelThrottledSeek(),this.isCropMaster||this.cropEmitter.off(this.cropEmitterEventName),this.$refs.player.removeEventListener("loadeddata",this.prepareVideoElement),this.$emit("media-element-unmounted")},methods:{async play(){if(new jt().getOS().name==="iOS"&&!this.isCropMaster||this.isWaitingToPlay)return;this.isWaitingToPlay=!0,await this.playPromise;const i=this.$refs.player;if(i.playbackRate=this.basicSpeed,i.currentTime=this.currentTimeInMediaElement/1e3,this.isWebAudioApiSupported&&this.audioContext!==void 0&&(["interrupted","suspended"].includes(this.audioContext.state)&&await this.audioContext.resume(),this.audioSourceNode===void 0)){await this.loadRNNoise(),this.audioSourceNode=this.audioContext.createMediaElementSource(i),this.audioContextGainNode===void 0&&(this.audioContextGainNode=this.audioContext.createGain());let o=this.audioSourceNode;this.audioRNNoiseNode!==void 0&&(o.connect(this.audioRNNoiseNode),o=this.audioRNNoiseNode),o.connect(this.audioContextGainNode),this.audioContextGainNode.connect(this.audioContext.destination),this.setVolume(this.volumeInMediaElement)}this.audioRNNoiseNode!==void 0&&this.audioRNNoiseNode.toggle(this.isNoiseReduced),this.playPromise=i.play(),this.isWaitingToPlay=!1},async stop(){if(this.isWaitingToStop||this.isWaitingToPlay)return;this.isWaitingToStop=!0,await this.playPromise,this.isWaitingToStop=!1;const e=this.$refs.player;e.pause(),this.isCropMaster&&setTimeout(()=>{this.cropEmitter.fire(this.cropEmitterEventName,e.currentTime)},100)},setVolume(e){if(this.isWebAudioApiSupported)this.audioContextGainNode!==void 0&&(this.audioContextGainNode.gain.value=e);else{const t=this.$refs.player;t.volume=e}},seek(e){const t=this.$refs.player;t.currentTime=e/1e3;const i=()=>{t.removeEventListener("seeked",i)};t.addEventListener("seeked",i)},...(()=>{const e=ut(function(t){this.seek(t)},dt.TWENTY_FIVE_FRAMES_PER_SECOND);return{throttledSeek:e,cancelThrottledSeek:e.cancel}})(),prepareVideoElement(){this.seek(this.trimFromStartTime*this.basicSpeed),this.isVideoLoadedData=!0,this.isPlaying&&this.isActive?this.play():this.stop()},async loadRNNoise(){if(this.audioContext!==void 0&&this.rnnoiseAdapter.isSupported())try{this.audioRNNoiseNode=await this.rnnoiseAdapter.registerInAudioContext(this.audioContext)}catch(e){this.audioRNNoiseNode=void 0,setTimeout(()=>{throw e})}},balanceCropTime(e){const t=this.$refs.player;t.currentTime=e.data}}}),ql=["poster","loop"],Wl=["src","type"],Gl=["src","type"];function Xl(e,t,i,o,s,l){const a=xt;return ae((d(),S(a,{class:"layer layer-video",variant:e.variant,"top-left-x":e.positionStartX,"top-left-y":e.positionStartY,"bottom-right-x":e.positionFinishX,"bottom-right-y":e.positionFinishY,"content-start-x":e.contentStartX,"content-start-y":e.contentStartY,"content-finish-x":e.contentFinishX,"content-finish-y":e.contentFinishY,"content-rotate-angle":e.contentRotateAngle,"media-width":e.mediaWidth,"media-height":e.mediaHeight,angle:e.rotateAngle,"is-rotatable":!0,"is-selected":e.isSelected,"player-size-width":e.playerSizeWidth,"player-size-height":e.playerSizeHeight,"z-index":e.isForceActive?1e3:void 0,"drag-resize-rotate-event-target":e.dragResizeRotateEventTarget,"crop-strategy":e.cropStrategy,"is-flip-x-applied":e.isFlipXApplied,"is-flip-y-applied":e.isFlipYApplied,"crop-emitter":e.cropEmitter,onMediaElementSelect:t[0]||(t[0]=u=>e.$emit("media-element-select")),onMediaElementDragStart:t[1]||(t[1]=u=>e.$emit("media-element-drag-start")),onMediaElementDrag:t[2]||(t[2]=u=>e.$emit("media-element-drag",u)),onMediaElementDragStop:t[3]||(t[3]=u=>e.$emit("media-element-drag-stop")),onMediaElementResizeStart:t[4]||(t[4]=u=>e.$emit("media-element-resize-start",u)),onMediaElementResize:t[5]||(t[5]=u=>e.$emit("media-element-resize",u)),onMediaElementResizeStop:t[6]||(t[6]=u=>e.$emit("media-element-resize-stop")),onMediaElementRotateStart:t[7]||(t[7]=u=>e.$emit("media-element-rotate-start")),onMediaElementRotate:t[8]||(t[8]=u=>e.$emit("media-element-rotate",u)),onMediaElementRotateStop:t[9]||(t[9]=u=>e.$emit("media-element-rotate-stop")),onUiInteractionStart:t[10]||(t[10]=u=>e.$emit("ui-interaction-start",u)),onOpenCropTab:t[11]||(t[11]=u=>e.$emit("open-crop-tab"))},{default:n(()=>[p("video",{ref:"player",class:"media",preload:"auto",playsinline:"",crossorigin:"anonymous",style:z(e.mediaElementStyles),poster:e.previewImage,loop:e.isShouldLoop},[e.convertedSource!==void 0?(d(),h("source",{key:0,src:e.convertedSource,type:e.convertedSourceType},null,8,Wl)):(d(),h("source",{key:1,src:e.source,type:e.mimeType},null,8,Gl)),y(" "+g(e.$t("appPlayerMediaElementVideo.htmlVideoNotSupported")),1)],12,ql),p("canvas",{ref:"canvas",class:"stop-motion-player-canvas",style:z(e.canvasElementStyles)},null,4)]),_:1},8,["variant","top-left-x","top-left-y","bottom-right-x","bottom-right-y","content-start-x","content-start-y","content-finish-x","content-finish-y","content-rotate-angle","media-width","media-height","angle","is-selected","player-size-width","player-size-height","z-index","drag-resize-rotate-event-target","crop-strategy","is-flip-x-applied","is-flip-y-applied","crop-emitter"])),[[pe,e.isActive&&e.isVideoLoadedData]])}const Yl=$(Ul,[["render",Xl]]),Kl=A({name:"app-player-media-element-image",props:{source:{type:String,required:!0},convertedSource:{type:String,default:void 0},positionStartX:{type:Number,required:!0},positionStartY:{type:Number,required:!0},positionFinishX:{type:Number,required:!0},positionFinishY:{type:Number,required:!0},playbackStartTime:{type:Number,required:!0},currentTime:{type:Number,default:0},playbackLength:{type:Number,required:!0},isSelected:{type:Boolean,required:!0},playerSizeWidth:{type:Number,required:!0},playerSizeHeight:{type:Number,required:!0},isFlipXApplied:{type:Boolean,default:!1},isFlipYApplied:{type:Boolean,default:!1},adjustOpacity:{type:Number,default:0},adjustHue:{type:Number,default:0},adjustSaturation:{type:Number,default:0},adjustBrightness:{type:Number,default:0},adjustContrast:{type:Number,default:0},adjustBlur:{type:Number,default:0},rotateAngle:{type:Number,default:0},isForceActive:{type:Boolean,default:!1},dragResizeRotateEventTarget:{type:Object,default:void 0},baseAbstractWidthForScaleBlur:{type:Number,default:0},contentStartX:{type:Number,required:!0},contentStartY:{type:Number,required:!0},contentFinishX:{type:Number,required:!0},contentFinishY:{type:Number,required:!0},contentRotateAngle:{type:Number,required:!0},mediaWidth:{type:Number,required:!0},mediaHeight:{type:Number,required:!0},variant:{type:String,required:!0},cropStrategy:{type:String,default:Qe.FREEFORM},cropEmitter:{type:Object,required:!0}},emits:{"media-element-select":null,"media-element-drag-start":null,"media-element-drag":e=>!0,"media-element-drag-stop":null,"media-element-resize-start":null,"media-element-resize":e=>!0,"media-element-resize-stop":null,"media-element-rotate-start":null,"media-element-rotate":e=>!0,"media-element-rotate-stop":null,"toggle-snap-line-x-left":e=>!0,"toggle-snap-line-x-center":e=>!0,"toggle-snap-line-x-right":e=>!0,"toggle-snap-line-y-left":e=>!0,"toggle-snap-line-y-center":e=>!0,"toggle-snap-line-y-right":e=>!0,"ui-interaction-start":null,"open-crop-tab":null},computed:{playbackFinishTimeWithOffset(){return this.playbackStartTime+this.playbackLength},isActive(){return this.isForceActive?!0:this.currentTime>=this.playbackStartTime&&this.currentTime<=this.playbackFinishTimeWithOffset},mediaElementStyles(){return{objectFit:"cover",filter:this.filterStyle,opacity:String(this.opacityStyle),width:"100%",height:"100%",transform:`scale3d(${this.isFlipXApplied?-1:1}, ${this.isFlipYApplied?-1:1}, 1)`}},filterStyle(){const e=(100+this.adjustBrightness)*.01,t=(100+this.adjustContrast)*.01,i=(100+this.adjustSaturation)*.01,o=this.adjustHue,s=this.playerSizeWidth*(this.positionFinishX-this.positionStartX)/100,l=this.playerSizeHeight*(this.positionFinishY-this.positionStartY)/100,a=this.adjustBlur*.2/this.baseAbstractWidthForScaleBlur*Math.sqrt(s**2+l**2);return`brightness(${e}) contrast(${t}) saturate(${i}) hue-rotate(${o}deg) blur(${a}px)`},opacityStyle(){return this.variant==="crop-preview"?.5:this.adjustOpacity*.01},playableSource(){return this.convertedSource===void 0?this.source:this.convertedSource}}}),Zl=["src"];function Ql(e,t,i,o,s,l){const a=xt;return ae((d(),S(a,{class:"layer layer-image",variant:e.variant,"top-left-x":e.positionStartX,"top-left-y":e.positionStartY,"bottom-right-x":e.positionFinishX,"bottom-right-y":e.positionFinishY,"content-start-x":e.contentStartX,"content-start-y":e.contentStartY,"content-finish-x":e.contentFinishX,"content-finish-y":e.contentFinishY,"content-rotate-angle":e.contentRotateAngle,"media-width":e.mediaWidth,"media-height":e.mediaHeight,angle:e.rotateAngle,"is-rotatable":!0,"is-selected":e.isSelected,"player-size-width":e.playerSizeWidth,"player-size-height":e.playerSizeHeight,"z-index":e.isForceActive?1e3:void 0,"drag-resize-rotate-event-target":e.dragResizeRotateEventTarget,"crop-strategy":e.cropStrategy,"is-flip-x-applied":e.isFlipXApplied,"is-flip-y-applied":e.isFlipYApplied,"crop-emitter":e.cropEmitter,onMediaElementSelect:t[0]||(t[0]=u=>e.$emit("media-element-select")),onMediaElementDragStart:t[1]||(t[1]=u=>e.$emit("media-element-drag-start")),onMediaElementDrag:t[2]||(t[2]=u=>e.$emit("media-element-drag",u)),onMediaElementDragStop:t[3]||(t[3]=u=>e.$emit("media-element-drag-stop")),onMediaElementResizeStart:t[4]||(t[4]=u=>e.$emit("media-element-resize-start",u)),onMediaElementResize:t[5]||(t[5]=u=>e.$emit("media-element-resize",u)),onMediaElementResizeStop:t[6]||(t[6]=u=>e.$emit("media-element-resize-stop")),onMediaElementRotateStart:t[7]||(t[7]=u=>e.$emit("media-element-rotate-start")),onMediaElementRotate:t[8]||(t[8]=u=>e.$emit("media-element-rotate",u)),onMediaElementRotateStop:t[9]||(t[9]=u=>e.$emit("media-element-rotate-stop")),onUiInteractionStart:t[10]||(t[10]=u=>e.$emit("ui-interaction-start",u)),onOpenCropTab:t[11]||(t[11]=u=>e.$emit("open-crop-tab"))},{default:n(()=>[p("img",{ref:"image",alt:"media",class:"media",src:e.playableSource,style:z(e.mediaElementStyles),crossorigin:"anonymous"},null,12,Zl)]),_:1},8,["variant","top-left-x","top-left-y","bottom-right-x","bottom-right-y","content-start-x","content-start-y","content-finish-x","content-finish-y","content-rotate-angle","media-width","media-height","angle","is-selected","player-size-width","player-size-height","z-index","drag-resize-rotate-event-target","crop-strategy","is-flip-x-applied","is-flip-y-applied","crop-emitter"])),[[pe,e.isActive]])}const Jl=$(Kl,[["render",Ql]]),xl=A({name:"app-player-media-element-audio",props:{source:{type:String,required:!0},convertedSource:{type:String,default:void 0},playbackStartTime:{type:Number,required:!0},currentTime:{type:Number,default:0},playbackLength:{type:Number,required:!0},trimFromStartTime:{type:Number,required:!0},isPlaying:{type:Boolean,default:!1},volume:{type:Number,required:!0},volumeFadeInTime:{type:Number,required:!0},volumeFadeOutTime:{type:Number,required:!0},isNoiseReduced:{type:Boolean,required:!0},rnnoiseAdapter:{type:Object,required:!0},basicSpeed:{type:Number,required:!0}},data:()=>({isWebAudioApiSupported:!1,audioContext:void 0,audioSourceNode:void 0,audioContextGainNode:void 0,audioRNNoiseNode:void 0,playPromise:void 0,isWaitingToPlay:!1,isWaitingToStop:!1}),computed:{isActive(){return this.currentTime>=this.playbackStartTime&&this.currentTime<=this.playbackFinishTimeWithOffset},playbackFinishTimeWithOffset(){return this.playbackStartTime+this.playbackLength},currentTimeInMediaElement(){return(this.currentTime-this.playbackStartTime+this.trimFromStartTime)*this.basicSpeed},volumeForCurrentTimeInMediaElement(){if(!this.isActive)return 0;const e=this.volumeFadeInTime>0,t=this.volumeFadeOutTime>0,i=this.currentTime-this.playbackStartTime,o=i<this.volumeFadeInTime,s=i>this.playbackLength-this.volumeFadeOutTime;let l;if(e&&o){const u=this.volume,m=0,f=this.volumeFadeInTime;l=this.volumeLinearTimingFunction(0,u,m,f,i)}else if(t&&s){const a=this.volume,u=0,m=this.playbackLength-this.volumeFadeOutTime,f=this.playbackLength;l=this.volumeLinearTimingFunction(a,u,m,f,i)}else l=this.volume;return Math.round(l*100)/100}},watch:{isActive(e){e&&this.isPlaying?this.play():this.stop(),e||this.throttledSeek(this.trimFromStartTime*this.basicSpeed)},isPlaying(e){e&&this.isActive?this.play():this.stop()},volumeForCurrentTimeInMediaElement(e){this.setVolume(e)},currentTime(){this.isActive&&!this.isPlaying&&this.seek(this.currentTimeInMediaElement)},playbackStartTime(){this.isActive&&!this.isPlaying&&this.seek(this.currentTimeInMediaElement)},trimFromStartTime(){this.throttledSeek(this.trimFromStartTime*this.basicSpeed)},async source(){this.isPlaying||(await this.$nextTick(),this.loadAudio())},async convertedSource(){this.isPlaying||(await this.$nextTick(),this.loadAudio())},isNoiseReduced(e){this.audioRNNoiseNode!==void 0&&this.audioRNNoiseNode.toggle(e)},async basicSpeed(){this.isPlaying&&(await this.stop(),this.play())}},mounted(){const{engine:e,browser:t}=new jt(window.navigator.userAgent).getResult();this.isWebAudioApiSupported=!(/^webkit$/i.test(e.name??"unknown")||/^safari$/i.test(t.name??"unknown")),this.isWebAudioApiSupported&&(this.audioContext=new AudioContext({sampleRate:48e3}),this.audioContextGainNode=this.audioContext.createGain()),this.loadAudio(),this.loadRNNoise(),this.setVolume(this.volumeForCurrentTimeInMediaElement),this.throttledSeek(this.trimFromStartTime*this.basicSpeed)},beforeUnmount(){this.audioRNNoiseNode!==void 0&&this.audioRNNoiseNode.disconnect(),this.audioContextGainNode!==void 0&&this.audioContextGainNode.disconnect(),this.audioSourceNode!==void 0&&this.audioSourceNode.disconnect(),this.audioContext!==void 0&&this.audioContext.close(),this.cancelThrottledSeek(),this.$refs.player.removeEventListener("loadeddata",this.prepareMediaElement)},methods:{async play(){if(this.isWaitingToPlay)return;this.isWaitingToPlay=!0,await this.playPromise,this.seek(this.currentTimeInMediaElement),await this.$nextTick();const e=this.$refs.player;if(e.playbackRate=this.basicSpeed,this.isWebAudioApiSupported&&this.audioContext!==void 0&&(["interrupted","suspended"].includes(this.audioContext.state)&&await this.audioContext.resume(),this.audioSourceNode===void 0)){await this.loadRNNoise(),this.audioSourceNode=this.audioContext.createMediaElementSource(e),this.audioContextGainNode===void 0&&(this.audioContextGainNode=this.audioContext.createGain());let t=this.audioSourceNode;this.audioRNNoiseNode!==void 0&&(t.connect(this.audioRNNoiseNode),t=this.audioRNNoiseNode),t.connect(this.audioContextGainNode),this.audioContextGainNode.connect(this.audioContext.destination),this.setVolume(this.volumeForCurrentTimeInMediaElement)}this.audioRNNoiseNode!==void 0&&this.audioRNNoiseNode.toggle(this.isNoiseReduced),this.playPromise=e.play(),this.isWaitingToPlay=!1},async stop(){if(this.isWaitingToStop)return;this.isWaitingToStop=!0,await this.playPromise,this.isWaitingToStop=!1,this.$refs.player.pause()},setVolume(e){if(this.isWebAudioApiSupported)this.audioContextGainNode!==void 0&&(this.audioContextGainNode.gain.value=e/100);else{const t=this.$refs.player;t.volume=e/100}},volumeLinearTimingFunction(e,t,i,o,s){const l=(e-t)*s,a=o-i,u=i*t-o*e;return-1*(l/a+u/a)},seek(e){const t=this.$refs.player;t.currentTime=e/1e3},...(()=>{const e=ut(function(t){this.seek(t)},dt.TWENTY_FIVE_FRAMES_PER_SECOND);return{throttledSeek:e,cancelThrottledSeek:e.cancel}})(),prepareMediaElement(){this.seek(this.trimFromStartTime*this.basicSpeed),this.isPlaying&&this.isActive?this.play():this.stop()},loadAudio(){const e=this.$refs.player;e.addEventListener("loadedmetadata",this.prepareMediaElement),e.load(),this.isWaitingToPlay=!1,this.isWaitingToStop=!1,this.playPromise=void 0},async loadRNNoise(){if(this.audioContext!==void 0&&this.rnnoiseAdapter.isSupported())try{this.audioRNNoiseNode=await this.rnnoiseAdapter.registerInAudioContext(this.audioContext)}catch(e){this.audioRNNoiseNode=void 0,setTimeout(()=>{throw e})}}}}),ed=["src"];function td(e,t,i,o,s,l){return d(),h("audio",{ref:"player",crossorigin:"anonymous",style:{display:"none"},src:e.convertedSource!==void 0?e.convertedSource:e.source},null,8,ed)}const id=$(xl,[["render",td]]),od=A({name:"app-player-media-element-text",props:{content:{type:String,required:!0},positionStartX:{type:Number,required:!0},positionStartY:{type:Number,required:!0},positionFinishX:{type:Number,required:!0},positionFinishY:{type:Number,required:!0},playbackStartTime:{type:Number,required:!0},currentTime:{type:Number,default:0},playbackLength:{type:Number,required:!0},isSelected:{type:Boolean,required:!0},playerSizeWidth:{type:Number,required:!0},playerSizeHeight:{type:Number,required:!0},textColor:{type:Object,required:!0},textFontFace:{type:Object,required:!0},textFontFamiliesPredicted:{type:Array,required:!0},textFontStyle:{type:String,required:!0},textFontWeight:{type:Number,required:!0},textAlign:{type:String,required:!0},justifyContent:{type:String,required:!0},isTextUnderlined:{type:Boolean,required:!0},isInUppercase:{type:Boolean,required:!0},textRelativeFontSize:{type:Number,required:!0},textLineHeight:{type:Number,required:!0},textRelativeLetterSpacing:{type:Number,required:!0},outlineColor:{type:Object,required:!0},outlineWidth:{type:Number,required:!0},backgroundColor:{type:Object,required:!0},backgroundBorderRadius:{type:Number,required:!0},backgroundToTextGap:{type:Number,required:!0},boxToBackgroundGap:{type:Number,required:!0},rotateAngle:{type:Number,default:0},opacity:{type:Number,required:!0},isForceActive:{type:Boolean,default:!1},dragResizeRotateEventTarget:{type:Object,default:void 0}},emits:{"media-element-select":null,"media-element-drag-start":null,"media-element-drag":e=>!0,"media-element-drag-stop":null,"media-element-resize-start":null,"media-element-resize":e=>!0,"media-element-resize-stop":null,"media-element-rotate-start":null,"media-element-rotate":e=>!0,"media-element-rotate-stop":null,"toggle-snap-line-x-left":e=>!0,"toggle-snap-line-x-center":e=>!0,"toggle-snap-line-x-right":e=>!0,"toggle-snap-line-y-left":e=>!0,"toggle-snap-line-y-center":e=>!0,"toggle-snap-line-y-right":e=>!0,"text-computed-styles-update":e=>!0,"ui-interaction-start":null},computed:{contentLines(){return this.content.split(/\r\n|\r|\n/g)},playbackFinishTimeWithOffset(){return this.playbackStartTime+this.playbackLength},isActive(){return this.isForceActive?!0:this.currentTime>=this.playbackStartTime&&this.currentTime<=this.playbackFinishTimeWithOffset},outlineStyles(){if(this.outlineWidth===0)return"none";let e="";const t=Vt(this.outlineColor),i=1/this.outlineWidth,o=2*Math.PI;for(let s=0;s<o;s+=i){e!==""&&(e=e+",");const l=Math.cos(s)*this.outlineWidth,a=Math.sin(s)*this.outlineWidth;e=`${e} ${l}px ${a}px ${t}`}return e},backgroundStyles(){return oo(this.backgroundColor,!0)},mediaElementStyles(){const e={width:this.playerSizeWidth,height:this.playerSizeHeight},{width:t,height:i}=Ca({positionStartX:this.positionStartX,positionFinishX:this.positionFinishX,positionStartY:this.positionStartY,positionFinishY:this.positionFinishY},e),o=this.backgroundBorderRadius/100*Math.min(t,i),s=[this.textFontFace.family,...this.textFontFamiliesPredicted,this.textFontFace.generic].filter(l=>l!==void 0&&l.length>0);return{color:`rgba(${this.textColor.red}, ${this.textColor.green}, ${this.textColor.blue}, ${this.textColor.alpha})`,fontFamily:s.join(", "),fontStyle:this.textFontStyle,fontWeight:`${this.textFontWeight}`,fontSize:`${this.textRelativeFontSize}px`,lineHeight:`${this.textLineHeight}`,letterSpacing:`${this.textRelativeLetterSpacing}px`,justifyContent:`${this.justifyContent}`,textDecoration:this.isTextUnderlined?"underline":void 0,textTransform:this.isInUppercase?"uppercase":void 0,textShadow:this.outlineStyles,background:this.backgroundStyles,borderRadius:`${o}px`,textAlign:`${this.textAlign}`,padding:`${this.backgroundToTextGap}px`,opacity:`${this.opacity/100}`,whiteSpace:"nowrap"}},mediaElementTextStyles(){const e={textAlign:`${this.textAlign}`,display:"block"};return this.textRelativeLetterSpacing>0?e.width=`calc(100% - ${this.textRelativeLetterSpacing}px)`:e.paddingRight=`${-this.textRelativeLetterSpacing}px`,e},throttledUpdateComputedStyles(){return ut(function(){const e={mediaElementStyles:this.mediaElementStyles,mediaElementTextStyles:this.mediaElementTextStyles};this.$emit("text-computed-styles-update",e)},dt.FOUR_FRAMES_PER_SECOND)}},watch:{mediaElementStyles(){this.throttledUpdateComputedStyles()},mediaElementTextStyles(){this.throttledUpdateComputedStyles()}},mounted(){this.throttledUpdateComputedStyles()},beforeUnmount(){this.throttledUpdateComputedStyles.cancel()}});function nd(e,t,i,o,s,l){const a=xt;return ae((d(),S(a,{class:"layer layer-text","data-type":"text","top-left-x":e.positionStartX,"top-left-y":e.positionStartY,"bottom-right-x":e.positionFinishX,"bottom-right-y":e.positionFinishY,angle:e.rotateAngle,"is-rotatable":!0,"is-selected":e.isSelected,"player-size-width":e.playerSizeWidth,"player-size-height":e.playerSizeHeight,padding:e.boxToBackgroundGap,"z-index":e.isForceActive?1e3:void 0,"drag-resize-rotate-event-target":e.dragResizeRotateEventTarget,onMediaElementSelect:t[0]||(t[0]=u=>e.$emit("media-element-select")),onMediaElementDragStart:t[1]||(t[1]=u=>e.$emit("media-element-drag-start")),onMediaElementDrag:t[2]||(t[2]=u=>e.$emit("media-element-drag",u)),onMediaElementDragStop:t[3]||(t[3]=u=>e.$emit("media-element-drag-stop")),onMediaElementResizeStart:t[4]||(t[4]=u=>e.$emit("media-element-resize-start",u)),onMediaElementResize:t[5]||(t[5]=u=>e.$emit("media-element-resize",u)),onMediaElementResizeStop:t[6]||(t[6]=u=>e.$emit("media-element-resize-stop")),onMediaElementRotateStart:t[7]||(t[7]=u=>e.$emit("media-element-rotate-start")),onMediaElementRotate:t[8]||(t[8]=u=>e.$emit("media-element-rotate",u)),onMediaElementRotateStop:t[9]||(t[9]=u=>e.$emit("media-element-rotate-stop")),onUiInteractionStart:t[10]||(t[10]=u=>e.$emit("ui-interaction-start",u))},{default:n(()=>[p("div",{class:"app-player-media-element-text",style:z(e.mediaElementStyles)},[p("p",{style:z(e.mediaElementTextStyles)},[(d(!0),h(N,null,q(e.contentLines,(u,m)=>(d(),h(N,{key:m},[y(g(u)+" ",1),t[11]||(t[11]=p("br",null,null,-1))],64))),128))],4)],4)]),_:1},8,["top-left-x","top-left-y","bottom-right-x","bottom-right-y","angle","is-selected","player-size-width","player-size-height","padding","z-index","drag-resize-rotate-event-target"])),[[pe,e.isActive]])}const sd=$(od,[["render",nd]]),ad=A({name:"app-element-svg-source",props:{elementId:{type:String,required:!0},elementType:{type:String,required:!0},shapeSourceBaseUrl:{type:String,required:!0},emojiSourceBaseUrl:{type:String,required:!0},backgroundFill:{type:Object,default:void 0}},data(){return{svgSource:""}},computed:{styles(){if(this.backgroundFill===void 0)return{};if(this.backgroundFill.type===Tt.SOLID){const{red:e,green:t,blue:i,alpha:o}=this.backgroundFill.solidColor;return{color:`rgba(${e}, ${t}, ${i}, ${o})`}}return{}}},watch:{backgroundFill(){this.patchSvgSource()}},async mounted(){this.svgSource=await this.getElementSourceSvg(this.elementId,this.elementType),this.patchSvgSource()},methods:{async getElementSourceSvg(e,t){const i=t===we.SHAPE?`${this.shapeSourceBaseUrl}${e}.svg`:`${this.emojiSourceBaseUrl}${e}.svg`;return await(await fetch(i)).text()},patchSvgSource(){this.backgroundFill!==void 0&&(this.svgSource=Ta(this.svgSource,this.backgroundFill))}}}),rd=["innerHTML"];function ld(e,t,i,o,s,l){return d(),h("div",{class:"app-element-svg-source",style:z(e.styles),innerHTML:e.svgSource},null,12,rd)}const mo=$(ad,[["render",ld]]),dd=A({name:"app-player-media-element-shape",props:{elementId:{type:String,required:!0},positionStartX:{type:Number,required:!0},positionStartY:{type:Number,required:!0},positionFinishX:{type:Number,required:!0},positionFinishY:{type:Number,required:!0},playbackStartTime:{type:Number,required:!0},currentTime:{type:Number,default:0},playbackLength:{type:Number,required:!0},isSelected:{type:Boolean,required:!0},playerSizeWidth:{type:Number,required:!0},playerSizeHeight:{type:Number,required:!0},backgroundColor:{type:Object,default:void 0},isFlipXApplied:{type:Boolean,default:!1},isFlipYApplied:{type:Boolean,default:!1},rotateAngle:{type:Number,default:0},isForceActive:{type:Boolean,default:!1},dragResizeRotateEventTarget:{type:Object,default:void 0},shapeSourceBaseUrl:{type:String,required:!0},emojiSourceBaseUrl:{type:String,required:!0},opacity:{type:Number,required:!0}},emits:["media-element-select","media-element-drag-start","media-element-drag","media-element-drag-stop","media-element-resize-start","media-element-resize","media-element-resize-stop","media-element-rotate-start","media-element-rotate","media-element-rotate-stop","ui-interaction-start"],computed:{playbackFinishTimeWithOffset(){return this.playbackStartTime+this.playbackLength},isActive(){return this.isForceActive?!0:this.currentTime>=this.playbackStartTime&&this.currentTime<=this.playbackFinishTimeWithOffset},mediaElementStyles(){return{transform:this.transformStyle,opacity:String(this.opacity/100)}},transformStyle(){const e=this.isFlipXApplied?-1:1,t=this.isFlipYApplied?-1:1;return`scale3d(${e}, ${t}, 1)`}}});function ud(e,t,i,o,s,l){const a=mo,u=xt;return ae((d(),S(u,{class:"layer layer-vector","data-type":"shape","top-left-x":e.positionStartX,"top-left-y":e.positionStartY,"bottom-right-x":e.positionFinishX,"bottom-right-y":e.positionFinishY,angle:e.rotateAngle,"is-rotatable":!0,"is-selected":e.isSelected,"player-size-width":e.playerSizeWidth,"player-size-height":e.playerSizeHeight,"z-index":e.isForceActive?1e3:void 0,"drag-resize-rotate-event-target":e.dragResizeRotateEventTarget,onMediaElementSelect:t[0]||(t[0]=m=>e.$emit("media-element-select")),onMediaElementDragStart:t[1]||(t[1]=m=>e.$emit("media-element-drag-start")),onMediaElementDrag:t[2]||(t[2]=m=>e.$emit("media-element-drag",m)),onMediaElementDragStop:t[3]||(t[3]=m=>e.$emit("media-element-drag-stop")),onMediaElementResizeStart:t[4]||(t[4]=m=>e.$emit("media-element-resize-start",m)),onMediaElementResize:t[5]||(t[5]=m=>e.$emit("media-element-resize",m)),onMediaElementResizeStop:t[6]||(t[6]=m=>e.$emit("media-element-resize-stop")),onMediaElementRotateStart:t[7]||(t[7]=m=>e.$emit("media-element-rotate-start")),onMediaElementRotate:t[8]||(t[8]=m=>e.$emit("media-element-rotate",m)),onMediaElementRotateStop:t[9]||(t[9]=m=>e.$emit("media-element-rotate-stop")),onUiInteractionStart:t[10]||(t[10]=m=>e.$emit("ui-interaction-start",m))},{default:n(()=>[r(a,{"element-id":e.elementId,style:z(e.mediaElementStyles),"shape-source-base-url":e.shapeSourceBaseUrl,"emoji-source-base-url":e.emojiSourceBaseUrl,"background-fill":e.backgroundColor,class:"app-player-media-element-shape","element-type":"shape"},null,8,["element-id","style","shape-source-base-url","emoji-source-base-url","background-fill"])]),_:1},8,["top-left-x","top-left-y","bottom-right-x","bottom-right-y","angle","is-selected","player-size-width","player-size-height","z-index","drag-resize-rotate-event-target"])),[[pe,e.isActive]])}const pd=$(dd,[["render",ud]]),cd=A({name:"app-player-media-element-emoji",props:{elementId:{type:String,required:!0},positionStartX:{type:Number,required:!0},positionStartY:{type:Number,required:!0},positionFinishX:{type:Number,required:!0},positionFinishY:{type:Number,required:!0},playbackStartTime:{type:Number,required:!0},currentTime:{type:Number,default:0},playbackLength:{type:Number,required:!0},isSelected:{type:Boolean,required:!0},playerSizeWidth:{type:Number,required:!0},playerSizeHeight:{type:Number,required:!0},isFlipXApplied:{type:Boolean,default:!1},isFlipYApplied:{type:Boolean,default:!1},adjustOpacity:{type:Number,default:0},adjustHue:{type:Number,default:0},adjustSaturation:{type:Number,default:0},adjustBrightness:{type:Number,default:0},adjustContrast:{type:Number,default:0},adjustBlur:{type:Number,default:0},rotateAngle:{type:Number,default:0},isForceActive:{type:Boolean,default:!1},dragResizeRotateEventTarget:{type:Object,default:void 0},baseAbstractWidthForScaleBlur:{type:Number,default:0},shapeSourceBaseUrl:{type:String,required:!0},emojiSourceBaseUrl:{type:String,required:!0}},emits:["media-element-select","media-element-drag-start","media-element-drag","media-element-drag-stop","media-element-resize-start","media-element-resize","media-element-resize-stop","media-element-rotate-start","media-element-rotate","media-element-rotate-stop","ui-interaction-start"],computed:{playbackFinishTimeWithOffset(){return this.playbackStartTime+this.playbackLength},isActive(){return this.isForceActive?!0:this.currentTime>=this.playbackStartTime&&this.currentTime<=this.playbackFinishTimeWithOffset},mediaElementStyles(){return{transform:this.transformStyle,filter:this.filterStyle,opacity:this.opacityStyle}},transformStyle(){const e=this.isFlipXApplied?-1:1,t=this.isFlipYApplied?-1:1;return`scale3d(${e}, ${t}, 1)`},filterStyle(){const e=(100+this.adjustBrightness)*.01,t=(100+this.adjustContrast)*.01,i=(100+this.adjustSaturation)*.01,o=this.adjustHue,s=this.playerSizeWidth*(this.positionFinishX-this.positionStartX)/100,l=this.playerSizeHeight*(this.positionFinishY-this.positionStartY)/100,a=this.adjustBlur*.2/this.baseAbstractWidthForScaleBlur*Math.sqrt(s**2+l**2);return`brightness(${e}) contrast(${t}) saturate(${i}) hue-rotate(${o}deg) blur(${a}px)`},opacityStyle(){return this.adjustOpacity*.01}}});function md(e,t,i,o,s,l){const a=mo,u=xt;return ae((d(),S(u,{class:"layer layer-vector","data-type":"shape","top-left-x":e.positionStartX,"top-left-y":e.positionStartY,"bottom-right-x":e.positionFinishX,"bottom-right-y":e.positionFinishY,angle:e.rotateAngle,"is-rotatable":!0,"is-selected":e.isSelected,"player-size-width":e.playerSizeWidth,"player-size-height":e.playerSizeHeight,"z-index":e.isForceActive?1e3:void 0,"drag-resize-rotate-event-target":e.dragResizeRotateEventTarget,onMediaElementSelect:t[0]||(t[0]=m=>e.$emit("media-element-select")),onMediaElementDragStart:t[1]||(t[1]=m=>e.$emit("media-element-drag-start")),onMediaElementDrag:t[2]||(t[2]=m=>e.$emit("media-element-drag",m)),onMediaElementDragStop:t[3]||(t[3]=m=>e.$emit("media-element-drag-stop")),onMediaElementResizeStart:t[4]||(t[4]=m=>e.$emit("media-element-resize-start",m)),onMediaElementResize:t[5]||(t[5]=m=>e.$emit("media-element-resize",m)),onMediaElementResizeStop:t[6]||(t[6]=m=>e.$emit("media-element-resize-stop")),onMediaElementRotateStart:t[7]||(t[7]=m=>e.$emit("media-element-rotate-start")),onMediaElementRotate:t[8]||(t[8]=m=>e.$emit("media-element-rotate",m)),onMediaElementRotateStop:t[9]||(t[9]=m=>e.$emit("media-element-rotate-stop")),onUiInteractionStart:t[10]||(t[10]=m=>e.$emit("ui-interaction-start",m))},{default:n(()=>[r(a,{"element-type":"emoji","element-id":e.elementId,style:z(e.mediaElementStyles),"shape-source-base-url":e.shapeSourceBaseUrl,"emoji-source-base-url":e.emojiSourceBaseUrl,class:"app-player-media-element-emoji"},null,8,["element-id","style","shape-source-base-url","emoji-source-base-url"])]),_:1},8,["top-left-x","top-left-y","bottom-right-x","bottom-right-y","angle","is-selected","player-size-width","player-size-height","z-index","drag-resize-rotate-event-target"])),[[pe,e.isActive]])}const hd=$(cd,[["render",md]]),gd=A({name:"app-player",components:{AppSvgSymbol:K,AppButton:oe},inheritAttrs:!1,props:{isPlaying:{type:Boolean,default:!1},isPlayAvailable:{type:Boolean,required:!0},aspectRatioValue:{type:Number,required:!0},backgroundColor:{type:Object,required:!0},isFullscreenButtonDisabled:{type:Boolean,default:!1},isFullscreenEnabled:{type:Boolean,required:!0},isInCropMode:{type:Boolean,default:!1}},emits:{"player-layout-resize":e=>!0,"player-fullscreen-disable":null,"player-fullscreen-enable":null,"toggle-play":null,"click-on-canvas":null,"mousedown-outside-canvas":null,"drop-on-player":e=>!0},data:()=>({size:{width:window?.previewCanvasSize?.width??0,height:window?.previewCanvasSize?.height??0},isDropZoneMarkerVisible:!1,isForceControlbarVisibility:!1,isBrowserSupportsHover:!1}),computed:{fullscreenTitle(){return this.isFullscreenEnabled?this.$t("appPlayer.fullScreenExit"):this.$t("appPlayer.fullScreenEnter")},isControlbarVisible(){return this.isForceControlbarVisibility||!this.isPlaying},background(){return oo(this.backgroundColor,!0)}},watch:{aspectRatioValue(){this.updateStylesForVideoHolder()},isFullscreenEnabled(){this.$nextTick(()=>{this.updateStylesForVideoHolder()})}},mounted(){this.updateStylesForVideoHolder(),window.addEventListener("resize",this.updateStylesForVideoHolder),this.isBrowserSupportsHover=window.matchMedia("(hover: hover)").matches},beforeUnmount(){window.removeEventListener("resize",this.updateStylesForVideoHolder)},methods:{async updateStylesForVideoHolder(){const e=this.$refs.wrapper,t=this.$refs.canvas,i=e.clientWidth,o=e.clientHeight,s=i/o;let l,a;this.aspectRatioValue>=s?(a=i/this.aspectRatioValue,l=i):(a=o,l=o*this.aspectRatioValue),this.size.width=Math.ceil(l),this.size.height=Math.ceil(a),await this.$nextTick();const u=t.getBoundingClientRect();this.$emit("player-layout-resize",{width:this.size.width,height:this.size.height,offsetLeft:u.left,offsetTop:u.top})},toggleFullscreen(){this.isFullscreenEnabled?this.$emit("player-fullscreen-disable"):this.$emit("player-fullscreen-enable")},togglePlay(){this.$emit("toggle-play"),this.enableForcingControlbarVisibilityIfNecessary()},clickOnCanvas(){this.$emit("click-on-canvas")},checkIfMouseDownOutsideCanvas(e){const t=e.target,{canvas:i,playControls:o}=this.$refs,s=this.$refs.fullscreenButton.$el;!i.contains(t)&&t!==i&&!o.contains(t)&&t!==o&&!s.contains(t)&&t!==s&&this.$emit("mousedown-outside-canvas")},callCallbackOnlyAfterBlurOnActiveInputElement:Qt,parseDataAndEmitDropEvent(){const e=le.getInstance().getData();V(e!==void 0,"dragDropDataTransfer is empty"),this.$emit("drop-on-player",e.payload)},setDropEffect(e){V(e.dataTransfer!==null,"DragEvent.dataTransfer is null"),e.dataTransfer.dropEffect="copy"},showDropZoneMarker(){this.isDropZoneMarkerVisible=!0},hideDropZoneMarker(){this.isDropZoneMarkerVisible=!1},onPlayerClick(){this.isFullscreenEnabled&&(this.isBrowserSupportsHover?this.togglePlay():this.isControlbarVisible?this.togglePlay():this.enableForcingControlbarVisibilityIfNecessary())},enableForcingControlbarVisibilityIfNecessary(){this.isBrowserSupportsHover||(this.isForceControlbarVisibility=!0,this.debouncedDisableForcingControlbarVisibility())},debouncedDisableForcingControlbarVisibility:_t(function(){this.isForceControlbarVisibility=!1},1500)}}),vd={key:0,class:"canvas-holder__preloader"},fd={class:"canvas-holder__area-for-snaps"},bd={class:"canvas-holder__area-for-unselected-components"},yd={class:"box-1"},Ed={ref:"playControls",class:"box-2"},Sd={class:"play-controls"},kd={class:"box-3"};function Cd(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppButton"),m=tt;return d(),h("div",{class:F(["cs-player",{"full-screen":e.isFullscreenEnabled}]),onMousedown:t[7]||(t[7]=f=>e.callCallbackOnlyAfterBlurOnActiveInputElement(()=>e.checkIfMouseDownOutsideCanvas(f)))},[p("div",{class:"cs-player-preview",onClick:t[6]||(t[6]=f=>e.onPlayerClick())},[p("div",{ref:"wrapper",class:"preview-container",onDrop:t[2]||(t[2]=_(f=>{e.parseDataAndEmitDropEvent(),e.hideDropZoneMarker()},["prevent"])),onDragover:t[3]||(t[3]=_((...f)=>e.setDropEffect&&e.setDropEffect(...f),["prevent"])),onDragenter:t[4]||(t[4]=_((...f)=>e.showDropZoneMarker&&e.showDropZoneMarker(...f),["prevent"])),onDragleave:t[5]||(t[5]=(...f)=>e.hideDropZoneMarker&&e.hideDropZoneMarker(...f))},[p("div",J({ref:"canvas",class:["canvas-holder no-select",{"canvas-holder--placeholder-marker-active":e.isDropZoneMarkerVisible}],style:{width:e.size.width!==0?`${e.size.width}px`:e.aspectRatioValue>1?"100%":void 0,height:e.size.height!==0?`${e.size.height}px`:e.aspectRatioValue<=1?"100%":void 0,background:e.background,aspectRatio:e.aspectRatioValue},"data-allow-mismatch":"style"},e.$attrs,{onMousedown:t[0]||(t[0]=_(f=>e.callCallbackOnlyAfterBlurOnActiveInputElement(()=>e.clickOnCanvas()),["stop"])),onTouchstart:t[1]||(t[1]=_((...f)=>e.clickOnCanvas&&e.clickOnCanvas(...f),["stop","prevent"]))}),[e.$slots.preloader!==void 0?(d(),h("div",vd,[w(e.$slots,"preloader")])):E("",!0),p("div",fd,[w(e.$slots,"snap-renderer")]),p("div",bd,[w(e.$slots,"default")]),p("div",{style:z(e.isInCropMode?{}:{opacity:0,pointerEvents:"none"})},[w(e.$slots,"crop-box")],4),p("div",{class:F(["canvas-holder__placeholder-marker",{"canvas-holder__placeholder-marker--active":e.isDropZoneMarkerVisible}])},null,2)],16)],544)]),p("div",{class:F(["cs-player-toolbar",{"cs-player-toolbar--visible":e.isControlbarVisible}])},[w(e.$slots,"timeline"),p("div",yd,[w(e.$slots,"timings")]),p("div",Ed,[p("div",Sd,[r(u,{variant:"icon","is-disabled":!e.isPlayAvailable,"fixed-width":64,"fixed-height":44,onClick:e.togglePlay},{default:n(()=>[r(a,{symbol:e.isPlaying?"pause-mobile":"play-mobile",width:24,height:24},null,8,["symbol"])]),_:1},8,["is-disabled","onClick"])])],512),p("div",kd,[r(m,null,{text:n(()=>[y(g(e.fullscreenTitle),1)]),anchor:n(()=>[r(u,{ref:"fullscreenButton",class:F(["btn-full-screen",{active:e.isFullscreenEnabled}]),variant:"icon","is-disabled":e.isFullscreenButtonDisabled&&!e.isFullscreenEnabled,onClick:e.toggleFullscreen},null,8,["class","is-disabled","onClick"])]),_:1})])],2)],34)}const Td=$(gd,[["render",Cd]]),$d=A({name:"app-console-menu-button",props:{tag:{type:String,default:"button"},isActive:{type:Boolean,default:!1},variant:{type:String,default:"default"}}}),wd={class:"app-console-menu-button__icon"},Ad={class:"app-console-menu-button__text"};function Md(e,t,i,o,s,l){return d(),S(In(e.tag),J({class:["app-console-menu-button",[{"app-console-menu-button--active":e.isActive},`app-console-menu-button--variant-${e.variant}`]]},e.$attrs),{default:n(()=>[p("span",wd,[w(e.$slots,"icon")]),p("span",Ad,[w(e.$slots,"text")])]),_:3},16,["class"])}const Wn=$($d,[["render",Md]]),Rd=A({name:"app-console-upload-button",components:{AppSvgSymbol:K},props:{variant:{type:String,default:"default"},allowedExtensions:{type:Array,required:!0}},emits:{"media-files-add-from-local":e=>!0},computed:{htmlPreparedAllowedExtensions(){return this.allowedExtensions.map(e=>`.${e}`).join(",")}},methods:{addFilesFromFilesystem(e){const t=[...e];this.$emit("media-files-add-from-local",t);const i=this.$refs.fileInput;i!==void 0&&(i.value="")}}}),Pd={class:"app-console-upload-button__icon"},Id=["accept"];function Ld(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=Wn;return d(),h("div",J({class:["app-console-upload-button",`app-console-upload-button--variant-${e.variant}`]},e.$attrs),[r(u,{variant:"upload-button",tag:"label",for:"app-console-upload-button-input","data-testid":"console-menu-button-upload"},{icon:n(()=>[p("div",Pd,[r(a,{symbol:"svg-main-navigation-tab-icon-upload","is-block":""})])]),_:1}),p("input",{id:"app-console-upload-button-input",ref:"fileInput",class:"app-console-upload-button__hidden-file-input",type:"file",multiple:"multiple",accept:e.htmlPreparedAllowedExtensions,onChange:t[0]||(t[0]=m=>e.addFilesFromFilesystem(m.target.files))},null,40,Id)],16)}const Od=$(Rd,[["render",Ld]]),Fd=A({name:"widget-crop-settings-strategy-presets-item",components:{AppButton:oe,AppSvgSymbol:K},props:{strategy:{type:String,required:!0},isActive:{type:Boolean,required:!0}},emits:{click:null},computed:{svgSymbol(){switch(this.strategy){case Qe.FREEFORM:return"crop-strategy-freeform";case Qe.ORIGINAL:return"crop-strategy-original";default:return}},tooltipText(){switch(this.strategy){case Qe.FREEFORM:return this.$t("widgetCropSettings.freeform");case Qe.ORIGINAL:return this.$t("widgetCropSettings.original");default:return}}}});function Dd(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppButton"),m=tt;return d(),h("div",{key:e.strategy,class:"widget-crop-settings-strategy-button"},[e.tooltipText&&e.svgSymbol?(d(),S(m,{key:0,align:"top"},{text:n(()=>[y(g(e.tooltipText),1)]),anchor:n(()=>[r(u,{"rounding-value":5,variant:"gray",size:"tiny","font-weight":500,"is-active":e.isActive,"fixed-height":34,class:"widget-crop-settings-strategy-presets-item__icon",onClick:t[0]||(t[0]=f=>e.$emit("click"))},{default:n(()=>[r(a,{height:18,width:18,symbol:e.svgSymbol},null,8,["symbol"])]),_:1},8,["is-active"])]),_:1})):(d(),S(u,{key:1,"rounding-value":5,variant:"gray",size:"tiny","font-weight":500,"is-active":e.isActive,"fixed-height":34,class:"widget-crop-settings-strategy-presets-item__text",onClick:t[1]||(t[1]=f=>e.$emit("click"))},{default:n(()=>[y(g(e.strategy),1)]),_:1},8,["is-active"]))])}const Vd=$(Fd,[["render",Dd]]),Nd=A({name:"app-input-range-line",props:{variant:{type:String,default:"default"},isHovered:{type:Boolean,default:!1}}});function Bd(e,t,i,o,s,l){return d(),h("div",{class:F(["app-input-range-line",[`app-input-range-line--variant-${e.variant}`,{"app-input-range-line--hovered":e.isHovered}]])},null,2)}const We=$(Nd,[["render",Bd]]),jd=A({name:"app-input-range-stick",props:{variant:{type:String,default:"round"},isTransparent:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},isHovered:{type:Boolean,default:!1}}});function zd(e,t,i,o,s,l){return d(),h("div",{class:F(["app-input-range-stick",[`app-input-range-stick--variant-${e.variant}`,{"app-input-range-stick--transparent":e.isTransparent,"app-input-range-stick--disabled":e.isDisabled,"app-input-range-stick--hovered":e.isHovered}]])},null,2)}const Ge=$(jd,[["render",zd]]),Hd=A({name:"app-input-range",props:{min:{type:Number,required:!0},max:{type:Number,required:!0},step:{type:Number,default:1},value:{type:Number,required:!0},isCenterMarkDisplayed:{type:Boolean,default:!1},isFillingLineDisplayed:{type:Boolean,default:!0},shouldFillLineFromCenter:{type:Boolean,default:!1},variant:{type:String,default:"default"},isStickCanStickOut:{type:Boolean,default:!1},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},hasTooltip:{type:Boolean,default:!1},isLabelGrayedOut:{type:Boolean,default:!1}},emits:{start:null,finish:null,change:e=>!0},data:()=>({isDragging:!1,cursorOriginalPosition:0,originalInnerValue:0,innerValue:0,lineRect:void 0,stickRect:void 0,isHovered:!1}),computed:{valuePerPixel(){if(this.lineRect===void 0||this.stickRect===void 0)return 0;let e;return this.direction==="horizontal"?e=this.lineRect.width:e=this.lineRect.height,this.isStickCanStickOut||(this.direction==="horizontal"?e-=this.stickRect.width:e-=this.stickRect.height),(this.max-this.min)/e},sliderStickOffset(){if(this.stickRect===void 0)return 0;let t=(this.innerValue-this.min)/this.valuePerPixel;return this.isStickCanStickOut&&(t-=this.direction==="horizontal"?this.stickRect.width/2:this.stickRect.height/2),Math.round(t)},fillingLineStyles(){if(this.stickRect===void 0)return{};if(this.shouldFillLineFromCenter){const t=((this.max+this.min)/2-this.min)/this.valuePerPixel,i=(this.innerValue-this.min)/this.valuePerPixel,o=Math.round(Math.min(t,i)),l=Math.round(Math.max(t,i))-o;return this.direction==="horizontal"?{left:`${o}px`,width:`${l}px`,marginLeft:`${Math.round(this.stickRect.width/2)}px`}:{top:`${o}px`,height:`${l}px`,marginTop:`${Math.round(this.stickRect.height/2)}px`}}return{width:`${this.sliderStickOffset}px`}},stickStyles(){return this.direction==="horizontal"?{transform:`translate3d(${this.sliderStickOffset}px, 0, 0)`}:{transform:`translate3d(0, ${this.sliderStickOffset}px, 0)`}},valueInPercents(){return(this.innerValue*100).toFixed(0)+"%"}},watch:{value:"updateInnerValueAndEmitChangeIfValueChanged",min:"updateInnerValueAndEmitChangeIfValueChanged",max:"updateInnerValueAndEmitChangeIfValueChanged"},mounted(){this.updateInnerValueAndEmitChangeIfValueChanged(),this.updateRects()},beforeUnmount(){this.unbindMouseEventListeners()},methods:{bindMouseEventListeners(){document.addEventListener("touchmove",this.moveCursor),document.addEventListener("mousemove",this.moveCursor),document.addEventListener("touchend",this.stopDragging),document.addEventListener("mouseup",this.stopDragging)},unbindMouseEventListeners(){document.removeEventListener("touchmove",this.moveCursor),document.removeEventListener("mousemove",this.moveCursor),document.removeEventListener("touchend",this.stopDragging),document.removeEventListener("mouseup",this.stopDragging)},updateRects(){const e=this.$refs.line,t=this.$refs.stick;this.lineRect=e.getBoundingClientRect(),this.stickRect=t.getBoundingClientRect()},saveCursorOriginalPosition(e){this.direction==="horizontal"?this.cursorOriginalPosition=e instanceof MouseEvent?e.pageX:e.touches[0].pageX:this.cursorOriginalPosition=e instanceof MouseEvent?e.pageY:e.touches[0].pageY,this.originalInnerValue=this.innerValue},startDragging(){this.isDragging=!0,window.onselectstart=()=>!1,this.$emit("start"),this.bindMouseEventListeners()},updateValueByClickOnLine(e){V(this.lineRect!==void 0,"lineRect is undefined"),V(this.stickRect!==void 0,"stickRect is undefined");let t,i,o;this.direction==="horizontal"?(t=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,i=this.lineRect.left,o=this.isStickCanStickOut?this.stickRect.width/2:0):(t=e instanceof MouseEvent?e.pageY:e.touches[0].pageY,i=this.lineRect.top,o=this.isStickCanStickOut?this.stickRect.height/2:0);const s=t-i-o,l=this.valuePerPixel*s,a=this.min,u=Math.round((l+a)/this.step)*this.step;this.originalInnerValue=Fi(u,this.min,this.max),this.cursorOriginalPosition=t,this.emitChangeIfValueChanged(u)},stopDragging(){window.onselectstart=()=>!0,this.isDragging&&(this.isDragging=!1,this.$emit("finish")),this.unbindMouseEventListeners()},moveCursor(e){let t;this.direction==="horizontal"?t=e instanceof MouseEvent?e.pageX:e.touches[0].pageX:t=e instanceof MouseEvent?e.pageY:e.touches[0].pageY;const i=t-this.cursorOriginalPosition,o=this.valuePerPixel*i,s=Math.round((this.originalInnerValue+o)/this.step)*this.step;this.emitChangeIfValueChanged(s)},emitChangeIfValueChanged(e){const t=Fi(e,this.min,this.max);this.value!==t&&(this.innerValue=t,this.emitChange(t))},emitChange(e){this.$emit("change",e)},updateInnerValueAndEmitChangeIfValueChanged(){if(this.isDragging)return;const e=Fi(this.value,this.min,this.max);this.innerValue=e,this.value!==e&&this.emitChange(e)}}}),_d={key:0,class:"app-input-range__info"},Ud={key:0,class:"app-input-range__title"},qd={key:1,class:"app-input-range__center-mark"};function Wd(e,t,i,o,s,l){return d(),h("div",{class:F(["app-input-range",[`app-input-range--direction-${e.direction}`,`app-input-range--variant-${e.variant}`]])},[e.$slots.title!==void 0||e.$slots.label!==void 0?(d(),h("div",_d,[e.$slots.title!==void 0?(d(),h("div",Ud,[w(e.$slots,"title")])):E("",!0),e.$slots.label!==void 0?(d(),h("div",{key:1,class:F(["app-input-range__label",{"app-input-range__label--gray":e.isLabelGrayedOut}])},[w(e.$slots,"label")],2)):E("",!0)])):E("",!0),p("div",{class:F(["app-input-range__slider",{"app-input-range__slider--hovered":e.isHovered||e.isDragging}]),onMouseenter:t[4]||(t[4]=a=>e.isHovered=!0),onTouchstart:t[5]||(t[5]=_(a=>e.isHovered=!0,["prevent"])),onMouseleave:t[6]||(t[6]=a=>e.isHovered=!1),onTouchend:t[7]||(t[7]=_(a=>e.isHovered=!1,["prevent"]))},[p("div",{ref:"line",class:"app-input-range__line",onMousedown:t[0]||(t[0]=a=>{e.updateRects(),e.startDragging(),e.updateValueByClickOnLine(a)}),onTouchstart:t[1]||(t[1]=_(a=>{e.updateRects(),e.startDragging(),e.updateValueByClickOnLine(a)},["prevent"]))},[w(e.$slots,"line",{isHovered:e.isHovered||e.isDragging})],544),e.isFillingLineDisplayed?(d(),h("div",{key:0,class:"app-input-range__filling-line",style:z(e.fillingLineStyles)},null,4)):E("",!0),e.isCenterMarkDisplayed?(d(),h("div",qd)):E("",!0),e.hasTooltip&&e.direction==="horizontal"&&e.isDragging?(d(),h("div",{key:2,class:"app-input-range__tooltip-badge",style:z(e.stickStyles)},g(e.valueInPercents),5)):E("",!0),p("div",{ref:"stick",class:"app-input-range__stick",style:z(e.stickStyles),onMousedown:t[2]||(t[2]=a=>{e.updateRects(),e.startDragging(),e.saveCursorOriginalPosition(a)}),onTouchstart:t[3]||(t[3]=_(a=>{e.updateRects(),e.startDragging(),e.saveCursorOriginalPosition(a)},["prevent"]))},[w(e.$slots,"stick",{isHovered:e.isHovered||e.isDragging})],36)],34)],2)}const Xe=$(Hd,[["render",Wd]]),Gd=A({name:"widget-crop-settings",components:{AppButton:oe,AppSvgSymbol:K},props:{rotateAngle:{type:Number,required:!0},strategy:{type:String,required:!0},isMobile:{type:Boolean,required:!0}},emits:["rotate-angle-change-start","rotate-angle-change","rotate-angle-change-finish","revert-to-original","strategy-change","apply"],data(){return{strategies:Object.values(Qe)}},computed:{rotateAngleDisplayed(){return Math.round(this.rotateAngle)}}}),Xd={class:"widget-crop-settings"},Yd={key:0,class:"widget-crop-settings-titlebar"},Kd={class:"widget-crop-settings-titlebar__title"},Zd={class:"widget-crop-settings-titlebar__apply-button"};function Qd(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppButton"),m=tt,f=Vd,b=We,T=Ge,C=Xe;return d(),h("div",Xd,[e.isMobile?E("",!0):(d(),h("div",Yd,[p("div",Kd,g(e.$t("widgetCropSettings.crop")),1),p("div",Zd,[r(m,{align:"top"},{text:n(()=>[y(g(e.$t("widgetCropSettings.done")),1)]),anchor:n(()=>[r(u,{variant:"icon","fixed-height":20,"fixed-width":20,onClick:t[0]||(t[0]=M=>e.$emit("apply"))},{icon:n(()=>[r(a,{width:20,height:20,symbol:"check-mark"})]),_:1})]),_:1})])])),p("div",{class:F({"widget-crop-settings-content-wrapper":!0,"widget-crop-settings-content-wrapper--desktop":!e.isMobile})},[p("div",{class:F({"widget-crop-settings-content":!0,"widget-crop-settings-content--mobile":e.isMobile,"widget-crop-settings-content--desktop":!e.isMobile})},[p("div",{class:F({"widget-crop-settings-presets":!0,"widget-crop-settings-presets--mobile":e.isMobile,"widget-crop-settings-presets--desktop":!e.isMobile})},[(d(!0),h(N,null,q(e.strategies,M=>(d(),S(f,{key:M,strategy:M,"is-active":M===e.strategy,class:"widget-crop-settings-presets__item",onClick:L=>e.$emit("strategy-change",M)},null,8,["strategy","is-active","onClick"]))),128))],2),r(C,{max:180,min:-180,step:1,value:e.rotateAngle,"is-filling-line-displayed":!0,"is-center-mark-displayed":!1,"should-fill-line-from-center":!0,onStart:t[1]||(t[1]=M=>e.$emit("rotate-angle-change-start")),onChange:t[2]||(t[2]=M=>e.$emit("rotate-angle-change",M)),onFinish:t[3]||(t[3]=M=>e.$emit("rotate-angle-change-finish"))},{title:n(()=>[y(g(e.$t("widgetCropSettings.rotate")),1)]),label:n(()=>[y(g(`${e.rotateAngleDisplayed}°`),1)]),line:n(M=>[r(b,{"is-hovered":M.isHovered},null,8,["is-hovered"])]),stick:n(M=>[r(T,{"is-hovered":M.isHovered},null,8,["is-hovered"])]),_:1},8,["value"]),p("div",{class:F({"widget-crop-settings-revert-to-original":!0,"widget-crop-settings-revert-to-original--mobile":e.isMobile,"widget-crop-settings-revert-to-original--desktop":!e.isMobile})},[r(u,{variant:"gray",size:"tiny","font-weight":500,class:"widget-crop-settings-revert-to-original__button",onClick:t[4]||(t[4]=M=>e.$emit("revert-to-original"))},{default:n(()=>[y(g(e.$t("widgetCropSettings.revertToOriginal")),1)]),_:1})],2)],2)],2)])}const Jd=$(Gd,[["render",Qd]]),xd=""+new URL("track-element-selected-two.QmASIf5S.png",import.meta.url).href,eu=""+new URL("track-element-selected-three.Cq4YJZrZ.png",import.meta.url).href,tu=""+new URL("track-element-selected-four.LHb9qYPQ.png",import.meta.url).href,iu=""+new URL("track-element-selected-five-or-more.C5HiLbcN.png",import.meta.url).href,ou=A({name:"app-console-track-element-selected-count",props:{count:{type:Number,required:!0}},computed:{imageSrc(){return this.count>=5?iu:this.count===4?tu:this.count===3?eu:this.count===2?xd:null}}}),nu={class:"app-console-track-element-selected-count"},su=["src"],au={class:"app-console-track-element-selected-count__message"};function ru(e,t,i,o,s,l){return d(),h("div",nu,[e.imageSrc?(d(),h("img",{key:0,width:"104",height:"42",src:e.imageSrc},null,8,su)):E("",!0),p("div",au,g(e.$t("appConsoleSelectedCount.message",e.count)),1)])}const lu=$(ou,[["render",ru]]),du=A({name:"app-aspect-ratio",props:{ratio:{type:String,required:!0,validator(e){return e.split(":").map(t=>Number(t)).every(t=>!Number.isNaN(t))}}},data(){return{widthRatio:0,heightRatio:0}},computed:{rootStyles(){return{paddingTop:`${this.heightRatio/this.widthRatio*100}%`}}},created(){const[e,t]=this.ratio.split(":").map(i=>Number(i));this.widthRatio=e,this.heightRatio=t}}),uu={class:"app-aspect-ratio__content"};function pu(e,t,i,o,s,l){return d(),h("div",{class:"app-aspect-ratio",style:z(e.rootStyles)},[p("div",uu,[w(e.$slots,"default")])],4)}const cu=$(du,[["render",pu]]),mu=A({name:"app-console-media-element",props:{isDragPreview:{type:Boolean,default:!1},status:{type:String,validator:e=>typeof e=="string"&&["initializing","uploading","preparing","ready"].includes(e),default:"ready"},isPlayable:{type:Boolean,default:!1},uploadProgress:{type:Number,default:0},name:{type:String,required:!0},duration:{type:Number,default:0},previewImage:{type:String,default:void 0},type:{type:String,default:"image"},isAudioFromText:{type:Boolean,default:!1},isButtonsHidden:{type:Boolean,default:!1},previewAspectRatio:{type:String,default:"175:100"}},emits:{"playable-status-change":e=>!0},computed:{formattedDuration(){return Ue(this.duration)},isDurationVisible(){return this.type!==De.IMAGE&&this.duration!==0}},watch:{isPlayable:{handler(e){this.$emit("playable-status-change",e)},immediate:!0}}}),hu={class:"app-console-media-element__cover"},gu={key:0,class:"app-console-media-element__duration"},vu={key:1,class:"app-console-media-element__remove-button"},fu={key:2,class:"app-console-media-element__add-button"},bu={class:"app-console-media-element__text"},yu={class:"app-console-media-element__name"};function Eu(e,t,i,o,s,l){const a=cu;return d(),h("div",J({class:["app-console-media-element",[{"app-console-media-element--playable":e.isPlayable,"app-console-media-element--drag-preview":e.isDragPreview,"app-console-media-element--buttons-hidden":e.isButtonsHidden,"app-console-media-element--audio-from-text":e.isAudioFromText},`app-console-media-element--type-${e.type}`,`app-console-media-element--status-${e.status}`]]},e.$attrs),[r(a,{ratio:e.previewAspectRatio},{default:n(()=>[p("div",hu,[e.isDurationVisible?(d(),h("div",gu,g(e.formattedDuration),1)):E("",!0),p("div",{class:"app-console-media-element__preview-image",style:z({backgroundImage:e.type!=="audio"&&e.previewImage!==void 0&&e.isPlayable?`url(${e.previewImage})`:void 0})},null,4),e.$slots["remove-button"]!==void 0?(d(),h("div",vu,[w(e.$slots,"remove-button")])):E("",!0),e.$slots["add-button"]!==void 0?(d(),h("div",fu,[w(e.$slots,"add-button")])):E("",!0),p("div",bu,[e.status==="uploading"?(d(),h(N,{key:0},[y(g(e.$t("appConsoleMediaElement.uploading"))+" "+g(e.uploadProgress)+"% ",1)],64)):e.status==="preparing"?(d(),h(N,{key:1},[y(g(e.$t("appConsoleMediaElement.preparing")),1)],64)):E("",!0)]),p("div",{class:"app-console-media-element__uploading-determinate-progress-bar",style:z({width:`${e.uploadProgress}%`})},null,4),p("div",{class:"app-console-media-element__uploading-shade-overlay",style:z({width:e.status==="uploading"?`${100-e.uploadProgress}%`:void 0})},null,4),t[0]||(t[0]=p("div",{class:"app-console-media-element__uploading-indeterminate-progress-bar"},null,-1))])]),_:3},8,["ratio"]),p("div",yu,g(e.name),1)],16)}const Su=$(mu,[["render",Eu]]),ku=A({name:"app-drag-drop-element",props:{draggableId:{type:String,default:void 0},dragDropEventEmitter:{type:Object,default:void 0},draggableData:{type:Object,required:!0},isSourceElementHidingRequired:{type:Boolean,required:!0},forceDisabled:{type:Boolean,default:!1},isHasSelectedMany:{type:Boolean,default:!1}},emits:["before-drag-stop","drag-start","drag-stop"],data(){return{initialDistanceX:0,initialDistanceY:0,sourceRect:void 0,preview:{width:0,height:0,top:0,left:0},isPreviewVisible:!1,isDropAllowed:!0,isDragEnabled:!0,isDragging:!1,isDraggingOrigin:!1}},watch:{dragDropEventEmitter:{immediate:!0,handler(e,t){t!==void 0&&this.unbindSyntheticEventListeners(t),e!==void 0&&(this.unbindSyntheticEventListeners(e),this.bindSyntheticEventListeners(e))}}},beforeUnmount(){this.dragDropEventEmitter!==void 0&&this.unbindSyntheticEventListeners(this.dragDropEventEmitter),this.unbindNativeDragOverListener(),this.cancelThrottledHandleDragEnd()},methods:{updateDataTransfer(e,t){const i=le.getInstance(),o=i.getData()?.lastDropTargetDOMElement,s={movingOffsetX:e,movingOffsetY:t,offsetX:this.initialDistanceX,offsetY:this.initialDistanceY,previewHeight:this.preview.height,previewWidth:this.preview.width,sourceRect:this.sourceRect,payload:this.draggableData,allowDrop:this.allowDrop,disallowDrop:this.disallowDrop,lastDropTargetDOMElement:o,isDraggingMultipleElements:this.isHasSelectedMany};i.setData(s)},unbindSyntheticEventListeners(e){e.off("drag-start",this.onSyntheticDragStart),e.off("drag-over",this.onSyntheticDragOver),e.off("drag-end",this.onSyntheticDragEnd)},bindSyntheticEventListeners(e){e.on("drag-start",this.onSyntheticDragStart),e.on("drag-over",this.onSyntheticDragOver),e.on("drag-end",this.onSyntheticDragEnd)},emitSyntheticDragEventFromNative(e,t){V(this.sourceRect!==void 0,"no source rect");const{clientX:i,clientY:o}=t;let s=i-this.sourceRect.x,l=o-this.sourceRect.y;e==="drag-start"?(this.initialDistanceX=s,this.initialDistanceY=l,s=0,l=0):(s-=this.initialDistanceX,l-=this.initialDistanceY);const a={originDraggableId:this.draggableId,originSourceRect:this.sourceRect,clientX:i,clientY:o,distanceX:s,distanceY:l};if(this.dragDropEventEmitter!==void 0){this.dragDropEventEmitter.fire(e,a);return}{const u=new ue;try{this.bindSyntheticEventListeners(u),u.fire(e,a)}finally{this.unbindSyntheticEventListeners(u)}}},onNativeDragStart(e){this.nativeDataTransferHack(e),this.sourceRect=DOMRectReadOnly.fromRect(this.$el.getBoundingClientRect()),this.isDraggingOrigin=!0,this.emitSyntheticDragEventFromNative("drag-start",e),this.bindNativeDragOverListener()},onNativeDragOver(e){this.emitSyntheticDragEventFromNative("drag-over",e)},onNativeDragEnd(e){this.$emit("before-drag-stop",e),this.emitSyntheticDragEventFromNative("drag-end",e),this.isDraggingOrigin=!1,this.unbindNativeDragOverListener()},onSyntheticDragStart(e){this.isDraggingOrigin||(this.sourceRect=DOMRectReadOnly.fromRect(this.$el.getBoundingClientRect())),this.updateCurrentSize(),this.updatePreviewPosition(e),this.isPreviewVisible=!0,this.isDragging=!0,this.isDraggingOrigin&&(this.updateDataTransfer(e.data.distanceX,e.data.distanceY),this.$emit("drag-start"))},onSyntheticDragOver(e){this.isDraggingOrigin&&this.updateDataTransfer(e.data.distanceX,e.data.distanceY),this.updatePreviewPosition(e)},onSyntheticDragEnd(){this.isDragging=!1,this.isPreviewVisible=!1,this.isDraggingOrigin&&(le.getInstance().flushData(),this.$emit("drag-stop")),this.cancelThrottledHandleDragEnd()},updateCurrentSize(){const e=this.$refs.source;V(e.firstElementChild!==null,"preview.firstElementChild is undefined"),this.preview.width=e.firstElementChild.clientWidth,this.preview.height=e.firstElementChild.clientHeight},allowDrop(){this.isDropAllowed=!0},disallowDrop(){this.isDropAllowed=!1},async nativeDataTransferHack(e){V(e.dataTransfer!==null,"DragEvent.dataTransfer is null"),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text","");const t=new Image;t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",await this.$nextTick(),e.dataTransfer.setDragImage(t,0,0)},bindNativeDragOverListener(){window.addEventListener("dragover",this.onNativeDragOver)},unbindNativeDragOverListener(){window.removeEventListener("dragover",this.onNativeDragOver)},updatePreviewPosition(e){V(this.sourceRect!==void 0,"cant update preview position without source rect"),this.preview.top=this.sourceRect.y+e.data.distanceY,this.preview.left=this.sourceRect.x+e.data.distanceX},enableDrag(){this.isDragEnabled=!0},disableDrag(){this.isDragEnabled=!1},...(()=>{const e=ut(function(t){this.onNativeDragEnd(t)},dt.FOUR_FRAMES_PER_SECOND,{leading:!1,trailing:!0});return{throttledHandleDragEnd:e,cancelThrottledHandleDragEnd:e.cancel}})()}}),Cu=["draggable"];function Tu(e,t,i,o,s,l){return d(),h("div",{class:F(["app-drag-drop-element",{"app-drag-drop-element--drag-enabled":e.isDragEnabled}]),draggable:e.isDragEnabled?"true":void 0,onDragstart:t[0]||(t[0]=(...a)=>e.onNativeDragStart&&e.onNativeDragStart(...a)),onDragend:t[1]||(t[1]=(...a)=>e.onNativeDragEnd&&e.onNativeDragEnd(...a)),onTouchend:t[2]||(t[2]=(...a)=>e.throttledHandleDragEnd&&e.throttledHandleDragEnd(...a))},[p("div",{ref:"source",class:F(["app-drag-drop-element__source",{"app-drag-drop-element__source--hidden":e.isPreviewVisible&&e.isSourceElementHidingRequired}])},[w(e.$slots,"default",{enableDrag:e.enableDrag,disableDrag:e.disableDrag,isDragging:e.isDragging})],2),e.isPreviewVisible?(d(),S(Ci,{key:0,to:"#teleport-target-drag-preview"},[p("div",{class:F(["app-drag-drop-element-preview",{"app-drag-drop-element-preview__grayscaled":!e.isDropAllowed||e.forceDisabled}]),style:z({width:`${e.preview.width}px`,height:`${e.preview.height}px`,transform:`translate3d(${e.preview.left}px, ${e.preview.top}px, 0)`})},[w(e.$slots,"preview")],6)])):E("",!0)],42,Cu)}const ei=$(ku,[["render",Tu]]),$u=A({name:"app-console-catalog",props:{itemVariant:{type:String,default:"text",validator:e=>["text","media"].includes(e)}},methods:{sortSlots:Jt}}),wu={class:"app-console-catalog"};function Au(e,t,i,o,s,l){return d(),h("div",wu,[(d(!0),h(N,null,q(e.sortSlots(e.$slots),(a,u)=>(d(),h("div",{key:u,class:F(["app-console-catalog__item",[`app-console-catalog__item--variant-${e.itemVariant}`]])},[w(e.$slots,u)],2))),128))])}const Mu=$($u,[["render",Au]]),Ru=A({name:"app-console-media-placeholder-icon",props:{isHovered:{type:Boolean,default:!1},isAnimateOnMount:{type:Boolean,default:!1}},data(){return{isForceHovered:!1,animateOnMountTimerId:0}},mounted(){this.isAnimateOnMount&&(this.animateOnMountTimerId=window.setTimeout(()=>{this.isForceHovered=!0;const e=this.$refs.arrowTop;Promise.race([new Promise(t=>e.addEventListener("animationend",t,{once:!0})),io(1e3)]).finally(()=>{this.isForceHovered=!1})},2e3))},beforeUnmount(){window.clearTimeout(this.animateOnMountTimerId)}}),Pu={transform:"translate(3 6)","clip-path":"url(#eFXrEOTKQRi30)"},Iu={mask:"url(#eFXrEOTKQRi18)"},Lu={ref:"arrowTop",class:"app-console-media-placeholder-icon__arrow-top",transform:"translate(21,62)"};function Ou(e,t,i,o,s,l){return d(),h("svg",{class:F(["app-console-media-placeholder-icon",{"app-console-media-placeholder-icon--hovered":e.isHovered||e.isForceHovered}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","shape-rendering":"geometricPrecision","text-rendering":"geometricPrecision"},[t[4]||(t[4]=Ht('<g transform="translate(2.5 5.5)"><path d="M41.75,20.5c0,4.45-2.29,6.96-4.81,8.42-2.6,1.5-5.38,1.83-5.94,1.83c0,0,0,2.5,0,2.5.94,0,4.16-.42,7.19-2.17c3.1-1.79,6.06-5.03,6.06-10.58c0,0-2.5,0-2.5,0s0,0,0,0Z"></path><path d="M33,8.5c-.19,1.24-.19,1.24-.19,1.24s0,0,0,0s0,0,0,0s0,0,0,0s0,0,.01,0s.03,0,.06.01c.06.01.16.02.28.05.24.05.59.15,1.02.29.86.28,1.99.75,3.12,1.51c2.22,1.5,4.45,4.13,4.45,8.9c0,0,2.5,0,2.5,0c0-5.73-2.77-9.09-5.55-10.97-1.37-.93-2.73-1.49-3.75-1.82-.51-.17-.94-.27-1.25-.34-.15-.03-.27-.06-.36-.08-.04-.01-.08-.02-.11-.02-.01,0-.02,0-.03,0c0,0-.01-.01-.01-.01s0,0,0,0s0,0,0,0s0,0-.19,1.24c0,0,0,0,0,0Z"></path><path d="M21.5,1.25c4.04,0,6.59,1.88,8.16,3.79C30.45,6,31,6.97,31.34,7.7c.17.36.28.67.36.87.04.1.06.18.08.23.01.02.02.04.02.05c0,0,0,.01,0,.01s0,0,0,0s0-.01,0-.01s0,0,0,0s0,0,1.2-.35s1.2-.35,1.2-.35s0-.01,0-.01s0,0,0,0-.01-.01-.01-.01c0-.01,0-.02,0-.03-.01-.02-.02-.05-.03-.09-.02-.08-.06-.18-.11-.31-.1-.26-.25-.63-.45-1.06-.41-.87-1.05-2.02-2.01-3.18-1.93-2.34-5.13-4.71-10.09-4.71c0,0,0,2.5,0,2.5s0,0,0,0Z"></path><path d="M10,8.5c1.2.35,1.2.35,1.2.35s0,0,0,0s0,.01,0,.01s0,0,0,0s0-.01,0-.01c0-.01.01-.03.02-.05.02-.05.04-.13.08-.23.08-.2.19-.51.36-.87.34-.73.89-1.7,1.68-2.66c1.57-1.91,4.12-3.79,8.16-3.79c0,0,0-2.5,0-2.5-4.96,0-8.16,2.37-10.09,4.71-.96,1.16-1.6,2.31-2.01,3.18-.2.43-.35.8-.45,1.06-.05.13-.09.23-.11.31-.01.04-.02.07-.03.09c0,.01,0,.02,0,.03c0,0-.01.01-.01.01s0,0,0,0s0,.01,0,.01s0,0,1.2.35c0,0,0,0,0,0Z"></path><path d="M1.25,20.5c0-4.77,2.23-7.4,4.45-8.9c1.13-.76,2.26-1.23,3.12-1.51.43-.14.78-.24,1.02-.29.12-.03.22-.04.28-.05.03-.01.05-.01.06-.01s.01,0,.01,0s0,0,0,0s0,0,0,0s0,0,0,0s0,0-.19-1.24-.19-1.24-.19-1.24s0,0,0,0s0,0,0,0-.01.01-.01.01c-.01,0-.02,0-.03,0-.03,0-.07.01-.11.02-.09.02-.21.05-.36.08-.31.07-.74.17-1.25.34-1.02.33-2.38.89-3.75,1.82-2.78,1.88-5.55,5.24-5.55,10.97c0,0,2.5,0,2.5,0s0,0,0,0Z"></path><path d="M12,30.75c-.56,0-3.34-.33-5.94-1.83-2.52-1.46-4.81-3.97-4.81-8.42c0,0-2.5,0-2.5,0c0,5.55,2.96,8.79,6.06,10.58c3.03,1.75,6.25,2.17,7.19,2.17c0,0,0-2.5,0-2.5s0,0,0,0Z"></path><path d="M31,30.75c-.69,0-1.25.56-1.25,1.25s.56,1.25,1.25,1.25c0,0,0-2.5,0-2.5s0,0,0,0Z"></path><path d="M33,8.5c0,0-1.2.35-1.2.35.14.47.53.82,1.01.89c0,0,.19-1.24.19-1.24s0,0,0,0Z"></path><path d="M10,8.5c0,0,.19,1.24.19,1.24.48-.07.87-.42,1.01-.89c0,0-1.2-.35-1.2-.35s0,0,0,0Z"></path><path d="M12,33.25c.69,0,1.25-.56,1.25-1.25s-.56-1.25-1.25-1.25c0,0,0,2.5,0,2.5s0,0,0,0Z"></path></g>',1)),p("g",Pu,[p("g",Iu,[p("g",Lu,t[0]||(t[0]=[p("g",{transform:"translate(-7.61,-12)"},[p("path",{d:"M7.61,3.02c0,0-5.48,5.48-5.48,5.48-.49.49-1.27.49-1.76,0s-.49-1.28,0-1.77c0,0,6.36-6.36,6.36-6.36.13-.13.27-.23.43-.29.45-.17.98-.07,1.34.29c0,0,6.36,6.36,6.36,6.36.49.49.49,1.28,0,1.77s-1.28.49-1.77,0c0,0-5.48-5.48-5.48-5.48s0,0,0,0Z"}),p("path",{d:"M6.36,1.25C6.36,0.56,6.92,0,7.61,0s1.25.56,1.25,1.25c0,0,0,21.5,0,21.5c0,.69-.56,1.25-1.25,1.25s-1.25-.56-1.25-1.25c0,0,0-21.5,0-21.5s0,0,0,0Z"})],-1)]),512),t[1]||(t[1]=p("mask",{id:"eFXrEOTKQRi18","mask-type":"alpha",x:"-150%",y:"-150%",height:"400%",width:"400%"},[p("g",null,[p("path",{d:"M33,12c0,6.63-5.37,12-12,12s-12-5.37-12-12s5.37-12,12-12s12,5.37,12,12c0,0,0,0,0,0Z"}),p("path",{d:"M0,20.5C0,13.6,5.6,8,12.5,8c0,0,17,0,17,0C36.4,8,42,13.6,42,20.5c0,0,0,1,0,1C42,30.06,35.06,37,26.5,37c0,0-11,0-11,0C6.94,37,0,30.06,0,21.5c0,0,0-1,0-1s0,0,0,0Z"})])],-1))]),t[2]||(t[2]=p("g",{mask:"url(#eFXrEOTKQRi26)"},[p("g",{class:"app-console-media-placeholder-icon__arrow-bottom",transform:"translate(21,25)"},[p("g",{transform:"translate(-7.61,-12)"},[p("path",{d:"M7.61,3.02c0,0-5.48,5.48-5.48,5.48-.49.49-1.27.49-1.76,0s-.49-1.28,0-1.77c0,0,6.36-6.36,6.36-6.36.13-.13.27-.23.43-.29.45-.17.98-.07,1.34.29c0,0,6.36,6.36,6.36,6.36.49.49.49,1.28,0,1.77s-1.28.49-1.77,0c0,0-5.48-5.48-5.48-5.48s0,0,0,0Z"}),p("path",{d:"M6.36,1.25C6.36,0.56,6.92,0,7.61,0s1.25.56,1.25,1.25c0,0,0,21.5,0,21.5c0,.69-.56,1.25-1.25,1.25s-1.25-.56-1.25-1.25c0,0,0-21.5,0-21.5s0,0,0,0Z"})])]),p("mask",{id:"eFXrEOTKQRi26","mask-type":"alpha",x:"-150%",y:"-150%",height:"400%",width:"400%"},[p("g",null,[p("path",{d:"M33,12c0,6.63-5.37,12-12,12s-12-5.37-12-12s5.37-12,12-12s12,5.37,12,12c0,0,0,0,0,0Z"}),p("path",{d:"M0,20.5C0,13.6,5.6,8,12.5,8c0,0,17,0,17,0C36.4,8,42,13.6,42,20.5c0,0,0,1,0,1C42,30.06,35.06,37,26.5,37c0,0-11,0-11,0C6.94,37,0,30.06,0,21.5c0,0,0-1,0-1s0,0,0,0Z"})])])],-1)),t[3]||(t[3]=p("clipPath",{id:"eFXrEOTKQRi30"},[p("rect",{width:"48",height:"48",rx:"0",ry:"0",fill:"none"})],-1))])],2)}const Gn=$(Ru,[["render",Ou]]),Fu=A({name:"app-console-media-placeholder",props:{isInactive:{type:Boolean,default:!1},allowedExtensions:{type:Array,required:!0}},emits:["media-files-add-from-local"],data(){return{isHovered:!1,isTouchStartBefore:!1}},computed:{htmlPreparedAllowedExtensions(){return this.allowedExtensions.map(e=>`.${e}`).join(",")}},methods:{addFilesFromFilesystem(e){const t=[...e];this.$emit("media-files-add-from-local",t);const i=this.$refs.fileInput;i!==void 0&&(i.value="")}}}),Du={class:"app-console-media-placeholder__icon"},Vu={class:"app-console-media-placeholder__text1"},Nu={class:"app-console-media-placeholder__text2"},Bu=["accept"];function ju(e,t,i,o,s,l){const a=Gn;return d(),h("label",{class:F(["app-console-media-placeholder",{"app-console-media-placeholder--inactive":e.isInactive}]),onTouchstart:t[1]||(t[1]=u=>e.isTouchStartBefore=!0),onMouseenter:t[2]||(t[2]=u=>{e.isTouchStartBefore||(e.isHovered=!0),e.isTouchStartBefore=!1}),onMouseleave:t[3]||(t[3]=u=>{e.isHovered=!1,e.isTouchStartBefore=!1})},[p("span",Du,[r(a,{"is-hovered":e.isHovered},null,8,["is-hovered"])]),p("span",Vu,g(e.$t("appConsoleMediaPlaceholder.text1")),1),p("span",Nu,g(e.$t("appConsoleMediaPlaceholder.text2")),1),p("input",{ref:"fileInput",class:"app-console-media-placeholder__hidden-file-input",type:"file",multiple:"multiple",accept:e.htmlPreparedAllowedExtensions,onChange:t[0]||(t[0]=u=>e.addFilesFromFilesystem(u.target.files))},null,40,Bu)],34)}const zu=$(Fu,[["render",ju]]),Hu=A({name:"app-modal-content-upload-button",props:{isLoading:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},roundedEdges:{type:String,default:"none"}},computed:{borderRadiusStyle(){if(this.roundedEdges==="left")return"5px 0 0 5px";if(this.roundedEdges==="right")return"0 5px 5px 0"}}}),_u={class:"app-modal-content-upload-button__icon"};function Uu(e,t,i,o,s,l){return d(),h("button",J({class:["app-modal-content-upload-button",{"app-modal-content-upload-button--loading":e.isLoading,"app-modal-content-upload-button--disabled":e.isDisabled}],style:{borderRadius:e.borderRadiusStyle}},e.$attrs),[p("span",_u,[w(e.$slots,"default")])],16)}const qu=$(Hu,[["render",Uu]]),Wu=A({name:"app-console-media-import-bar",props:{isMobile:{type:Boolean,default:!1}},methods:{sortSlots:Jt}});function Gu(e,t,i,o,s,l){return d(),h("div",J({class:["app-console-media-import-bar",{"app-console-media-import-bar--mobile":e.isMobile}]},e.$attrs),[(d(!0),h(N,null,q(e.sortSlots(e.$slots),(a,u)=>(d(),h("div",{key:u,class:"app-console-media-import-bar__item"},[w(e.$slots,u)]))),128))],16)}const Xu=$(Wu,[["render",Gu]]),Yu=A({name:"app-console-text-element",components:{AppSvgSymbol:K},props:{isDragPreview:{type:Boolean,default:!1},preset:{type:Object,required:!0},appLayout:{type:String,required:!0}}}),Ku={key:0,class:"app-console-text-element__add-button"};function Zu(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",J({class:["app-console-text-element",[{"app-console-text-element--drag-preview":e.isDragPreview},`app-console-text-element--type-${e.preset.type}`]]},e.$attrs),[e.$slots["add-button"]!==void 0?(d(),h("div",Ku,[w(e.$slots,"add-button")])):E("",!0),r(a,{symbol:`text-preset-${e.appLayout}-${e.preset.type}`,width:120,height:74,class:"app-console-text-element__preview--image","is-block":""},null,8,["symbol"])],16)}const Qu=$(Yu,[["render",Zu]]),Ju=A({name:"app-audio-button",props:{sourceUrl:{type:String,default:void 0},isLoading:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},siblingPlayEventEmitter:{type:Object,default:void 0}},emits:["load"],data(){return{isPlaying:!1,currentTime:0,playPromise:void 0,isWaitingToPlay:!1,isWaitingToStop:!1}},watch:{sourceUrl(e){e!==void 0&&this.togglePlay()}},mounted(){document.addEventListener("visibilitychange",this.pauseIfHidden),this.siblingPlayEventEmitter!==void 0&&this.siblingPlayEventEmitter.on("start-play",this.handleOtherAudioPlaying)},beforeUnmount(){this.siblingPlayEventEmitter!==void 0&&this.siblingPlayEventEmitter.off("start-play",this.handleOtherAudioPlaying),document.removeEventListener("visibilitychange",this.pauseIfHidden)},methods:{load(){this.isLoading||this.$emit("load")},togglePlay(){this.isPlaying?this.pause():this.play()},pauseIfHidden(){document.visibilityState==="hidden"&&this.pause()},handleOtherAudioPlaying(e){this.isPlaying&&e.data!==this.sourceUrl&&this.pause()},async play(){if(this.isWaitingToPlay||this.$refs.player===void 0)return;this.isPlaying=!0,this.isWaitingToPlay=!0,await this.playPromise;const e=this.$refs.player;e.src!==this.sourceUrl&&(e.src=this.sourceUrl??""),this.playPromise=e.play(),this.isWaitingToPlay=!1},async pause(e=!0){if(this.isWaitingToStop||this.$refs.player===void 0)return;this.isPlaying=!1,this.isWaitingToStop=!0,await this.playPromise,this.isWaitingToStop=!1;const t=this.$refs.player;t.pause(),e&&(this.setCurrentTime(0),t.src="",t.load())},setCurrentTime(e){if(this.$refs.player===void 0)return;const t=this.$refs.player;t.currentTime=e/1e3,this.currentTime=e},pauseOnExternalEvent(){this.isPlaying&&this.pause()}}});function xu(e,t,i,o,s,l){return d(),h("button",J({class:["app-audio-button",[{"app-audio-button--playing":e.isPlaying,"app-audio-button--loading":e.isLoading,"app-audio-button--disabled":e.isDisabled}]]},e.$attrs,{onClick:t[1]||(t[1]=a=>e.sourceUrl===void 0?e.load():e.togglePlay())}),[t[2]||(t[2]=Ht('<span class="app-audio-button__play"><svg class="app-audio-button__play-svg" width="8" height="10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.73.22a1.1 1.1 0 0 0-1.73.9v7.76c0 .89 1 1.41 1.73.9l5.5-3.88a1.1 1.1 0 0 0 0-1.8L1.73.22Z"></path></svg></span><span class="app-audio-button__bars-wrapper"><span class="app-audio-button__bars"><span class="app-audio-button__bar"></span><span class="app-audio-button__bar"></span><span class="app-audio-button__bar"></span></span></span>',2)),p("audio",{ref:"player",class:"app-audio-button__player",preload:"none",crossorigin:"anonymous",onEnded:t[0]||(t[0]=(...a)=>e.pauseOnExternalEvent&&e.pauseOnExternalEvent(...a))},null,544)],16)}const ep=$(Ju,[["render",xu]]),tp=A({name:"app-text-to-speech-textarea-input",props:{value:{type:String,required:!0},hasErrorHighlighting:{type:Boolean,default:!1},isCounterErrorHighlighted:{type:Boolean,default:!1}},emits:["input","blur"]}),ip=["value"],op={class:"app-text-to-speech-textarea-input__bar"},np={key:0,class:"app-text-to-speech-textarea-input__error"},sp={class:"app-text-to-speech-textarea-input__error-text"},ap={key:1,class:"app-text-to-speech-textarea-input__actions"},rp={class:"app-text-to-speech-textarea-input__preview"},lp={class:"app-text-to-speech-textarea-input__button"};function dp(e,t,i,o,s,l){return d(),h("div",{class:F(["app-text-to-speech-textarea-input",{"app-text-to-speech-textarea-input--error":e.hasErrorHighlighting}])},[p("textarea",J({class:"app-text-to-speech-textarea-input__textarea",rows:"1"},e.$attrs,{value:e.value,onInput:t[0]||(t[0]=a=>e.$emit("input",a.target.value)),onBlur:t[1]||(t[1]=a=>e.$emit("blur",a))}),null,16,ip),p("div",op,[e.$slots.error!==void 0?(d(),h("div",np,[t[2]||(t[2]=p("svg",{class:"app-text-to-speech-textarea-input__error-icon",fill:"none",height:"14",width:"14",xmlns:"http://www.w3.org/2000/svg"},[p("rect",{width:"14",height:"14",rx:"7",fill:"#D83A4C"}),p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 3a1 1 0 0 0-1 1v3a1 1 0 0 0 2 0V4a1 1 0 0 0-1-1Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"#151519"})],-1)),p("div",sp,[w(e.$slots,"error")])])):e.$slots.button!==void 0?(d(),h("div",ap,[p("div",rp,[w(e.$slots,"preview")]),p("div",{class:F(["app-text-to-speech-textarea-input__counter",{"app-text-to-speech-textarea-input__counter--error":e.isCounterErrorHighlighted}])},[w(e.$slots,"counter")],2),p("div",lp,[w(e.$slots,"button")])])):E("",!0)])],2)}const up=$(tp,[["render",dp]]),nn=500,pp=A({name:"widget-text-to-speech",components:{AppButton:oe,AppSvgSymbol:K,AppSelect:$t,AppSelectOption:wt,AppSelectOptionAudioPreview:$a,AppSelectSearchInput:Ln,AppSelectGroupTitle:On},props:{state:{type:Object,required:!0},controller:{type:Object,required:!0},isMobileLayout:{type:Boolean,default:!1},isBuiltIn:{type:Boolean,default:!1},isMoodsEnabled:{type:Boolean,default:!0}},emits:["tts-element-update","tts-element-create"],data(){return{playerEventEmitter:X(new ue),trackElementSelectionViewModel:X(this.$container.get(k.TRACK_ELEMENT_SELECTION_VIEW_MODEL))}},computed:{activeTrackElementId(){return this.trackElementSelectionViewModel.getActiveId()},foundLanguages(){return this.state.languages.filter(e=>{const t=this.$t(`appConsoleSettingsTextToSpeech.languages.${e.languageCode}`);return e.languageCode.toLowerCase().includes(this.state.languageSearchTerm.toLowerCase())||t.toLowerCase().includes(this.state.languageSearchTerm.toLowerCase())})},languageGroups(){const e=s=>({id:s.languageCode,name:this.$t(`appConsoleSettingsTextToSpeech.languages.${s.languageCode}`),language:s}),t=this.state.languages.map(e);t.sort((s,l)=>s.name.localeCompare(l.name));const i=["en-US","en-GB","fr-FR","de-DE","it-IT","pt-PT","es-ES"],o=[{id:"Featured",hasPaddingInTitle:!1,name:this.$t("appConsoleSettingsTextToSpeech.featured"),items:this.state.languages.filter(s=>i.includes(s.languageCode)).map(e)},{id:"All languages",hasPaddingInTitle:!0,name:this.$t("appConsoleSettingsTextToSpeech.allLanguages"),items:t}];return this.state.recentLanguages.length>0&&(o[0].hasPaddingInTitle=!0,o.unshift({id:"Recent",hasPaddingInTitle:!1,name:this.$t("appConsoleSettingsTextToSpeech.recent"),items:this.state.recentLanguages.map(e).reverse().slice(0,5)})),o},isLanguageSearchActive(){return this.state.languageSearchTerm.length>0},symbolCounter(){return`${this.state.text.length}/${nn}`},moods(){return this.state.selectedLanguage?.voices?.filter(e=>e.name===this.state.selectedVoice?.name)??[]},isMoodsVisible(){return this.moods.length>1&&this.isMoodsEnabled},isTextLengthValid(){return this.state.text.length<=nn},isGenerationAvailable(){let e=!0;if(this.isBuiltIn){const t=this.controller.getActiveTrackElementTTSOptions();e=t!==void 0&&(t.languageCode!==this.state.selectedLanguage?.languageCode||t.text!==this.state.text||t.mood!==this.state.selectedMood?.mood||t.voice!==this.state.selectedVoice?.name)}return this.isTextLengthValid&&e}},watch:{activeTrackElementId(e){e!==void 0&&this.isBuiltIn&&this.controller.populateStateFromActiveTrackElement()}},created(){this.isBuiltIn?this.controller.populateStateFromActiveTrackElement():(this.controller.resetState(),this.controller.autodetectLanguage())}}),cp={class:"widget-tts__header"},mp={class:"widget-tts__body"},hp={class:"widget-tts__language"},gp={class:"widget-tts__voice"},vp={style:{display:"none"}},fp={style:{display:"none"}},bp={key:0,class:"widget-tts__mood"},yp={class:"widget-tts__content"};function Ep(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppSelectSearchInput"),m=D("AppSelectGroupTitle"),f=D("AppSelectOption"),b=D("AppSelect"),T=D("AppSelectOptionAudioPreview"),C=ep,M=D("AppButton"),L=up;return d(),h("div",{class:F(["widget-tts",{"widget-tts--mobile":e.isMobileLayout,"widget-tts--built-in":e.isBuiltIn}])},[p("div",cp,g(e.$t("editor.console.textToSpeech")),1),p("div",mp,[p("div",hp,[r(b,{"active-item-id":e.state.selectedLanguage?e.state.selectedLanguage.languageCode:null,"is-search-active":e.isLanguageSearchActive,"found-items":e.foundLanguages.map(I=>({id:I.languageCode,name:e.$t(`appConsoleSettingsTextToSpeech.languages.${I.languageCode}`),language:I})),"item-groups":e.languageGroups,"dropdown-max-height":e.isMobileLayout?180:242,"has-search":""},{icon:n(()=>[r(a,{symbol:"select-arrows",width:20,height:20})]),"search-input":n(()=>[r(u,{placeholder:e.$t("appConsoleSettingsTextToSpeech.languageSelectorPlaceholder"),value:e.state.languageSearchTerm,onInput:t[0]||(t[0]=I=>e.controller.setLanguageSearchTerm(I))},{icon:n(()=>[r(a,{symbol:"magnifier",width:20,height:20,"is-block":""})]),_:1},8,["placeholder","value"])]),"empty-search-result":n(()=>[y(g(e.$t("appConsoleSettingsTextToSpeech.noResults")),1)]),"group-name":n(I=>[r(m,{"has-top-padding":I.group.hasPaddingInTitle},{default:n(()=>[y(g(I.group.name),1)]),_:2},1032,["has-top-padding"])]),item:n(I=>[r(f,{"font-size":14,"is-active":I.isActive,onClick:P=>{I.hideDropdown(),e.controller.setSelectedLanguage(I.item.language),e.controller.addRecentLanguage(I.item.language),e.controller.setLanguageSearchTerm("")}},{default:n(()=>[y(g(e.$t(`appConsoleSettingsTextToSpeech.languages.${I.item.language.languageCode}`)),1)]),_:2},1032,["is-active","onClick"])]),_:1},8,["active-item-id","is-search-active","found-items","item-groups","dropdown-max-height"])]),p("div",{class:F(["widget-tts__settings",{"widget-tts__settings--has-mood":e.isMoodsVisible}])},[p("div",gp,[r(b,{"active-item-id":e.state.selectedVoice?e.state.selectedVoice.name:null,items:e.state.selectedLanguage?e.state.voices.map(I=>({id:I.name,voice:I})):[],"dropdown-max-height":e.isMobileLayout?170:278},G({"item-icon":n(I=>[r(a,{symbol:`gender-${I.activeItem.voice.gender.toLowerCase()}`,width:18,height:18},null,8,["symbol"])]),icon:n(()=>[r(a,{symbol:"select-arrows",width:20,height:20})]),item:n(I=>[r(f,{"font-size":14,"is-active":I.isActive,"is-active-option-has-check-icon":!1,onClick:P=>{I.hideDropdown(),e.controller.setSelectedVoice(I.item.voice)}},{icon:n(()=>[r(a,{symbol:`gender-${I.item.voice.gender.toLowerCase()}`,width:18,height:18},null,8,["symbol"])]),default:n(()=>[y(g(I.item.voice.speakerName)+" ",1),p("span",fp,g(I.item.voice.name),1)]),preview:n(()=>[r(T,{"sibling-play-event-emitter":e.playerEventEmitter,"source-url":I.item.voice.sampleUrl,onClick:_(P=>e.playerEventEmitter.fire("start-play",I.item.voice.sampleUrl),["stop"])},null,8,["sibling-play-event-emitter","source-url","onClick"])]),_:2},1032,["is-active","onClick"])]),_:2},[e.state.selectedVoice?{name:"active-item",fn:n(I=>[y(g(I.activeItem.voice.speakerName)+" ",1),p("span",vp,g(I.activeItem.voice.name),1)]),key:"0"}:void 0]),1032,["active-item-id","items","dropdown-max-height"])]),e.isMoodsVisible?(d(),h("div",bp,[r(b,{"active-item-id":e.state.selectedMood?e.state.selectedMood.mood:null,items:e.moods.map(I=>({id:I.mood,name:e.$t(`appConsoleSettingsTextToSpeech.moods.${I.mood}`),mood:I})),"dropdown-max-height":e.isMobileLayout?170:void 0},G({icon:n(()=>[r(a,{symbol:"select-arrows",width:20,height:20})]),"item-icon":n(I=>[r(a,{symbol:`mood-${I.activeItem.id}`,width:18,height:18},null,8,["symbol"])]),item:n(I=>[r(f,{"font-size":14,"is-active":I.isActive,"is-active-option-has-check-icon":!1,onClick:P=>{I.hideDropdown(),e.controller.setSelectedMood(I.item.mood)}},{icon:n(()=>[r(a,{symbol:`mood-${I.item.id}`,width:18,height:18},null,8,["symbol"])]),default:n(()=>[y(g(e.$t(`appConsoleSettingsTextToSpeech.moods.${I.item.id}`)),1)]),preview:n(()=>[r(T,{"sibling-play-event-emitter":e.playerEventEmitter,"source-url":I.item.mood.sampleUrl,onClick:_(P=>e.playerEventEmitter.fire("start-play",I.item.mood.sampleUrl),["stop"])},null,8,["sibling-play-event-emitter","source-url","onClick"])]),_:2},1032,["is-active","onClick"])]),_:2},[e.state.selectedMood?{name:"active-item",fn:n(I=>[y(g(e.$t(`appConsoleSettingsTextToSpeech.moods.${I.activeItem.id}`)),1)]),key:"0"}:void 0]),1032,["active-item-id","items","dropdown-max-height"])])):E("",!0)],2),p("div",yp,[r(L,{placeholder:e.$t("appConsoleSettingsTextToSpeech.textPlaceholder"),value:e.state.text,"has-error-highlighting":!e.isTextLengthValid||e.state.hasError,"is-counter-error-highlighted":!e.isTextLengthValid,onInput:t[3]||(t[3]=I=>e.controller.setText(I))},G({preview:n(()=>[r(C,{"is-loading":e.state.isPreviewLoading,"is-disabled":!e.isGenerationAvailable,"source-url":e.state.previewUrl,onLoad:t[1]||(t[1]=I=>e.controller.generatePreview())},null,8,["is-loading","is-disabled","source-url"])]),counter:n(()=>[y(g(e.symbolCounter),1)]),_:2},[e.state.hasError?{name:"error",fn:n(()=>[y(g(e.$t("appConsoleSettingsTextToSpeech.error")),1)]),key:"0"}:void 0,e.state.text.length>0?{name:"button",fn:n(()=>[r(M,{variant:"text-to-speech","is-disabled":!e.isGenerationAvailable,"fixed-height":34,"fixed-width":90,"rounding-value":5,"is-loading":e.state.isElementCreationLoading,onClick:t[2]||(t[2]=I=>e.isBuiltIn?e.$emit("tts-element-update"):e.$emit("tts-element-create"))},{default:n(()=>[e.isBuiltIn?(d(),h(N,{key:0},[y(g(e.$t("appConsoleSettingsTextToSpeech.save")),1)],64)):(d(),h(N,{key:1},[y(g(e.$t("appConsoleSettingsTextToSpeech.generate")),1)],64))]),_:1},8,["is-disabled","is-loading"])]),key:"1"}:void 0]),1032,["placeholder","value","has-error-highlighting","is-counter-error-highlighted"])])])],2)}const Sp=$(pp,[["render",Ep]]),pi=50,kp=A({name:"app-console-element-search",components:{AppSvgSymbol:K},props:{placeholder:{type:String,default:"Search"},value:{type:String,default:""},appLayout:{type:String,default:"desktop"}},emits:["input","submit","close"],data(){return{maxLength:pi}},mounted(){if(this.appLayout==="mobile")return;this.$refs.input.focus()},methods:{input(e){this.$emit("input",e.slice(0,pi)),e.length<=pi?this.maxLength=pi:this.maxLength=0},submit(){const e=this.$refs.input;e.value!==""&&(this.$emit("submit",e.value),e.blur())},handleClickClear(){this.input(""),this.$emit("submit",""),this.$emit("close")}}}),Cp={class:"app-console-element-search__input-wrapper"},Tp=["value","placeholder","maxlength"],$p={type:"submit",class:"app-console-element-search__button-submit"};function wp(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("form",{class:F(["app-console-element-search",[`app-console-element-search--variant-${e.appLayout}`]]),onSubmit:t[2]||(t[2]=_((...u)=>e.submit&&e.submit(...u),["prevent"]))},[p("div",Cp,[p("input",{ref:"input",class:"app-console-element-search__input",type:"search",enterkeyhint:"search",value:e.value,placeholder:e.placeholder,maxlength:e.maxLength,onInput:t[0]||(t[0]=u=>e.input(u.target.value))},null,40,Tp),p("button",$p,[r(a,{symbol:"search","is-block":"",width:20,height:20})])]),e.value.length>0||e.appLayout==="desktop"?(d(),h("button",{key:0,type:"reset",class:"app-console-element-search__button-reset",onClick:t[1]||(t[1]=(...u)=>e.handleClickClear&&e.handleClickClear(...u))},[r(a,{symbol:"search-clear","is-block":"",width:18,height:18})])):E("",!0)],34)}const Xn=$(kp,[["render",wp]]),Ap=A({name:"app-badge-powered-by",components:{AppSvgSymbol:K},props:{svgSymbol:{type:String,required:!0},width:{type:Number,default:20},height:{type:Number,default:20}}}),Mp={class:"app-badge-powered-by"},Rp={class:"app-badge-powered-by__label"};function Pp(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",Mp,[p("div",Rp,g(e.$t("appBadgePoweredBy.poweredBy")),1),r(a,{symbol:e.svgSymbol,width:e.width,height:e.height,class:"app-badge-powered-by__logo"},null,8,["symbol","width","height"])])}const Yn=$(Ap,[["render",Pp]]),Ip=A({name:"app-console-element-header",components:{AppSvgSymbol:K},props:{type:{type:String,required:!0},isSearchVisible:{type:Boolean,default:!1}},emits:["close","toggle-search"],computed:{isPoweredByGiphy(){return[we.STICKER,we.GIF].includes(this.type)}},methods:{handleClickBackButton(){this.$emit("close")},handleClickSearchButton(){this.$emit("toggle-search")}}}),Lp={class:"app-console-element-header"},Op={key:0,class:"app-console-element-header__search"},Fp={class:"app-console-element-header__title"},Dp={key:0,class:"app-console-element-header__powered-by"};function Vp(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",Lp,[e.isSearchVisible?(d(),h("div",Op,[w(e.$slots,"search")])):(d(),h(N,{key:1},[p("div",Fp,g(e.$t(`appConsoleElementCategories.categories.${e.type}`)),1),e.isPoweredByGiphy?(d(),h("div",Dp,[w(e.$slots,"powered-by")])):E("",!0),p("button",{class:"app-console-element-header__back-button",onClick:t[0]||(t[0]=(...u)=>e.handleClickBackButton&&e.handleClickBackButton(...u))},[r(a,{"is-block":"",symbol:"arrow-left-bold-desktop",width:20,height:20})]),e.type!=="shape"?(d(),h("button",{key:1,class:"app-console-element-header__search-button",onClick:t[1]||(t[1]=(...u)=>e.handleClickSearchButton&&e.handleClickSearchButton(...u))},[r(a,{"is-block":"",symbol:"search",width:20,height:20})])):E("",!0)],64))])}const Np=$(Ip,[["render",Vp]]),Bp=A({name:"app-console-error-button-reload",components:{AppButton:oe},props:{state:{type:String,default:"default"}},data:()=>({defaultWidth:void 0}),watch:{state(e){this.defaultWidth=e!=="default"?this.$el.offsetWidth:void 0}}});function jp(e,t,i,o,s,l){const a=D("AppButton");return d(),S(a,J({variant:"console-error",size:"auto-width","fixed-height":34,"font-weight":500,"rounding-value":5,"fixed-width":e.defaultWidth,"is-disabled":e.state==="loading"},e.$attrs),G({_:2},[e.state==="loading"?{name:"icon",fn:n(()=>[t[0]||(t[0]=p("div",{class:"app-console-error-button-reload__spinner"},null,-1))]),key:"0"}:void 0,e.state!=="loading"?{name:"default",fn:n(()=>[w(e.$slots,"default")]),key:"1"}:void 0]),1040,["fixed-width","is-disabled"])}const ct=$(Bp,[["render",jp]]),zp=A({name:"app-console-error"}),Hp={class:"app-console-error"},_p={class:"app-console-error__title"},Up={class:"app-console-error__subtitle"},qp={class:"app-console-error__buttons"};function Wp(e,t,i,o,s,l){return d(),h("div",Hp,[p("div",_p,[w(e.$slots,"title")]),p("div",Up,[w(e.$slots,"subtitle")]),p("div",qp,[w(e.$slots,"buttons")])])}const mt=$(zp,[["render",Wp]]),Gp=A({name:"app-stock-grid-item-skeleton",props:{fixedWidth:{type:Number,default:void 0},fixedHeight:{type:Number,default:void 0},borderRadius:{type:Number,default:void 0}}});function Xp(e,t,i,o,s,l){return d(),h("div",{class:"app-stock-grid-item-skeleton",style:z({width:e.fixedWidth!==void 0?`${e.fixedWidth}px`:void 0,height:e.fixedHeight!==void 0?`${e.fixedHeight}px`:void 0})},[t[0]||(t[0]=p("div",{class:"app-stock-grid-item-skeleton__background"},null,-1)),p("div",{class:"app-stock-grid-item-skeleton__overlay",style:z({borderRadius:e.borderRadius!==void 0?`${e.borderRadius}px`:void 0})},null,4)],4)}const Ne=$(Gp,[["render",Xp]]),Yp=A({name:"app-console-element-list-item",props:{element:{type:Object,required:!0},previewType:{type:String,required:!0},isDragPreview:{type:Boolean,default:!1},isInGrid:{type:Boolean,default:!1},isSkeletonVisible:{type:Boolean,default:!1},selectEventEmitter:{type:Object,default:void 0}},emits:["select","select-on-click","drag-disable","drag-enable"],data(){return{isImageLoaded:!1}},computed:{isElementCanBeSelected(){return((Yt(this.element)||Kt(this.element))&&this.element.assets[this.previewType].sources.length>0||(Yi(this.element)||Ji(this.element))&&this.element.sourceUrl!==void 0)&&!this.isSkeletonVisible&&this.isImageLoaded&&!this.isDragPreview}},watch:{element:{deep:!0,handler(){this.$nextTick(this.waitImageLoad)}}},mounted(){this.disableDrag(),this.waitImageLoad(),this.selectEventEmitter!==void 0&&this.selectEventEmitter.on("select",this.select)},beforeUnmount(){this.$refs.image!==void 0&&this.$refs.image.removeEventListener("load",this.setImageLoaded),this.selectEventEmitter!==void 0&&this.selectEventEmitter.off("select",this.select)},methods:{setImageLoaded(){this.enableDrag(),this.isImageLoaded=!0},waitImageLoad(){if(this.isImageLoaded||this.isDragPreview)return;const e=this.$refs.image;e!==void 0&&(e.complete?this.setImageLoaded():e.addEventListener("load",this.setImageLoaded,{once:!0}))},select(e){this.isElementCanBeSelected&&e.data===this.element.id&&this.$emit("select",this.element)},selectOnClick(){this.isElementCanBeSelected&&this.$emit("select-on-click",this.element)},disableDrag(){this.$emit("drag-disable")},enableDrag(){this.$emit("drag-enable")},getRasterElementSource:wa}}),Kp=["src","width"],Zp=["src","width","height"];function Qp(e,t,i,o,s,l){const a=Ne;return d(),h("div",{class:F(["app-console-element-list-item",[`app-console-element-list-item--${e.element.type}`,{"app-console-element-list-item--drag-preview":e.isDragPreview,"app-console-element-list-item--grid":e.isInGrid,"app-console-element-list-item--skeleton":e.isSkeletonVisible}]]),onClick:t[0]||(t[0]=(...u)=>e.selectOnClick&&e.selectOnClick(...u))},[(e.isSkeletonVisible||!e.isImageLoaded)&&!e.isDragPreview?(d(),S(a,{key:0,"border-radius":5,class:"app-console-element-list-item__skeleton"})):E("",!0),["gif","sticker"].includes(e.element.type)&&e.element.assets[e.previewType].sources.length>0?(d(),h("img",{key:1,ref:"image",alt:"",src:e.getRasterElementSource(e.element.assets[e.previewType].sources).sourceUrl,width:e.element.assets.preview1x.width,class:"app-console-element-list-item__image",draggable:"false"},null,8,Kp)):["shape","emoji"].includes(e.element.type)&&e.element.sourceUrl?(d(),h("img",{key:2,ref:"image",src:e.element.type==="shape"?e.element.previewUrl:e.element.sourceUrl,width:e.element.width,height:e.element.height,class:"app-console-element-list-item__image",draggable:"false"},null,8,Zp)):E("",!0)],2)}const ho=$(Yp,[["render",Qp]]),sn=6,an=80,Jp=182,xp=A({name:"app-console-element-justified-grid",props:{items:{type:Array,required:!0},appLayout:{type:String,default:"desktop"},isSkeletonVisible:{type:Boolean,default:!1}},data(){return{gridContainerWidth:0,rowHeight:an,resizeObserver:void 0,mediaQueryIsTablet:void 0,skeletons:[[118,118],[180,118],[118,118],[192,116],[192,116],[126,184],[126,184],[126,184],[192,120],[192,120],[88,130],[202,130],[88,130],[192,116],[192,116],[192,116],[192,116]]}},computed:{itemsSizes(){return this.items.map(e=>({width:e.assets[ze.PREVIEW_1X].width,height:e.assets[ze.PREVIEW_1X].height}))},justifyGridSizes(){return Si(this.itemsSizes,{containerWidth:this.gridContainerWidth,gap:sn,rowHeight:this.rowHeight})},justifyGridSkeletonSizes(){const e=this.skeletons.map(t=>({width:t[0],height:t[1]}));return Si(e,{containerWidth:this.gridContainerWidth,gap:sn,rowHeight:this.rowHeight})}},mounted(){this.setGridContainerWidth(),this.bindResizeEventListener(),this.mediaQueryIsTablet=Fn("(min-width: 576px) and (max-width: 991.98px)",this.updateRowHeight),this.updateRowHeight(this.mediaQueryIsTablet)},beforeUnmount(){this.unbindResizeEventListener(),this.mediaQueryIsTablet!==void 0&&(this.mediaQueryIsTablet.removeEventListener!==void 0?this.mediaQueryIsTablet.removeEventListener("change",this.updateRowHeight):this.mediaQueryIsTablet.removeListener(this.updateRowHeight))},methods:{setGridContainerWidth(){this.gridContainerWidth=this.$refs["grid-container"].getBoundingClientRect().width},bindResizeEventListener(){const e=window.ResizeObserver??Ut;this.resizeObserver=new e(()=>{this.setGridContainerWidth()}),this.resizeObserver.observe(this.$el)},unbindResizeEventListener(){this.resizeObserver!==void 0&&this.resizeObserver.disconnect()},updateRowHeight(e){this.rowHeight=e.matches?Jp:an}}}),ec={ref:"grid-container",class:"app-console-element-justified-grid__main"},tc={class:"app-console-element-justified-grid__list"};function ic(e,t,i,o,s,l){return d(),h("div",{class:F(["app-console-element-justified-grid",[`app-console-element-justified-grid--variant-${e.appLayout}`]])},[p("div",ec,[p("ul",tc,[(d(!0),h(N,null,q(e.items,(a,u)=>(d(),h("li",{key:a.id,class:F(["app-console-element-justified-grid__list-item",{"app-console-element-justified-grid__list-item--hidden":e.isSkeletonVisible}]),style:z({width:e.justifyGridSizes[u].width+"px",height:e.justifyGridSizes[u].height+"px"})},[w(e.$slots,"item",{item:a})],6))),128)),e.isSkeletonVisible?(d(!0),h(N,{key:0},q(e.justifyGridSkeletonSizes,(a,u)=>(d(),h("li",{key:u,class:"app-console-element-justified-grid__list-item",style:z({width:a.width+"px",height:a.height+"px"})},[w(e.$slots,"skeleton-item")],4))),128)):E("",!0)])],512)],2)}const oc=$(xp,[["render",ic]]),nc=A({name:"app-console-element-simple-grid",props:{items:{type:Array,required:!0},appLayout:{type:String,default:"desktop"}}}),sc={class:"app-console-element-simple-grid__main"},ac={class:"app-console-element-simple-grid__list"};function rc(e,t,i,o,s,l){return d(),h("div",{class:F(["app-console-element-simple-grid",[`app-console-element-simple-grid--variant-${e.appLayout}`]])},[p("div",sc,[p("ul",ac,[(d(!0),h(N,null,q(e.items,a=>(d(),h("li",{key:a.id,class:"app-console-element-simple-grid__list-item"},[w(e.$slots,"item",{item:a})]))),128))])])],2)}const lc=$(nc,[["render",rc]]),dc=A({name:"app-console-element-grouped-grid",props:{items:{type:Array,required:!0},appLayout:{type:String,default:"desktop"},groupBy:{type:String,required:!0},isSkeletonVisible:{type:Boolean,default:!1}},computed:{groups(){return Dn(this.items,this.groupBy)}}}),uc={class:"app-console-element-grouped-grid__main"},pc={class:"app-console-element-grouped-grid__group-title"},cc={class:"app-console-element-grouped-grid__list"},mc={class:"app-console-element-grouped-grid__group-title"},hc={class:"app-console-element-grouped-grid__list"};function gc(e,t,i,o,s,l){const a=Ne;return d(),h("div",{class:F(["app-console-element-grouped-grid",[`app-console-element-grouped-grid--variant-${e.appLayout}`,{"app-console-element-grouped-grid--skeleton":e.isSkeletonVisible}]])},[p("div",uc,[e.isSkeletonVisible?(d(),h(N,{key:0},q(6,u=>p("div",{key:u,class:"app-console-element-grouped-grid__group"},[p("div",pc,[r(a,{"fixed-width":100,"fixed-height":18,"border-radius":5})]),p("ul",cc,[(d(),h(N,null,q(36,m=>p("li",{key:m,class:"app-console-element-grouped-grid__list-item"},[r(a,{"fixed-width":e.appLayout==="desktop"?60:53,"fixed-height":e.appLayout==="desktop"?60:53,"border-radius":5},null,8,["fixed-width","fixed-height"])])),64))])])),64)):E("",!0),(d(!0),h(N,null,q(e.groups,(u,m)=>(d(),h("div",{key:m,class:F(["app-console-element-grouped-grid__group",{"app-console-element-grouped-grid__group--hidden":e.isSkeletonVisible}])},[p("div",mc,g(e.$t(`appConsoleElementCategories.emojiCategories.${m}`)),1),p("ul",hc,[(d(!0),h(N,null,q(u,f=>(d(),h("li",{key:f.id,class:"app-console-element-grouped-grid__list-item"},[w(e.$slots,"item",{item:f})]))),128))])],2))),128))])],2)}const vc=$(dc,[["render",gc]]),fc=A({name:"app-console-element-list",props:{type:{type:String,required:!0},items:{type:Array,default:()=>[]},appLayout:{type:String,default:"desktop"},isSkeletonVisible:{type:Boolean,default:!1}},emits:["select-element","before-drag-stop"],computed:{previewType(){return no()?ze.PREVIEW_2X:ze.PREVIEW_1X}},methods:{handleSelectElement(e){this.$emit("select-element",e)}}}),bc={class:"app-console-element-list__item app-console-element-list__item--shape"},yc={class:"app-console-element-list__item app-console-element-list__item--emoji"};function Ec(e,t,i,o,s,l){const a=ho,u=ei,m=Ne,f=oc,b=lc,T=vc;return d(),h("div",{class:F(["app-console-element-list",[`app-console-element-list--variant-${e.appLayout}`,{"app-console-element-list--skeleton":e.isSkeletonVisible}]])},[e.type==="gif"||e.type==="sticker"?(d(),S(f,{key:0,items:e.items,"app-layout":e.appLayout,"is-skeleton-visible":e.isSkeletonVisible},{item:n(C=>[p("div",{class:F(["app-console-element-list__item",`app-console-element-list__item--${C.item.type}`])},[e.appLayout==="desktop"?(d(),S(u,{key:`element-item-${C.item.provider}-${C.item.id}`,"draggable-data":{elementItem:C.item,type:"element-item"},"is-source-element-hiding-required":!1,onBeforeDragStop:t[0]||(t[0]=M=>e.$emit("before-drag-stop",M))},{default:n(M=>[r(a,{element:C.item,"preview-type":e.previewType,onSelectOnClick:L=>e.handleSelectElement(C.item),onDragDisable:L=>M.disableDrag(),onDragEnable:L=>M.enableDrag()},null,8,["element","preview-type","onSelectOnClick","onDragDisable","onDragEnable"])]),preview:n(()=>[r(a,{"is-drag-preview":"",element:C.item,"preview-type":e.previewType},null,8,["element","preview-type"])]),_:2},1032,["draggable-data"])):C.item.assets[e.previewType].sources.length>0?(d(),S(a,{key:1,element:C.item,"preview-type":e.previewType,onSelectOnClick:M=>e.handleSelectElement(C.item)},null,8,["element","preview-type","onSelectOnClick"])):E("",!0)],2)]),"skeleton-item":n(()=>[r(m)]),_:1},8,["items","app-layout","is-skeleton-visible"])):E("",!0),e.type==="shape"?(d(),S(b,{key:1,items:e.items,"app-layout":e.appLayout},{item:n(C=>[p("div",bc,[(d(),S(u,{key:`element-item-shape-${C.item.id}`,"draggable-data":{elementItem:C.item,type:"element-item"},"is-source-element-hiding-required":!1,onBeforeDragStop:t[1]||(t[1]=M=>e.$emit("before-drag-stop",M))},{default:n(M=>[r(a,{element:C.item,"preview-type":e.previewType,onSelectOnClick:L=>e.handleSelectElement(C.item),onDragDisable:L=>M.disableDrag(),onDragEnable:L=>M.enableDrag()},null,8,["element","preview-type","onSelectOnClick","onDragDisable","onDragEnable"])]),preview:n(()=>[r(a,{"is-drag-preview":"",element:C.item,"preview-type":e.previewType},null,8,["element","preview-type"])]),_:2},1032,["draggable-data"]))])]),_:1},8,["items","app-layout"])):E("",!0),e.type==="emoji"?(d(),S(T,{key:2,items:e.items,"app-layout":e.appLayout,"is-skeleton-visible":e.isSkeletonVisible,"group-by":"category"},{item:n(C=>[p("div",yc,[(d(),S(u,{key:`element-item-emoji-${C.item.id}`,"draggable-data":{elementItem:C.item,type:"element-item"},"is-source-element-hiding-required":!1,onBeforeDragStop:t[2]||(t[2]=M=>e.$emit("before-drag-stop",M))},{default:n(M=>[r(a,{element:C.item,"preview-type":e.previewType,"is-in-grid":"",onSelectOnClick:L=>e.handleSelectElement(C.item),onDragDisable:L=>M.disableDrag(),onDragEnable:L=>M.enableDrag()},null,8,["element","preview-type","onSelectOnClick","onDragDisable","onDragEnable"])]),preview:n(()=>[r(a,{"is-drag-preview":"",element:C.item,"preview-type":e.previewType,"is-in-grid":""},null,8,["element","preview-type"])]),_:2},1032,["draggable-data"]))])]),_:1},8,["items","app-layout","is-skeleton-visible"])):E("",!0)],2)}const Kn=$(fc,[["render",Ec]]),Sc=A({name:"app-console-slider",components:{AppSvgSymbol:K},props:{variant:{type:String,required:!0,validator:e=>["stocks","tabs","elements"].includes(e)},isContentReady:{type:Boolean,default:!0},selectedElementEventEmitter:{type:Object,required:!0}},data(){return{lastPageX:0,startPageX:0,startPageY:0,scrollLeft:0,offsetWidth:0,scrollWidth:0,scrollAnimationFrameId:void 0,isScrolling:!1,resizeObserver:void 0,isHovered:!1}},computed:{isScrollLeftButtonVisible(){return this.scrollLeft>0},isScrollRightButtonVisible(){return Math.ceil(this.offsetWidth+this.scrollLeft)<this.scrollWidth}},watch:{isContentReady(){this.$nextTick(()=>{this.saveScrollPosition()})}},mounted(){this.saveScrollPosition(),this.bindResizeEventListener()},beforeUnmount(){this.unbindResizeEventListener(),this.scrollAnimationFrameId!==void 0&&window.cancelAnimationFrame(this.scrollAnimationFrameId),this.stopDragging()},methods:{handleMouseDown(e){this.isContentReady&&(this.startDragging(),this.saveStartPosition(e),this.saveScrollPosition())},bindMouseEventListeners(){document.addEventListener("mousemove",this.scroll),document.addEventListener("mouseup",this.stopDragging)},unbindMouseEventListeners(){document.removeEventListener("mousemove",this.scroll),document.removeEventListener("mouseup",this.stopDragging)},startDragging(){window.onselectstart=()=>!1,this.isScrolling=!0,this.bindMouseEventListeners()},stopDragging(){window.onselectstart=()=>!0,this.isScrolling=!1,this.unbindMouseEventListeners()},saveStartPosition(e){this.lastPageX=this.startPageX=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,this.startPageY=e instanceof MouseEvent?e.pageY:e.touches[0].pageY},saveScrollPosition(){const e=this.$refs.slider;this.scrollLeft=e.scrollLeft,this.offsetWidth=e.offsetWidth,this.scrollWidth=e.scrollWidth},scroll(e){e.preventDefault();const t=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,i=this.$refs.slider,o=t-this.lastPageX;i.scrollLeft-=o,this.lastPageX=t},async scrollList(e){const t=window.navigator.userAgent.toLowerCase().includes("firefox");t&&(this.isScrolling=!0,await this.$nextTick());const i=e==="left"?-1:1,o=this.$refs.slider;o.scrollTo({left:o.scrollLeft+(o.clientWidth-80)*i,top:0,behavior:"smooth"}),t&&(this.isScrolling=!1)},selectElement(e,t){const i=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,o=e instanceof MouseEvent?e.pageY:e.touches[0].pageY,s=5;Math.abs(i-this.startPageX)>s||Math.abs(o-this.startPageY)>s||this.selectedElementEventEmitter.fire("select",t)},bindResizeEventListener(){const e=window.ResizeObserver??Ut;this.resizeObserver=new e(()=>{this.saveScrollPosition()}),this.resizeObserver.observe(this.$el)},unbindResizeEventListener(){this.resizeObserver!==void 0&&this.resizeObserver.disconnect()}}}),kc={class:"app-console-slider__scroll-button"},Cc={class:"app-console-slider__scroll-button"};function Tc(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",{class:F(["app-console-slider",[`app-console-slider--variant-${e.variant}`]])},[p("div",{ref:"slider",class:F(["app-console-slider__list",{"app-console-slider__list--no-scrolling":!e.isScrollLeftButtonVisible&&!e.isScrollRightButtonVisible}]),onMousedown:t[2]||(t[2]=(...u)=>e.handleMouseDown&&e.handleMouseDown(...u)),onScroll:t[3]||(t[3]=(...u)=>e.saveScrollPosition&&e.saveScrollPosition(...u)),onMouseenter:t[4]||(t[4]=u=>e.isHovered=!0),onMouseleave:t[5]||(t[5]=u=>e.isHovered=!1)},[w(e.$slots,"default",{elementClicked:e.selectElement}),ae(p("div",{class:F(["app-console-slider__scroll-left",{"app-console-slider__scroll-left--active":e.isScrollLeftButtonVisible}]),onClick:t[0]||(t[0]=u=>e.scrollList("left"))},[p("div",kc,[r(pt,{name:"fade",class:"app-console-slider__scroll-button-fade"},{default:n(()=>[ae(r(a,{symbol:"track-element-settings-scroll-left","is-block":"",width:18,height:18},null,512),[[pe,e.isHovered]])]),_:1})])],2),[[pe,e.isContentReady]]),ae(p("div",{class:F(["app-console-slider__scroll-right",{"app-console-slider__scroll-right--active":e.isScrollRightButtonVisible}]),onClick:t[1]||(t[1]=u=>e.scrollList("right"))},[p("div",Cc,[r(pt,{name:"fade",class:"app-console-slider__scroll-button-fade"},{default:n(()=>[ae(r(a,{symbol:"track-element-settings-scroll-right","is-block":"",width:18,height:18},null,512),[[pe,e.isHovered]])]),_:1})])],2),[[pe,e.isContentReady]])],34)],2)}const go=$(Sc,[["render",Tc]]),$c=72,wc=A({name:"app-console-element-category-slider",components:{AppSvgSymbol:K},props:{elements:{type:Array,default:()=>[]},category:{type:String,required:!0},appLayout:{type:String,default:"desktop"},isSkeletonVisible:{type:Boolean,default:!1}},emits:["show-category"],data(){return{selectedElementEventEmitter:new ue}},computed:{hasNoPadding(){return this.elements.length>0&&[we.GIF].includes(this.elements[0].type)}},methods:{calculateElementItemWidth(e){if(this.isSkeletonVisible)return 72;const t=Kt(e)||Yt(e)?e.assets[ze.PREVIEW_1X].width/e.assets[ze.PREVIEW_1X].height:1;return $c*t}}}),Ac={class:"app-console-element-category-slider__list"},Mc=["onClick"];function Rc(e,t,i,o,s,l){const a=Ne,u=D("AppSvgSymbol"),m=go;return d(),h("div",{class:F(["app-console-element-category-slider",[`app-console-element-category-slider--variant-${e.appLayout}`,{"app-console-element-category-slider--skeleton":e.isSkeletonVisible}]])},[r(m,{variant:"elements","selected-element-event-emitter":e.selectedElementEventEmitter,"is-content-ready":!e.isSkeletonVisible},{default:n(({elementClicked:f})=>[p("div",Ac,[e.isSkeletonVisible?(d(),h(N,{key:0},q(12,b=>r(a,{key:`${e.category}_${b}`,"fixed-width":72,"fixed-height":72,"border-radius":5,class:"app-console-element-category-slider__item app-console-element-category-slider__item--nopadding"})),64)):E("",!0),(d(!0),h(N,null,q(e.elements,b=>(d(),h("div",{key:b.id,class:F(["app-console-element-category-slider__item",{"app-console-element-category-slider__item--nopadding":e.hasNoPadding||e.isSkeletonVisible,"app-console-element-category-slider__item--hidden":e.isSkeletonVisible,[`app-console-element-category-slider__item--type-${b.type}`]:!0}]),style:z({minWidth:`${e.calculateElementItemWidth(b)}px`}),onClick:T=>f(T,b.id)},[w(e.$slots,"item",{item:b,selectEventEmitter:e.selectedElementEventEmitter})],14,Mc))),128)),e.elements.length>0?(d(),h("div",{key:1,class:F(["app-console-element-category-slider__item app-console-element-category-slider__item--show-all",{"app-console-element-category-slider__item--nopadding":e.hasNoPadding||e.isSkeletonVisible,"app-console-element-category-slider__item--hidden":e.isSkeletonVisible}]),onClick:t[0]||(t[0]=b=>e.$emit("show-category",e.category))},[r(u,{width:24,height:24,symbol:"console-element-show-all"})],2)):E("",!0)])]),_:3},8,["selected-element-event-emitter","is-content-ready"])],2)}const Zn=$(wc,[["render",Rc]]),Pc=A({name:"app-console-element-categories",components:{AppSvgSymbol:K},props:{categories:{type:Array,default:()=>[]},appLayout:{type:String,default:"desktop"},isSkeletonVisible:{type:Boolean,default:!1}},emits:["show-category"],methods:{handleClickSeeAllButton(e){this.isSkeletonVisible||this.$emit("show-category",e)}}}),Ic={class:"app-console-element-categories__item-header"},Lc=["onClick"],Oc={class:"app-console-element-categories__slider"};function Fc(e,t,i,o,s,l){const a=Ne,u=D("AppSvgSymbol");return d(),h("div",{class:F(["app-console-element-categories",[`app-console-element-categories--variant-${e.appLayout}`,{"app-console-element-categories--skeleton":e.isSkeletonVisible}]])},[(d(!0),h(N,null,q(e.categories,m=>(d(),h("div",{key:m.type,class:"app-console-element-categories__item"},[p("div",Ic,[p("div",{class:"app-console-element-categories__item-label",onClick:f=>e.handleClickSeeAllButton(m.type)},[e.isSkeletonVisible?(d(),S(a,{key:0,"fixed-width":50,"fixed-height":18,"border-radius":5})):(d(),h(N,{key:1},[y(g(e.$t(`appConsoleElementCategories.categories.${m.type}`))+" ",1),r(u,{width:8,height:12,symbol:"console-element-category-expand"})],64))],8,Lc)]),p("div",Oc,[w(e.$slots,"category",{category:m})])]))),128))],2)}const Qn=$(Pc,[["render",Fc]]),Dc=-236,Vc=A({name:"app-console-stock",components:{AppSvgSymbol:K},props:{isInfiniteScrollEnabled:{type:Boolean,default:!0},isLoading:{type:Boolean,default:!0},appLayout:{type:String,default:"desktop"},variant:{type:String,default:"image-video",validator:e=>["image-video","audio","element"].includes(e)},isSkeletonVisible:{type:Boolean,default:!1}},emits:["scroll-to-end"],data(){return{unsubscribeIntersectionObserver:void 0,endPageTopPosition:Dc}},mounted(){this.unsubscribeIntersectionObserver=Un(this.$refs["end-page"],{onVisible:this.handlerScrollToEnd,root:this.$el,rootMargin:"0px",threshold:1})},beforeUnmount(){this.unsubscribeIntersectionObserver!==void 0&&this.unsubscribeIntersectionObserver()},methods:{handlerScrollToEnd(){this.isLoading||this.$emit("scroll-to-end")},getScrollableWrapper(){return this.$refs.scrollable}}}),Nc={key:0,class:"app-console-stock__header"},Bc={ref:"scrollable",class:"app-console-stock__main"},jc={class:"app-console-stock__categories"},zc={class:"app-console-stock__content"},Hc={class:"app-console-stock__bottom"},_c={class:"app-console-stock__empty"},Uc={key:0,class:"app-console-stock__content-overlay"};function qc(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",{class:F(["app-console-stock",[`app-console-stock--layout-${e.appLayout}`,`app-console-stock--variant-${e.variant}`,{"app-console-stock--skeleton":e.isSkeletonVisible}]])},[e.$slots.header!==void 0?(d(),h("div",Nc,[w(e.$slots,"header")])):E("",!0),p("div",Bc,[ae(p("div",jc,[w(e.$slots,"categories")],512),[[pe,e.$slots.categories!==void 0]]),ae(p("div",zc,[w(e.$slots,"content",{getScrollableParentCallback:e.getScrollableWrapper}),ae(p("div",Hc,[p("div",{ref:"end-page",class:"app-console-stock__end-page",style:z({top:`${e.endPageTopPosition}px`})},null,4),e.variant!=="audio"?(d(),S(a,{key:0,class:"app-console-stock__spinner",symbol:"loading-spinner-stocks",width:14,height:14})):E("",!0)],512),[[pe,e.isInfiniteScrollEnabled]])],512),[[pe,e.$slots.content!==void 0]]),ae(p("div",_c,[w(e.$slots,"empty")],512),[[pe,e.$slots.empty!==void 0]]),e.$slots["content-overlay"]!==void 0?(d(),h("div",Uc,[w(e.$slots,"content-overlay")])):E("",!0)],512)],2)}const ht=$(Vc,[["render",qc]]),Wc=A({name:"widget-element-stock",props:{state:{type:Object,required:!0},controller:{type:Object,required:!0}},emits:{"item-select":null,"before-drag-stop":null},computed:{previewType(){return no()?ze.PREVIEW_2X:ze.PREVIEW_1X},searchPlaceholder(){switch(this.state.activeElementCategory){case we.GIF:return this.$t("appConsoleElementCategories.searchGIFs");case we.STICKER:return this.$t("appConsoleElementCategories.searchStickers");case we.EMOJI:return this.$t("appConsoleElementCategories.searchEmojis");default:return""}},isSkeletonVisible(){return this.state.isElementLoading&&(this.state.activeElementCategory===void 0||this.state.currentPage===1)}},mounted(){this.controller.showElementsIndex()},methods:{handleScrollToEnd(){this.state.activeElementCategory!==void 0&&this.controller.loadNextPage(this.state.activeElementCategory)},handleSelectElement(e){(Yt(e)||Kt(e))&&e.assets[ze.ORIGINAL].sources.length===0||this.$emit("item-select",e)},toggleSearch(){this.controller.toggleSearch()},closeSearch(){this.controller.toggleSearch(),this.controller.searchElements("")}}});function Gc(e,t,i,o,s,l){const a=Xn,u=Yn,m=Np,f=ct,b=mt,T=Kn,C=ho,M=Zn,L=Qn,I=ht;return d(),S(I,{key:"element","is-infinite-scroll-enabled":!e.state.isElementLastPage&&!e.isSkeletonVisible,"is-loading":e.state.isElementLoading,"is-skeleton-visible":e.isSkeletonVisible,variant:"element",onScrollToEnd:e.handleScrollToEnd},G({_:2},[e.state.activeElementCategory!==void 0?{name:"header",fn:n(()=>[r(m,{type:e.state.activeElementCategory,"is-search-visible":e.state.isSearchVisible,"app-layout":"desktop",onClose:t[2]||(t[2]=P=>e.controller.showElementsIndex()),onToggleSearch:e.toggleSearch},{search:n(()=>[r(a,{value:e.state.searchQueryInput,placeholder:e.searchPlaceholder,"app-layout":"desktop",onClose:e.closeSearch,onInput:t[0]||(t[0]=P=>e.controller.setSearchQuery(P)),onSubmit:t[1]||(t[1]=P=>e.controller.searchElements(P))},null,8,["value","placeholder","onClose"])]),"powered-by":n(()=>[r(u,{width:43,height:10,"svg-symbol":"logo-giphy"})]),_:1},8,["type","is-search-visible","onToggleSearch"])]),key:"0"}:void 0,e.state.isElementLoadingFailed&&e.state.activeElementCategory!==void 0?{name:"empty",fn:n(()=>[r(b,null,{title:n(()=>[y(g(e.$t("appErrorNetworkError.title")),1)]),subtitle:n(()=>[y(g(e.$t("appErrorNetworkError.subtitle")),1)]),buttons:n(()=>[r(f,{state:e.state.isElementLoading?"loading":"default",onClick:t[3]||(t[3]=P=>e.controller.searchElements(e.state.searchQueryInput))},{default:n(()=>[y(g(e.$t("appErrorNetworkError.reload")),1)]),_:1},8,["state"])]),_:1})]),key:"1"}:e.state.isElementLoading||e.state.elementItems.length>0||!e.state.activeElementCategory?{name:"content",fn:n(()=>[e.state.activeElementCategory?(d(),S(T,{key:0,type:e.state.activeElementCategory,items:e.state.elementItems,"is-skeleton-visible":e.isSkeletonVisible,"app-layout":"desktop",onSelectElement:e.handleSelectElement,onBeforeDragStop:t[4]||(t[4]=P=>e.$emit("before-drag-stop",P))},null,8,["type","items","is-skeleton-visible","onSelectElement"])):(d(),S(L,{key:1,categories:e.state.elementCategories,"is-skeleton-visible":e.isSkeletonVisible,"app-layout":"desktop",onShowCategory:t[6]||(t[6]=P=>e.controller.showCategory(P))},{category:n(P=>[r(M,{elements:P.category.previewItems,category:P.category.type,"is-skeleton-visible":e.isSkeletonVisible,"app-layout":"desktop",onShowCategory:t[5]||(t[5]=j=>e.controller.showCategory(j))},{item:n(j=>[r(C,{element:j.item,"select-event-emitter":j.selectEventEmitter,"preview-type":e.previewType,"is-skeleton-visible":e.isSkeletonVisible,onSelect:e.handleSelectElement},null,8,["element","select-event-emitter","preview-type","is-skeleton-visible","onSelect"])]),_:2},1032,["elements","category","is-skeleton-visible"])]),_:1},8,["categories","is-skeleton-visible"]))]),key:"2"}:{name:"empty",fn:n(()=>[y(g(e.$t("editor.stocks.empty")),1)]),key:"3"}]),1032,["is-infinite-scroll-enabled","is-loading","is-skeleton-visible","onScrollToEnd"])}const Xc=$(Wc,[["render",Gc]]),Yc=A({name:"app-console-aspect-ratio-picker-item",components:{AppSvgSymbol:K},props:{isDense:{type:Boolean,required:!0},isActive:{type:Boolean,required:!0},aspectRatio:{type:Object,required:!0}}}),Kc={class:"app-console-aspect-ratio-picker-item__name"},Zc={class:"app-console-aspect-ratio-picker-item__size"};function Qc(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",{class:F({"app-console-aspect-ratio-picker-item":!0,"app-console-aspect-ratio-picker-item--dense":e.isDense,"app-console-aspect-ratio-picker-item--active":e.isActive})},[r(a,{symbol:e.aspectRatio.icon,width:20,height:20,class:F({"app-console-aspect-ratio-picker-item__icon":!0,"app-console-aspect-ratio-picker-item__icon--social":e.aspectRatio.isSocial,"app-console-aspect-ratio-picker-item__icon--rect":!e.aspectRatio.isSocial})},null,8,["symbol","class"]),p("span",Kc,g(e.aspectRatio.name),1),p("span",Zc," — "+g(e.aspectRatio.xUnits)+":"+g(e.aspectRatio.yUnits),1)],2)}const Jc=$(Yc,[["render",Qc],["__scopeId","data-v-de3ec88c"]]),xc=A({name:"app-console-aspect-ratio-picker",components:{AppSvgSymbol:K,AppSelect:$t,AppSelectOption:wt},props:{aspectRatios:{type:Array,required:!0},activeAspectRatioId:{type:Number,required:!0}},emits:["pick"],methods:{isSeparatorVisible(e){const t=this.aspectRatios[e],i=this.aspectRatios[e+1];return t===void 0||i===void 0?!1:t.isSocial!==i.isSocial}}});function em(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=Jc,m=D("AppSelectOption"),f=D("AppSelect");return d(),S(f,{"active-item-id":e.activeAspectRatioId,items:e.aspectRatios,"has-input":!1,"has-search":!1,variant:"aspect-ratio"},{icon:n(()=>[r(a,{symbol:"select-arrows",width:20,height:20})]),"active-item":n(b=>[b.activeItem?(d(),S(u,{key:0,"is-dense":!0,"is-active":!1,"aspect-ratio":b.activeItem},null,8,["aspect-ratio"])):E("",!0)]),item:n(b=>[r(m,{variant:"aspect-ratio","is-active":b.isActive,"is-separator-visible":e.isSeparatorVisible(b.index),class:"app-console-aspect-ratio-picker__item",onClick:T=>{b.hideDropdown(),e.$emit("pick",b.item.id)}},{default:n(()=>[r(u,{variant:"options-item","is-dense":!1,"is-active":b.isActive,"aspect-ratio":b.item},null,8,["is-active","aspect-ratio"])]),_:2},1032,["is-active","is-separator-visible","onClick"])]),_:1},8,["active-item-id","items"])}const tm=$(xc,[["render",em]]),im=A({name:"app-color-picker-area",props:{hue:{type:Number,required:!0},value:{type:Object,required:!0}},emits:{start:null,finish:null,"color-picker-change-value":e=>!0},data(){return{isDragging:!1,originalValue:{saturation:0,brightness:0},innerValue:{saturation:0,brightness:0},areaRect:void 0,stickRect:void 0}},computed:{colorStyle(){const e=Vn({hue:this.hue,saturation:100,brightness:100});return{backgroundColor:`rgb(${e.red}, ${e.green}, ${e.blue})`}},stickStyle(){const e=this.areaRect??{width:0,height:0},t=this.innerValue.saturation/100*e.width,i=e.height-this.innerValue.brightness/100*e.height;return{transform:`translate3d(${t}px, ${i}px, 0)`}}},watch:{value:{deep:!0,handler(e){this.isDragging||(this.innerValue=e)}}},mounted(){this.innerValue={...this.value},this.updateRects()},beforeUnmount(){this.unbindMouseEventListeners()},methods:{bindMouseEventListeners(){document.addEventListener("touchmove",this.moveCursor),document.addEventListener("mousemove",this.moveCursor),document.addEventListener("touchend",this.stopDragging),document.addEventListener("mouseup",this.stopDragging)},unbindMouseEventListeners(){document.removeEventListener("touchmove",this.moveCursor),document.removeEventListener("mousemove",this.moveCursor),document.removeEventListener("touchend",this.stopDragging),document.removeEventListener("mouseup",this.stopDragging)},updateRects(){const e=this.$refs.area,t=this.$refs.stick;this.areaRect=e.getBoundingClientRect(),this.stickRect=t.getBoundingClientRect()},startDragging(){this.isDragging=!0,window.onselectstart=()=>!1,this.$emit("start"),this.bindMouseEventListeners()},stopDragging(){window.onselectstart=()=>!0,this.isDragging&&(this.isDragging=!1,this.$emit("finish")),this.unbindMouseEventListeners()},updateValueByClickOnArea(e){V(this.areaRect!==void 0,"areaRect is undefined"),V(this.stickRect!==void 0,"stickRect is undefined");const t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,o=t-this.areaRect.left,s=i-this.areaRect.top,l=Math.max(Math.min(o/this.areaRect.width,1),0),a=Math.max(Math.min(1-s/this.areaRect.height,1),0),u={saturation:l*100,brightness:a*100};this.originalValue=u,this.innerValue=u,this.$emit("color-picker-change-value",u)},moveCursor(e){V(this.areaRect!==void 0,"areaRect is undefined"),V(this.stickRect!==void 0,"stickRect is undefined");const t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,o=t-this.areaRect.left,s=i-this.areaRect.top,l=Math.max(Math.min(o/this.areaRect.width,1),0),a=Math.max(Math.min(1-s/this.areaRect.height,1),0),u={saturation:l*100,brightness:a*100};this.innerValue=u,this.$emit("color-picker-change-value",u)}}});function om(e,t,i,o,s,l){return d(),h("div",{ref:"area",class:"app-color-picker-area",onMousedown:t[0]||(t[0]=a=>{e.updateRects(),e.startDragging(),e.updateValueByClickOnArea(a)}),onTouchstart:t[1]||(t[1]=_(a=>{e.updateRects(),e.startDragging(),e.updateValueByClickOnArea(a)},["prevent"]))},[p("div",{class:"app-color-picker-area__main-color",style:z(e.colorStyle)},null,4),t[2]||(t[2]=p("div",{class:"app-color-picker-area__saturation"},null,-1)),t[3]||(t[3]=p("div",{class:"app-color-picker-area__brightness"},null,-1)),p("div",{ref:"stick",class:"app-color-picker-area__stick",style:z(e.stickStyle)},null,4)],544)}const nm=$(im,[["render",om]]),sm=A({name:"app-input-range-alpha-line",props:{fill:{type:Object,required:!0},variant:{type:String,default:"desktop"}},computed:{gradient(){return this.fill.type===Tt.SOLID?this.gradientForSolidColor:this.gradientForLinearGradient},gradientForSolidColor(){return`rgba(0, 0, 0, 0)
              linear-gradient(
                to right,
                rgba(${this.fill.solidColor.red}, ${this.fill.solidColor.green}, ${this.fill.solidColor.blue}, 0),
                rgb(${this.fill.solidColor.red}, ${this.fill.solidColor.green}, ${this.fill.solidColor.blue})
              )
              repeat scroll 0 0`},gradientForLinearGradient(){return`rgba(0, 0, 0, 0)
              linear-gradient(
                to right,
                rgba(${this.fill.linearGradientColors[0].red}, ${this.fill.linearGradientColors[0].green}, ${this.fill.linearGradientColors[0].blue}, ${this.fill.linearGradientColors[0].alpha}),
                rgb(${this.fill.linearGradientColors[1].red}, ${this.fill.linearGradientColors[1].green}, ${this.fill.linearGradientColors[1].blue}, ${this.fill.linearGradientColors[1].alpha})
              )
              repeat scroll 0 0`}}});function am(e,t,i,o,s,l){return d(),h("div",{class:F(["app-input-range-alpha-line",[`app-input-range-alpha-line--variant-${e.variant}`]])},[p("div",{class:F(["app-input-range-alpha-line__overlay",[`app-input-range-alpha-line--variant-${e.variant}`]]),style:z({background:e.gradient})},null,6)],2)}const vo=$(sm,[["render",am]]);function $i(e,t){if(e==null)return{};var i={},o=Object.keys(e),s,l;for(l=0;l<o.length;l++)s=o[l],!(t.indexOf(s)>=0)&&(i[s]=e[s]);return i}function ie(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new ie.InputMask(e,t)}class de{constructor(t){Object.assign(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},t)}aggregate(t){return this.rawInserted+=t.rawInserted,this.skip=this.skip||t.skip,this.inserted+=t.inserted,this.tailShift+=t.tailShift,this}get offset(){return this.tailShift+this.inserted.length}}ie.ChangeDetails=de;function Bt(e){return typeof e=="string"||e instanceof String}const Z={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function rm(e){switch(e){case Z.LEFT:return Z.FORCE_LEFT;case Z.RIGHT:return Z.FORCE_RIGHT;default:return e}}function Jn(e){return Array.isArray(e)?e:[e,new de]}function xi(e,t){if(t===e)return!0;var i=Array.isArray(t),o=Array.isArray(e),s;if(i&&o){if(t.length!=e.length)return!1;for(s=0;s<t.length;s++)if(!xi(t[s],e[s]))return!1;return!0}if(i!=o)return!1;if(t&&e&&typeof t=="object"&&typeof e=="object"){var l=t instanceof Date,a=e instanceof Date;if(l&&a)return t.getTime()==e.getTime();if(l!=a)return!1;var u=t instanceof RegExp,m=e instanceof RegExp;if(u&&m)return t.toString()==e.toString();if(u!=m)return!1;var f=Object.keys(t);for(s=0;s<f.length;s++)if(!Object.prototype.hasOwnProperty.call(e,f[s]))return!1;for(s=0;s<f.length;s++)if(!xi(e[f[s]],t[f[s]]))return!1;return!0}else if(t&&e&&typeof t=="function"&&typeof e=="function")return t.toString()===e.toString();return!1}class lm{constructor(t,i,o,s){for(this.value=t,this.cursorPos=i,this.oldValue=o,this.oldSelection=s;this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?Z.NONE:(this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos)&&this.oldSelection.end===this.oldSelection.start?Z.RIGHT:Z.LEFT}}class Je{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;this.value=t,this.from=i,this.stop=o}toString(){return this.value}extend(t){this.value+=String(t)}appendTo(t){return t.append(this.toString(),{tail:!0}).aggregate(t._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(t){Object.assign(this,t)}unshift(t){if(!this.value.length||t!=null&&this.from>=t)return"";const i=this.value[0];return this.value=this.value.slice(1),i}shift(){if(!this.value.length)return"";const t=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),t}}class xe{constructor(t){this._value="",this._update(Object.assign({},xe.DEFAULTS,t)),this.isInitialized=!0}updateOptions(t){Object.keys(t).length&&this.withValueRefresh(this._update.bind(this,t))}_update(t){Object.assign(this,t)}get state(){return{_value:this.value}}set state(t){this._value=t._value}reset(){this._value=""}get value(){return this._value}set value(t){this.resolve(t)}resolve(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{input:!0};return this.reset(),this.append(t,i,""),this.doCommit(),this.value}get unmaskedValue(){return this.value}set unmaskedValue(t){this.reset(),this.append(t,{},""),this.doCommit()}get typedValue(){return this.doParse(this.value)}set typedValue(t){this.value=this.doFormat(t)}get rawInputValue(){return this.extractInput(0,this.value.length,{raw:!0})}set rawInputValue(t){this.reset(),this.append(t,{raw:!0},""),this.doCommit()}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(t,i){return t}totalInputPositions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length;return Math.min(this.value.length,i-t)}extractInput(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length;return this.value.slice(t,i)}extractTail(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length;return new Je(this.extractInput(t,i),t)}appendTail(t){return Bt(t)&&(t=new Je(String(t))),t.appendTo(this)}_appendCharRaw(t){return t?(this._value+=t,new de({inserted:t,rawInserted:t})):new de}_appendChar(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;const s=this.state;let l;if([t,l]=Jn(this.doPrepare(t,i)),l=l.aggregate(this._appendCharRaw(t,i)),l.inserted){let a,u=this.doValidate(i)!==!1;if(u&&o!=null){const m=this.state;this.overwrite===!0&&(a=o.state,o.unshift(this.value.length-l.tailShift));let f=this.appendTail(o);u=f.rawInserted===o.toString(),!(u&&f.inserted)&&this.overwrite==="shift"&&(this.state=m,a=o.state,o.shift(),f=this.appendTail(o),u=f.rawInserted===o.toString()),u&&f.inserted&&(this.state=m)}u||(l=new de,this.state=s,o&&a&&(o.state=a))}return l}_appendPlaceholder(){return new de}_appendEager(){return new de}append(t,i,o){if(!Bt(t))throw new Error("value should be string");const s=new de,l=Bt(o)?new Je(String(o)):o;i!=null&&i.tail&&(i._beforeTailState=this.state);for(let a=0;a<t.length;++a){const u=this._appendChar(t[a],i,l);if(!u.rawInserted&&!this.doSkipInvalid(t[a],i,l))break;s.aggregate(u)}return(this.eager===!0||this.eager==="append")&&i!==null&&i!==void 0&&i.input&&t&&s.aggregate(this._appendEager()),l!=null&&(s.tailShift+=this.appendTail(l).tailShift),s}remove(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length;return this._value=this.value.slice(0,t)+this.value.slice(i),new de}withValueRefresh(t){if(this._refreshing||!this.isInitialized)return t();this._refreshing=!0;const i=this.rawInputValue,o=this.value,s=t();return this.rawInputValue=i,this.value&&this.value!==o&&o.indexOf(this.value)===0&&this.append(o.slice(this.value.length),{},""),delete this._refreshing,s}runIsolated(t){if(this._isolated||!this.isInitialized)return t(this);this._isolated=!0;const i=this.state,o=t(this);return this.state=i,delete this._isolated,o}doSkipInvalid(t){return this.skipInvalid}doPrepare(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.prepare?this.prepare(t,this,i):t}doValidate(t){return(!this.validate||this.validate(this.value,this,t))&&(!this.parent||this.parent.doValidate(t))}doCommit(){this.commit&&this.commit(this.value,this)}doFormat(t){return this.format?this.format(t,this):t}doParse(t){return this.parse?this.parse(t,this):t}splice(t,i,o,s){let l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{input:!0};const a=t+i,u=this.extractTail(a),m=this.eager===!0||this.eager==="remove";let f;m&&(s=rm(s),f=this.extractInput(0,a,{raw:!0}));let b=t;const T=new de;if(s!==Z.NONE&&(b=this.nearestInputPos(t,i>1&&t!==0&&!m?Z.NONE:s),T.tailShift=b-t),T.aggregate(this.remove(b)),m&&s!==Z.NONE&&f===this.rawInputValue)if(s===Z.FORCE_LEFT){let C;for(;f===this.rawInputValue&&(C=this.value.length);)T.aggregate(new de({tailShift:-1})).aggregate(this.remove(C-1))}else s===Z.FORCE_RIGHT&&u.unshift();return T.aggregate(this.append(o,l,u))}maskEquals(t){return this.mask===t}typedValueEquals(t){const i=this.typedValue;return t===i||xe.EMPTY_VALUES.includes(t)&&xe.EMPTY_VALUES.includes(i)||this.doFormat(t)===this.doFormat(this.typedValue)}}xe.DEFAULTS={format:String,parse:e=>e,skipInvalid:!0};xe.EMPTY_VALUES=[void 0,null,""];ie.Masked=xe;function xn(e){if(e==null)throw new Error("mask property should be defined");return e instanceof RegExp?ie.MaskedRegExp:Bt(e)?ie.MaskedPattern:e instanceof Date||e===Date?ie.MaskedDate:e instanceof Number||typeof e=="number"||e===Number?ie.MaskedNumber:Array.isArray(e)||e===Array?ie.MaskedDynamic:ie.Masked&&e.prototype instanceof ie.Masked?e:e instanceof ie.Masked?e.constructor:e instanceof Function?ie.MaskedFunction:(console.warn("Mask not found for mask",e),ie.Masked)}function Zt(e){if(ie.Masked&&e instanceof ie.Masked)return e;e=Object.assign({},e);const t=e.mask;if(ie.Masked&&t instanceof ie.Masked)return t;const i=xn(t);if(!i)throw new Error("Masked class is not found for provided mask, appropriate module needs to be import manually before creating mask.");return new i(e)}ie.createMask=Zt;const dm=["parent","isOptional","placeholderChar","displayChar","lazy","eager"],um={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};class es{constructor(t){const{parent:i,isOptional:o,placeholderChar:s,displayChar:l,lazy:a,eager:u}=t,m=$i(t,dm);this.masked=Zt(m),Object.assign(this,{parent:i,isOptional:o,placeholderChar:s,displayChar:l,lazy:a,eager:u})}reset(){this.isFilled=!1,this.masked.reset()}remove(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length;return t===0&&i>=1?(this.isFilled=!1,this.masked.remove(t,i)):new de}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return!!this.masked.value||this.isOptional}_appendChar(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.isFilled)return new de;const o=this.masked.state,s=this.masked._appendChar(t,i);return s.inserted&&this.doValidate(i)===!1&&(s.inserted=s.rawInserted="",this.masked.state=o),!s.inserted&&!this.isOptional&&!this.lazy&&!i.input&&(s.inserted=this.placeholderChar),s.skip=!s.inserted&&!this.isOptional,this.isFilled=!!s.inserted,s}append(){return this.masked.append(...arguments)}_appendPlaceholder(){const t=new de;return this.isFilled||this.isOptional||(this.isFilled=!0,t.inserted=this.placeholderChar),t}_appendEager(){return new de}extractTail(){return this.masked.extractTail(...arguments)}appendTail(){return this.masked.appendTail(...arguments)}extractInput(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length,o=arguments.length>2?arguments[2]:void 0;return this.masked.extractInput(t,i,o)}nearestInputPos(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Z.NONE;const o=0,s=this.value.length,l=Math.min(Math.max(t,o),s);switch(i){case Z.LEFT:case Z.FORCE_LEFT:return this.isComplete?l:o;case Z.RIGHT:case Z.FORCE_RIGHT:return this.isComplete?l:s;case Z.NONE:default:return l}}totalInputPositions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length;return this.value.slice(t,i).length}doValidate(){return this.masked.doValidate(...arguments)&&(!this.parent||this.parent.doValidate(...arguments))}doCommit(){this.masked.doCommit()}get state(){return{masked:this.masked.state,isFilled:this.isFilled}}set state(t){this.masked.state=t.masked,this.isFilled=t.isFilled}}class ts{constructor(t){Object.assign(this,t),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._value.length;return this._value=this._value.slice(0,t)+this._value.slice(i),this._value||(this._isRawInput=!1),new de}nearestInputPos(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Z.NONE;const o=0,s=this._value.length;switch(i){case Z.LEFT:case Z.FORCE_LEFT:return o;case Z.NONE:case Z.RIGHT:case Z.FORCE_RIGHT:default:return s}}totalInputPositions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._value.length;return this._isRawInput?i-t:0}extractInput(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._value.length;return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).raw&&this._isRawInput&&this._value.slice(t,i)||""}get isComplete(){return!0}get isFilled(){return!!this._value}_appendChar(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=new de;if(this.isFilled)return o;const s=this.eager===!0||this.eager==="append",a=this.char===t&&(this.isUnmasking||i.input||i.raw)&&(!i.raw||!s)&&!i.tail;return a&&(o.rawInserted=this.char),this._value=o.inserted=this.char,this._isRawInput=a&&(i.raw||i.input),o}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const t=new de;return this.isFilled||(this._value=t.inserted=this.char),t}extractTail(){return arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length,new Je("")}appendTail(t){return Bt(t)&&(t=new Je(String(t))),t.appendTo(this)}append(t,i,o){const s=this._appendChar(t[0],i);return o!=null&&(s.tailShift+=this.appendTail(o).tailShift),s}doCommit(){}get state(){return{_value:this._value,_isRawInput:this._isRawInput}}set state(t){Object.assign(this,t)}}const pm=["chunks"];class Ct{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.chunks=t,this.from=i}toString(){return this.chunks.map(String).join("")}extend(t){if(!String(t))return;Bt(t)&&(t=new Je(String(t)));const i=this.chunks[this.chunks.length-1],o=i&&(i.stop===t.stop||t.stop==null)&&t.from===i.from+i.toString().length;if(t instanceof Je)o?i.extend(t.toString()):this.chunks.push(t);else if(t instanceof Ct){if(t.stop==null){let s;for(;t.chunks.length&&t.chunks[0].stop==null;)s=t.chunks.shift(),s.from+=t.from,this.extend(s)}t.toString()&&(t.stop=t.blockIndex,this.chunks.push(t))}}appendTo(t){if(!(t instanceof ie.MaskedPattern))return new Je(this.toString()).appendTo(t);const i=new de;for(let o=0;o<this.chunks.length&&!i.skip;++o){const s=this.chunks[o],l=t._mapPosToBlock(t.value.length),a=s.stop;let u;if(a!=null&&(!l||l.index<=a)){if(s instanceof Ct||t._stops.indexOf(a)>=0){const m=t._appendPlaceholder(a);i.aggregate(m)}u=s instanceof Ct&&t._blocks[a]}if(u){const m=u.appendTail(s);m.skip=!1,i.aggregate(m),t._value+=m.inserted;const f=s.toString().slice(m.rawInserted.length);f&&i.aggregate(t.append(f,{tail:!0}))}else i.aggregate(t.append(s.toString(),{tail:!0}))}return i}get state(){return{chunks:this.chunks.map(t=>t.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(t){const{chunks:i}=t,o=$i(t,pm);Object.assign(this,o),this.chunks=i.map(s=>{const l="chunks"in s?new Ct:new Je;return l.state=s,l})}unshift(t){if(!this.chunks.length||t!=null&&this.from>=t)return"";const i=t!=null?t-this.from:t;let o=0;for(;o<this.chunks.length;){const s=this.chunks[o],l=s.unshift(i);if(s.toString()){if(!l)break;++o}else this.chunks.splice(o,1);if(l)return l}return""}shift(){if(!this.chunks.length)return"";let t=this.chunks.length-1;for(;0<=t;){const i=this.chunks[t],o=i.shift();if(i.toString()){if(!o)break;--t}else this.chunks.splice(t,1);if(o)return o}return""}}class cm{constructor(t,i){this.masked=t,this._log=[];const{offset:o,index:s}=t._mapPosToBlock(i)||(i<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=o,this.index=s,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(t){Object.assign(this,t)}pushState(){this._log.push(this.state)}popState(){const t=this._log.pop();return this.state=t,t}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.value.length))}_pushLeft(t){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=((i=this.block)===null||i===void 0?void 0:i.value.length)||0){var i;if(t())return this.ok=!0}return this.ok=!1}_pushRight(t){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(t())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,Z.FORCE_LEFT),this.offset!==0))return!0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,Z.LEFT),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,Z.LEFT),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,Z.FORCE_RIGHT),this.offset!==this.block.value.length))return!0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,Z.NONE),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,Z.NONE),!0})}}class mm extends xe{_update(t){t.mask&&(t.validate=i=>i.search(t.mask)>=0),super._update(t)}}ie.MaskedRegExp=mm;const hm=["_blocks"];class Ve extends xe{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.definitions=Object.assign({},um,t.definitions),super(Object.assign({},Ve.DEFAULTS,t))}_update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.definitions=Object.assign({},this.definitions,t.definitions),super._update(t),this._rebuildMask()}_rebuildMask(){const t=this.definitions;this._blocks=[],this._stops=[],this._maskedBlocks={};let i=this.mask;if(!i||!t)return;let o=!1,s=!1;for(let u=0;u<i.length;++u){var l,a;if(this.blocks){const C=i.slice(u),M=Object.keys(this.blocks).filter(I=>C.indexOf(I)===0);M.sort((I,P)=>P.length-I.length);const L=M[0];if(L){const I=Zt(Object.assign({parent:this,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite},this.blocks[L]));I&&(this._blocks.push(I),this._maskedBlocks[L]||(this._maskedBlocks[L]=[]),this._maskedBlocks[L].push(this._blocks.length-1)),u+=L.length-1;continue}}let m=i[u],f=m in t;if(m===Ve.STOP_CHAR){this._stops.push(this._blocks.length);continue}if(m==="{"||m==="}"){o=!o;continue}if(m==="["||m==="]"){s=!s;continue}if(m===Ve.ESCAPE_CHAR){if(++u,m=i[u],!m)break;f=!1}const b=(l=t[m])!==null&&l!==void 0&&l.mask&&!(((a=t[m])===null||a===void 0?void 0:a.mask.prototype)instanceof ie.Masked)?t[m]:{mask:t[m]},T=f?new es(Object.assign({parent:this,isOptional:s,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar},b)):new ts({char:m,eager:this.eager,isUnmasking:o});this._blocks.push(T)}}get state(){return Object.assign({},super.state,{_blocks:this._blocks.map(t=>t.state)})}set state(t){const{_blocks:i}=t,o=$i(t,hm);this._blocks.forEach((s,l)=>s.state=i[l]),super.state=o}reset(){super.reset(),this._blocks.forEach(t=>t.reset())}get isComplete(){return this._blocks.every(t=>t.isComplete)}get isFilled(){return this._blocks.every(t=>t.isFilled)}get isFixed(){return this._blocks.every(t=>t.isFixed)}get isOptional(){return this._blocks.every(t=>t.isOptional)}doCommit(){this._blocks.forEach(t=>t.doCommit()),super.doCommit()}get unmaskedValue(){return this._blocks.reduce((t,i)=>t+=i.unmaskedValue,"")}set unmaskedValue(t){super.unmaskedValue=t}get value(){return this._blocks.reduce((t,i)=>t+=i.value,"")}set value(t){super.value=t}get displayValue(){return this._blocks.reduce((t,i)=>t+=i.displayValue,"")}appendTail(t){return super.appendTail(t).aggregate(this._appendPlaceholder())}_appendEager(){var t;const i=new de;let o=(t=this._mapPosToBlock(this.value.length))===null||t===void 0?void 0:t.index;if(o==null)return i;this._blocks[o].isFilled&&++o;for(let s=o;s<this._blocks.length;++s){const l=this._blocks[s]._appendEager();if(!l.inserted)break;i.aggregate(l)}return i}_appendCharRaw(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=this._mapPosToBlock(this.value.length),s=new de;if(!o)return s;for(let u=o.index;;++u){var l,a;const m=this._blocks[u];if(!m)break;const f=m._appendChar(t,Object.assign({},i,{_beforeTailState:(l=i._beforeTailState)===null||l===void 0||(a=l._blocks)===null||a===void 0?void 0:a[u]})),b=f.skip;if(s.aggregate(f),b||f.rawInserted)break}return s}extractTail(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length;const o=new Ct;return t===i||this._forEachBlocksInRange(t,i,(s,l,a,u)=>{const m=s.extractTail(a,u);m.stop=this._findStopBefore(l),m.from=this._blockStartPos(l),m instanceof Ct&&(m.blockIndex=l),o.extend(m)}),o}extractInput(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t===i)return"";let s="";return this._forEachBlocksInRange(t,i,(l,a,u,m)=>{s+=l.extractInput(u,m,o)}),s}_findStopBefore(t){let i;for(let o=0;o<this._stops.length;++o){const s=this._stops[o];if(s<=t)i=s;else break}return i}_appendPlaceholder(t){const i=new de;if(this.lazy&&t==null)return i;const o=this._mapPosToBlock(this.value.length);if(!o)return i;const s=o.index,l=t??this._blocks.length;return this._blocks.slice(s,l).forEach(a=>{if(!a.lazy||t!=null){const u=a._blocks!=null?[a._blocks.length]:[],m=a._appendPlaceholder(...u);this._value+=m.inserted,i.aggregate(m)}}),i}_mapPosToBlock(t){let i="";for(let o=0;o<this._blocks.length;++o){const s=this._blocks[o],l=i.length;if(i+=s.value,t<=i.length)return{index:o,offset:t-l}}}_blockStartPos(t){return this._blocks.slice(0,t).reduce((i,o)=>i+=o.value.length,0)}_forEachBlocksInRange(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length,o=arguments.length>2?arguments[2]:void 0;const s=this._mapPosToBlock(t);if(s){const l=this._mapPosToBlock(i),a=l&&s.index===l.index,u=s.offset,m=l&&a?l.offset:this._blocks[s.index].value.length;if(o(this._blocks[s.index],s.index,u,m),l&&!a){for(let f=s.index+1;f<l.index;++f)o(this._blocks[f],f,0,this._blocks[f].value.length);o(this._blocks[l.index],l.index,0,l.offset)}}}remove(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length;const o=super.remove(t,i);return this._forEachBlocksInRange(t,i,(s,l,a,u)=>{o.aggregate(s.remove(a,u))}),o}nearestInputPos(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Z.NONE;if(!this._blocks.length)return 0;const o=new cm(this,t);if(i===Z.NONE)return o.pushRightBeforeInput()||(o.popState(),o.pushLeftBeforeInput())?o.pos:this.value.length;if(i===Z.LEFT||i===Z.FORCE_LEFT){if(i===Z.LEFT){if(o.pushRightBeforeFilled(),o.ok&&o.pos===t)return t;o.popState()}if(o.pushLeftBeforeInput(),o.pushLeftBeforeRequired(),o.pushLeftBeforeFilled(),i===Z.LEFT){if(o.pushRightBeforeInput(),o.pushRightBeforeRequired(),o.ok&&o.pos<=t||(o.popState(),o.ok&&o.pos<=t))return o.pos;o.popState()}return o.ok?o.pos:i===Z.FORCE_LEFT?0:(o.popState(),o.ok||(o.popState(),o.ok)?o.pos:0)}return i===Z.RIGHT||i===Z.FORCE_RIGHT?(o.pushRightBeforeInput(),o.pushRightBeforeRequired(),o.pushRightBeforeFilled()?o.pos:i===Z.FORCE_RIGHT?this.value.length:(o.popState(),o.ok||(o.popState(),o.ok)?o.pos:this.nearestInputPos(t,Z.LEFT))):t}totalInputPositions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.value.length,o=0;return this._forEachBlocksInRange(t,i,(s,l,a,u)=>{o+=s.totalInputPositions(a,u)}),o}maskedBlock(t){return this.maskedBlocks(t)[0]}maskedBlocks(t){const i=this._maskedBlocks[t];return i?i.map(o=>this._blocks[o]):[]}}Ve.DEFAULTS={lazy:!0,placeholderChar:"_"};Ve.STOP_CHAR="`";Ve.ESCAPE_CHAR="\\";Ve.InputDefinition=es;Ve.FixedDefinition=ts;ie.MaskedPattern=Ve;class bi extends Ve{get _matchFrom(){return this.maxLength-String(this.from).length}_update(t){t=Object.assign({to:this.to||0,from:this.from||0,maxLength:this.maxLength||0},t);let i=String(t.to).length;t.maxLength!=null&&(i=Math.max(i,t.maxLength)),t.maxLength=i;const o=String(t.from).padStart(i,"0"),s=String(t.to).padStart(i,"0");let l=0;for(;l<s.length&&s[l]===o[l];)++l;t.mask=s.slice(0,l).replace(/0/g,"\\0")+"0".repeat(i-l),super._update(t)}get isComplete(){return super.isComplete&&!!this.value}boundaries(t){let i="",o="";const[,s,l]=t.match(/^(\D*)(\d*)(\D*)/)||[];return l&&(i="0".repeat(s.length)+l,o="9".repeat(s.length)+l),i=i.padEnd(this.maxLength,"0"),o=o.padEnd(this.maxLength,"9"),[i,o]}doPrepare(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o;if([t,o]=Jn(super.doPrepare(t.replace(/\D/g,""),i)),!this.autofix||!t)return t;const s=String(this.from).padStart(this.maxLength,"0"),l=String(this.to).padStart(this.maxLength,"0");let a=this.value+t;if(a.length>this.maxLength)return"";const[u,m]=this.boundaries(a);return Number(m)<this.from?s[a.length-1]:Number(u)>this.to?this.autofix==="pad"&&a.length<this.maxLength?["",o.aggregate(this.append(s[a.length-1]+t,i))]:l[a.length-1]:t}doValidate(){const t=this.value;if(t.search(/[^0]/)===-1&&t.length<=this._matchFrom)return!0;const[o,s]=this.boundaries(t);return this.from<=Number(s)&&Number(o)<=this.to&&super.doValidate(...arguments)}}ie.MaskedRange=bi;class zt extends Ve{constructor(t){super(Object.assign({},zt.DEFAULTS,t))}_update(t){t.mask===Date&&delete t.mask,t.pattern&&(t.mask=t.pattern);const i=t.blocks;t.blocks=Object.assign({},zt.GET_DEFAULT_BLOCKS()),t.min&&(t.blocks.Y.from=t.min.getFullYear()),t.max&&(t.blocks.Y.to=t.max.getFullYear()),t.min&&t.max&&t.blocks.Y.from===t.blocks.Y.to&&(t.blocks.m.from=t.min.getMonth()+1,t.blocks.m.to=t.max.getMonth()+1,t.blocks.m.from===t.blocks.m.to&&(t.blocks.d.from=t.min.getDate(),t.blocks.d.to=t.max.getDate())),Object.assign(t.blocks,this.blocks,i),Object.keys(t.blocks).forEach(o=>{const s=t.blocks[o];!("autofix"in s)&&"autofix"in t&&(s.autofix=t.autofix)}),super._update(t)}doValidate(){const t=this.date;return super.doValidate(...arguments)&&(!this.isComplete||this.isDateExist(this.value)&&t!=null&&(this.min==null||this.min<=t)&&(this.max==null||t<=this.max))}isDateExist(t){return this.format(this.parse(t,this),this).indexOf(t)>=0}get date(){return this.typedValue}set date(t){this.typedValue=t}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(t){super.typedValue=t}maskEquals(t){return t===Date||super.maskEquals(t)}}zt.DEFAULTS={pattern:"d{.}`m{.}`Y",format:e=>{if(!e)return"";const t=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return[t,i,o].join(".")},parse:e=>{const[t,i,o]=e.split(".");return new Date(o,i-1,t)}};zt.GET_DEFAULT_BLOCKS=()=>({d:{mask:bi,from:1,to:31,maxLength:2},m:{mask:bi,from:1,to:12,maxLength:2},Y:{mask:bi,from:1900,to:9999}});ie.MaskedDate=zt;class fo{get selectionStart(){let t;try{t=this._unsafeSelectionStart}catch{}return t??this.value.length}get selectionEnd(){let t;try{t=this._unsafeSelectionEnd}catch{}return t??this.value.length}select(t,i){if(!(t==null||i==null||t===this.selectionStart&&i===this.selectionEnd))try{this._unsafeSelect(t,i)}catch{}}_unsafeSelect(t,i){}get isActive(){return!1}bindEvents(t){}unbindEvents(){}}ie.MaskElement=fo;class qt extends fo{constructor(t){super(),this.input=t,this._handlers={}}get rootElement(){var t,i,o;return(t=(i=(o=this.input).getRootNode)===null||i===void 0?void 0:i.call(o))!==null&&t!==void 0?t:document}get isActive(){return this.input===this.rootElement.activeElement}get _unsafeSelectionStart(){return this.input.selectionStart}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(t,i){this.input.setSelectionRange(t,i)}get value(){return this.input.value}set value(t){this.input.value=t}bindEvents(t){Object.keys(t).forEach(i=>this._toggleEventHandler(qt.EVENTS_MAP[i],t[i]))}unbindEvents(){Object.keys(this._handlers).forEach(t=>this._toggleEventHandler(t))}_toggleEventHandler(t,i){this._handlers[t]&&(this.input.removeEventListener(t,this._handlers[t]),delete this._handlers[t]),i&&(this.input.addEventListener(t,i),this._handlers[t]=i)}}qt.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"};ie.HTMLMaskElement=qt;class is extends qt{get _unsafeSelectionStart(){const t=this.rootElement,i=t.getSelection&&t.getSelection(),o=i&&i.anchorOffset,s=i&&i.focusOffset;return s==null||o==null||o<s?o:s}get _unsafeSelectionEnd(){const t=this.rootElement,i=t.getSelection&&t.getSelection(),o=i&&i.anchorOffset,s=i&&i.focusOffset;return s==null||o==null||o>s?o:s}_unsafeSelect(t,i){if(!this.rootElement.createRange)return;const o=this.rootElement.createRange();o.setStart(this.input.firstChild||this.input,t),o.setEnd(this.input.lastChild||this.input,i);const s=this.rootElement,l=s.getSelection&&s.getSelection();l&&(l.removeAllRanges(),l.addRange(o))}get value(){return this.input.textContent}set value(t){this.input.textContent=t}}ie.HTMLContenteditableMaskElement=is;const gm=["mask"];class vm{constructor(t,i){this.el=t instanceof fo?t:t.isContentEditable&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"?new is(t):new qt(t),this.masked=Zt(i),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}get mask(){return this.masked.mask}maskEquals(t){var i;return t==null||((i=this.masked)===null||i===void 0?void 0:i.maskEquals(t))}set mask(t){if(this.maskEquals(t))return;if(!(t instanceof ie.Masked)&&this.masked.constructor===xn(t)){this.masked.updateOptions({mask:t});return}const i=Zt({mask:t});i.unmaskedValue=this.masked.unmaskedValue,this.masked=i}get value(){return this._value}set value(t){this.value!==t&&(this.masked.value=t,this.updateControl(),this.alignCursor())}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(t){this.unmaskedValue!==t&&(this.masked.unmaskedValue=t,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(t){this.masked.typedValueEquals(t)||(this.masked.typedValue=t,this.updateControl(),this.alignCursor())}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(t){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];const l=this._listeners[t];l&&l.forEach(a=>a(...o))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(t){!this.el||!this.el.isActive||(this.el.select(t,t),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value}updateControl(){const t=this.masked.unmaskedValue,i=this.masked.value,o=this.displayValue,s=this.unmaskedValue!==t||this.value!==i;this._unmaskedValue=t,this._value=i,this.el.value!==o&&(this.el.value=o),s&&this._fireChangeEvents()}updateOptions(t){const{mask:i}=t,o=$i(t,gm),s=!this.maskEquals(i),l=!xi(this.masked,o);s&&(this.mask=i),l&&this.masked.updateOptions(o),(s||l)&&this.updateControl()}updateCursor(t){t!=null&&(this.cursorPos=t,this._delayUpdateCursor(t))}_delayUpdateCursor(t){this._abortUpdateCursor(),this._changingCursorPos=t,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,Z.LEFT))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(t,i){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(i),this}off(t,i){if(!this._listeners[t])return this;if(!i)return delete this._listeners[t],this;const o=this._listeners[t].indexOf(i);return o>=0&&this._listeners[t].splice(o,1),this}_onInput(t){if(this._inputEvent=t,this._abortUpdateCursor(),!this._selection)return this.updateValue();const i=new lm(this.el.value,this.cursorPos,this.displayValue,this._selection),o=this.masked.rawInputValue,s=this.masked.splice(i.startChangePos,i.removed.length,i.inserted,i.removeDirection,{input:!0,raw:!0}).offset,l=o===this.masked.rawInputValue?i.removeDirection:Z.NONE;let a=this.masked.nearestInputPos(i.startChangePos+s,l);l!==Z.NONE&&(a=this.masked.nearestInputPos(a,Z.NONE)),this.updateControl(),this.updateCursor(a),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(t){t.preventDefault(),t.stopPropagation()}_onFocus(t){this.alignCursorFriendly()}_onClick(t){this.alignCursorFriendly()}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}}ie.InputMask=vm;const fm={mask:"HHHHHH",lazy:!1,definitions:{H:/^[0-9a-f]$/i}},bm={mask:"000"},_i={COLOR_RGB_NUMERIC:bm,COLOR_RGB_HEX:fm},rn=(e,t)=>{e.maskRef=ie(e,t).on("accept",()=>Ki(e,"accept",e.maskRef)).on("complete",()=>Ki(e,"complete",e.maskRef))},ym=(e,t)=>{e.maskRef.updateOptions(t),e.value!==e.maskRef.value&&e.maskRef.updateValue()},ln=e=>{e.maskRef!==void 0&&(e.maskRef.destroy(),delete e.maskRef)},Em={beforeMount:(e,t)=>{const i=e;if(typeof t.value=="string"&&t.value in _i){const o=_i[t.value];rn(i,o)}},updated:(e,t)=>{const i=e;if(t.value!==void 0){const o=_i[t.value];i.maskRef!==void 0?ym(i,o):rn(i,o)}else ln(i)},unmounted:e=>{ln(e)}},dn=10,un=10;let Et,ki,bo;function pn(e){if(e.targetTouches.length!==1)return;if(Et===void 0)return e.preventDefault();const t=e.touches[0].clientY,i=e.touches[0].clientX,o=Math.abs(bo-i);(ki-t<-un&&Et.scrollTop<=0&&o<dn||ki-t>un&&Et.scrollTop+Et.clientHeight>=Et.scrollHeight&&o<dn)&&e.preventDefault()}function cn(e){let t=e.target;for(ki=e.touches[0].clientY,bo=e.touches[0].clientX;t!==this;){const{scrollHeight:i,scrollWidth:o,clientHeight:s,clientWidth:l}=t;if(o!==l||i!==s){Et=t;break}V(t.parentElement!==null,"parentElement is undefined"),t=t.parentElement}}function Ui(){Et=void 0,ki=0,bo=0}let qi;const mn=()=>(qi===void 0&&(qi=so()),qi),Sm={beforeMount(e){mn()&&(e.addEventListener("touchstart",cn),e.addEventListener("touchmove",pn,{passive:!1}),e.addEventListener("touchend",Ui))},unmounted(e){mn()&&(e.removeEventListener("touchstart",cn),e.removeEventListener("touchmove",pn),e.removeEventListener("touchend",Ui),Ui())}};class km{constructor(){U(this,"_listeners",new Map);U(this,"on",this.addEventListener);U(this,"off",this.removeEventListener);U(this,"emit",this.dispatchEvent)}addEventListener(t,i){const o=this._listeners.get(t)??new Set;return this._listeners.set(t,o),o.add(i),this}removeEventListener(t,i){return this._listeners.get(t)?.delete(i),this}dispatchEvent(t,...i){let o=!0;for(const s of this._listeners.get(t)??[])o=s(...i)!==!1&&o;return o}unbindAllListeners(){this._listeners.clear()}}const hn=(e,t="px")=>typeof e=="number"?e+t:e;function at({style:e},t,i){if(typeof t=="object")for(const[o,s]of Object.entries(t))s!==void 0&&(e[o]=hn(s));else i!==void 0&&(e[t]=hn(i))}const os=e=>(t,i,o,s={})=>{t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);for(const l of t)if(l)for(const a of i)l[e](a,o,{capture:!1,...s});return[t,i,o,s]},Ot=os("addEventListener"),rt=os("removeEventListener"),ci=e=>{const{clientX:t,clientY:i,target:o}=e.touches?.[0]??e;return{x:t,y:i,target:o}};function gn(e,t,i="touch"){switch(i){case"center":{const o=t.left+t.width/2,s=t.top+t.height/2;return o>=e.left&&o<=e.right&&s>=e.top&&s<=e.bottom}case"cover":return t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom;case"touch":return e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom}}function Ft(e,t=document){const i=Array.isArray(e)?e:[e];let o=[];for(let s=0,l=i.length;s<l;s++){const a=i[s];typeof a=="string"?o=o.concat(Array.from(t.querySelectorAll(a))):a instanceof Element&&o.push(a)}return o}const Cm=()=>matchMedia("(hover: none), (pointer: coarse)").matches,Tm=()=>"safari"in window,$m=e=>{let t,i=-1,o=!1;return{next(...s){t=s,o||(o=!0,i=requestAnimationFrame(()=>{e(...t),o=!1}))},cancel(){cancelAnimationFrame(i),o=!1}}};function wm(e,t){for(const i of t){if(typeof i=="number")return e.button===i;if(typeof i=="object"){const o=i.button===e.button,s=i.modifiers.every(l=>{switch(l){case"alt":return e.altKey;case"ctrl":return e.ctrlKey||e.metaKey;case"shift":return e.shiftKey}});return o&&s}}return!1}const{abs:ft,max:vn,min:fn,ceil:bn}=Math;class ns extends km{constructor(i){super();U(this,"_options");U(this,"_selection",{stored:[],selected:[],touched:[],changed:{added:[],removed:[]}});U(this,"_area");U(this,"_clippingElement");U(this,"_targetElement");U(this,"_targetRect");U(this,"_selectables",[]);U(this,"_latestElement");U(this,"_areaRect",new DOMRect);U(this,"_areaLocation",{y1:0,x2:0,y2:0,x1:0});U(this,"_singleClick",!0);U(this,"_frame");U(this,"_scrollAvailable",!0);U(this,"_scrollingActive",!1);U(this,"_scrollSpeed",{x:0,y:0});U(this,"_scrollDelta",{x:0,y:0});U(this,"disable",this._bindStartEvents.bind(this,!1));U(this,"enable",this._bindStartEvents);this._options={selectionAreaClass:"selection-area",selectionContainerClass:void 0,selectables:[],document:window.document,startAreas:["html"],boundaries:["html"],container:"body",...i,behaviour:{overlap:"invert",intersect:"touch",triggers:[0],...i.behaviour,startThreshold:i.behaviour?.startThreshold?typeof i.behaviour.startThreshold=="number"?i.behaviour.startThreshold:{x:10,y:10,...i.behaviour.startThreshold}:{x:10,y:10},scrolling:{speedDivider:10,manualSpeed:750,...i.behaviour?.scrolling,startScrollMargins:{x:0,y:0,...i.behaviour?.scrolling?.startScrollMargins}}},features:{range:!0,touch:!0,...i.features,singleTap:{allow:!0,intersect:"native",...i.features?.singleTap}}};for(const a of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))typeof this[a]=="function"&&(this[a]=this[a].bind(this));const{document:o,selectionAreaClass:s,selectionContainerClass:l}=this._options;this._area=o.createElement("div"),this._clippingElement=o.createElement("div"),this._clippingElement.appendChild(this._area),this._area.classList.add(s),l&&this._clippingElement.classList.add(l),at(this._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed",border:"1px solid rgba(255, 255, 255, 0.80)",backgroundColor:"rgba(255, 255, 255, 0.10)"}),at(this._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"9999"}),this._frame=$m(a=>{this._recalculateSelectionAreaRect(),this._updateElementSelection(),this._emitEvent("move",a),this._redrawSelectionArea()}),this.enable()}_bindStartEvents(i=!0){const{document:o,features:s}=this._options,l=i?Ot:rt;l(o,"mousedown",this._onTapStart),s.touch&&l(o,"touchstart",this._onTapStart,{passive:!1})}_onTapStart(i,o=!1){const{x:s,y:l,target:a}=ci(i),{_options:u}=this,{document:m}=this._options,f=a.getBoundingClientRect();if(i instanceof MouseEvent&&!wm(i,u.behaviour.triggers))return;const b=Ft(u.startAreas,u.document),T=Ft(u.boundaries,u.document);this._targetElement=T.find(L=>gn(L.getBoundingClientRect(),f));const C=i.composedPath();if(!this._targetElement||!b.find(L=>C.includes(L))||!T.find(L=>C.includes(L))||!o&&this._emitEvent("beforestart",i)===!1)return;this._areaLocation={x1:s,y1:l,x2:0,y2:0};const M=m.scrollingElement??m.body;this._scrollDelta={x:M.scrollLeft,y:M.scrollTop},this._singleClick=!0,this.clearSelection(!1,!0),Ot(m,["touchmove","mousemove"],this._delayedTapMove,{passive:!1}),Ot(m,["mouseup","touchcancel","touchend"],this._onTapStop),Ot(m,"scroll",this._onScroll)}_onSingleTap(i){const{singleTap:{intersect:o},range:s}=this._options.features,l=ci(i);let a;if(o==="native")a=l.target;else if(o==="touch"){this.resolveSelectables();const{x:m,y:f}=l;a=this._selectables.find(b=>{const{right:T,left:C,top:M,bottom:L}=b.getBoundingClientRect();return m<T&&m>C&&f<L&&f>M})}if(!a)return;for(this.resolveSelectables();!this._selectables.includes(a);){if(!a.parentElement)return;a=a.parentElement}const{stored:u}=this._selection;if(this._emitEvent("start",i),i.shiftKey&&s&&this._latestElement){const m=this._latestElement,[f,b]=m.compareDocumentPosition(a)&4?[a,m]:[m,a],T=[...this._selectables.filter(C=>C.compareDocumentPosition(f)&4&&C.compareDocumentPosition(b)&2),f,b];this.select(T),this._latestElement=m}else u.includes(a)&&(u.length===1||i.ctrlKey||u.every(m=>this._selection.stored.includes(m)))?this.deselect(a):(this.select(a),this._latestElement=a);this._emitEvent("stop",i)}_delayedTapMove(i){const{container:o,document:s,behaviour:{startThreshold:l}}=this._options,{x1:a,y1:u}=this._areaLocation,{x:m,y:f}=ci(i);if(typeof l=="number"&&ft(m+f-(a+u))>=l||typeof l=="object"&&ft(m-a)>=l.x||ft(f-u)>=l.y){if(rt(s,["mousemove","touchmove"],this._delayedTapMove,{passive:!1}),this._emitEvent("beforedrag",i)===!1){rt(s,["mouseup","touchcancel","touchend"],this._onTapStop);return}Ot(s,["mousemove","touchmove"],this._onTapMove,{passive:!1}),at(this._area,"display","block"),Ft(o,s)[0].appendChild(this._clippingElement),this.resolveSelectables(),this._singleClick=!1,this._targetRect=this._targetElement.getBoundingClientRect(),this._scrollAvailable=this._targetElement.scrollHeight!==this._targetElement.clientHeight||this._targetElement.scrollWidth!==this._targetElement.clientWidth,this._scrollAvailable&&(Ot(this._targetElement,"wheel",this._manualScroll,{passive:!1}),this._selectables=this._selectables.filter(b=>this._targetElement.contains(b))),this._setupSelectionArea(),this._emitEvent("start",i),this._onTapMove(i)}this._handleMoveEvent(i)}_setupSelectionArea(){const{_clippingElement:i,_targetElement:o,_area:s}=this,l=this._targetRect=o.getBoundingClientRect();this._scrollAvailable?(at(i,{top:l.top,left:l.left,width:l.width,height:l.height}),at(s,{marginTop:-l.top,marginLeft:-l.left})):(at(i,{top:0,left:0,width:"100%",height:"100%"}),at(s,{marginTop:0,marginLeft:0}))}_onTapMove(i){const{x:o,y:s}=ci(i),{_scrollSpeed:l,_areaLocation:a,_options:u,_frame:m}=this,{speedDivider:f}=u.behaviour.scrolling,b=this._targetElement;if(a.x2=o,a.y2=s,this._scrollAvailable&&!this._scrollingActive&&(l.y||l.x)){this._scrollingActive=!0;const T=()=>{if(!l.x&&!l.y){this._scrollingActive=!1;return}const{scrollTop:C,scrollLeft:M}=b;l.y&&(b.scrollTop+=bn(l.y/f),a.y1-=b.scrollTop-C),l.x&&(b.scrollLeft+=bn(l.x/f),a.x1-=b.scrollLeft-M),m.next(i),requestAnimationFrame(T)};requestAnimationFrame(T)}else m.next(i);this._handleMoveEvent(i)}_handleMoveEvent(i){const{features:o}=this._options;(o.touch&&Cm()||this._scrollAvailable&&Tm())&&i.preventDefault()}_onScroll(){const{_scrollDelta:i,_options:{document:o}}=this,{scrollTop:s,scrollLeft:l}=o.scrollingElement??o.body;this._areaLocation.x1+=i.x-l,this._areaLocation.y1+=i.y-s,i.x=l,i.y=s,this._setupSelectionArea(),this._frame.next(null)}_manualScroll(i){const{manualSpeed:o}=this._options.behaviour.scrolling,s=i.deltaY?i.deltaY>0?1:-1:0,l=i.deltaX?i.deltaX>0?1:-1:0;this._scrollSpeed.y+=s*o,this._scrollSpeed.x+=l*o,this._onTapMove(i),i.preventDefault()}_recalculateSelectionAreaRect(){const{_scrollSpeed:i,_areaLocation:o,_areaRect:s,_targetElement:l,_options:a}=this,{scrollTop:u,scrollHeight:m,clientHeight:f,scrollLeft:b,scrollWidth:T,clientWidth:C}=l,M=this._targetRect,{x1:L,y1:I}=o;let{x2:P,y2:j}=o;const{behaviour:{scrolling:{startScrollMargins:B}}}=a;P<M.left+B.x?(i.x=b?-ft(M.left-P+B.x):0,P=P<M.left?M.left:P):P>M.right-B.x?(i.x=T-b-C?ft(M.left+M.width-P-B.x):0,P=P>M.right?M.right:P):i.x=0,j<M.top+B.y?(i.y=u?-ft(M.top-j+B.y):0,j=j<M.top?M.top:j):j>M.bottom-B.y?(i.y=m-u-f?ft(M.top+M.height-j-B.y):0,j=j>M.bottom?M.bottom:j):i.y=0;const Y=fn(L,P),ve=fn(I,j),x=vn(L,P),He=vn(I,j);s.x=Y,s.y=ve,s.width=x-Y,s.height=He-ve}_redrawSelectionArea(){const{x:i,y:o,width:s,height:l}=this._areaRect,{style:a}=this._area;a.left=`${i}px`,a.top=`${o}px`,a.width=`${s}px`,a.height=`${l}px`}_onTapStop(i,o){const{document:s,features:l}=this._options,{_singleClick:a}=this;rt(s,["mousemove","touchmove"],this._delayedTapMove),rt(s,["touchmove","mousemove"],this._onTapMove),rt(s,["mouseup","touchcancel","touchend"],this._onTapStop),rt(s,"scroll",this._onScroll),this._keepSelection(),i&&a&&l.singleTap.allow?this._onSingleTap(i):!a&&!o&&(this._updateElementSelection(),this._emitEvent("stop",i)),this._scrollSpeed.x=0,this._scrollSpeed.y=0,rt(this._targetElement,"wheel",this._manualScroll,{passive:!0}),this._clippingElement.remove(),this._frame?.cancel(),at(this._area,"display","none")}_updateElementSelection(){const{_selectables:i,_options:o,_selection:s,_areaRect:l}=this,{stored:a,selected:u,touched:m}=s,{intersect:f,overlap:b}=o.behaviour,T=b==="invert",C=[],M=[],L=[];for(let P=0;P<i.length;P++){const j=i[P];if(gn(l,j.getBoundingClientRect(),f)){if(u.includes(j))a.includes(j)&&!m.includes(j)&&m.push(j);else if(T&&a.includes(j)){L.push(j);continue}else M.push(j);C.push(j)}}T&&M.push(...a.filter(P=>!u.includes(P)));const I=b==="keep";for(let P=0;P<u.length;P++){const j=u[P];!C.includes(j)&&!(I&&a.includes(j))&&L.push(j)}s.selected=C,s.changed={added:M,removed:L},this._latestElement=void 0}_emitEvent(i,o){return this.emit(i,{event:o,store:this._selection,selection:this})}_keepSelection(){const{_options:i,_selection:o}=this,{selected:s,changed:l,touched:a,stored:u}=o,m=s.filter(f=>!u.includes(f));switch(i.behaviour.overlap){case"drop":{o.stored=[...m,...u.filter(f=>!a.includes(f))];break}case"invert":{o.stored=[...m,...u.filter(f=>!l.removed.includes(f))];break}case"keep":{o.stored=[...u,...s.filter(f=>!u.includes(f))];break}}}trigger(i,o=!0){this._onTapStart(i,o)}resolveSelectables(){this._selectables=Ft(this._options.selectables,this._options.document)}clearSelection(i=!0,o=!1){const{selected:s,stored:l,changed:a}=this._selection;a.added=[],a.removed.push(...s,...i?l:[]),o||(this._emitEvent("move",null),this._emitEvent("stop",null)),this._selection={stored:i?[]:l,selected:[],touched:[],changed:{added:[],removed:[]}}}getSelection(){return this._selection.stored}getSelectionArea(){return this._area}cancel(i=!1){this._onTapStop(null,!i)}destroy(){this.cancel(),this.disable(),this._clippingElement.remove(),super.unbindAllListeners()}select(i,o=!1){const{changed:s,selected:l,stored:a}=this._selection,u=Ft(i,this._options.document).filter(m=>!l.includes(m)&&!a.includes(m));return a.push(...u),l.push(...u),s.added.push(...u),s.removed=[],this._latestElement=void 0,o||(this._emitEvent("move",null),this._emitEvent("stop",null)),u}deselect(i,o=!1){const{selected:s,stored:l,changed:a}=this._selection,u=Ft(i,this._options.document).filter(m=>s.includes(m)||l.includes(m));u.length&&(this._selection.stored=l.filter(m=>!u.includes(m)),this._selection.selected=s.filter(m=>!u.includes(m)),this._selection.changed.added=[],this._selection.changed.removed.push(...u.filter(m=>!a.removed.includes(m))),this._latestElement=void 0,o||(this._emitEvent("move",null),this._emitEvent("stop",null)))}}U(ns,"version","clideo");const Wi=Symbol("viselect"),Am=e=>typeof e=="object"&&e!==null,yn=e=>Am(e)&&typeof e.idAttr=="string"&&typeof e.itemsSelector=="string",En=(e,t)=>{e.disabled===!0?t.disable():t.enable(!0)},Mm={beforeMount(e,t){const i=t.value;V(yn(i),"invalid v-selectable config");let o=i.boundaries;(o===void 0||o.length===0)&&(o=[e]);const s=new ns({selectables:i.itemsSelector,startAreas:o,boundaries:[e],features:{singleTap:{allow:!1}},behaviour:{overlap:"keep"}});s.on("beforestart",()=>{s.clearSelection(!0,!0)}),s.on("move",l=>{const a=[];for(const u of l.store.selected){const m=u.getAttribute(i.idAttr);typeof m=="string"&&m.length>0&&a.push(m)}i.onSelect(a)}),s.on("start",()=>{i.onStart()}),s.on("stop",()=>{i.onStop()}),En(i,s),e[Wi]=s},updated(e,t){const i=t.value,o=e[Wi];V(yn(i),"invalid v-selectable config"),o!==void 0&&En(i,o)},unmounted(e){e[Wi]?.destroy()}},Rm=A({name:"app-color-picker-spectrum",directives:{inputMaskDirective:Em},props:{isAlphaEnabled:{type:Boolean,default:!1},size:{type:String,default:lt.DEFAULT},color:{type:Object,required:!0},appLayout:{type:String,default:null}},emits:{"color-change-start":null,"color-change-finish":null,"color-change":e=>!0},data(){return{lastRedValue:void 0,lastGreenValue:void 0,lastBlueValue:void 0,lastHexValue:void 0,isInChangeProcess:!1,colorInHsb:{hue:0,saturation:0,brightness:0}}},computed:{colorInHex(){return Vt(this.color,{withAlpha:!1}).substring(1)},innerColorInRgba(){return Vn(this.colorInHsb)},areaModifier(){switch(this.size){case lt.TINY:return"mobile-tiny";case lt.SMALL:return"mobile-small";case lt.MEDIUM:return"mobile-medium";case lt.LARGE:return"mobile-large";default:return""}},alphaLinePreviewFill(){return{type:Tt.SOLID,solidColor:this.color,linearGradientSkewAngle:0,linearGradientColors:[],linearGradientColorStops:[]}}},watch:{color(e){this.isInChangeProcess||(this.colorInHsb=Ko(e))}},mounted(){this.colorInHsb=Ko(this.color)},methods:{changeSaturationAndBrightness(e){this.colorInHsb.saturation=e.saturation,this.colorInHsb.brightness=e.brightness,this.emitColorChange()},changeHue(e){this.colorInHsb.hue=e,this.emitColorChange()},changeAlphaValue(e){this.emitColorChange(e)},emitColorChange(e){const t=JSON.parse(JSON.stringify(this.innerColorInRgba));e!==void 0?t.alpha=e:t.alpha=this.color.alpha,this.$emit("color-change",t)},focusHexInput(){this.lastHexValue=Vt(this.color).substring(1),this.$refs.hexInput.select()},focusRedInput(){this.lastRedValue=this.color.red,this.$refs.redChannelInput.select()},focusGreenInput(){this.lastGreenValue=this.color.green,this.$refs.greenChannelInput.select()},focusBlueInput(){this.lastBlueValue=this.color.blue,this.$refs.blueChannelInput.select()},blurHexInput(){if(this.lastHexValue!==void 0){const e=this.getColorForHexValue(this.lastHexValue);e!==void 0&&(this.$emit("color-change-start"),this.$emit("color-change",e),this.$emit("color-change-finish")),this.lastHexValue=void 0}},blurRedInput(){if(this.lastRedValue!==void 0){const e=this.getColorForChannelValue("red",this.lastRedValue);e!==void 0&&(this.$emit("color-change-start"),this.$emit("color-change",e),this.$emit("color-change-finish")),this.lastRedValue=void 0}},blurGreenInput(){if(this.lastGreenValue!==void 0){const e=this.getColorForChannelValue("green",this.lastGreenValue);e!==void 0&&(this.$emit("color-change-start"),this.$emit("color-change",e),this.$emit("color-change-finish")),this.lastGreenValue=void 0}},blurBlueInput(){if(this.lastBlueValue!==void 0){const e=this.getColorForChannelValue("blue",this.lastBlueValue);e!==void 0&&(this.$emit("color-change-start"),this.$emit("color-change",e),this.$emit("color-change-finish")),this.lastBlueValue=void 0}},setColorFromHexInputEvent(e){const t=this.getColorFromHexInputEvent(e);t!==void 0&&(this.$emit("color-change",t),this.lastHexValue=Vt(t).substring(1))},setColorFromRedChannelInputEvent(e){const t=this.getColorFromChannelInputEvent("red",e);t!==void 0&&(this.$emit("color-change",t),this.lastRedValue=t.red)},setColorFromGreenChannelInputEvent(e){const t=this.getColorFromChannelInputEvent("green",e);t!==void 0&&(this.$emit("color-change",t),this.lastGreenValue=t.green)},setColorFromBlueChannelInputEvent(e){const t=this.getColorFromChannelInputEvent("blue",e);t!==void 0&&(this.$emit("color-change",t),this.lastBlueValue=t.blue)},getColorFromHexInputEvent(e){const i=e.target.value.toString().trim();return this.getColorForHexValue(i)},getColorFromChannelInputEvent(e,t){const o=t.target.value.toString().trim();if(/^([0-9]+)$/.test(o))return this.getColorForChannelValue(e,parseInt(o,10))},getColorForHexValue(e){if(/^([0-9A-F]{6})$/i.test(e)){const t=Nn(e);return t.alpha=this.color.alpha,t}},getColorForChannelValue(e,t){const i=Math.min(Math.max(t,0),255),o={...this.color};return o[e]=i,o},startColorChange(){this.isInChangeProcess=!0},stopColorChange(){this.isInChangeProcess=!1}}}),Pm={class:"app-color-picker-spectrum"},Im={class:"app-color-picker-spectrum__color-sliders"},Lm={class:"app-color-picker-spectrum__hue"},Om={key:0,class:"app-color-picker-spectrum__alpha-slider"},Fm={class:"app-color-picker-spectrum__text-inputs"},Dm={class:"app-color-picker-spectrum__hex-input"},Vm={class:"app-color-picker-spectrum-input-group"},Nm=["value"],Bm={class:"app-color-picker-spectrum__rgb-inputs"},jm={class:"app-color-picker-spectrum-input-group"},zm=["value"],Hm={class:"app-color-picker-spectrum-input-group"},_m=["value"],Um={class:"app-color-picker-spectrum-input-group"},qm=["value"];function Wm(e,t,i,o,s,l){const a=nm,u=Ge,m=We,f=Xe,b=vo,T=ao("input-mask-directive");return d(),h("div",Pm,[p("div",Im,[p("div",{class:F(["app-color-picker-spectrum__area",e.areaModifier!==void 0?`app-color-picker-spectrum__area--${e.areaModifier}`:void 0])},[r(a,{hue:e.colorInHsb.hue,value:{saturation:e.colorInHsb.saturation,brightness:e.colorInHsb.brightness},onStart:t[0]||(t[0]=C=>{e.$emit("color-change-start"),e.startColorChange()}),onColorPickerChangeValue:e.changeSaturationAndBrightness,onFinish:t[1]||(t[1]=C=>{e.$emit("color-change-finish"),e.stopColorChange()})},null,8,["hue","value","onColorPickerChangeValue"])],2),p("div",Lm,[r(f,{direction:"horizontal",variant:e.appLayout==="desktop"?"desktop":"mobile",min:0,max:360,value:e.colorInHsb.hue,"is-filling-line-displayed":!1,"is-stick-can-stick-out":!1,onStart:t[2]||(t[2]=C=>{e.$emit("color-change-start"),e.startColorChange()}),onChange:e.changeHue,onFinish:t[3]||(t[3]=C=>{e.$emit("color-change-finish"),e.stopColorChange()})},{stick:n(()=>[r(u,{variant:"round","is-transparent":!0})]),line:n(()=>[r(m,{variant:e.appLayout==="desktop"?"color-picker":"color-picker-mobile"},null,8,["variant"])]),_:1},8,["variant","value","onChange"])]),e.isAlphaEnabled?(d(),h("div",Om,[r(f,{min:0,max:1,step:.01,value:e.color.alpha,"has-tooltip":!0,"is-filling-line-displayed":!1,variant:e.appLayout==="desktop"?"desktop":"mobile",onStart:t[4]||(t[4]=C=>{e.$emit("color-change-start"),e.startColorChange()}),onChange:e.changeAlphaValue,onFinish:t[5]||(t[5]=C=>{e.$emit("color-change-finish"),e.stopColorChange()})},{stick:n(()=>[r(u,{variant:"round","is-transparent":!0})]),line:n(()=>[r(b,{fill:e.alphaLinePreviewFill,variant:e.appLayout==="desktop"?"desktop":"mobile"},null,8,["fill","variant"])]),_:1},8,["value","variant","onChange"])])):E("",!0)]),p("div",Fm,[p("div",Dm,[p("div",Vm,[t[18]||(t[18]=p("label",{class:"app-color-picker-spectrum-input-group__label",for:"app-color-picker-hex-input"}," # ",-1)),ae(p("input",{id:"app-color-picker-hex-input",ref:"hexInput",class:"app-color-picker-spectrum-input-group__input",title:"HEX",type:"text",spellcheck:"false",autocomplete:"off",value:e.colorInHex,onFocusin:t[6]||(t[6]=(...C)=>e.focusHexInput&&e.focusHexInput(...C)),onFocusout:t[7]||(t[7]=(...C)=>e.blurHexInput&&e.blurHexInput(...C)),onAccept:t[8]||(t[8]=(...C)=>e.setColorFromHexInputEvent&&e.setColorFromHexInputEvent(...C))},null,40,Nm),[[T,"COLOR_RGB_HEX"]])])]),p("div",Bm,[p("div",jm,[t[19]||(t[19]=p("label",{class:"app-color-picker-spectrum-input-group__label",for:"app-color-picker-red-input"}," R ",-1)),ae(p("input",{id:"app-color-picker-red-input",ref:"redChannelInput",class:"app-color-picker-spectrum-input-group__input",type:"text",inputmode:"numeric",min:"0",max:"255",autocomplete:"off",value:e.color.red,onFocusin:t[9]||(t[9]=(...C)=>e.focusRedInput&&e.focusRedInput(...C)),onFocusout:t[10]||(t[10]=(...C)=>e.blurRedInput&&e.blurRedInput(...C)),onAccept:t[11]||(t[11]=(...C)=>e.setColorFromRedChannelInputEvent&&e.setColorFromRedChannelInputEvent(...C))},null,40,zm),[[T,"COLOR_RGB_NUMERIC"]])]),p("div",Hm,[t[20]||(t[20]=p("label",{class:"app-color-picker-spectrum-input-group__label",for:"app-color-picker-green-input"},"G",-1)),ae(p("input",{id:"app-color-picker-green-input",ref:"greenChannelInput",class:"app-color-picker-spectrum-input-group__input",type:"text",inputmode:"numeric",min:"0",max:"255",autocomplete:"off",value:e.color.green,onFocusin:t[12]||(t[12]=(...C)=>e.focusGreenInput&&e.focusGreenInput(...C)),onFocusout:t[13]||(t[13]=(...C)=>e.blurGreenInput&&e.blurGreenInput(...C)),onAccept:t[14]||(t[14]=(...C)=>e.setColorFromGreenChannelInputEvent&&e.setColorFromGreenChannelInputEvent(...C))},null,40,_m),[[T,"COLOR_RGB_NUMERIC"]])]),p("div",Um,[t[21]||(t[21]=p("label",{class:"app-color-picker-spectrum-input-group__label",for:"app-color-picker-blue-input"},"B",-1)),ae(p("input",{id:"app-color-picker-blue-input",ref:"blueChannelInput",class:"app-color-picker-spectrum-input-group__input",type:"text",inputmode:"numeric",min:"0",max:"255",autocomplete:"off",value:e.color.blue,onFocusin:t[15]||(t[15]=(...C)=>e.focusBlueInput&&e.focusBlueInput(...C)),onFocusout:t[16]||(t[16]=(...C)=>e.blurBlueInput&&e.blurBlueInput(...C)),onAccept:t[17]||(t[17]=(...C)=>e.setColorFromBlueChannelInputEvent&&e.setColorFromBlueChannelInputEvent(...C))},null,40,qm),[[T,"COLOR_RGB_NUMERIC"]])])])])])}const wi=$(Rm,[["render",Wm]]),Gm=A({name:"app-gradient-color-indicator",props:{color:{type:Object,required:!0},isActive:{type:Boolean,default:!1}},computed:{formattedColor(){return Vt(this.color,{withAlpha:!0})}}});function Xm(e,t,i,o,s,l){return d(),h("button",J({class:["app-gradient-color-indicator",{"app-gradient-color-indicator--active":e.isActive}]},e.$attrs),[p("span",{class:"app-gradient-color-indicator__grid",style:z({"background-color":e.formattedColor})},null,4),p("span",{class:"app-gradient-color-indicator__color",style:z({"background-color":e.formattedColor})},null,4)],16)}const ss=$(Gm,[["render",Xm]]),Gi=15,Ym=A({name:"app-gradient-skew-input",components:{AppSvgSymbol:K},props:{value:{type:Number,default:0}},emits:["input"],methods:{rotateLeft(){let e=this.value-Gi;e<0&&(e=360-Gi),this.$emit("input",e)},rotateRight(){let e=this.value+Gi;e>=360&&(e=0),this.$emit("input",e)}}}),Km={class:"app-gradient-skew-input"},Zm={class:"app-gradient-skew-input__value"};function Qm(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",Km,[p("button",{class:"app-gradient-skew-input__rotate",onClick:t[0]||(t[0]=(...u)=>e.rotateLeft&&e.rotateLeft(...u))},[r(a,{symbol:"svg-icon-video-transform-rotate",class:"app-gradient-skew-input__icon-left","is-block":""})]),p("div",Zm,g(e.value),1),p("button",{class:"app-gradient-skew-input__rotate",onClick:t[1]||(t[1]=(...u)=>e.rotateRight&&e.rotateRight(...u))},[r(a,{symbol:"svg-icon-video-transform-rotate","is-block":""})])])}const as=$(Ym,[["render",Qm]]),Jm=A({name:"app-gradient-preset-button",components:{AppSvgSymbol:K},props:{fill:{type:Object,default:void 0},isDisabled:{type:Boolean,default:!1}},computed:{formattedColor(){return this.fill!==void 0?oo(this.fill,!0):void 0},svgButtonWidth(){return window.matchMedia("(max-width: 991px)").matches?25:20}}});function xm(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("button",J({class:"app-gradient-preset-button"},e.$attrs),[e.fill!==void 0?(d(),h("span",{key:0,class:"app-gradient-preset-button__dot",style:z({background:e.formattedColor})},null,4)):(d(),S(a,{key:1,symbol:"icon-color-picker-reset-color",width:e.svgButtonWidth,height:e.svgButtonWidth,class:F(["app-gradient-preset-button__reset-color",{"app-gradient-preset-button__reset-color--disabled":e.isDisabled}])},null,8,["width","height","class"]))],16)}const eh=$(Jm,[["render",xm]]),th=A({name:"app-gradient-picker",components:{AppSvgSymbol:K},props:{color:{type:Object,default:void 0},colorPresets:{type:Array,default:()=>[]},isAlphaEnabled:{type:Boolean,default:!1},isResetColorEnabled:{type:Boolean,default:!1},isDropdownVisible:{type:Boolean,default:!1},appLayout:{type:String,default:null},customColorPane:{type:String,default:"text-color"},defaultSolidColor:{type:Object,required:!0},defaultGradientColor:{type:Object,required:!0}},emits:["color-change","color-change-finish","color-change-start","set-custom-color-pane","hide-color-picker","show-color-picker"],data(){return{dropdownLeftOffset:0,dropdownTopOffset:0,dropdownPositionCalculationRequestId:void 0,activeGradientColorIndex:0}},watch:{isDropdownVisible(){this.isDropdownVisible?this.showDropdown():this.hideDropdown()}},beforeUnmount(){this.dropdownPositionCalculationRequestId!==void 0&&window.cancelAnimationFrame(this.dropdownPositionCalculationRequestId),this.emitHideColorPickerEvent()},methods:{async showDropdown(){await this.$nextTick(),await this.calculateDropdownPosition(),this.bindListenersForDropdown()},switchType(e){this.$emit("color-change",{...this.color??this.defaultGradientColor,type:e}),this.$emit("color-change-finish")},hideDropdown(){this.unbindListenersForDropdown()},toggleDropdown(){this.isDropdownVisible?this.emitHideColorPickerEvent():(this.color===void 0&&(this.$emit("color-change-start"),this.$emit("color-change",{...this.defaultGradientColor,solidColor:this.defaultSolidColor}),this.$emit("color-change-finish")),this.emitShowColorPickerEvent())},setActiveGradientColorIndex(e){this.activeGradientColorIndex=e},switchNavigationToCustomColor(){this.color===void 0&&(this.$emit("color-change-start"),this.$emit("color-change",{...this.defaultGradientColor,solidColor:this.defaultSolidColor}),this.$emit("color-change-finish")),this.$emit("set-custom-color-pane",this.customColorPane)},emitHideColorPickerEvent(){this.$emit("hide-color-picker")},emitShowColorPickerEvent(){this.$emit("show-color-picker")},emitColorChange(e){switch(this.color?.type){case Tt.SOLID:this.$emit("color-change",{...this.color,solidColor:e});break;case Tt.LINEAR_GRADIENT:{const t=[...this.color.linearGradientColors];t[this.activeGradientColorIndex]=e,this.$emit("color-change",{...this.color,linearGradientColors:t});break}}},emitAngleChange(e){this.$emit("color-change",{...this.color??this.defaultGradientColor,linearGradientSkewAngle:e}),this.$emit("color-change-finish")},resetColor(){this.$emit("color-change-start"),this.$emit("color-change",this.defaultGradientColor),this.$emit("color-change-finish"),this.emitHideColorPickerEvent()},selectPresetColor(e){const t={...this.color??this.defaultGradientColor,...e};this.$emit("color-change-start"),this.$emit("color-change",t),this.$emit("color-change-finish")},bindListenersForDropdown(){document.addEventListener("mousedown",this.checkClickOutsideDropdownAndHide,{capture:!0}),window.addEventListener("resize",this.requestDropdownPositionCalculation),document.addEventListener("dragstart",this.emitHideColorPickerEvent),document.addEventListener("touchstart",this.checkClickOutsideDropdownAndHide,{capture:!0})},unbindListenersForDropdown(){document.removeEventListener("mousedown",this.checkClickOutsideDropdownAndHide,{capture:!0}),window.removeEventListener("resize",this.requestDropdownPositionCalculation),document.removeEventListener("dragstart",this.emitHideColorPickerEvent),document.removeEventListener("touchstart",this.checkClickOutsideDropdownAndHide,{capture:!0})},requestDropdownPositionCalculation(){this.dropdownPositionCalculationRequestId===void 0&&(this.dropdownPositionCalculationRequestId=window.requestAnimationFrame(()=>{this.calculateDropdownPosition(),this.dropdownPositionCalculationRequestId=void 0}))},async calculateDropdownPosition(){const{x:e,y:t}=await uo(this.$refs.button,this.$refs.dropdown,{placement:"bottom-start",middleware:[po({crossAxis:!1,fallbackPlacements:["top-start"]}),co({mainAxis:9,crossAxis:-1})]});this.dropdownTopOffset=t,this.dropdownLeftOffset=e},checkClickOutsideDropdownAndHide(e){const t=e.target;!this.$el.contains(t)&&this.$el!==t&&this.emitHideColorPickerEvent()}}}),ih={class:"app-gradient-picker"},oh={key:0,class:"app-gradient-picker__color-preset"},nh={key:1,class:"app-gradient-picker__color-preset"},sh={class:"app-gradient-picker-dropdown__title"},ah={class:"app-gradient-picker-dropdown__tab-buttons"},rh={class:"app-gradient-picker-dropdown__gradient-header"},lh={class:"app-gradient-picker-dropdown__gradient-colors"},dh={key:2,class:"app-gradient-picker__color-preset"};function uh(e,t,i,o,s,l){const a=tt,u=D("AppSvgSymbol"),m=wi,f=ss,b=vo,T=as,C=eh;return d(),h("div",ih,[e.appLayout==="desktop"?(d(),h("div",oh,[r(a,{offset:8},{text:n(()=>[y(g(e.$t("appConsoleSettings.customColor")),1)]),anchor:n(()=>[p("button",{ref:"button",class:"app-gradient-picker__preset-button",onClick:t[0]||(t[0]=M=>e.toggleDropdown())},t[11]||(t[11]=[p("span",{class:"app-gradient-picker__rainbow"},[p("span",{class:"app-gradient-picker__color"})],-1)]),512)]),_:1})])):(d(),h("div",nh,[p("button",{ref:"button",class:"app-gradient-picker__preset-button",onClick:t[1]||(t[1]=M=>e.switchNavigationToCustomColor())},t[12]||(t[12]=[p("span",{class:"app-gradient-picker__rainbow"},[p("span",{class:"app-gradient-picker__color"})],-1)]),512)])),r(pt,{name:"fade"},{default:n(()=>[e.isDropdownVisible&&e.color!==void 0?(d(),h("div",{key:0,ref:"dropdown",class:"app-gradient-picker-dropdown",style:z({transform:`translate3d(${e.dropdownLeftOffset}px, ${e.dropdownTopOffset}px, 0)`})},[p("div",sh,[p("div",ah,[p("button",{class:F(["app-gradient-picker-dropdown__tab-button",{"app-gradient-picker-dropdown__tab-button--active":e.color.type==="solid"}]),onClick:t[2]||(t[2]=M=>e.switchType("solid"))},g(e.$t("appConsoleSettings.solid")),3),p("button",{class:F(["app-gradient-picker-dropdown__tab-button",{"app-gradient-picker-dropdown__tab-button--active":e.color.type==="linear-gradient"}]),onClick:t[3]||(t[3]=M=>e.switchType("linear-gradient"))},g(e.$t("appConsoleSettings.gradient")),3)]),p("button",{class:"app-gradient-picker-dropdown__close-button",onClick:t[4]||(t[4]=(...M)=>e.emitHideColorPickerEvent&&e.emitHideColorPickerEvent(...M))},[r(u,{"is-block":"",symbol:"close-color-picker",width:28,height:28})])]),e.color.type==="solid"?(d(),S(m,{key:0,"is-alpha-enabled":e.isAlphaEnabled,color:e.color.solidColor,"app-layout":e.appLayout,onColorChangeStart:t[5]||(t[5]=M=>e.$emit("color-change-start")),onColorChange:e.emitColorChange,onColorChangeFinish:t[6]||(t[6]=M=>e.$emit("color-change-finish"))},null,8,["is-alpha-enabled","color","app-layout","onColorChange"])):E("",!0),e.color.type==="linear-gradient"?(d(),h(N,{key:1},[p("div",rh,[p("div",lh,[r(f,{color:e.color.linearGradientColors[0],"is-active":e.activeGradientColorIndex===0,onClick:t[7]||(t[7]=M=>e.setActiveGradientColorIndex(0))},null,8,["color","is-active"]),r(b,{fill:e.color,class:"app-gradient-picker-dropdown__gradient-preview"},null,8,["fill"]),r(f,{color:e.color.linearGradientColors[1],"is-active":e.activeGradientColorIndex===1,onClick:t[8]||(t[8]=M=>e.setActiveGradientColorIndex(1))},null,8,["color","is-active"])]),r(T,{value:e.color.linearGradientSkewAngle,class:"app-gradient-picker-dropdown__skew-input",onInput:e.emitAngleChange},null,8,["value","onInput"])]),p("div",null,[r(m,{"is-alpha-enabled":e.isAlphaEnabled,color:e.color.linearGradientColors[e.activeGradientColorIndex],"app-layout":e.appLayout,size:"small",onColorChangeStart:t[9]||(t[9]=M=>e.$emit("color-change-start")),onColorChange:e.emitColorChange,onColorChangeFinish:t[10]||(t[10]=M=>e.$emit("color-change-finish"))},null,8,["is-alpha-enabled","color","app-layout","onColorChange"])])],64)):E("",!0)],4)):E("",!0)]),_:1}),e.isResetColorEnabled?(d(),h("div",dh,[r(C,{"is-disabled":e.color!==void 0&&e.color.solidColor.alpha===0,onClick:e.resetColor},null,8,["is-disabled","onClick"])])):E("",!0),(d(!0),h(N,null,q(e.colorPresets,(M,L)=>(d(),h("div",{key:`${L}-color-presets`,class:"app-gradient-picker__color-preset"},[r(C,{fill:M,onClick:I=>e.selectPresetColor(M)},null,8,["fill","onClick"])]))),128))])}const yo=$(th,[["render",uh]]),ph=A({name:"app-console-canvas-settings-layout",props:{isMobile:{type:Boolean,default:!1}}}),ch={class:"app-console-canvas-settings-layout__aspect-ratio-picker"},mh={key:0,class:"app-console-canvas-settings-layout__label"},hh={class:"app-console-canvas-settings-layout__background-picker"},gh={key:0,class:"app-console-canvas-settings-layout__label"};function vh(e,t,i,o,s,l){return d(),h("div",{class:F(["app-console-canvas-settings-layout",{"app-console-canvas-settings-layout--mobile":e.isMobile,"app-console-canvas-settings-layout--desktop":!e.isMobile}])},[p("div",ch,[e.isMobile?E("",!0):(d(),h("div",mh,g(e.$t("editor.canvasSettings.resize")),1)),w(e.$slots,"aspect-ratio-picker")]),p("div",hh,[e.isMobile?E("",!0):(d(),h("div",gh,g(e.$t("editor.canvasSettings.background")),1)),w(e.$slots,"background-picker")])],2)}const fh=$(ph,[["render",vh]]),bh=A({name:"app-console-tab-label",props:{isActive:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}}}),yh=["disabled"];function Eh(e,t,i,o,s,l){return d(),h("button",J({class:["app-console-tab-label",{"app-console-tab-label--active":e.isActive}],disabled:e.isDisabled},e.$attrs),[w(e.$slots,"default")],16,yh)}const Sh=$(bh,[["render",Eh]]),kh=A({name:"app-range-number-spinner",components:{AppButton:oe,AppSvgSymbol:K},props:{min:{type:Number,required:!0},max:{type:Number,required:!0},step:{type:Number,required:!0},value:{type:Number,required:!0},isLabelGrayedOut:{type:Boolean,default:!1}},emits:{increment:e=>!0,decrement:e=>!0,change:e=>!0},methods:{increment(){const e=parseFloat(Math.min(this.max,this.value+this.step).toFixed(2));e!==this.value&&(this.$emit("increment",e),this.$emit("change",e))},decrement(){const e=parseFloat(Math.max(this.min,this.value-this.step).toFixed(2));e!==this.value&&(this.$emit("decrement",e),this.$emit("change",e))}}}),Ch={class:"app-range-number-spinner"},Th={class:"app-range-number-spinner__decrement-button"},$h={class:"app-range-number-spinner__value"},wh={class:"app-range-number-spinner__increment-button"};function Ah(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppButton");return d(),h("div",Ch,[p("div",Th,[r(u,{variant:"gray","rounded-edges":"left","rounding-value":5,size:"full",onClick:e.decrement},{default:n(()=>[r(a,{symbol:"svg-minus-smooth",width:20,height:20,"is-block":""})]),_:1},8,["onClick"])]),p("span",{class:F(["app-range-number-spinner__value-container",{"app-range-number-spinner__value-container--grayed-out":e.isLabelGrayedOut}])},[p("span",$h,[w(e.$slots,"value")])],2),p("div",wh,[r(u,{variant:"gray","rounded-edges":"right","rounding-value":5,size:"full",onClick:e.increment},{default:n(()=>[r(a,{symbol:"svg-plus-smooth",width:20,height:20,"is-block":""})]),_:1},8,["onClick"])])])}const Mh=$(kh,[["render",Ah]]),Rh=A({name:"app-console-settings-video-transform",components:{AppButton:oe,AppSvgSymbol:K},props:{rotateAngle:{type:Number,required:!0},angleRotatorStep:{type:Number,required:!0},canCrop:{type:Boolean,required:!0},trackElementSelectionViewModel:{type:Object,required:!0}},emits:{"fill-button-click":null,"fit-button-click":null,"flip-horizontally-button-click":null,"flip-vertically-button-click":null,"rotate-button-click":null,"rotate-angle-change":e=>!0,"rotate-angle-increment":null,"rotate-angle-decrement":null,"crop-button-click":null},computed:{canvasPresetIconSize(){return this.canCrop?20:18},isMixedValue(){return Ee(this.trackElementSelectionViewModel.getSelectedTrackElements().map(e=>$e(e)?e.imageOptions.rotateAngle:ge(e)?e.videoOptions.rotateAngle:Se(e)?e.shapeOptions.rotateAngle:Ie(e)?e.emojiOptions.rotateAngle:void 0).filter(e=>e!==void 0)).length>1}}}),Ph={class:"app-console-settings-video-transform"},Ih={class:"app-console-settings-video-transform-canvas-presets__item"},Lh={class:"app-console-settings-video-transform-canvas-presets__button-content-wrapper"},Oh={class:"app-console-settings-video-transform-canvas-presets__button-text"},Fh={class:"app-console-settings-video-transform-canvas-presets__item"},Dh={class:"app-console-settings-video-transform-canvas-presets__button-content-wrapper"},Vh={class:"app-console-settings-video-transform-canvas-presets__button-text"},Nh={key:0,class:"app-console-settings-video-transform-canvas-presets__item"},Bh={class:"app-console-settings-video-transform-canvas-presets__button-content-wrapper"},jh={class:"app-console-settings-video-transform-canvas-presets__button-text"},zh={class:"app-console-settings-video-transform__flip-and-rotate-title"},Hh={class:"app-console-settings-video-transform__flip-horizontal"},_h={class:"app-console-settings-video-transform__button-inner"},Uh={class:"app-console-settings-video-transform__flip-vertical"},qh={class:"app-console-settings-video-transform__button-inner"},Wh={class:"app-console-settings-video-transform__rotate-90-deg"},Gh={class:"app-console-settings-video-transform__button-inner"},Xh={class:"app-console-settings-video-transform__rotate-input"};function Yh(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppButton"),m=Mh;return d(),h("div",Ph,[p("div",{class:F({"app-console-settings-video-transform-canvas-presets":!0,"app-console-settings-video-transform-canvas-presets--with-crop":e.canCrop,"app-console-settings-video-transform-canvas-presets--without-crop":!e.canCrop})},[p("div",Ih,[r(u,{variant:"gray","rounding-value":5,size:"full",onClick:t[0]||(t[0]=f=>e.$emit("fill-button-click"))},{default:n(()=>[p("div",Lh,[r(a,{symbol:"svg-icon-video-transform-fill",width:e.canvasPresetIconSize,height:e.canvasPresetIconSize},null,8,["width","height"]),p("span",Oh,g(e.$t("appConsoleSettingsVideoTransform.fill")),1)])]),_:1})]),p("div",Fh,[r(u,{variant:"gray",size:"full",onClick:t[1]||(t[1]=f=>e.$emit("fit-button-click"))},{default:n(()=>[p("div",Dh,[r(a,{symbol:"svg-icon-video-transform-fit",width:e.canvasPresetIconSize,height:e.canvasPresetIconSize},null,8,["width","height"]),p("span",Vh,g(e.$t("appConsoleSettingsVideoTransform.fit")),1)])]),_:1})]),e.canCrop?(d(),h("div",Nh,[r(u,{variant:"gray",size:"full",onClick:t[2]||(t[2]=f=>e.$emit("crop-button-click"))},{default:n(()=>[p("div",Bh,[r(a,{symbol:"svg-icon-video-transform-crop-new",width:e.canvasPresetIconSize,height:e.canvasPresetIconSize},null,8,["width","height"]),p("span",jh,g(e.$t("widgetCropSettings.crop")),1)])]),_:1})])):E("",!0)],2),p("div",zh,[p("span",null,g(e.$t("appConsoleSettingsVideoTransform.flipRotate")),1)]),p("div",Hh,[r(u,{variant:"gray","rounding-value":5,size:"full",onClick:t[3]||(t[3]=f=>e.$emit("flip-horizontally-button-click"))},{default:n(()=>[p("span",_h,[r(a,{symbol:"svg-icon-video-transform-flip-horizontally",width:22,height:22})])]),_:1})]),p("div",Uh,[r(u,{variant:"gray","rounding-value":5,size:"full",onClick:t[4]||(t[4]=f=>e.$emit("flip-vertically-button-click"))},{default:n(()=>[p("span",qh,[r(a,{symbol:"svg-icon-video-transform-flip-vertically",width:22,height:22})])]),_:1})]),p("div",Wh,[r(u,{variant:"gray","rounding-value":5,size:"full",onClick:t[5]||(t[5]=f=>e.$emit("rotate-button-click"))},{default:n(()=>[p("span",Gh,[r(a,{symbol:"svg-icon-video-transform-rotate",width:22,height:22})])]),_:1})]),p("div",Xh,[r(m,{min:-e.angleRotatorStep,max:360,step:e.angleRotatorStep,value:Math.round(e.rotateAngle),"is-label-grayed-out":e.isMixedValue,onChange:t[6]||(t[6]=f=>e.isMixedValue?void 0:e.$emit("rotate-angle-change",f)),onIncrement:t[7]||(t[7]=f=>e.$emit("rotate-angle-increment")),onDecrement:t[8]||(t[8]=f=>e.$emit("rotate-angle-decrement"))},{value:n(()=>[y(g(e.isMixedValue?"_ _":Math.round(e.rotateAngle)),1)]),_:1},8,["min","step","value","is-label-grayed-out"])])])}const Kh=$(Rh,[["render",Yh]]),Zh=A({name:"app-console-settings-video-adjust",components:{AppButton:oe},props:{opacity:{type:Number,required:!0},hue:{type:Number,required:!0},saturation:{type:Number,required:!0},brightness:{type:Number,required:!0},contrast:{type:Number,required:!0},blur:{type:Number,required:!0},trackElementSelectionViewModel:{type:Object,required:!0},defaultOpacity:{type:Number,required:!0},defaultHue:{type:Number,required:!0},defaultSaturation:{type:Number,required:!0},defaultBrightness:{type:Number,required:!0},defaultContrast:{type:Number,required:!0},defaultBlur:{type:Number,required:!0}},emits:{"opacity-change-start":null,"video-adjust-change-start":null,"opacity-change":e=>!0,"opacity-change-finish":null,"video-adjust-change-finish":null,"brightness-change-start":null,"brightness-change":e=>!0,"brightness-change-finish":null,"contrast-change-start":null,"contrast-change":e=>!0,"contrast-change-finish":null,"saturation-change-start":null,"saturation-change":e=>!0,"saturation-change-finish":null,"hue-change-start":null,"hue-change":e=>!0,"hue-change-finish":null,"blur-change-start":null,"blur-change":e=>!0,"blur-change-finish":null,"video-adjust-reset":null},computed:{isOpacityValuesMixed(){return this.isValuesMixed("adjustOpacity")},isBrightnessValuesMixed(){return this.isValuesMixed("adjustBrightness")},isContrastValuesMixed(){return this.isValuesMixed("adjustContrast")},isSaturationValuesMixed(){return this.isValuesMixed("adjustSaturation")},isHueValuesMixed(){return this.isValuesMixed("adjustHue")},isBlurValuesMixed(){return this.isValuesMixed("adjustBlur")}},methods:{isValuesMixed(e){return Ee(this.trackElementSelectionViewModel.getSelectedTrackElements().map(t=>$e(t)?t.imageOptions[e]:ge(t)?t.videoOptions[e]:Se(t)?t.shapeOptions[e]:Ie(t)?t.emojiOptions[e]:void 0).filter(t=>t!==void 0)).length>1}}}),Qh={class:"app-console-settings-video-adjust"},Jh={class:"app-console-settings-video-adjust__opacity"},xh={key:0},eg={key:1},tg={class:"app-console-settings-video-adjust__brightness"},ig={class:"app-console-settings-video-adjust__contrast"},og={class:"app-console-settings-video-adjust__saturation"},ng={class:"app-console-settings-video-adjust__hue"},sg={class:"app-console-settings-video-adjust__blur"},ag={class:"app-console-settings-video-adjust__reset"};function rg(e,t,i,o,s,l){const a=We,u=Ge,m=Xe,f=D("AppButton");return d(),h("div",Qh,[p("div",Jh,[r(m,{min:0,max:100,value:e.isOpacityValuesMixed?e.defaultOpacity:e.opacity,"is-label-grayed-out":e.isOpacityValuesMixed,onStart:t[0]||(t[0]=b=>{e.$emit("opacity-change-start"),e.$emit("video-adjust-change-start")}),onChange:t[1]||(t[1]=b=>e.$emit("opacity-change",b)),onFinish:t[2]||(t[2]=b=>{e.$emit("opacity-change-finish"),e.$emit("video-adjust-change-finish")})},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsVideoAdjust.opacity")),1)]),label:n(()=>[e.isOpacityValuesMixed?(d(),h("span",xh,g(e.$t("mixed")),1)):(d(),h("span",eg,g(e.opacity)+"%",1))]),line:n(b=>[r(a,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),stick:n(b=>[r(u,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])]),p("div",tg,[r(m,{min:-100,max:100,value:e.isBrightnessValuesMixed?e.defaultBrightness:e.brightness,"is-filling-line-displayed":!1,"is-center-mark-displayed":!0,"is-label-grayed-out":e.isBrightnessValuesMixed,onStart:t[3]||(t[3]=b=>{e.$emit("brightness-change-start"),e.$emit("video-adjust-change-start")}),onChange:t[4]||(t[4]=b=>e.$emit("brightness-change",b)),onFinish:t[5]||(t[5]=b=>{e.$emit("brightness-change-finish"),e.$emit("video-adjust-change-finish")})},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsVideoAdjust.brightness")),1)]),label:n(()=>[p("span",null,g(e.isBrightnessValuesMixed?e.$t("mixed"):e.brightness),1)]),line:n(b=>[r(a,{variant:"brightness","is-hovered":b.isHovered},null,8,["is-hovered"])]),stick:n(b=>[r(u,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])]),p("div",ig,[r(m,{min:-100,max:100,value:e.isContrastValuesMixed?e.defaultContrast:e.contrast,"is-filling-line-displayed":!1,"is-center-mark-displayed":!0,"is-label-grayed-out":e.isContrastValuesMixed,onStart:t[6]||(t[6]=b=>{e.$emit("contrast-change-start"),e.$emit("video-adjust-change-start")}),onChange:t[7]||(t[7]=b=>e.$emit("contrast-change",b)),onFinish:t[8]||(t[8]=b=>{e.$emit("contrast-change-finish"),e.$emit("video-adjust-change-finish")})},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsVideoAdjust.contrast")),1)]),label:n(()=>[p("span",null,g(e.isContrastValuesMixed?e.$t("mixed"):e.contrast),1)]),line:n(b=>[r(a,{variant:"contrast","is-hovered":b.isHovered},null,8,["is-hovered"])]),stick:n(b=>[r(u,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])]),p("div",og,[r(m,{min:-100,max:100,value:e.isSaturationValuesMixed?e.defaultSaturation:e.saturation,"is-filling-line-displayed":!1,"is-center-mark-displayed":!0,"is-label-grayed-out":e.isSaturationValuesMixed,onStart:t[9]||(t[9]=b=>{e.$emit("saturation-change-start"),e.$emit("video-adjust-change-start")}),onChange:t[10]||(t[10]=b=>e.$emit("saturation-change",b)),onFinish:t[11]||(t[11]=b=>{e.$emit("saturation-change-finish"),e.$emit("video-adjust-change-finish")})},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsVideoAdjust.saturation")),1)]),label:n(()=>[p("span",null,g(e.isSaturationValuesMixed?e.$t("mixed"):e.saturation),1)]),line:n(b=>[r(a,{variant:"saturation","is-hovered":b.isHovered},null,8,["is-hovered"])]),stick:n(b=>[r(u,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])]),p("div",ng,[r(m,{min:-180,max:180,value:e.isHueValuesMixed?e.defaultHue:e.hue,"is-filling-line-displayed":!1,"is-center-mark-displayed":!0,"is-label-grayed-out":e.isHueValuesMixed,onStart:t[12]||(t[12]=b=>{e.$emit("hue-change-start"),e.$emit("video-adjust-change-start")}),onChange:t[13]||(t[13]=b=>e.$emit("hue-change",b)),onFinish:t[14]||(t[14]=b=>{e.$emit("hue-change-finish"),e.$emit("video-adjust-change-finish")})},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsVideoAdjust.hue")),1)]),label:n(()=>[p("span",null,g(e.isHueValuesMixed?e.$t("mixed"):e.hue),1)]),line:n(b=>[r(a,{variant:"hue","is-hovered":b.isHovered},null,8,["is-hovered"])]),stick:n(b=>[r(u,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])]),p("div",sg,[r(m,{min:0,max:100,value:e.isBlurValuesMixed?e.defaultBlur:e.blur,"is-label-grayed-out":e.isBlurValuesMixed,onStart:t[15]||(t[15]=b=>{e.$emit("blur-change-start"),e.$emit("video-adjust-change-start")}),onChange:t[16]||(t[16]=b=>e.$emit("blur-change",b)),onFinish:t[17]||(t[17]=b=>{e.$emit("blur-change-finish"),e.$emit("video-adjust-change-finish")})},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsVideoAdjust.blur")),1)]),label:n(()=>[p("span",null,g(e.isBlurValuesMixed?e.$t("mixed"):e.blur),1)]),line:n(b=>[r(a,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),stick:n(b=>[r(u,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])]),p("div",ag,[r(f,{variant:"gray-adjust-reset",size:"small","fixed-height":31,onClick:t[18]||(t[18]=b=>e.$emit("video-adjust-reset"))},{default:n(()=>[p("span",null,g(e.$t("appConsoleSettingsVideoAdjust.reset")),1)]),_:1})])])}const lg=$(Zh,[["render",rg]]),dg=A({name:"app-console-settings-video-volume",components:{AppButton:oe,AppSvgSymbol:K,AppSwitch:ro},props:{volume:{type:Number,required:!0},isNoiseReduced:{type:Boolean,required:!0},isNoiseReductionVisible:{type:Boolean,required:!0},isNoiseReductionSupported:{type:Boolean,required:!0},isNoiseReductionReady:{type:Boolean,required:!0},isExtractAudioDisabled:{type:Boolean,default:!1},trackElementSelectionViewModel:{type:Object,required:!0},defaultVolume:{type:Number,required:!0}},emits:{"video-volume-change-start":null,"video-volume-change":e=>!0,"video-volume-change-finish":null,"video-noise-reduced-change":e=>!0,"extract-audio":null},computed:{isVolumeValuesMixed(){return Ee(this.trackElementSelectionViewModel.getSelectedTrackElements().map(e=>{if(ge(e))return e.videoOptions.volume}).filter(e=>e!==void 0)).length>1}}}),ug={class:"app-console-settings-video-volume"},pg={class:"app-console-settings-video-volume__volume"},cg={key:0},mg={key:1},hg={key:0,class:"app-console-settings-video-volume__noise-reduction"},gg={key:1,class:"app-console-settings-video-volume__noise-reduction-not-supported"},vg={class:"app-console-settings-video-volume__extract-audio"};function fg(e,t,i,o,s,l){const a=We,u=Ge,m=Xe,f=D("AppSwitch"),b=D("AppSvgSymbol"),T=D("AppButton");return d(),h("div",ug,[p("div",pg,[r(m,{max:100,min:0,value:e.isVolumeValuesMixed?e.defaultVolume:e.volume,"is-label-grayed-out":e.isVolumeValuesMixed,onChange:t[0]||(t[0]=C=>e.$emit("video-volume-change",C)),onFinish:t[1]||(t[1]=C=>e.$emit("video-volume-change-finish")),onStart:t[2]||(t[2]=C=>e.$emit("video-volume-change-start"))},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsVideoVolume.volume")),1)]),label:n(()=>[e.isVolumeValuesMixed?(d(),h("span",cg,g(e.$t("mixed")),1)):(d(),h("span",mg,g(e.volume)+"%",1))]),line:n(C=>[r(a,{"is-hovered":C.isHovered},null,8,["is-hovered"])]),stick:n(C=>[r(u,{"is-hovered":C.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])]),e.isNoiseReductionVisible?(d(),h("div",hg,[r(f,{label:e.$t("appConsoleSettingsVideoVolume.noiseReduction"),"is-active":e.isNoiseReduced,"is-processing":e.isNoiseReductionSupported&&!e.isNoiseReductionReady,"data-testid":"desktop-console-reduce-noise-switch",onChange:t[3]||(t[3]=C=>e.$emit("video-noise-reduced-change",C))},null,8,["label","is-active","is-processing"])])):E("",!0),e.isNoiseReductionVisible&&e.isNoiseReduced&&!e.isNoiseReductionSupported?(d(),h("div",gg,[y(g(e.$t("appConsoleSettingsVideoVolume.noiseReductionNotSupported1"))+" ",1),t[5]||(t[5]=p("br",null,null,-1)),y(" "+g(e.$t("appConsoleSettingsVideoVolume.noiseReductionNotSupported2")),1)])):E("",!0),p("div",vg,[r(T,{"font-weight":500,"is-disabled":e.isExtractAudioDisabled,"rounding-value":5,"data-testid":"desktop-console-extract-audio-button",size:"full-width",variant:"extract-audio",onClick:t[4]||(t[4]=C=>e.$emit("extract-audio"))},{icon:n(()=>[r(b,{height:20,width:18,symbol:"svg-icon-extract-audio"})]),default:n(()=>[y(" "+g(e.$t("appConsoleSettingsVideoVolume.extractAudio")),1)]),_:1},8,["is-disabled"])])])}const bg=$(dg,[["render",fg]]),yg=A({name:"app-console-settings-video-or-audio-speed",components:{AppButton:oe},props:{speed:{type:Number,required:!0},trackElementSelectionViewModel:{type:Object,required:!0},defaultSpeed:{type:Number,required:!0}},emits:["speed-change-start","speed-change","speed-change-finish"],computed:{isSpeedValuesMixed(){return Ee(this.trackElementSelectionViewModel.getSelectedTrackElements().map(e=>{if(ge(e))return e.videoOptions.basicSpeed;if(Bn(e))return e.audioOptions.basicSpeed}).filter(e=>e!==void 0)).length>1}},methods:{changeSpeed(e){this.$emit("speed-change-start"),this.$emit("speed-change",e),this.$emit("speed-change-finish")}}}),Eg={class:"app-console-settings-video-or-audio-speed"},Sg={class:"app-console-settings-video-or-audio-speed__speed"},kg={class:"app-console-settings-video-or-audio-speed-presets"};function Cg(e,t,i,o,s,l){const a=We,u=Ge,m=Xe,f=D("AppButton");return d(),h("div",Eg,[p("div",Sg,[r(m,{min:.25,max:4,step:.25,value:e.isSpeedValuesMixed?e.defaultSpeed:e.speed,"is-label-grayed-out":e.isSpeedValuesMixed,onStart:t[0]||(t[0]=b=>e.$emit("speed-change-start")),onChange:t[1]||(t[1]=b=>e.$emit("speed-change",b)),onFinish:t[2]||(t[2]=b=>e.$emit("speed-change-finish"))},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsVideoSpeed.speed")),1)]),label:n(()=>[p("span",null,g(e.isSpeedValuesMixed?e.$t("mixed"):e.speed),1)]),line:n(b=>[r(a,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),stick:n(b=>[r(u,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])]),p("div",kg,[(d(),h(N,null,q([.5,.75,1.25,1.5,2],(b,T)=>p("div",{key:T,class:"app-console-settings-video-or-audio-speed-presets__preset"},[r(f,{"rounding-value":5,variant:"gray",size:"tiny","font-weight":500,"is-active":!e.isSpeedValuesMixed&&e.speed===b,"fixed-height":28,style:{padding:"5px"},onClick:C=>e.changeSpeed(b)},{default:n(()=>[y(g(b),1)]),_:2},1032,["is-active","onClick"])])),64))])])}const Tg=$(yg,[["render",Cg]]),Sn="--:--.--",kn={0:1e3*60*60,1:1e3*60,2:1e3,3:10},$g=A({name:"app-console-settings-timing-input",props:{timelineLength:{type:Number,required:!0},time:{type:Number,required:!0},isMobile:{type:Boolean,default:!1},isDurationUnlimited:{type:Boolean,default:!1},isMixed:{type:Boolean,default:!1},isUseTimeAsReference:{type:Boolean,default:!0}},emits:["time-change"],data(){return{selectedDivision:void 0,timeLocal:0,timeFormatted:"00:00.00",isPointerInteraction:!1,isFocusing:!1,isIOS:!1,inputLineHeight:0}},computed:{numberToWidth(){return this.isMobile?{0:10.39,1:7.8,2:9.91,3:10.37,4:10.52,5:10.01,6:10.24,7:9.39,8:10.17,9:10.24}:{0:9.1,1:6.85,2:8.68,3:9.08,4:9.2,5:8.77,6:8.97,7:8.23,8:8.91,9:8.97}},textOffsetFromLeft(){return this.isMobile?9:10},pixelsPerDivider(){return this.isMobile?4.95:4.38}},watch:{isMixed:{immediate:!0,handler(){this.formatTime()}},time:{immediate:!0,handler(){this.timeLocal=this.time}},timeLocal:{immediate:!0,handler(){this.formatTime()}},timelineLength(){this.formatTime()},timeFormatted(e,t){e!==Sn&&(/^\d{0,2}(:\d{0,2}){1,2}\.\d{0,2}$/.test(e)||(this.timeFormatted=t))},isMobile(){this.parseInputLineHeight()}},mounted(){this.isIOS=so(),this.parseInputLineHeight()},methods:{resetIfMixed(){this.isMixed===!0&&(this.timeLocal=1e3,this.formatTime(!0),this.$nextTick(()=>{this.$emit("time-change",this.timeLocal)}))},highlightDivisionUnderPointer(e){const t=e instanceof MouseEvent;if(!t&&!this.isIOS)return;const i=e.target;this.isIOS&&!t&&(e.preventDefault(),document.activeElement!==i&&i.focus());const o=i.getBoundingClientRect(),s=t?e.clientX:e.touches[0].clientX,l=t?e.clientY:e.touches[0].clientY,a=s-o.x,u=l-o.y,m=(o.height-this.inputLineHeight)/2,f=u<m+1||u>this.inputLineHeight+m+1;let b=1;if(a<this.textOffsetFromLeft||f&&!this.isMobile)b=i.size>8?2:1;else{const T=i.value.split(/[:.]/);let C=T.findIndex((M,L)=>{const I=this.getStringWidth(M);let P=this.getStringWidth(T.slice(0,L).join(""))+L*this.pixelsPerDivider+this.textOffsetFromLeft;(L>0||this.isMobile)&&(P-=this.pixelsPerDivider/2);let j=P+I;return(L<T.length-1||this.isMobile&&L===T.length-1)&&(j+=this.pixelsPerDivider*(L>0?.9:.4)),a>=P&&a<=j});C===-1&&(C=i.size>8?2:1),b=C}this.selectDivision(i,b)},highlightDefaultDivision(e){if(this.isPointerInteraction){this.isPointerInteraction=!1;return}setTimeout(()=>{this.isFocusing=!1},1);const t=e.target;this.selectDivision(t,0)},selectNextDivision(e,t){if(this.selectedDivision===void 0)return;const i=e.target,o=i.value.split(/[:.]/).length,s=this.selectedDivision+t;s>-1&&s<o&&(e.preventDefault(),this.selectDivision(i,s))},selectDivision(e,t){const i=e.value.split(/[:.]/),o=i.slice(0,t).join("").length+t,s=o+i.slice(t,t+1).join("").length;this.selectedDivision=t,e.setSelectionRange(o,s)},async increaseCurrentDivisionValue(e,t){if(this.selectedDivision===void 0)return;const i=e.target;this.parseInputValue(i),await this.$nextTick();const o=i.size>8?0:1;this.timeLocal=Math.max(this.timeLocal+kn[this.selectedDivision+o]*t,0),this.$nextTick(()=>{this.selectedDivision!==void 0&&this.selectDivision(i,this.selectedDivision)})},emitTimeChangeEvent(e){const t=e.target;this.parseInputValue(t),this.timeLocal!==this.time&&(this.isDurationUnlimited&&this.timeLocal-this.time>72e5&&(this.timeLocal=this.time+72e5),this.$emit("time-change",this.timeLocal),this.$nextTick(()=>{this.timeLocal=this.time}))},parseInputValue(e){const t=e.value.split(/[:.]/);t.length<4&&t.unshift("0"),this.timeLocal=t.reduce((i,o,s)=>{let l=Number(o);return isNaN(l)&&(l=0),i+=l*kn[s],i},0),this.formatTime(!0)},formatTime(e=!1){if(this.isMixed===!0&&!e){this.timeFormatted=Sn;return}const t=this.isUseTimeAsReference===!0?this.timeLocal:this.timelineLength;this.timeFormatted=Ue(this.timeLocal,{referenceTime:t,isShowMilliseconds:!0,isMinutesCanBeTrimmed:!1,isTrimFirstDivision:!1})},parseInputLineHeight(){const e=this.$refs.input;if(e===void 0)return;const t=window.getComputedStyle(e);this.inputLineHeight=~~parseInt(t.lineHeight,10)},async selectNextDivisionByTyping(e){const t=e.target,i=e.data;if(this.selectedDivision===void 0||t.selectionStart===null||i===null)return;const o=t.value.split(/[:.]/),s=o.length;if(o[this.selectedDivision].length>2&&this.selectedDivision<s-1){await this.$nextTick(),this.selectNextDivision(e,1);const a=t.selectionStart??0,u=t.selectionEnd??0;this.timeFormatted=t.value.substring(0,a)+i+t.value.substring(u+i.length-1),await this.$nextTick(),t.selectionStart=t.selectionEnd=a+1}},getStringWidth(e){return Array.from(e).map(t=>this.numberToWidth[t]).reduce((t,i)=>t+i,0)},preventAllTextSelectionOnFocus(e){this.isFocusing&&(e.preventDefault(),this.highlightDefaultDivision(e))}}}),wg={class:"app-console-settings-timing-input"},Ag=["size"];function Mg(e,t,i,o,s,l){return d(),h("div",wg,[ae(p("input",J({ref:"input","onUpdate:modelValue":t[0]||(t[0]=a=>e.timeFormatted=a),type:"text"},e.$attrs,{size:e.timeFormatted.length,class:{"app-console-settings-timing-input__input":!0},inputmode:"decimal",style:{"--size":e.timeFormatted.length},onMousedown:t[1]||(t[1]=a=>{e.isPointerInteraction=!0,e.resetIfMixed()}),onTouchstart:t[2]||(t[2]=a=>{e.isPointerInteraction=!0,e.resetIfMixed(),e.highlightDivisionUnderPointer(a)}),onClick:t[3]||(t[3]=a=>{e.highlightDivisionUnderPointer(a)}),onFocus:t[4]||(t[4]=a=>{e.isFocusing=!e.isPointerInteraction,e.resetIfMixed(),e.highlightDefaultDivision(a)}),onSelect:t[5]||(t[5]=(...a)=>e.preventAllTextSelectionOnFocus&&e.preventAllTextSelectionOnFocus(...a)),onKeydown:[t[6]||(t[6]=Ce(_(a=>e.selectNextDivision(a,1),["exact"]),["tab"])),t[7]||(t[7]=Ce(_(a=>e.selectNextDivision(a,-1),["shift","exact"]),["tab"])),t[8]||(t[8]=Ce(_(a=>e.selectNextDivision(a,1),["exact","prevent"]),["right"])),t[9]||(t[9]=Ce(_(a=>e.selectNextDivision(a,-1),["exact","prevent"]),["left"])),t[10]||(t[10]=Ce(_(a=>e.increaseCurrentDivisionValue(a,1),["exact","prevent"]),["up"])),t[11]||(t[11]=Ce(_(a=>e.increaseCurrentDivisionValue(a,-1),["exact","prevent"]),["down"])),t[12]||(t[12]=Ce(_((...a)=>e.emitTimeChangeEvent&&e.emitTimeChangeEvent(...a),["exact","prevent"]),["enter"]))],onBlur:t[13]||(t[13]=(...a)=>e.emitTimeChangeEvent&&e.emitTimeChangeEvent(...a)),onInput:t[14]||(t[14]=(...a)=>e.selectNextDivisionByTyping&&e.selectNextDivisionByTyping(...a))}),null,16,Ag),[[Aa,e.timeFormatted]])])}const rs=$($g,[["render",Mg]]),Rg=A({name:"app-console-settings-timing",components:{AppSvgSymbol:K},props:{timelineLength:{type:Number,required:!0},isMobile:{type:Boolean,default:!1},playbackStartTime:{type:Number,required:!0},duration:{type:Number,required:!0},trackElementMinimumDuration:{type:Number,default:200},isDurationUnlimited:{type:Boolean,default:!1},timelineCurrentTime:{type:Number,required:!0}},emits:["start-time-change","end-time-change"],methods:{timeChange(e,t){let i=!1,o=this.playbackStartTime,s=this.playbackStartTime+this.duration;if(t==="start"?(i=e!==o,o=Math.min(e,s-this.trackElementMinimumDuration)):(i=e!==s,s=Math.max(e,o+this.trackElementMinimumDuration)),i){const l={offsetFromStart:o,elementLength:Math.max(s-o,this.trackElementMinimumDuration)};t==="start"?this.$emit("start-time-change",l):this.$emit("end-time-change",l)}}}}),Pg={class:"app-console-settings-timing"},Ig={class:"app-console-settings-timing__wrapper"},Lg={class:"app-console-settings-timing__label"},Og={class:"app-console-settings-timing__inputs"},Fg={class:"app-console-settings-timing__label"},Dg={class:"app-console-settings-timing__inputs"};function Vg(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=tt,m=rs;return d(),h("div",Pg,[p("div",Ig,[p("div",Lg,g(e.$t("appConsoleSettingsTiming.start")),1),p("div",Og,[e.isMobile?(d(),h("div",{key:0,class:"app-console-settings-timing__button",onClick:t[0]||(t[0]=f=>e.timeChange(e.timelineCurrentTime,"start"))},[r(a,{class:"app-console-settings-timing__button-icon app-console-settings-timing__button-icon--mobile",width:20,height:20,symbol:"svg-timing-input-start-mobile"})])):(d(),S(u,{key:1,offset:10,align:"right"},{text:n(()=>[y(g(e.$t("appConsoleSettingsTiming.setToCurrent")),1)]),anchor:n(()=>[p("div",{class:"app-console-settings-timing__button",onClick:t[1]||(t[1]=f=>e.timeChange(e.timelineCurrentTime,"start"))},[r(a,{class:"app-console-settings-timing__button-icon app-console-settings-timing__button-icon--desktop",width:20,height:20,symbol:"svg-timing-input-start"})])]),_:1})),r(m,{time:e.playbackStartTime,"timeline-length":e.timelineLength,"is-mobile":e.isMobile,onTimeChange:t[2]||(t[2]=f=>e.timeChange(f,"start"))},null,8,["time","timeline-length","is-mobile"])]),p("div",Fg,g(e.$t("appConsoleSettingsTiming.end")),1),p("div",Dg,[e.isMobile?(d(),h("div",{key:0,class:"app-console-settings-timing__button",onClick:t[3]||(t[3]=f=>e.timeChange(e.timelineCurrentTime,"end"))},[r(a,{class:"app-console-settings-timing__button-icon app-console-settings-timing__button-icon--mobile",width:20,height:20,symbol:"svg-timing-input-end-mobile"})])):(d(),S(u,{key:1,offset:10,align:"right"},{text:n(()=>[y(g(e.$t("appConsoleSettingsTiming.setToCurrent")),1)]),anchor:n(()=>[p("div",{class:"app-console-settings-timing__button",onClick:t[4]||(t[4]=f=>e.timeChange(e.timelineCurrentTime,"end"))},[r(a,{class:"app-console-settings-timing__button-icon app-console-settings-timing__button-icon--desktop",width:20,height:20,symbol:"svg-timing-input-end"})])]),_:1})),r(m,{time:e.playbackStartTime+e.duration,"timeline-length":e.timelineLength,"is-mobile":e.isMobile,"is-duration-unlimited":e.isDurationUnlimited,onTimeChange:t[5]||(t[5]=f=>e.timeChange(f,"end"))},null,8,["time","timeline-length","is-mobile","is-duration-unlimited"])])])])}const Ng=$(Rg,[["render",Vg]]),Bg=A({name:"app-console-settings-duration",components:{AppButton:oe,AppSvgSymbol:K},props:{duration:{type:Number,required:!0},timelineLength:{type:Number,required:!0},canDecrease:{type:Boolean,required:!0},canIncrease:{type:Boolean,required:!0},isMobile:{type:Boolean,default:!1},isDurationUnlimited:{type:Boolean,default:!1},isExtendToTheEndVisible:{type:Boolean,required:!0},isExpandToProjectVisible:{type:Boolean,required:!0},isInputHidden:{type:Boolean,required:!0},isMixed:{type:Boolean,required:!0},presets:{type:Array,required:!0}},emits:["increase","decrease","change-start","change","change-end","extend-to-the-end","expand-to-project"],computed:{isDurationOverHour(){return this.duration>=60*60*1e3},actionItemCount(){return Number(this.isExtendToTheEndVisible)+Number(this.isExpandToProjectVisible)},limitedPresets(){const e=this.presets.length+this.actionItemCount,i=[3,4,5,8,10].filter(o=>e>=o).pop();return i===void 0?[]:this.presets.slice(0,Math.min(i,10)-this.actionItemCount)},isPresetsVisible(){return this.presets.length+this.actionItemCount>=3},itemPerRow(){const t=this.limitedPresets.length+this.actionItemCount;return t===3?3:t%4===0?4:5}},methods:{prettyDuration:Ma,increase(){this.canIncrease&&this.$emit("increase")},decrease(){this.canDecrease&&this.$emit("decrease")},change(e){e!==this.duration&&(this.$emit("change-start"),this.$emit("change",e),this.$emit("change-end"))}}}),jg={class:"app-console-settings-duration"},zg={class:"app-console-settings-duration-change-step"},Hg={class:"app-console-settings-duration-change-step"},_g={key:"extend-to-the-end",class:"app-console-settings-duration-presets__item"},Ug={key:"expand-to-project",class:"app-console-settings-duration-presets__item"};function qg(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppButton"),m=rs,f=tt;return d(),h("div",jg,[e.isInputHidden?E("",!0):(d(),h("div",{key:0,class:F({"app-console-settings-duration-input":!0,"app-console-settings-duration-input--mobile":e.isMobile,"app-console-settings-duration-input--desktop":!e.isMobile,"app-console-settings-duration-input--short":!e.isDurationOverHour,"app-console-settings-duration-input--wide":e.isDurationOverHour})},[p("div",zg,[r(u,{class:F(["app-console-settings-duration-change-step__button",{"app-console-settings-duration-change-step__button--disabled":!e.canDecrease}]),variant:"icon",size:"normal","is-disabled":!e.canDecrease,"rounding-value":e.isMobile?20:15,"is-active":!1,onClick:e.decrease},{default:n(()=>[r(a,{symbol:"svg-minus-duration"})]),_:1},8,["class","is-disabled","rounding-value","onClick"])]),r(m,{"is-duration-unlimited":e.isDurationUnlimited,"is-mixed":e.isMixed,"is-mobile":e.isMobile,time:e.duration,"timeline-length":e.timelineLength,"is-use-time-as-reference":!0,class:"app-console-settings-duration-input__input",onTimeChange:t[0]||(t[0]=b=>e.change(b))},null,8,["is-duration-unlimited","is-mixed","is-mobile","time","timeline-length"]),p("div",Hg,[r(u,{class:F(["app-console-settings-duration-change-step__button",{"app-console-settings-duration-change-step__button--disabled":!e.canIncrease}]),variant:"icon",size:"normal","is-disabled":!e.canIncrease,"rounding-value":e.isMobile?20:15,"is-active":!1,onClick:e.increase},{default:n(()=>[r(a,{symbol:"svg-plus-duration"})]),_:1},8,["class","is-disabled","rounding-value","onClick"])])],2)),e.isPresetsVisible?(d(),h("div",{key:1,style:z({"--app-console-settings-duration-item-count-per-row":e.itemPerRow}),class:"app-console-settings-duration-presets"},[(d(!0),h(N,null,q(e.limitedPresets,(b,T)=>(d(),h("div",{key:T,class:"app-console-settings-duration-presets__item"},[r(u,{"rounding-value":5,variant:"gray",size:"tiny","font-weight":500,"is-active":!1,"fixed-height":28,class:"app-console-settings-duration-presets__button",onClick:C=>e.change(b)},{default:n(()=>[y(g(e.prettyDuration(b)),1)]),_:2},1032,["onClick"])]))),128)),e.isExtendToTheEndVisible?(d(),h("div",_g,[r(f,{align:"bottom"},{text:n(()=>[y(g(e.$t("editor.appConsoleDuration.extendToTheEnd")),1)]),anchor:n(()=>[r(u,{"rounding-value":5,variant:"gray",size:"tiny","font-weight":500,"is-active":!1,"fixed-height":28,class:"app-console-settings-duration-presets__button",onClick:t[1]||(t[1]=b=>e.$emit("extend-to-the-end"))},{default:n(()=>[r(a,{height:18,width:18,symbol:"svg-tool-extend-to-the-end"})]),_:1})]),_:1})])):E("",!0),e.isExpandToProjectVisible?(d(),h("div",Ug,[r(f,{align:"bottom"},{text:n(()=>[y(g(e.$t("editor.appConsoleDuration.expandToProject")),1)]),anchor:n(()=>[r(u,{"rounding-value":5,variant:"gray",size:"tiny","font-weight":500,"is-active":!1,"fixed-height":28,class:"app-console-settings-duration-presets__button",onClick:t[2]||(t[2]=b=>e.$emit("expand-to-project"))},{default:n(()=>[r(a,{height:18,width:18,symbol:"svg-tool-expand-to-project"})]),_:1})]),_:1})])):E("",!0)],4)):E("",!0)])}const Wg=$(Bg,[["render",qg]]),Gg=A({name:"app-console-settings-time",props:{isDurationHidden:{type:Boolean,required:!0},isTimingHidden:{type:Boolean,required:!0}},data(){return{isDuration:!0}},computed:{hasTabs(){return!this.isDurationHidden&&!this.isTimingHidden}},mounted(){this.isDuration=!this.isDurationHidden}}),Xg={key:0,class:"app-console-settings-time__tabs"},Yg={class:"app-console-settings-time__tabs-wrapper"},Kg={key:1,class:"app-console-settings-time__content"},Zg={key:2,class:"app-console-settings-time__content"};function Qg(e,t,i,o,s,l){return d(),h("div",{class:F(["app-console-settings-time",{"app-console-settings-time--has-tabs":e.hasTabs}])},[e.hasTabs?(d(),h("div",Xg,[p("div",Yg,[p("div",{class:F(["app-console-settings-time__tab-button",{"app-console-settings-time__tab-button--active":e.isDuration}]),onClick:t[0]||(t[0]=a=>e.isDuration=!0)},g(e.$t("editor.appConsoleDuration.title")),3),p("div",{class:F(["app-console-settings-time__tab-button",{"app-console-settings-time__tab-button--active":!e.isDuration}]),onClick:t[1]||(t[1]=a=>e.isDuration=!1)},g(e.$t("editor.videoSettings.timing")),3)])])):E("",!0),e.isDuration?(d(),h("div",Kg,[w(e.$slots,"duration")])):(d(),h("div",Zg,[w(e.$slots,"timing")]))],2)}const Jg=$(Gg,[["render",Qg]]),xg=A({name:"app-console-tab-content",props:{isExpanded:{type:Boolean,default:!1},isFullHeight:{type:Boolean,default:!1}}});function ev(e,t,i,o,s,l){return d(),h("div",{class:F(["app-console-tab-content",{"app-console-tab-content--expanded":e.isExpanded,"app-console-tab-content--full-height":e.isFullHeight}])},[w(e.$slots,"default")],2)}const tv=$(xg,[["render",ev]]),iv=A({name:"app-console-track-element-settings",emits:["select-tab"],data(){return{selectedElementEventEmitter:new ue}},mounted(){this.selectedElementEventEmitter.on("select",this.select)},methods:{select(e){this.$emit("select-tab",e.data)}}}),ov={class:"app-console-track-element-settings"},nv={class:"app-console-track-element-settings__tab-buttons"},sv={class:"app-console-track-element-settings__tab-content"};function av(e,t,i,o,s,l){const a=go;return d(),h("div",ov,[r(a,{variant:"tabs",class:"app-console-track-element-settings__list","selected-element-event-emitter":e.selectedElementEventEmitter},{default:n(({elementClicked:u})=>[p("div",nv,[w(e.$slots,"tab-buttons",{tabClicked:u})])]),_:3},8,["selected-element-event-emitter"]),p("div",sv,[w(e.$slots,"tab-content")])])}const rv=$(iv,[["render",av]]),lv=A({name:"app-textarea",props:{value:{type:String,required:!0},isAutoExpanding:{type:Boolean,default:!1},textElementEventTarget:{type:ue,required:!1,default:void 0},isDisabled:{type:Boolean,default:!1}},emits:{input:e=>!0,blur:e=>!0},watch:{value:{async handler(){this.isAutoExpanding&&(await this.$nextTick(),this.throttledExpandTextAreaHeight())},immediate:!0}},mounted(){this.isAutoExpanding&&this.expandTextAreaHeight(),this.textElementEventTarget?.on("focus",this.dispatchFocusOnTextArea),document.addEventListener("mousedown",this.checkClickOutsideDropdownAndHide,{capture:!0}),document.addEventListener("touchstart",this.checkClickOutsideDropdownAndHide,{capture:!0})},beforeUnmount(){this.textElementEventTarget?.off("focus",this.dispatchFocusOnTextArea),document.removeEventListener("mousedown",this.checkClickOutsideDropdownAndHide,{capture:!0}),document.removeEventListener("touchstart",this.checkClickOutsideDropdownAndHide,{capture:!0}),this.cancelThrottledExpandTextAreaHeight()},methods:{expandTextAreaHeight(){const e=this.$el,t=e.offsetHeight-e.clientHeight;e.style.height="auto",e.style.height=`${e.scrollHeight+t}px`},dispatchFocusOnTextArea(){this.isDisabled||this.$el.focus()},dispatchBlurOnTextArea(){this.isDisabled||this.$el.blur()},checkClickOutsideDropdownAndHide(e){const t=e.target;!this.$el.contains(t)&&this.$el!==t&&this.dispatchBlurOnTextArea()},...(()=>{const e=ut(function(){this.expandTextAreaHeight()},dt.TWENTY_FIVE_FRAMES_PER_SECOND);return{throttledExpandTextAreaHeight:e,cancelThrottledExpandTextAreaHeight:e.cancel}})()}}),dv=["value","disabled"];function uv(e,t,i,o,s,l){return d(),h("textarea",J({class:"form-control"},e.$attrs,{value:e.value,disabled:e.isDisabled,onInput:t[0]||(t[0]=a=>e.$emit("input",a.target.value)),onBlur:t[1]||(t[1]=a=>e.$emit("blur",a))}),null,16,dv)}const pv=$(lv,[["render",uv]]),cv=A({name:"app-color-preset-button",components:{AppSvgSymbol:K},props:{color:{type:Object,default:void 0},isDisabled:{type:Boolean,default:!1}},computed:{formattedColor(){return this.color!==void 0?Vt(this.color):void 0},svgButtonWidth(){return window.matchMedia("(max-width: 991px)").matches?25:20}}});function mv(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("button",J({class:"app-color-preset-button"},e.$attrs),[e.color!==void 0?(d(),h("span",{key:0,class:"app-color-preset-button__dot",style:z({backgroundColor:e.formattedColor})},null,4)):(d(),S(a,{key:1,symbol:"icon-color-picker-reset-color",width:e.svgButtonWidth,height:e.svgButtonWidth,class:F(["app-color-preset-button__reset-color",{"app-color-preset-button__reset-color--disabled":e.isDisabled}])},null,8,["width","height","class"]))],16)}const hv=$(cv,[["render",mv]]),gv=A({name:"app-color-picker",components:{AppSvgSymbol:K},props:{color:{type:Object,default:void 0},colorPresets:{type:Array,default:()=>[]},isAlphaEnabled:{type:Boolean,default:!1},isResetColorEnabled:{type:Boolean,default:!1},isDropdownVisible:{type:Boolean,default:!1},appLayout:{type:String,default:null},customColorPane:{type:String,default:"text-color"},defaultColor:{type:Object,required:!0}},emits:{"color-change-start":null,"color-change":e=>!0,"color-change-finish":null,"hide-color-picker":null,"show-color-picker":null,"set-custom-color-pane":e=>!0},data(){return{dropdownLeftOffset:0,dropdownTopOffset:0,dropdownPositionCalculationRequestId:void 0}},computed:{colorForSpectrum(){return this.color===void 0?{red:0,green:0,blue:0,alpha:0}:this.color}},watch:{isDropdownVisible(){this.isDropdownVisible?this.showDropdown():this.hideDropdown()}},beforeUnmount(){this.dropdownPositionCalculationRequestId!==void 0&&window.cancelAnimationFrame(this.dropdownPositionCalculationRequestId),this.emitHideColorPickerEvent()},methods:{async showDropdown(){await this.$nextTick(),await this.calculateDropdownPosition(),this.bindListenersForDropdown()},hideDropdown(){this.unbindListenersForDropdown()},toggleDropdown(){this.isDropdownVisible?this.emitHideColorPickerEvent():(this.color===void 0&&(this.$emit("color-change-start"),this.$emit("color-change",this.defaultColor),this.$emit("color-change-finish")),this.emitShowColorPickerEvent())},switchNavigationToCustomColor(){this.color===void 0&&(this.$emit("color-change-start"),this.$emit("color-change",this.defaultColor),this.$emit("color-change-finish")),this.$emit("set-custom-color-pane",this.customColorPane)},emitHideColorPickerEvent(){this.$emit("hide-color-picker")},emitShowColorPickerEvent(){this.$emit("show-color-picker")},bindListenersForDropdown(){document.addEventListener("mousedown",this.checkClickOutsideDropdownAndHide,{capture:!0}),window.addEventListener("resize",this.requestDropdownPositionCalculation),document.addEventListener("dragstart",this.emitHideColorPickerEvent),document.addEventListener("touchstart",this.checkClickOutsideDropdownAndHide,{capture:!0})},unbindListenersForDropdown(){document.removeEventListener("mousedown",this.checkClickOutsideDropdownAndHide,{capture:!0}),window.removeEventListener("resize",this.requestDropdownPositionCalculation),document.removeEventListener("dragstart",this.emitHideColorPickerEvent),document.removeEventListener("touchstart",this.checkClickOutsideDropdownAndHide,{capture:!0})},requestDropdownPositionCalculation(){this.dropdownPositionCalculationRequestId===void 0&&(this.dropdownPositionCalculationRequestId=window.requestAnimationFrame(()=>{this.calculateDropdownPosition(),this.dropdownPositionCalculationRequestId=void 0}))},async calculateDropdownPosition(){const{x:e,y:t}=await uo(this.$refs.button,this.$refs.dropdown,{placement:"bottom-start",middleware:[po({crossAxis:!1,fallbackPlacements:["top-start"]}),co({mainAxis:9,crossAxis:-1})]});this.dropdownTopOffset=t,this.dropdownLeftOffset=e},checkClickOutsideDropdownAndHide(e){const t=e.target;!this.$el.contains(t)&&this.$el!==t&&this.emitHideColorPickerEvent()}}}),vv={class:"app-color-picker"},fv={key:0,class:"app-color-picker__color-preset"},bv={key:1,class:"app-color-picker__color-preset"},yv={class:"app-color-picker-dropdown__title"},Ev={key:2,class:"app-color-picker__color-preset"};function Sv(e,t,i,o,s,l){const a=tt,u=D("AppSvgSymbol"),m=wi,f=hv;return d(),h("div",vv,[e.appLayout==="desktop"?(d(),h("div",fv,[r(a,{offset:8},{text:n(()=>[y(g(e.$t("appConsoleSettings.customColor")),1)]),anchor:n(()=>[p("button",{ref:"button",class:"app-color-picker__preset-button",onClick:t[0]||(t[0]=b=>e.toggleDropdown())},t[7]||(t[7]=[p("span",{class:"app-color-picker__rainbow"},[p("span",{class:"app-color-picker__color"})],-1)]),512)]),_:1})])):(d(),h("div",bv,[p("button",{ref:"button",class:"app-color-picker__preset-button",onClick:t[1]||(t[1]=b=>e.switchNavigationToCustomColor())},t[8]||(t[8]=[p("span",{class:"app-color-picker__rainbow"},[p("span",{class:"app-color-picker__color"})],-1)]),512)])),r(pt,{name:"fade"},{default:n(()=>[e.isDropdownVisible?(d(),h("div",{key:0,ref:"dropdown",class:"app-color-picker-dropdown",style:z({transform:`translate3d(${e.dropdownLeftOffset}px, ${e.dropdownTopOffset}px, 0)`})},[p("div",yv,[p("div",null,g(e.$t("appConsoleSettings.customColor")),1),p("button",{class:"app-color-picker-dropdown__close-button","aria-label":"Close",onClick:t[2]||(t[2]=(...b)=>e.emitHideColorPickerEvent&&e.emitHideColorPickerEvent(...b))},[r(u,{"is-block":"",symbol:"close-color-picker",width:28,height:28})])]),r(m,{"is-alpha-enabled":e.isAlphaEnabled,color:e.colorForSpectrum,"app-layout":e.appLayout,onColorChangeStart:t[3]||(t[3]=b=>e.$emit("color-change-start")),onColorChange:t[4]||(t[4]=b=>e.$emit("color-change",b)),onColorChangeFinish:t[5]||(t[5]=b=>e.$emit("color-change-finish"))},null,8,["is-alpha-enabled","color","app-layout"])],4)):E("",!0)]),_:1}),e.isResetColorEnabled?(d(),h("div",Ev,[r(f,{"is-disabled":e.color===void 0,onClick:t[6]||(t[6]=b=>{e.$emit("color-change-start"),e.$emit("color-change",void 0),e.$emit("color-change-finish"),e.emitHideColorPickerEvent()})},null,8,["is-disabled"])])):E("",!0),(d(!0),h(N,null,q(e.colorPresets,(b,T)=>(d(),h("div",{key:`${T}-color-presets`,class:"app-color-picker__color-preset"},[r(f,{color:b,onClick:C=>{e.$emit("color-change-start"),e.$emit("color-change",b),e.$emit("color-change-finish")}},null,8,["color","onClick"])]))),128))])}const kv=$(gv,[["render",Sv]]),Cv=A({name:"app-text-size-number-input",components:{AppSelect:$t,AppButton:oe,AppSvgSymbol:K,AppSelectOption:wt},props:{textAbsoluteFontSize:{type:Number,required:!0},textAbsoluteFontSizeMaximum:{type:Number,required:!0},textAbsoluteFontSizeMinimum:{type:Number,required:!0},textAbsoluteFontSizes:{type:Array,required:!0},isMobileLayout:{type:Boolean,default:!1},trackElementSelectionViewModel:{type:Object,required:!0}},emits:{"text-absolute-font-size-change":e=>!0,increment:null,decrement:null},data(){const e=jn();return{scrollbarWidth:e.scrollbarWidth,canUserThinScrollbar:e.canUserThinScrollbar}},computed:{displayFontSize(){return this.isMixedValue?"":String(Math.round(this.textAbsoluteFontSize))},activeItemId(){return this.textAbsoluteFontSizes.find(e=>String(e.size)===this.displayFontSize)?.id},selectedTextElements(){return this.trackElementSelectionViewModel.getSelectedTrackElements().filter(e=>ke(e))},isMixedValue(){return Ee(this.selectedTextElements.map(e=>e.textOptions.absoluteFontSize)).length>1}},mounted(){document.addEventListener("mousedown",this.checkClickOutsideInputAndBlur,{capture:!0}),document.addEventListener("touchstart",this.checkClickOutsideInputAndBlur,{capture:!0})},beforeUnmount(){document.removeEventListener("mousedown",this.checkClickOutsideInputAndBlur,{capture:!0}),document.removeEventListener("touchstart",this.checkClickOutsideInputAndBlur,{capture:!0})},methods:{increment(){this.isMixedValue?this.selectedTextElements.filter(t=>t.textOptions.absoluteFontSize+1<=this.textAbsoluteFontSizeMaximum).length>0&&this.$emit("increment"):this.textAbsoluteFontSize+1<=this.textAbsoluteFontSizeMaximum&&this.$emit("text-absolute-font-size-change",this.textAbsoluteFontSize+1)},decrement(){this.isMixedValue?this.selectedTextElements.filter(t=>t.textOptions.absoluteFontSize-1>=this.textAbsoluteFontSizeMinimum).length>0&&this.$emit("decrement"):this.textAbsoluteFontSize-1>=this.textAbsoluteFontSizeMinimum&&this.$emit("text-absolute-font-size-change",this.textAbsoluteFontSize-1)},selectFontSize(e){const t=e.target;t.valueAsNumber<=this.textAbsoluteFontSizeMaximum&&t.valueAsNumber>=this.textAbsoluteFontSizeMinimum&&(t.valueAsNumber=Number(t.valueAsNumber),this.emitFontChange(t.valueAsNumber)),t.valueAsNumber>this.textAbsoluteFontSizeMaximum&&(t.valueAsNumber=this.textAbsoluteFontSizeMaximum,this.emitFontChange(this.textAbsoluteFontSizeMaximum)),t.valueAsNumber<this.textAbsoluteFontSizeMinimum&&(t.valueAsNumber=this.textAbsoluteFontSizeMinimum,this.emitFontChange(this.textAbsoluteFontSizeMinimum))},blurInput(){this.$refs.input.blur()},emitFontChange(e){this.$emit("text-absolute-font-size-change",e)},preventIfNotNumber(e){/^[0-9]$/.test(e.key)||e.preventDefault()},checkClickOutsideInputAndBlur(e){const t=e.target;!this.$el.contains(t)&&this.$el!==t&&this.blurInput()}}}),Tv={class:"app-text-size-number-input"},$v=["value","placeholder","onClick","onKeyup"];function wv(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppButton"),m=D("AppSelectOption"),f=D("AppSelect");return d(),h("div",Tv,[r(u,{variant:"number-spinner","rounded-edges":"left","rounding-value":6,onClick:e.decrement},{default:n(()=>[r(a,{symbol:"svg-minus-smooth",width:20,height:20,"is-block":""})]),_:1},8,["onClick"]),r(f,{"has-input":!0,"active-item-id":e.activeItemId,items:e.textAbsoluteFontSizes,"is-use-thin-scrollbars":e.canUserThinScrollbar},{icon:n(()=>[r(a,{symbol:"select-arrows",width:20,height:20})]),item:n(b=>[r(m,{"is-active":b.isActive,"is-active-option-has-check-icon":!1,"computed-scrollbar-width":e.scrollbarWidth,"justify-content":"center",variant:"font-size",onClick:T=>{b.hideDropdown(),e.emitFontChange(b.item.size)}},{default:n(()=>[y(g(b.item.name),1)]),_:2},1032,["is-active","computed-scrollbar-width","onClick"])]),"custom-input":n(b=>[p("input",{ref:"input",class:F(["app-text-size-number-input__size-input",{"app-text-size-number-input__size-input--mixed-value":e.isMixedValue}]),type:"number",inputmode:"numeric",value:e.displayFontSize,placeholder:e.isMixedValue?"_ _":void 0,onClick:T=>e.isMobileLayout?()=>{}:b.showDropdown(),onKeyup:Ce(_(T=>{e.blurInput(),b.hideDropdown()},["prevent"]),["enter"]),onBlur:t[0]||(t[0]=_(T=>e.selectFontSize(T),["prevent"])),onKeypress:t[1]||(t[1]=T=>e.preventIfNotNumber(T))},null,42,$v)]),_:1},8,["active-item-id","items","is-use-thin-scrollbars"]),r(u,{variant:"number-spinner","rounded-edges":"right","rounding-value":6,onClick:e.increment},{default:n(()=>[r(a,{symbol:"svg-plus-smooth",width:20,height:20,"is-block":""})]),_:1},8,["onClick"])])}const Av=$(Cv,[["render",wv]]),Mv=500,Rv=400,Pv=A({name:"app-console-settings-text-content",components:{AppSvgSymbol:K,AppSelectGroupTitle:On,AppSelectSearchInput:Ln,AppSelectOption:wt,AppSelect:$t},props:{colorPresets:{type:Array,required:!0},fonts:{type:Array,required:!0},googleFonts:{type:Array,required:!0},recentFonts:{type:Array,required:!0},textContent:{type:String,required:!0},textColor:{type:Object,required:!0},textFontFace:{type:Object,required:!0},textFontStyle:{type:String,required:!0},textFontWeight:{type:Number,required:!0},textElementEventTarget:{type:ue,required:!1,default:void 0},textAbsoluteFontSize:{type:Number,required:!0},textAbsoluteFontSizeMaximum:{type:Number,required:!0},textAbsoluteFontSizeMinimum:{type:Number,required:!0},textAbsoluteFontSizes:{type:Array,required:!0},isMobileLayout:{type:Boolean,default:!1},defaultColor:{type:Object,required:!0},trackElementSelectionViewModel:{type:Object,required:!0}},emits:{"text-change":e=>!0,"text-change-finish":null,"color-change-start":null,"color-change":e=>!0,"color-change-finish":null,"font-face-change":e=>!0,"text-absolute-font-size-change":e=>!0,"new-fonts-showed":e=>!0,"font-style-change":e=>!0,"text-absolute-font-size-increment":null,"text-absolute-font-size-decrement":null,"set-custom-color-pane":null},data(){return{fontSearchTerm:"",isFontSearchActive:!1,foundFonts:[],fontAppearanceQueue:[],fontAppearanceQueueTimeoutId:void 0,isColorPickerDropdownVisible:!1,defaultWhiteColor:{alpha:1,red:255,green:255,blue:255}}},computed:{fontStyles(){const e=this.fonts.find(t=>t.face.family===this.textFontFace.family);return V(e!==void 0,"currentFont is undefined"),e.styles},fontStylesWithUniqueWeights(){const e=this.fontStyles.filter(o=>o.style==="italic"),t=this.fontStyles.filter(o=>o.style!=="italic"),i=e.filter(o=>t.every(s=>o.weight!==s.weight));return i.length>0?t.concat(i).sort((o,s)=>o.weight-s.weight):t},fontGroups(){const e=this.fonts.find(o=>o.face.family===this.textFontFace.family);V(e!==void 0,"currentFont is undefined");const t=this.recentFonts.filter(o=>o.face.family!==e.face.family);t.push(e);const i=o=>o.map(s=>({id:s.face.family,name:s.face.family,font:s}));return[{id:"Recent",name:this.$t("appConsoleSettingsTextContent.recent"),items:i(t).reverse().slice(0,5)},{id:"Featured",name:this.$t("appConsoleSettingsTextContent.featured"),items:i(this.fonts)}]},selectedTextElements(){return this.trackElementSelectionViewModel.getSelectedTrackElements().filter(e=>ke(e))},isTextColorValuesMixed(){return Ee(this.selectedTextElements.map(e=>e.textOptions.textColor)).length>1},isFontFamilyValuesMixed(){return Ee(this.selectedTextElements.map(e=>e.textOptions.fontFace.family)).length>1},isFontWeightValuesMixed(){return Ee(this.selectedTextElements.map(e=>e.textOptions.fontWeight)).length>1},isMultiEdit(){return this.trackElementSelectionViewModel.hasSelectedMany()}},beforeUnmount(){this.fontAppearanceQueueTimeoutId!==void 0&&window.clearTimeout(this.fontAppearanceQueueTimeoutId)},methods:{getHumanReadableFontStyle(e){switch(e.weight){case 100:return"Thin";case 200:return"Extra-light";case 300:return"Light";case 400:return"Normal";case 500:return"Medium";case 600:return"Semi Bold";case 700:return"Bold";case 800:return"Extra Bold";case 900:return"Black";case 950:return"Extra Black"}throw new Error("Unsupported font face style!")},resetFontSearch(){this.fontSearchTerm="",this.isFontSearchActive=!1,this.foundFonts=[]},searchFonts(){const e=this.fontSearchTerm.toLowerCase();this.foundFonts=this.googleFonts.filter(t=>t.face.family.toLowerCase().includes(e)).sort((t,i)=>{const o=t.face.family.toLowerCase().startsWith(e),s=i.face.family.toLowerCase().startsWith(e);return!o&&s?1:o&&!s?-1:t.face.family.localeCompare(i.face.family)}).slice(0,40),this.isFontSearchActive=!0},...(()=>{const e=_t(function(){this.searchFonts()},Rv);return{debouncedSearchFonts:e,cancelDebouncedSearchFonts:e.cancel}})(),changeFontSearchTerm(e){this.fontSearchTerm=e,e.length>0?this.debouncedSearchFonts():(this.cancelDebouncedSearchFonts(),this.resetFontSearch())},queueFontAppearanceEvent(e){this.fontAppearanceQueue.push(e),this.fontAppearanceQueueTimeoutId===void 0&&(this.fontAppearanceQueueTimeoutId=window.setTimeout(()=>{this.$emit("new-fonts-showed",this.fontAppearanceQueue),this.fontAppearanceQueue=[],this.fontAppearanceQueueTimeoutId=void 0},Mv))},changeFontStyle(e){let t=e;this.textFontStyle!==e.style&&this.fontStyles.find(o=>o.weight===e.weight&&o.style===this.textFontStyle)!==void 0&&(t={weight:e.weight}),this.$emit("font-style-change",t)}}}),Iv={class:"app-console-settings-text-content"},Lv={class:"app-console-settings-text-content__text-input"},Ov={class:"app-console-settings-text-content__color-picker"},Fv={class:"app-console-settings-text-content__font-selector"},Dv={class:"app-console-settings-text-content__row"},Vv={class:"app-console-settings-text-content__family-selector"},Nv={class:"app-console-settings-text-content__row"},Bv={class:"app-console-settings-text-content__weight-selector"},jv={class:"app-console-settings-text-content__size-number-input"};function zv(e,t,i,o,s,l){const a=pv,u=kv,m=D("AppSvgSymbol"),f=D("AppSelectSearchInput"),b=D("AppSelectGroupTitle"),T=D("AppSelectOption"),C=D("AppSelect"),M=Av;return d(),h("div",Iv,[p("div",Lv,[r(a,{rows:e.isMobileLayout?3:2,placeholder:e.$t("appConsoleSettingsTextContent.textPlaceholder"),value:e.isMultiEdit?e.$t("mixed"):e.textContent,"is-auto-expanding":!e.isMobileLayout,"text-element-event-target":e.textElementEventTarget,"is-disabled":e.isMultiEdit,"data-testid":"console-settings-text-content-textarea",onInput:t[0]||(t[0]=L=>e.$emit("text-change",L)),onBlur:t[1]||(t[1]=L=>e.$emit("text-change-finish"))},null,8,["rows","placeholder","value","is-auto-expanding","text-element-event-target","is-disabled"])]),p("div",Ov,[r(u,{color:e.isTextColorValuesMixed?void 0:e.textColor,"color-presets":e.colorPresets,"is-dropdown-visible":e.isColorPickerDropdownVisible,"app-layout":e.isMobileLayout?"mobile":"desktop","custom-color-pane":"text-color","default-color":e.isTextColorValuesMixed?e.defaultWhiteColor:e.defaultColor,"is-alpha-enabled":!0,"data-testid":"console-settings-text-content-color-picker",onColorChangeStart:t[2]||(t[2]=L=>e.$emit("color-change-start")),onColorChange:t[3]||(t[3]=L=>e.$emit("color-change",L)),onColorChangeFinish:t[4]||(t[4]=L=>e.$emit("color-change-finish")),onShowColorPicker:t[5]||(t[5]=L=>e.isColorPickerDropdownVisible=!0),onHideColorPicker:t[6]||(t[6]=L=>e.isColorPickerDropdownVisible=!1),onSetCustomColorPane:t[7]||(t[7]=L=>{e.$emit("set-custom-color-pane",L)})},null,8,["color","color-presets","is-dropdown-visible","app-layout","default-color"])]),p("div",Fv,[p("div",Dv,[p("div",Vv,[r(C,{"active-item-id":e.isFontFamilyValuesMixed?void 0:e.textFontFace.family,"is-search-active":e.isFontSearchActive,"found-items":e.foundFonts.map(L=>({id:L.face.family,name:L.face.family,font:L})),"item-groups":e.fontGroups,"has-search":"","data-testid":"console-settings-text-content-font-family"},G({icon:n(()=>[r(m,{symbol:"select-arrows",width:20,height:20})]),"search-input":n(()=>[r(f,{placeholder:e.$t("appConsoleSettingsTextContent.fontSelectorPlaceholder"),value:e.fontSearchTerm,onInput:e.changeFontSearchTerm},{icon:n(()=>[r(m,{symbol:"magnifier",width:20,height:20,"is-block":""})]),_:1},8,["placeholder","value","onInput"])]),"empty-search-result":n(()=>[y(g(e.$t("appConsoleSettingsTextContent.fontSelectorNoResults")),1)]),"group-name":n(L=>[r(b,{"has-top-padding":L.group.id==="Featured"},{default:n(()=>[y(g(L.group.name),1)]),_:2},1032,["has-top-padding"])]),item:n(L=>[r(T,{"font-family":[L.item.font.face.family,L.item.font.face.generic].filter(I=>I!==void 0).join(", "),"font-size":14,"is-active":L.isActive,title:L.item.name,"get-scrollable-parent-callback":L.getScrollableParentCallback,"is-appearance-tracking-required":"",onClick:I=>{L.hideDropdown(),e.$emit("font-face-change",L.item.font.face),e.resetFontSearch()},onOptionShowed:I=>e.queueFontAppearanceEvent(L.item.font)},{default:n(()=>[y(g(L.item.name),1)]),_:2},1032,["font-family","is-active","title","get-scrollable-parent-callback","onClick","onOptionShowed"])]),_:2},[e.isFontFamilyValuesMixed?{name:"active-item",fn:n(()=>[y(g(e.$t("mixed")),1)]),key:"0"}:void 0]),1032,["active-item-id","is-search-active","found-items","item-groups"])])]),p("div",Nv,[p("div",Bv,[r(C,{items:e.fontStylesWithUniqueWeights.map(L=>({id:`${L.weight}`,name:e.getHumanReadableFontStyle(L),style:L})),"active-item-id":e.isFontWeightValuesMixed?void 0:`${e.textFontWeight}`,"is-disabled":e.isFontFamilyValuesMixed||e.fontStylesWithUniqueWeights.length<2,"data-testid":"console-settings-text-content-font-weight"},G({icon:n(()=>[r(m,{symbol:"select-arrows",width:20,height:20})]),item:n(L=>[r(T,{"is-active":L.isActive,"font-weight":L.item.style.weight,onClick:I=>{L.hideDropdown(),e.changeFontStyle(L.item.style)}},{default:n(()=>[y(g(L.item.name),1)]),_:2},1032,["is-active","font-weight","onClick"])]),_:2},[e.isFontWeightValuesMixed?{name:"active-item",fn:n(()=>[y(g(e.$t("mixed")),1)]),key:"0"}:void 0]),1032,["items","active-item-id","is-disabled"])]),p("div",jv,[r(M,{"text-absolute-font-size-minimum":e.textAbsoluteFontSizeMinimum,"text-absolute-font-size-maximum":e.textAbsoluteFontSizeMaximum,"text-absolute-font-size":e.textAbsoluteFontSize,"text-absolute-font-sizes":e.textAbsoluteFontSizes,"is-mobile-layout":e.isMobileLayout,"track-element-selection-view-model":e.trackElementSelectionViewModel,onTextAbsoluteFontSizeChange:t[8]||(t[8]=L=>e.$emit("text-absolute-font-size-change",L)),onIncrement:t[9]||(t[9]=L=>e.$emit("text-absolute-font-size-increment")),onDecrement:t[10]||(t[10]=L=>e.$emit("text-absolute-font-size-decrement"))},null,8,["text-absolute-font-size-minimum","text-absolute-font-size-maximum","text-absolute-font-size","text-absolute-font-sizes","is-mobile-layout","track-element-selection-view-model"])])])])])}const Hv=$(Pv,[["render",zv]]),_v=A({name:"app-console-settings-text-adjust",components:{AppSvgSymbol:K,AppButton:oe},props:{textAlign:{type:String,required:!0,validator:e=>Ra(Pa,e)},isTextUnderlined:{type:Boolean,required:!0},isInUppercase:{type:Boolean,required:!0},textLineHeight:{type:Number,required:!0},textAbsoluteLetterSpacing:{type:Number,required:!0},textFontStyle:{type:String,required:!0},textFontWeight:{type:Number,required:!0},textFontFace:{type:Object,required:!0},fonts:{type:Array,required:!0},trackElementSelectionViewModel:{type:Object,required:!0},defaultLineHeight:{type:Number,required:!0},defaultAbsoluteLetterSpacing:{type:Number,required:!0}},emits:{"text-line-height-change-start":null,"text-line-height-change":e=>!0,"text-line-height-change-finish":null,"text-absolute-letter-spacing-change-start":null,"text-absolute-letter-spacing-change":e=>!0,"text-absolute-letter-spacing-change-finish":null,"text-align-change":e=>!0,"text-underline-change":e=>!0,"text-italics-change":e=>!0,"text-uppercase-change":e=>!0},computed:{textFont(){const e=this.fonts.find(t=>t.face.family===this.textFontFace.family);return V(e!==void 0,`Unknown font ${this.textFontFace.family}`),e},isTextCanBeItalic(){return this.textFont.styles.some(e=>e.weight===this.textFontWeight&&e.style==="italic")},isTextCanBeNormal(){return this.textFont.styles.some(e=>e.weight===this.textFontWeight&&e.style==="normal")},isItalicDisabled(){return this.selectedTextElements.length>1?this.selectedTextElements.every(e=>{const t=e.textOptions.fontWeight,i=this.fonts.find(l=>l.face.family===e.textOptions.fontFace.family);V(i!==void 0,`Unknown font ${e.textOptions.fontFace.family}`);const o=i.styles.some(l=>l.weight===t&&l.style==="italic"),s=i.styles.some(l=>l.weight===t&&l.style==="normal");return!(o&&s)}):!this.isTextCanBeItalic||!this.isTextCanBeNormal},selectedTextElements(){return this.trackElementSelectionViewModel.getSelectedTrackElements().filter(e=>ke(e))},isLineHeightValueMixed(){return Ee(this.selectedTextElements.map(e=>e.textOptions.lineHeight)).length>1},isLetterSpacingValueMixed(){return Ee(this.selectedTextElements.map(e=>e.textOptions.absoluteLetterSpacing)).length>1},isTextAlignValueMixed(){return Ee(this.selectedTextElements.map(e=>e.textOptions.align)).length>1},isUnderlinedValueMixed(){return Ee(this.selectedTextElements.map(e=>e.textOptions.isUnderlined)).length>1},isUpperCasedValueMixed(){return Ee(this.selectedTextElements.map(e=>e.textOptions.isInUppercase)).length>1}}}),Uv={class:"app-console-settings-text-adjust"},qv={class:"app-console-settings-text-adjust__line-height"},Wv={class:"app-console-settings-text-adjust__letter-spacing"},Gv={class:"app-console-settings-text-adjust__text-align"},Xv={class:"app-console-settings-text-adjust__button-group"},Yv={class:"app-console-settings-text-adjust__decoration"},Kv={class:"app-console-settings-text-adjust__button-group"};function Zv(e,t,i,o,s,l){const a=We,u=Ge,m=Xe,f=D("AppSvgSymbol"),b=D("AppButton");return d(),h("div",Uv,[p("div",qv,[r(m,{min:.5,max:2,step:.01,value:e.isLineHeightValueMixed?e.defaultLineHeight:e.textLineHeight,"is-label-grayed-out":e.isLineHeightValueMixed,onStart:t[0]||(t[0]=T=>e.$emit("text-line-height-change-start")),onChange:t[1]||(t[1]=T=>e.$emit("text-line-height-change",T)),onFinish:t[2]||(t[2]=T=>e.$emit("text-line-height-change-finish"))},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsTextAdjust.lineHeight")),1)]),label:n(()=>[p("span",null,g(e.isLineHeightValueMixed?e.$t("mixed"):parseFloat(e.textLineHeight.toFixed(2))),1)]),line:n(T=>[r(a,{"is-hovered":T.isHovered},null,8,["is-hovered"])]),stick:n(T=>[r(u,{"is-hovered":T.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])]),p("div",Wv,[r(m,{min:-20,max:100,step:1,value:e.isLetterSpacingValueMixed?e.defaultAbsoluteLetterSpacing:e.textAbsoluteLetterSpacing,"is-label-grayed-out":e.isLetterSpacingValueMixed,onStart:t[3]||(t[3]=T=>e.$emit("text-absolute-letter-spacing-change-start")),onChange:t[4]||(t[4]=T=>e.$emit("text-absolute-letter-spacing-change",T)),onFinish:t[5]||(t[5]=T=>e.$emit("text-absolute-letter-spacing-change-finish"))},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsTextAdjust.letterSpacing")),1)]),label:n(()=>[p("span",null,g(e.isLetterSpacingValueMixed?e.$t("mixed"):e.textAbsoluteLetterSpacing),1)]),line:n(T=>[r(a,{"is-hovered":T.isHovered},null,8,["is-hovered"])]),stick:n(T=>[r(u,{"is-hovered":T.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])]),p("div",Gv,[p("div",Xv,[r(b,{"rounded-edges":"left","rounding-value":5,variant:"gray",size:"small","fixed-height":34,"is-active":!e.isTextAlignValueMixed&&e.textAlign==="left",onClick:t[6]||(t[6]=T=>e.$emit("text-align-change",{textAlign:"left",justifyContent:"flex-start"}))},{default:n(()=>[r(f,{symbol:"svg-icon-text-align-left",width:20,height:20})]),_:1},8,["is-active"]),t[12]||(t[12]=p("div",{class:"app-console-settings-text-adjust__horizontal-spacer"},null,-1)),r(b,{"rounded-edges":"none",variant:"gray",size:"small","fixed-height":34,"is-active":!e.isTextAlignValueMixed&&e.textAlign==="center",onClick:t[7]||(t[7]=T=>e.$emit("text-align-change",{textAlign:"center",justifyContent:"center"}))},{default:n(()=>[r(f,{symbol:"svg-icon-text-align-center",width:20,height:20})]),_:1},8,["is-active"]),t[13]||(t[13]=p("div",{class:"app-console-settings-text-adjust__horizontal-spacer"},null,-1)),r(b,{"rounded-edges":"right","rounding-value":5,variant:"gray",size:"small","fixed-height":34,"is-active":!e.isTextAlignValueMixed&&e.textAlign==="right",onClick:t[8]||(t[8]=T=>e.$emit("text-align-change",{textAlign:"right",justifyContent:"flex-end"}))},{default:n(()=>[r(f,{symbol:"svg-icon-text-align-right",width:20,height:20})]),_:1},8,["is-active"])])]),p("div",Yv,[p("div",Kv,[r(b,{"rounded-edges":"left","rounding-value":5,variant:"gray-toggable",size:"small","fixed-height":34,"is-active":!e.isUnderlinedValueMixed&&e.isTextUnderlined,onClick:t[9]||(t[9]=T=>e.$emit("text-underline-change",e.isUnderlinedValueMixed?!0:!e.isTextUnderlined))},{default:n(()=>[r(f,{symbol:"svg-icon-text-underline",width:20,height:20})]),_:1},8,["is-active"]),t[14]||(t[14]=p("div",{class:"app-console-settings-text-adjust__horizontal-spacer"},null,-1)),r(b,{variant:"gray-toggable",size:"small","fixed-height":34,"rounded-edges":"none","is-disabled":e.isItalicDisabled,"is-active":e.textFontStyle==="italic",onClick:t[10]||(t[10]=T=>e.$emit("text-italics-change",e.textFontStyle==="italic"?"normal":"italic"))},{default:n(()=>[r(f,{symbol:"svg-icon-text-italics",width:20,height:20})]),_:1},8,["is-disabled","is-active"]),t[15]||(t[15]=p("div",{class:"app-console-settings-text-adjust__horizontal-spacer"},null,-1)),r(b,{"rounded-edges":"right","rounding-value":5,variant:"gray-toggable",size:"small","fixed-height":34,"is-active":!e.isUpperCasedValueMixed&&e.isInUppercase,onClick:t[11]||(t[11]=T=>e.$emit("text-uppercase-change",e.isUpperCasedValueMixed?!0:!e.isInUppercase))},{default:n(()=>[r(f,{symbol:"svg-icon-text-uppercase",width:20,height:20})]),_:1},8,["is-active"])])])])}const Qv=$(_v,[["render",Zv]]),Jv=A({name:"app-console-settings-text-background",props:{colorPresets:{type:Array,required:!0},backgroundColor:{type:Object,default:void 0},backgroundBorderRadius:{type:Number,required:!0},textColor:{type:Object,required:!0},appLayout:{type:String,required:!0},defaultSolidColor:{type:Object,required:!0},defaultMultiEditColor:{type:Object,required:!0},defaultGradientColor:{type:Object,required:!0},trackElementSelectionViewModel:{type:Object,required:!0},defaultBackgroundBorderRadius:{type:Number,required:!0}},emits:{"background-color-change-start":null,"background-color-change":e=>!0,"background-color-change-finish":null,"background-border-radius-change-start":null,"background-border-radius-change":e=>!0,"background-border-radius-change-finish":null,"set-custom-color-pane":null},data(){return{isColorPickerDropdownVisible:!1}},computed:{selectedTextElements(){return this.trackElementSelectionViewModel.getSelectedTrackElements().filter(e=>ke(e))},isbBackgroundBorderRadiusValuesMixed(){return Ee(this.selectedTextElements.map(e=>e.textOptions.backgroundBorderRadius)).length>1},isbBackgroundColorValuesMixed(){return Ee(this.selectedTextElements.map(e=>e.textOptions.backgroundFill)).length>1},isMultiEdit(){return this.trackElementSelectionViewModel.hasSelectedMany()}},methods:{showColorPicker(){this.isColorPickerDropdownVisible=!0},hideColorPicker(){this.isColorPickerDropdownVisible=!1},changeColorIfBackgroundIsEmpty(){this.backgroundColor===void 0&&(this.isColorWhiteOrBlack(this.textColor)?this.$emit("background-color-change",this.colorFromHex("#ee1d25")):this.$emit("background-color-change",this.invertColor(this.textColor)),this.$emit("background-color-change-finish"))},invertColor:Ia,isColorWhiteOrBlack:La,colorFromHex:Nn}}),xv={class:"app-console-settings-text-background"},ef={class:"app-console-settings-text-background__color-picker"},tf={key:0,class:"app-console-settings-text-background__rounding"};function of(e,t,i,o,s,l){const a=yo,u=We,m=Ge,f=Xe;return d(),h("div",xv,[p("div",ef,[r(a,{"is-alpha-enabled":!0,"is-reset-color-enabled":!0,"color-presets":e.colorPresets,color:e.isbBackgroundColorValuesMixed?void 0:e.backgroundColor,"is-dropdown-visible":e.isColorPickerDropdownVisible,"app-layout":e.appLayout,"default-solid-color":e.isMultiEdit?e.defaultMultiEditColor:e.defaultSolidColor,"default-gradient-color":e.defaultGradientColor,"custom-color-pane":"text-background-color",onShowColorPicker:t[0]||(t[0]=b=>{e.showColorPicker(),e.changeColorIfBackgroundIsEmpty()}),onHideColorPicker:t[1]||(t[1]=b=>{e.hideColorPicker()}),onColorChangeStart:t[2]||(t[2]=b=>e.$emit("background-color-change-start")),onColorChange:t[3]||(t[3]=b=>e.$emit("background-color-change",b)),onColorChangeFinish:t[4]||(t[4]=b=>e.$emit("background-color-change-finish")),onSetCustomColorPane:t[5]||(t[5]=b=>{e.$emit("set-custom-color-pane",b)})},null,8,["color-presets","color","is-dropdown-visible","app-layout","default-solid-color","default-gradient-color"])]),e.backgroundColor!==void 0?(d(),h("div",tf,[r(f,{min:0,max:50,step:1,value:e.isbBackgroundBorderRadiusValuesMixed?e.defaultBackgroundBorderRadius:e.backgroundBorderRadius,"is-label-grayed-out":e.isbBackgroundBorderRadiusValuesMixed,onStart:t[6]||(t[6]=b=>e.$emit("background-border-radius-change-start")),onChange:t[7]||(t[7]=b=>e.$emit("background-border-radius-change",b)),onFinish:t[8]||(t[8]=b=>e.$emit("background-border-radius-change-finish"))},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsTextBackground.rounding")),1)]),label:n(()=>[p("span",null,g(e.isbBackgroundBorderRadiusValuesMixed?e.$t("mixed"):e.backgroundBorderRadius),1)]),line:n(b=>[r(u,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),stick:n(b=>[r(m,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])])):E("",!0)])}const nf=$(Jv,[["render",of]]),sf=A({name:"app-console-settings-opacity",props:{opacity:{type:Number,required:!0},isLabelGrayedOut:{type:Boolean,required:!0}},emits:["opacity-change-start","opacity-change","opacity-change-finish"]}),af={class:"app-console-settings-opacity"},rf={class:"app-console-settings-opacity__opacity-input"};function lf(e,t,i,o,s,l){const a=We,u=Ge,m=Xe;return d(),h("div",af,[p("div",rf,[r(m,{min:0,max:100,value:e.opacity,"is-label-grayed-out":e.isLabelGrayedOut,onStart:t[0]||(t[0]=f=>e.$emit("opacity-change-start")),onChange:t[1]||(t[1]=f=>e.$emit("opacity-change",f)),onFinish:t[2]||(t[2]=f=>e.$emit("opacity-change-finish"))},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsOpacity.title")),1)]),label:n(()=>[p("span",null,g(e.opacity)+"%",1)]),line:n(f=>[r(a,{"is-hovered":f.isHovered},null,8,["is-hovered"])]),stick:n(f=>[r(u,{"is-hovered":f.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])])])}const df=$(sf,[["render",lf]]),uf=A({name:"app-console-settings-audio-volume",components:{AppSwitch:ro},props:{volume:{type:Number,required:!0},volumeFadeInTime:{type:Number,required:!0},volumeFadeOutTime:{type:Number,required:!0},trackElementSelectionViewModel:{type:Object,required:!0},defaultVolume:{type:Number,required:!0},defaultVolumeFadeInTime:{type:Number,required:!0},defaultVolumeFadeOutTime:{type:Number,required:!0},isFadeSettingsVisible:{type:Boolean,required:!0},isNoiseReduced:{type:Boolean,required:!0},isNoiseReductionReady:{type:Boolean,required:!0},isNoiseReductionSupported:{type:Boolean,required:!0}},emits:{"audio-volume-change-start":null,"audio-volume-change":e=>!0,"audio-volume-change-finish":null,"audio-volume-fade-in-time-change-start":null,"audio-volume-fade-in-time-change":e=>!0,"audio-volume-fade-in-time-change-finish":null,"audio-volume-fade-out-time-change-start":null,"audio-volume-fade-out-time-change":e=>!0,"audio-volume-fade-out-time-change-finish":null,"audio-noise-reduced-change":null},computed:{fadeMaxDuration(){const e=this.trackElementSelectionViewModel.getSelectedTrackElements().map(t=>t.timelineOptions.length);return Zi(Math.min(...e))},isVolumeValuesMixed(){return this.isValuesMixed("volume")},isVolumeFadeInValuesMixed(){return this.isValuesMixed("volumeFadeInTime")},isVolumeFadeOutValuesMixed(){return this.isValuesMixed("volumeFadeOutTime")}},methods:{isValuesMixed(e){return Ee(this.trackElementSelectionViewModel.getSelectedTrackElements().map(t=>{if(Bn(t))return t.audioOptions[e]}).filter(t=>t!==void 0)).length>1}}}),pf={class:"app-console-settings-audio-volume"},cf={class:"app-console-settings-audio-volume__volume"},mf={key:0},hf={key:1},gf={key:0,class:"app-console-settings-audio-volume__fade-in"},vf={key:0},ff={key:1},bf={key:1,class:"app-console-settings-audio-volume__fade-out"},yf={key:0},Ef={key:1},Sf={class:"app-console-settings-audio-volume__noise-reduction"},kf={key:2,class:"app-console-settings-audio-volume__noise-reduction-not-supported"};function Cf(e,t,i,o,s,l){const a=We,u=Ge,m=Xe,f=D("AppSwitch");return d(),h("div",pf,[p("div",cf,[r(m,{min:0,max:100,value:e.isVolumeValuesMixed?e.defaultVolume:e.volume,"is-label-grayed-out":e.isVolumeValuesMixed,onStart:t[0]||(t[0]=b=>e.$emit("audio-volume-change-start")),onChange:t[1]||(t[1]=b=>e.$emit("audio-volume-change",b)),onFinish:t[2]||(t[2]=b=>e.$emit("audio-volume-change-finish"))},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsAudioVolume.volume")),1)]),label:n(()=>[e.isVolumeValuesMixed?(d(),h("span",mf,g(e.$t("mixed")),1)):(d(),h("span",hf,g(e.volume)+"%",1))]),line:n(b=>[r(a,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),stick:n(b=>[r(u,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),_:1},8,["value","is-label-grayed-out"])]),e.isFadeSettingsVisible?(d(),h("div",gf,[r(m,{min:0,max:e.fadeMaxDuration,step:.1,value:e.isVolumeFadeInValuesMixed?e.defaultVolumeFadeInTime:e.volumeFadeInTime,"is-label-grayed-out":e.isVolumeFadeInValuesMixed,onStart:t[3]||(t[3]=b=>e.$emit("audio-volume-fade-in-time-change-start")),onChange:t[4]||(t[4]=b=>e.$emit("audio-volume-fade-in-time-change",b)),onFinish:t[5]||(t[5]=b=>e.$emit("audio-volume-fade-in-time-change-finish"))},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsAudioVolume.fadeIn")),1)]),label:n(()=>[e.isVolumeFadeInValuesMixed?(d(),h("span",vf,g(e.$t("mixed")),1)):(d(),h("span",ff,g((e.volumeFadeInTime/1e3).toFixed(1))+g(e.$t("appConsoleSettingsAudioVolume.secondsShort")),1))]),line:n(b=>[r(a,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),stick:n(b=>[r(u,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),_:1},8,["max","value","is-label-grayed-out"])])):E("",!0),e.isFadeSettingsVisible?(d(),h("div",bf,[r(m,{min:0,max:e.fadeMaxDuration,step:.1,value:e.isVolumeFadeOutValuesMixed?e.defaultVolumeFadeOutTime:e.volumeFadeOutTime,"is-label-grayed-out":e.isVolumeFadeOutValuesMixed,onStart:t[6]||(t[6]=b=>e.$emit("audio-volume-fade-out-time-change-start")),onChange:t[7]||(t[7]=b=>e.$emit("audio-volume-fade-out-time-change",b)),onFinish:t[8]||(t[8]=b=>e.$emit("audio-volume-fade-out-time-change-finish"))},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsAudioVolume.fadeOut")),1)]),label:n(()=>[e.isVolumeFadeOutValuesMixed?(d(),h("span",yf,g(e.$t("mixed")),1)):(d(),h("span",Ef,g((e.volumeFadeOutTime/1e3).toFixed(1))+g(e.$t("appConsoleSettingsAudioVolume.secondsShort")),1))]),line:n(b=>[r(a,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),stick:n(b=>[r(u,{"is-hovered":b.isHovered},null,8,["is-hovered"])]),_:1},8,["max","value","is-label-grayed-out"])])):E("",!0),p("div",Sf,[r(f,{label:e.$t("appConsoleSettingsAudioVolume.noiseReduction"),"is-active":e.isNoiseReduced,"is-processing":e.isNoiseReductionSupported&&!e.isNoiseReductionReady,onChange:t[9]||(t[9]=b=>e.$emit("audio-noise-reduced-change",b))},null,8,["label","is-active","is-processing"])]),e.isNoiseReduced&&!e.isNoiseReductionSupported?(d(),h("div",kf,[y(g(e.$t("appConsoleSettingsAudioVolume.noiseReductionNotSupported1"))+" ",1),t[10]||(t[10]=p("br",null,null,-1)),y(" "+g(e.$t("appConsoleSettingsAudioVolume.noiseReductionNotSupported2")),1)])):E("",!0)])}const Tf=$(uf,[["render",Cf]]),$f=A({name:"app-console-settings-shape-background",props:{colorPresets:{type:Array,required:!0},backgroundColor:{type:Object,default:void 0},appLayout:{type:String,required:!0},defaultSolidColor:{type:Object,required:!0},defaultMultiEditColor:{type:Object,required:!0},defaultGradientColor:{type:Object,required:!0},trackElementSelectionViewModel:{type:Object,required:!0}},emits:["background-color-change-start","background-color-change","background-color-change-finish","set-custom-color-pane"],data(){return{isColorPickerDropdownVisible:!1}},computed:{selectedTextElements(){return this.trackElementSelectionViewModel.getSelectedTrackElements().filter(e=>Se(e))},isbBackgroundColorValuesMixed(){return Ee(this.selectedTextElements.map(e=>e.shapeOptions.backgroundFill)).length>1},isMultiEdit(){return this.trackElementSelectionViewModel.hasSelectedMany()}},methods:{showColorPicker(){this.isColorPickerDropdownVisible=!0},hideColorPicker(){this.isColorPickerDropdownVisible=!1}}});function wf(e,t,i,o,s,l){const a=yo;return d(),S(a,{color:e.isbBackgroundColorValuesMixed?void 0:e.backgroundColor,"color-presets":e.colorPresets,"is-alpha-enabled":!0,"is-dropdown-visible":e.isColorPickerDropdownVisible,"app-layout":e.appLayout,"default-solid-color":e.isMultiEdit?e.defaultMultiEditColor:e.defaultSolidColor,"default-gradient-color":e.defaultGradientColor,"custom-color-pane":"shape-background-color",onColorChangeStart:t[0]||(t[0]=u=>e.$emit("background-color-change-start")),onColorChange:t[1]||(t[1]=u=>e.$emit("background-color-change",u)),onColorChangeFinish:t[2]||(t[2]=u=>e.$emit("background-color-change-finish")),onShowColorPicker:t[3]||(t[3]=u=>{e.showColorPicker()}),onHideColorPicker:t[4]||(t[4]=u=>{e.hideColorPicker()}),onSetCustomColorPane:t[5]||(t[5]=u=>{e.$emit("set-custom-color-pane",u)})},null,8,["color","color-presets","is-dropdown-visible","app-layout","default-solid-color","default-gradient-color"])}const Af=$($f,[["render",wf]]),mi=100,Mf=A({name:"app-console-stock-search",components:{AppSvgSymbol:K},props:{placeholder:{type:String,default:"Search"},value:{type:String,default:""},appLayout:{type:String,default:"desktop"},variant:{type:String,default:"stocks",validator:e=>["stocks","filters"].includes(e)},isDisabled:{type:Boolean,default:!1}},emits:["input","submit"],data(){return{isFocused:!1,maxLength:mi}},methods:{input(e){this.$emit("input",this.truncateString(e)),this.fixedEncodeURIComponent(e).length<=mi?this.maxLength=mi:this.maxLength=0},submit(){this.$emit("submit"),this.$refs.input.blur()},fixedEncodeURIComponent(e){return encodeURIComponent(e).replace(/%20/g,"+").replace(/[!'()*]/g,t=>"%"+t.charCodeAt(0).toString(16))},truncateString(e){let t="";for(let i=0;i<e.length&&this.fixedEncodeURIComponent(t+e[i]).length<=mi;i++)t+=e[i];return t}}}),Rf={class:"app-console-stock-search__input-wrapper"},Pf=["maxlength","value","placeholder","disabled"],If={type:"submit",class:"app-console-stock-search__button-submit"},Lf={key:0,class:"app-console-stock-search__buttons"};function Of(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("form",{class:F(["app-console-stock-search",[`app-console-stock-search--layout-${e.appLayout}`,`app-console-stock-search--variant-${e.variant}`,{"app-console-stock-search--focused":e.isFocused,"app-console-stock-search--disabled":e.isDisabled}]]),onSubmit:t[4]||(t[4]=_((...u)=>e.submit&&e.submit(...u),["prevent"]))},[p("div",Rf,[p("input",{ref:"input",class:"app-console-stock-search__input",type:"search",enterkeyhint:"search",maxlength:e.maxLength,value:e.value,placeholder:e.placeholder,disabled:e.isDisabled,onInput:t[0]||(t[0]=u=>e.input(u.target.value)),onFocus:t[1]||(t[1]=u=>e.isFocused=!0),onBlur:t[2]||(t[2]=u=>e.isFocused=!1)},null,40,Pf),p("button",If,[r(a,{symbol:"search","is-block":"",width:20,height:20})])]),ae(p("button",{type:"reset",class:"app-console-stock-search__button-reset",onClick:t[3]||(t[3]=u=>{e.input(""),e.submit()})},[r(a,{symbol:"search-clear","is-block":"",width:18,height:18})],512),[[pe,e.value.length>0]]),e.$slots.buttons!==void 0?(d(),h("div",Lf,[w(e.$slots,"buttons")])):E("",!0)],34)}const At=$(Mf,[["render",Of]]),Ff=A({name:"app-console-stock-categories",props:{categories:{type:Array,default:()=>[]},appLayout:{type:String,default:"desktop"}},emits:["select"],data(){return{isContentReady:this.categories.length>0,selectedElementEventEmitter:new ue}},watch:{categories(){this.isContentReady=!0}},mounted(){this.selectedElementEventEmitter.on("select",this.selectCategory)},methods:{selectCategory(e){this.$emit("select",e.data)}}}),Df={class:"app-console-stock-categories__list"},Vf=["onClick"];function Nf(e,t,i,o,s,l){const a=go;return d(),h("div",{class:F(["app-console-stock-categories",[`app-console-stock-categories--variant-${e.appLayout}`]])},[r(a,{variant:"stocks","selected-element-event-emitter":e.selectedElementEventEmitter,"is-content-ready":e.isContentReady},{default:n(({elementClicked:u})=>[p("div",Df,[(d(!0),h(N,null,q(e.categories,m=>(d(),h("div",{key:m.id,class:"app-console-stock-categories__item",onClick:f=>u(f,m.searchQuery)},[e.$te(`appConsoleStockCategories.categories.${m.label}`)?(d(),h(N,{key:0},[y(g(e.$t(`appConsoleStockCategories.categories.${m.label}`)),1)],64)):(d(),h(N,{key:1},[y(g(m.label),1)],64))],8,Vf))),128))])]),_:1},8,["selected-element-event-emitter","is-content-ready"])],2)}const Wt=$(Ff,[["render",Nf]]),Bf=A({name:"app-stock-button-full-screen",components:{AppSvgSymbol:K}});function jf(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("button",J({class:"app-stock-button-full-screen"},e.$attrs),[r(a,{class:"app-stock-button-full-screen__icon",symbol:"fullscreen-stock","is-block":"",width:12,height:12})],16)}const ls=$(Bf,[["render",jf]]),zf=300,Hf=A({name:"app-stock-video-grid-item",components:{AppSvgSymbol:K},props:{item:{type:Object,required:!0},isDragPreview:{type:Boolean,default:!1},isDragging:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1},getScrollableParentCallback:{type:Function,default:void 0}},emits:["full-screen","drag-disable","drag-enable","select"],data(){return{playPromise:void 0,playTimerId:void 0,isPlaying:!1,isTouchStartBefore:!1,isPosterLoaded:!1,posterPreloadImage:void 0,isVideoLoaded:!1,videoCurrentTime:0,isSpinnerVisible:!1,showSpinnerTimeoutId:void 0,unsubscribeIntersectionObserver:void 0}},computed:{formattedDuration(){return Ue(this.item.duration*1e3)},isSkeletonVisible(){return(this.item.assetPreview.source===void 0||!this.isPosterLoaded)&&!this.isDragPreview&&!this.isDragging},sourceUrl(){return this.item.assetPreview.source===void 0?"":this.item.assetPreview.source.sourceUrl}},watch:{item:{deep:!0,handler(){this.$nextTick(this.waitPosterLoad)}},isDragging(e){e&&this.pause()}},mounted(){this.waitPosterLoad(),this.isMobile||(this.disableDrag(),this.createIntersectionObserver())},beforeUnmount(){window.clearTimeout(this.playTimerId),this.posterPreloadImage!==void 0&&this.posterPreloadImage.removeEventListener("load",this.setPosterLoaded),this.stopSpinnerTimeout(),this.unsubscribeIntersectionObserver!==void 0&&this.unsubscribeIntersectionObserver(),this.unloadVideo()},methods:{play(){if(this.isTouchStartBefore){this.isTouchStartBefore=!1;return}if(this.isSkeletonVisible||this.isMobile)return;this.$refs.video!==void 0&&(this.playTimerId=window.setTimeout(()=>{this.seekAndPlay()},zf))},pause(){if(this.isSkeletonVisible)return;const e=this.$refs.video;e!==void 0&&(this.playPromise!==void 0?this.playPromise.then(()=>{e.pause(),this.videoCurrentTime=e.currentTime,this.playPromise=void 0,this.isPlaying=!1}):this.isPlaying=!1),window.clearTimeout(this.playTimerId),this.playTimerId=void 0,this.stopSpinnerTimeout()},setPosterLoaded(){this.enableDrag(),this.isPosterLoaded=!0},setVideoPreloaded(){this.isVideoLoaded=!0},waitPosterLoad(){this.item.assetPreview.source===void 0||this.isPosterLoaded||this.isDragPreview||this.isDragging||(this.posterPreloadImage=new Image,this.posterPreloadImage.crossOrigin="anonymous",this.posterPreloadImage.src=this.item.assetPreview.source.posterUrl,this.posterPreloadImage.complete?this.setPosterLoaded():this.posterPreloadImage.addEventListener("load",this.setPosterLoaded,{once:!0}))},preloadVideo(){if(this.item.assetPreview.source===void 0||this.isVideoLoaded||this.isDragPreview||this.isDragging||this.isMobile)return;const e=this.$refs.video;e!==void 0&&(e.src!==this.sourceUrl&&(e.src=this.sourceUrl),e.preload="auto",e.readyState>1?this.setVideoPreloaded():e.addEventListener("canplay",this.setVideoPreloaded,{once:!0}))},stopPreloadVideo(){if(this.isVideoLoaded||this.isMobile)return;const e=this.$refs.video;e!==void 0&&(e.currentTime===0||e.readyState<2)&&this.unloadVideo()},unloadVideo(){const e=this.$refs.video;if(e!==void 0){const t=()=>{e.src="",e.preload="none",e.load(),this.isVideoLoaded=!1,this.videoCurrentTime=0};this.playPromise!==void 0?this.playPromise.then(()=>{t()}):t()}},seekAndPlay(){const e=this.$refs.video;if(e===void 0)return;const t=()=>{this.playPromise=e.play()};e.currentTime!==this.videoCurrentTime?(e.currentTime=this.videoCurrentTime,this.startSpinnerTimeout(),e.addEventListener("seeked",t,{once:!0})):t(),this.showSpinnerTimeoutId===void 0&&this.startSpinnerTimeout(),e.addEventListener("playing",()=>{this.isPlaying=!0,this.stopSpinnerTimeout()},{once:!0})},startSpinnerTimeout(){this.showSpinnerTimeoutId=window.setTimeout(()=>{this.isSpinnerVisible=!0},500)},stopSpinnerTimeout(){this.isSpinnerVisible=!1,window.clearTimeout(this.showSpinnerTimeoutId),this.showSpinnerTimeoutId=void 0},createIntersectionObserver(){if(this.getScrollableParentCallback===void 0)return;const e=this.getScrollableParentCallback();e!==void 0&&(this.unsubscribeIntersectionObserver=Un(this.$el,{root:e,rootMargin:"5000px 0px 5000px 0px",threshold:[0,1],onHide:()=>{this.unloadVideo()}}))},disableDrag(){this.$emit("drag-disable")},enableDrag(){this.$emit("drag-enable")}}}),_f=["width","height"],Uf={class:"app-stock-video-grid-item__duration"},qf={key:0,class:"app-stock-video-grid-item__spinner"};function Wf(e,t,i,o,s,l){const a=Ne,u=ls,m=D("AppSvgSymbol");return d(),h("div",{class:F(["app-stock-video-grid-item",{"app-stock-video-grid-item--playing":e.isPlaying,"app-stock-video-grid-item--drag-preview":e.isDragPreview,"app-stock-video-grid-item--dragging":e.isDragging,"app-stock-video-grid-item--mobile":e.isMobile,"app-stock-video-grid-item--video-loaded":e.isVideoLoaded}]),onTouchstart:t[2]||(t[2]=f=>e.isTouchStartBefore=!0),onMouseenter:t[3]||(t[3]=f=>{e.preloadVideo(),e.play()}),onMouseleave:t[4]||(t[4]=f=>{e.stopPreloadVideo(),e.pause()})},[e.isSkeletonVisible?(d(),S(a,{key:0,class:"app-stock-video-grid-item__skeleton"})):E("",!0),e.item.assetPreview.source!==void 0?(d(),h("div",{key:1,class:"app-stock-video-grid-item__media",onClick:t[1]||(t[1]=f=>e.$emit("select"))},[p("video",{ref:"video",width:e.item.assetPreview.width,height:e.item.assetPreview.height,preload:"none",crossorigin:"anonymous",playsinline:"",muted:"",loop:"",disableRemotePlayback:"",class:"app-stock-video-grid-item__video"},null,8,_f),p("div",{class:"app-stock-video-grid-item__poster",style:z({backgroundImage:`url(${e.item.assetPreview.source.posterUrl})`})},null,4),p("div",Uf,g(e.formattedDuration),1),r(u,{class:"app-stock-video-grid-item__button-full-screen",onClick:t[0]||(t[0]=_(f=>e.$emit("full-screen"),["stop"]))}),e.isSpinnerVisible?(d(),h("div",qf,[r(m,{class:"app-stock-video-grid-item__spinner-icon",symbol:"loading-spinner-stocks",width:14,height:14})])):E("",!0)])):E("",!0)],34)}const ds=$(Hf,[["render",Wf]]),Cn=6,Tn=118,Gf=182,Xf=[[118,118],[180,118],[118,118],[192,116],[192,116],[126,184],[126,184],[126,184],[192,120],[192,120],[88,130],[202,130],[88,130],[192,116],[192,116],[192,116],[192,116]],Yf=new Array(12).fill([192,107]),Kf=A({name:"app-stock-grid",props:{items:{type:Array,required:!0},appLayout:{type:String,default:"desktop"},isSkeletonVisible:{type:Boolean,default:!1},stockType:{type:String,default:H.IMAGE}},data(){return{gridContainerWidth:0,rowHeight:Tn,resizeObserver:void 0,mediaQueryIsTablet:void 0,skeletons:this.stockType===H.VIDEO?Yf:Xf}},computed:{itemsSizes(){return this.items.map(e=>({width:e.assetPreview.width,height:e.assetPreview.height}))},justifyGridSizes(){return Si(this.itemsSizes,{containerWidth:this.gridContainerWidth,gap:Cn,rowHeight:this.rowHeight})},justifyGridSkeletonSizes(){const e=this.skeletons.map(t=>({width:t[0],height:t[1]}));return Si(e,{containerWidth:this.gridContainerWidth,gap:Cn,rowHeight:this.rowHeight})}},mounted(){this.setGridContainerWidth(this.$refs["grid-container"].getBoundingClientRect().width),this.bindResizeEventListener(),this.mediaQueryIsTablet=Fn("(min-width: 576px) and (max-width: 991.98px)",this.updateRowHeight),this.updateRowHeight(this.mediaQueryIsTablet)},beforeUnmount(){this.unbindResizeEventListener(),this.cancelCallCallbackOnlyOncePerFrame(),this.mediaQueryIsTablet!==void 0&&(this.mediaQueryIsTablet.removeEventListener!==void 0?this.mediaQueryIsTablet.removeEventListener("change",this.updateRowHeight):this.mediaQueryIsTablet.removeListener(this.updateRowHeight))},methods:{...(()=>{const{callback:e,cancel:t}=zn();return{callCallbackOnlyOncePerFrame:e,cancelCallCallbackOnlyOncePerFrame:t}})(),setGridContainerWidth(e){this.gridContainerWidth=e},bindResizeEventListener(){const e=window.ResizeObserver??Ut;this.resizeObserver=new e(t=>{const i=t[0];typeof i=="object"&&this.callCallbackOnlyOncePerFrame(()=>{this.setGridContainerWidth(i.contentRect.width)})}),this.resizeObserver.observe(this.$refs["grid-container"])},unbindResizeEventListener(){this.resizeObserver!==void 0&&this.resizeObserver.disconnect()},updateRowHeight(e){this.rowHeight=e.matches?Gf:Tn}}}),Zf={ref:"grid-container"},Qf={class:"app-stock-grid__list"},Jf={class:"app-stock-grid__skeleton"};function xf(e,t,i,o,s,l){return d(),h("div",{class:F(["app-stock-grid",[`app-stock-grid--variant-${e.appLayout}`]])},[p("div",Zf,[p("ul",Qf,[(d(!0),h(N,null,q(e.items,(a,u)=>(d(),h("li",{key:a.id,class:F(["app-stock-grid__list-item",{"app-stock-grid__list-item--hidden":e.isSkeletonVisible}]),style:z({width:e.justifyGridSizes[u].width+"px",height:e.justifyGridSizes[u].height+"px"})},[w(e.$slots,"item",{item:a})],6))),128)),e.isSkeletonVisible?(d(!0),h(N,{key:0},q(e.justifyGridSkeletonSizes,(a,u)=>(d(),h("div",{key:u,class:"app-stock-grid__list-item",style:z({width:a.width+"px",height:a.height+"px"})},[p("div",Jf,[w(e.$slots,"skeleton-item")])],4))),128)):E("",!0)])],512)],2)}const Ai=$(Kf,[["render",xf]]),eb=A({name:"widget-video-stock",props:{state:{type:Object,required:!0},controller:{type:Object,required:!0}},emits:{select:null,"full-screen":null,"before-drag-stop":null},computed:{isSkeletonVisible(){return this.state.stockVideoFilter.currentPage===1&&this.state.isStockVideoLoading}},mounted(){this.state.stockVideoItems.length===0&&this.controller.loadStocks()},methods:{searchStockVideo(){this.controller.updateFilter({searchQueryActual:this.state.stockVideoFilter.searchQueryInput,currentPage:1}),this.controller.loadStocks()}}});function tb(e,t,i,o,s,l){const a=ct,u=mt,m=At,f=Wt,b=ds,T=ei,C=Ne,M=Ai,L=ht;return e.state.stockVideoLoadingError?(d(),S(u,{key:0},{title:n(()=>[y(g(e.$t("appErrorNetworkError.title")),1)]),subtitle:n(()=>[y(g(e.$t("appErrorNetworkError.subtitle")),1)]),buttons:n(()=>[r(a,{state:e.state.isStockVideoLoading?"loading":"default",onClick:t[0]||(t[0]=I=>e.controller.loadStocks())},{default:n(()=>[y(g(e.$t("appErrorNetworkError.reload")),1)]),_:1},8,["state"])]),_:1})):(d(),S(L,{key:"videos","is-infinite-scroll-enabled":!e.state.isStockVideoLastPage&&!e.isSkeletonVisible,"is-loading":e.state.isStockVideoLoading,"is-skeleton-visible":e.isSkeletonVisible,onScrollToEnd:t[4]||(t[4]=I=>e.controller.loadNextPage())},G({header:n(()=>[r(m,{value:e.state.stockVideoFilter.searchQueryInput,placeholder:e.$t("editor.stocks.searchVideos"),onInput:t[1]||(t[1]=I=>e.controller.updateStockVideoQuery(I)),onSubmit:e.searchStockVideo},null,8,["value","placeholder","onSubmit"])]),_:2},[e.state.stockVideoFilter.searchQueryActual===""?{name:"categories",fn:n(()=>[r(f,{categories:e.state.stockVideoCategories,onSelect:t[2]||(t[2]=I=>{e.controller.updateStockVideoQuery(I),e.searchStockVideo()})},null,8,["categories"])]),key:"0"}:void 0,e.state.isStockVideoLoading||e.state.stockVideoPresenterItems.length>0?{name:"content",fn:n(I=>[r(M,{items:e.state.stockVideoPresenterItems,"is-skeleton-visible":e.isSkeletonVisible,"stock-type":"video"},{item:n(P=>[(d(),S(T,{key:`stock-item-${P.item.id}`,"draggable-data":{stockItemId:P.item.id,stockItemProvider:P.item.provider,stockItemType:P.item.stockType,duration:~~P.item.duration*1e3,type:"stock-item"},"is-source-element-hiding-required":!1,onBeforeDragStop:t[3]||(t[3]=j=>e.$emit("before-drag-stop",j))},{default:n(j=>[r(b,{item:P.item,"is-dragging":j.isDragging,"get-scrollable-parent-callback":I.getScrollableParentCallback,onDragDisable:B=>j.disableDrag(),onDragEnable:B=>j.enableDrag(),onSelect:B=>e.$emit("select",P.item),onFullScreen:B=>e.$emit("full-screen",P.item)},null,8,["item","is-dragging","get-scrollable-parent-callback","onDragDisable","onDragEnable","onSelect","onFullScreen"])]),preview:n(()=>[r(b,{"is-drag-preview":"",item:P.item},null,8,["item"])]),_:2},1032,["draggable-data"]))]),"skeleton-item":n(()=>[r(C)]),_:2},1032,["items","is-skeleton-visible"])]),key:"1"}:{name:"empty",fn:n(()=>[y(g(e.$t("editor.stocks.empty")),1)]),key:"2"}]),1032,["is-infinite-scroll-enabled","is-loading","is-skeleton-visible"]))}const ib=$(eb,[["render",tb]]),ob=A({name:"app-stock-image-grid-item",props:{item:{type:Object,required:!0},isDragPreview:{type:Boolean,default:!1},isDragging:{type:Boolean,default:!1}},emits:{select:null,"full-screen":null,"drag-disable":null,"drag-enable":null},data(){return{isImageLoaded:!1}},computed:{isSkeletonVisible(){return(this.item.assetPreview.source===void 0||!this.isImageLoaded)&&!this.isDragPreview&&!this.isDragging}},watch:{item:{deep:!0,handler(){this.$nextTick(this.waitImageLoad)}}},mounted(){this.disableDrag(),this.waitImageLoad()},beforeUnmount(){this.$refs.image!==void 0&&this.$refs.image.removeEventListener("load",this.setImageLoaded)},methods:{setImageLoaded(){this.enableDrag(),this.isImageLoaded=!0},waitImageLoad(){if(this.item.assetPreview.source===void 0||this.isImageLoaded||this.isDragPreview||this.isDragging)return;const e=this.$refs.image;e!==void 0&&(e.complete?this.setImageLoaded():e.addEventListener("load",this.setImageLoaded,{once:!0}))},disableDrag(){this.$emit("drag-disable")},enableDrag(){this.$emit("drag-enable")}}}),nb=["src","width","height"];function sb(e,t,i,o,s,l){const a=Ne,u=ls;return d(),h("div",{class:F(["app-stock-image-grid-item",{"app-stock-image-grid-item--drag-preview":e.isDragPreview,"app-stock-image-grid-item--dragging":e.isDragging}])},[e.isSkeletonVisible?(d(),S(a,{key:0,class:"app-stock-image-grid-item__skeleton"})):E("",!0),e.item.assetPreview.source!==void 0?(d(),h("img",{key:1,ref:"image",alt:"",src:e.item.assetPreview.source.sourceUrl,width:e.item.assetPreview.width,height:e.item.assetPreview.height,class:"app-stock-image-grid-item__image",draggable:"false",crossorigin:"anonymous",onClick:t[0]||(t[0]=m=>e.$emit("select"))},null,8,nb)):E("",!0),r(u,{class:"app-stock-image-grid-item__button-full-screen",onClick:t[1]||(t[1]=m=>e.$emit("full-screen"))})],2)}const us=$(ob,[["render",sb]]),ab=A({name:"widget-image-stock",props:{state:{type:Object,required:!0},controller:{type:Object,required:!0}},emits:["before-drag-stop","select","full-screen"],computed:{isSkeletonVisible(){return this.state.stockImageFilter.currentPage===1&&this.state.isStockImageLoading}},mounted(){this.state.stockImageItems.length===0&&this.controller.loadStocks()},methods:{searchStockImage(){this.controller.updateFilter({searchQueryActual:this.state.stockImageFilter.searchQueryInput,currentPage:1}),this.controller.loadStocks()}}});function rb(e,t,i,o,s,l){const a=ct,u=mt,m=At,f=Wt,b=us,T=ei,C=Ne,M=Ai,L=ht;return e.state.stockImageLoadingError?(d(),S(u,{key:0},{title:n(()=>[y(g(e.$t("appErrorNetworkError.title")),1)]),subtitle:n(()=>[y(g(e.$t("appErrorNetworkError.subtitle")),1)]),buttons:n(()=>[r(a,{state:e.state.isStockImageLoading?"loading":"default",onClick:t[0]||(t[0]=I=>e.controller.loadStocks())},{default:n(()=>[y(g(e.$t("appErrorNetworkError.reload")),1)]),_:1},8,["state"])]),_:1})):(d(),S(L,{key:"images","is-infinite-scroll-enabled":!e.state.isStockImageLastPage&&!e.isSkeletonVisible,"is-loading":e.state.isStockImageLoading,"is-skeleton-visible":e.isSkeletonVisible,onScrollToEnd:t[4]||(t[4]=I=>e.controller.loadNextPage())},G({header:n(()=>[r(m,{value:e.state.stockImageFilter.searchQueryInput,placeholder:e.$t("editor.stocks.searchImages"),onInput:t[1]||(t[1]=I=>e.controller.updateStockImageQuery(I)),onSubmit:e.searchStockImage},null,8,["value","placeholder","onSubmit"])]),_:2},[e.state.stockImageFilter.searchQueryActual===""?{name:"categories",fn:n(()=>[r(f,{categories:e.state.stockImageCategories,onSelect:t[2]||(t[2]=I=>{e.controller.updateStockImageQuery(I),e.searchStockImage()})},null,8,["categories"])]),key:"0"}:void 0,e.state.isStockImageLoading||e.state.stockImagePresenterItems.length>0?{name:"content",fn:n(()=>[r(M,{items:e.state.stockImagePresenterItems,"is-skeleton-visible":e.isSkeletonVisible},{item:n(I=>[(d(),S(T,{key:`stock-item-${I.item.id}`,"draggable-data":{stockItemId:I.item.id,stockItemProvider:I.item.provider,stockItemType:I.item.stockType,duration:void 0,type:"stock-item"},"is-source-element-hiding-required":!1,onBeforeDragStop:t[3]||(t[3]=P=>e.$emit("before-drag-stop",P))},{default:n(P=>[r(b,{item:I.item,"is-dragging":P.isDragging,onDragDisable:j=>P.disableDrag(),onDragEnable:j=>P.enableDrag(),onSelect:j=>e.$emit("select",I.item),onFullScreen:j=>e.$emit("full-screen",I.item)},null,8,["item","is-dragging","onDragDisable","onDragEnable","onSelect","onFullScreen"])]),preview:n(()=>[r(b,{"is-drag-preview":"",item:I.item},null,8,["item"])]),_:2},1032,["draggable-data"]))]),"skeleton-item":n(()=>[r(C)]),_:1},8,["items","is-skeleton-visible"])]),key:"1"}:{name:"empty",fn:n(()=>[y(g(e.$t("editor.stocks.empty")),1)]),key:"2"}]),1032,["is-infinite-scroll-enabled","is-loading","is-skeleton-visible"]))}const lb=$(ab,[["render",rb]]),db=A({name:"media-recorder-icons",props:{icon:{type:String,required:!0}}}),ub={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pb={key:1,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},cb={key:2,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},mb={key:3,width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},hb={key:4,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gb={key:6,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vb={key:7,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fb={key:8,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},bb={key:9,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yb={key:10,width:"24",height:"24",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Eb={key:11,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Sb={key:12,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},kb={key:13,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Cb={key:14,width:"48",height:"48",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Tb={key:15,width:"35",height:"35",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$b={key:16,width:"35",height:"35",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wb={key:17,width:"35",height:"35",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ab={key:18,width:"35",height:"35",viewBox:"0 0 35 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Mb={key:19,width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Rb={key:20,width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Pb={key:21,width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ib={key:22,width:"29",height:"29",viewBox:"0 0 29 29",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Lb={key:23,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ob(e,t,i,o,s,l){return e.icon==="cross-mobile"?(d(),h("svg",ub,t[0]||(t[0]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.707 5.293a1 1 0 0 0-1.414 1.414L10.586 12l-5.293 5.293a1 1 0 1 0 1.414 1.414L12 13.414l5.293 5.293a1 1 0 0 0 1.414-1.414L13.414 12l5.293-5.293a1 1 0 0 0-1.414-1.414L12 10.586 6.707 5.293Z"},null,-1)]))):e.icon==="cross"?(d(),h("svg",pb,t[1]||(t[1]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.94 7 .67 1.73 1.73.67 7 5.94 12.27.67l1.06 1.06L8.06 7l5.27 5.27-1.06 1.06L7 8.06l-5.27 5.27-1.06-1.06L5.94 7Z"},null,-1)]))):e.icon==="settings"?(d(),h("svg",cb,t[2]||(t[2]=[p("path",{d:"M19.4 12c-.1-.3-.3-.5-.5-.6l-1.4-1v-.9l1.4-1h.1c.2-.2.4-.5.4-.7.1-.3 0-.6-.1-.9l-1.9-3.1c-.2-.3-.4-.5-.7-.6-.3-.1-.6-.1-1 0l-1.6.7c-.3-.2-.6-.3-.8-.5l-.2-1.7c0-.3-.2-.7-.4-.9-.2-.2-.6-.4-.9-.4H8.2c-.3 0-.7.1-.9.4-.3.3-.4.6-.4.9l-.2 1.8c-.3.1-.6.3-.8.4l-1.7-.7c-.3-.1-.6-.1-.9 0-.3.1-.6.3-.8.6L.6 6.9c-.1.3-.2.7 0 1.1.1.3.3.5.5.6l1.4 1v.9l-1.4 1H1c-.2.2-.4.5-.4.7-.1.3 0 .6.1.9l1.9 3.1c.2.3.4.5.7.6.3.1.6.1 1 0l1.6-.7c.3.2.6.3.8.5l.2 1.7c0 .3.2.7.4.9.2.2.6.4.9.4h3.6c.3 0 .7-.1.9-.4.3-.2.4-.6.4-.9l.2-1.7c.3-.1.6-.3.8-.5l1.7.7c.3.1.6.1.9 0 .3-.1.6-.3.7-.6l1.8-3 .1-.1c.2-.3.3-.7.1-1.1zm-3.8-2.6c0 .2.1.4 0 .6 0 .2 0 .4-.1.6l-.2.6 2 1.4-1.4 2.3-2.2-1-.5.4c-.4.3-.9.6-1.4.8l-.5.2-.2 2.4H8.7l-.3-2.4-.5-.2c-.5-.2-1-.5-1.4-.8l-.5-.4-2.2 1-1.4-2.2 2.1-1.5-.2-.6c0-.2-.1-.4 0-.6 0-.2 0-.4.1-.6l.2-.6-2-1.4L4 5.2l2.2 1 .5-.4c.3-.4.7-.7 1.2-.9l.5-.2.2-2.4h2.7l.3 2.4.5.2c.5.2 1 .5 1.4.8l.5.4 2.2-1 1.4 2.3-2.1 1.5.1.5zM10 7c-1.7 0-3 1.3-3 3s1.3 3 3 3 3-1.3 3-3-1.3-3-3-3zm0 4c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z"},null,-1)]))):e.icon==="start-recording"?(d(),h("svg",mb,t[3]||(t[3]=[p("circle",{cx:"32",cy:"32",r:"26",fill:"#C82D3F"},null,-1),p("rect",{x:"1",y:"1",width:"62",height:"62",rx:"31",stroke:"white",fill:"none","stroke-opacity":"0.2","stroke-width":"2"},null,-1)]))):e.icon==="checked"?(d(),h("svg",hb,t[4]||(t[4]=[p("path",{d:"M4 7L7 10L13 4",stroke:"white","stroke-opacity":"0.6","stroke-width":"1.5","stroke-linecap":"round",fill:"none"},null,-1)]))):e.icon==="stop-recording"?(d(),h("svg",J({key:5},e.$attrs,{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),t[5]||(t[5]=[p("circle",{cx:"32",cy:"32",r:"26",fill:"white"},null,-1),p("rect",{x:"22",y:"22",width:"20",height:"20",rx:"5",fill:"#C82D3F"},null,-1),p("rect",{x:"1",y:"1",width:"62",height:"62",rx:"31",stroke:"white","stroke-opacity":"0.2","stroke-width":"2",fill:"none"},null,-1)]),16)):e.icon==="pause"?(d(),h("svg",gb,t[6]||(t[6]=[p("path",{d:"M3 4.2a2 2 0 1 1 4 0v11.6a2 2 0 1 1-4 0V4.2Zm10 0a2 2 0 1 1 4 0v11.6a2 2 0 1 1-4 0V4.2Z"},null,-1)]))):e.icon==="reset"?(d(),h("svg",vb,t[7]||(t[7]=[p("path",{d:"M10.3 3.2c.2-.7-.3-1.5-1-1.4-1.9.2-3.7 1-5.1 2.4-3 2.9-3.2 7.5-.8 10.8h-.8c-.6 0-1.1.4-1.1 1 0 .3.1.6.3.8.2.2.5.3.8.3h3.8c.6 0 1.1-.5 1.1-1.1v-3.8c0-.6-.5-1.1-1.1-1.1-.6 0-1.1.5-1.1 1.1v1.6a5.98 5.98 0 0 1 3.9-9.7c.5-.1 1-.4 1.1-.9zm-3.9 8.1zm11-6.3c.6 0 1.1-.5 1.1-1.1 0-.3-.1-.6-.3-.8-.2-.1-.5-.2-.8-.2v.2-.2h-3.8c-.6 0-1.1.5-1.1 1.1v3.8c0 .6.5 1.1 1.1 1.1.6 0 1.1-.5 1.1-1.1V6.2c1.9 2.4 1.8 5.9-.4 8.1-1 1-2.2 1.5-3.5 1.7-.4.1-.9.3-1 .8-.3.7.2 1.5 1 1.5A8.38 8.38 0 0 0 16.6 5h.8z"},null,-1)]))):e.icon==="resume"?(d(),h("svg",fb,t[8]||(t[8]=[p("path",{d:"M5.28 1.64a.83.83 0 0 0-1.28.7v15.31a.83.83 0 0 0 1.28.7l12.1-7.65a.83.83 0 0 0 0-1.4L5.29 1.64Z"},null,-1)]))):e.icon==="microphone-play"?(d(),h("svg",bb,t[9]||(t[9]=[p("path",{d:"M5.54551 2.00595C4.88029 1.57297 4 2.05034 4 2.84406V21.1559C4 21.9497 4.88029 22.427 5.54551 21.994L19.6124 12.8381C20.2184 12.4437 20.2184 11.5563 19.6124 11.1619L5.54551 2.00595Z",fill:"white"},null,-1)]))):e.icon==="microphone-pause"?(d(),h("svg",yb,t[10]||(t[10]=[p("path",{d:"M3 4.19922C3 3.09465 3.89543 2.19922 5 2.19922C6.10457 2.19922 7 3.09465 7 4.19922V15.7992C7 16.9038 6.10457 17.7992 5 17.7992C3.89543 17.7992 3 16.9038 3 15.7992V4.19922Z",fill:"white","fill-opacity":"0.6"},null,-1),p("path",{d:"M13 4.19922C13 3.09465 13.8954 2.19922 15 2.19922C16.1046 2.19922 17 3.09465 17 4.19922V15.7992C17 16.9038 16.1046 17.7992 15 17.7992C13.8954 17.7992 13 16.9038 13 15.7992V4.19922Z",fill:"white","fill-opacity":"0.6"},null,-1)]))):e.icon==="results-add-to-timeline"?(d(),h("svg",Eb,t[11]||(t[11]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 3C11 2.44772 10.5523 2 10 2C9.44772 2 9 2.44772 9 3V9H3C2.44772 9 2 9.44772 2 10C2 10.5523 2.44772 11 3 11H9V17C9 17.5523 9.44771 18 10 18C10.5523 18 11 17.5523 11 17V11H17C17.5523 11 18 10.5523 18 10C18 9.44772 17.5523 9 17 9H11V3Z",fill:"white"},null,-1)]))):e.icon==="results-add-to-uploads"?(d(),h("svg",Sb,t[12]||(t[12]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.5167 6.09163C13.795 6.60276 14.282 6.96734 14.8509 7.09026C16.6517 7.47941 18 9.08457 18 11C18 12.8675 16.7202 14.4361 14.9899 14.8766C14.4547 15.0128 14 15.4477 14 16C14 16.5523 14.4511 17.0087 14.9958 16.9177C17.8356 16.4434 20 13.9745 20 11C20 8.1232 17.9754 5.71928 15.2733 5.13538C14.2565 3.26758 12.2763 2 10 2C7.72372 2 5.7435 3.26758 4.7267 5.13538C2.02462 5.71928 0 8.1232 0 11C0 13.9745 2.16441 16.4434 5.00419 16.9177C5.54893 17.0087 6 16.5523 6 16C6 15.4477 5.54533 15.0128 5.01012 14.8766C3.27976 14.4361 2 12.8675 2 11C2 9.08457 3.3483 7.47941 5.14914 7.09026C5.71796 6.96734 6.20504 6.60276 6.48329 6.09163C7.16395 4.8413 8.48519 4 10 4C11.5148 4 12.8361 4.8413 13.5167 6.09163ZM11 12.4142L11.5929 13.0071C11.9834 13.3976 12.6166 13.3976 13.0071 13.0071C13.3976 12.6166 13.3976 11.9834 13.0071 11.5929L10.7071 9.29289C10.5196 9.10536 10.2652 9 10 9C9.73478 9 9.48043 9.10536 9.29289 9.29289L6.99289 11.5929C6.60237 11.9834 6.60237 12.6166 6.99289 13.0071C7.38342 13.3976 8.01658 13.3976 8.40711 13.0071L9 12.4142V18C9 18.5523 9.44771 19 10 19C10.5523 19 11 18.5523 11 18V12.4142Z",fill:"white"},null,-1)]))):e.icon==="results-video-play"?(d(),h("svg",kb,t[13]||(t[13]=[p("path",{d:"M12.6641 3.1094C10.6704 1.78029 8 3.20947 8 5.60555V42.3944C8 44.7905 10.6704 46.2197 12.6641 44.8906L40.2558 26.4962C42.037 25.3087 42.037 22.6913 40.2558 21.5038L12.6641 3.1094Z",fill:"white"},null,-1)]))):e.icon==="results-video-pause"?(d(),h("svg",Cb,t[14]||(t[14]=[p("path",{d:"M3 4.19922C3 3.09465 3.89543 2.19922 5 2.19922C6.10457 2.19922 7 3.09465 7 4.19922V15.7992C7 16.9038 6.10457 17.7992 5 17.7992C3.89543 17.7992 3 16.9038 3 15.7992V4.19922Z",fill:"white","fill-opacity":"0.6"},null,-1),p("path",{d:"M13 4.19922C13 3.09465 13.8954 2.19922 15 2.19922C16.1046 2.19922 17 3.09465 17 4.19922V15.7992C17 16.9038 16.1046 17.7992 15 17.7992C13.8954 17.7992 13 16.9038 13 15.7992V4.19922Z",fill:"white","fill-opacity":"0.6"},null,-1)]))):e.icon==="mode-selector-audio"?(d(),h("svg",Tb,t[15]||(t[15]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.5 4.5C11.0523 4.5 11.5 4.94772 11.5 5.5L11.5 29.5C11.5 30.0523 11.0523 30.5 10.5 30.5C9.94772 30.5 9.5 30.0523 9.5 29.5L9.5 5.5C9.5 4.94772 9.94772 4.5 10.5 4.5ZM3.5 9.5C4.05229 9.5 4.5 9.94772 4.5 10.5L4.5 24.5C4.5 25.0523 4.05228 25.5 3.5 25.5C2.94772 25.5 2.5 25.0523 2.5 24.5V10.5C2.5 9.94772 2.94772 9.5 3.5 9.5ZM18.5 11.5C18.5 10.9477 18.0523 10.5 17.5 10.5C16.9477 10.5 16.5 10.9477 16.5 11.5L16.5 23.5C16.5 24.0523 16.9477 24.5 17.5 24.5C18.0523 24.5 18.5 24.0523 18.5 23.5V11.5ZM24.5 8.5C25.0523 8.5 25.5 8.94772 25.5 9.5V25.4991C25.5 26.0514 25.0523 26.4991 24.5 26.4991C23.9477 26.4991 23.5 26.0514 23.5 25.4991V9.5C23.5 8.94772 23.9477 8.5 24.5 8.5ZM32.5 14.5C32.5 13.9477 32.0523 13.5 31.5 13.5C30.9477 13.5 30.5 13.9477 30.5 14.5V20.5C30.5 21.0523 30.9477 21.5 31.5 21.5C32.0523 21.5 32.5 21.0523 32.5 20.5V14.5Z"},null,-1)]))):e.icon==="mode-selector-camera"?(d(),h("svg",$b,t[16]||(t[16]=[p("g",{"clip-path":"url(#clip0_19702_72308)"},[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.5 7.5C3.73858 7.5 1.5 9.73858 1.5 12.5V24.5C1.5 27.2614 3.73858 29.5 6.5 29.5H22.5C25.2614 29.5 27.5 27.2614 27.5 24.5V23.8317L31.4185 26.3507C32.7495 27.2063 34.5 26.2507 34.5 24.6683V12.3317C34.5 10.7493 32.7495 9.79365 31.4185 10.6493L27.5 13.1683V12.5C27.5 9.73858 25.2614 7.5 22.5 7.5H6.5ZM27.5 15.546V21.454L32.5 24.6683V12.3317L27.5 15.546ZM3.5 12.5C3.5 10.8431 4.84315 9.5 6.5 9.5H22.5C24.1569 9.5 25.5 10.8431 25.5 12.5V24.5C25.5 26.1569 24.1569 27.5 22.5 27.5H6.5C4.84315 27.5 3.5 26.1569 3.5 24.5V12.5Z"})],-1),p("defs",null,[p("clipPath",{id:"clip0_19702_72308"},[p("rect",{width:"34",height:"34",fill:"white",transform:"translate(0.5 0.5)"})])],-1)]))):e.icon==="mode-selector-screen"?(d(),h("svg",wb,t[17]||(t[17]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.5 7.5H27.5C29.1569 7.5 30.5 8.84315 30.5 10.5V24.5C30.5 26.1569 29.1569 27.5 27.5 27.5H7.5C5.84315 27.5 4.5 26.1569 4.5 24.5V10.5C4.5 8.84315 5.84315 7.5 7.5 7.5ZM2.5 10.5C2.5 7.73858 4.73858 5.5 7.5 5.5H27.5C30.2614 5.5 32.5 7.73858 32.5 10.5V24.5C32.5 27.2614 30.2614 29.5 27.5 29.5H7.5C4.73858 29.5 2.5 27.2614 2.5 24.5V10.5ZM12.5 21.5C11.9477 21.5 11.5 21.9477 11.5 22.5C11.5 23.0523 11.9477 23.5 12.5 23.5H22.5C23.0523 23.5 23.5 23.0523 23.5 22.5C23.5 21.9477 23.0523 21.5 22.5 21.5H12.5Z"},null,-1)]))):e.icon==="mode-selector-screen-and-camera"?(d(),h("svg",Ab,t[18]||(t[18]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.5 7.5H27.5C29.1569 7.5 30.5 8.84315 30.5 10.5V24.5C30.5 26.1569 29.1569 27.5 27.5 27.5H7.5C5.84315 27.5 4.5 26.1569 4.5 24.5V10.5C4.5 8.84315 5.84315 7.5 7.5 7.5ZM2.5 10.5C2.5 7.73858 4.73858 5.5 7.5 5.5H27.5C30.2614 5.5 32.5 7.73858 32.5 10.5V24.5C32.5 27.2614 30.2614 29.5 27.5 29.5H7.5C4.73858 29.5 2.5 27.2614 2.5 24.5V10.5ZM9.5 17.5C8.94772 17.5 8.5 17.9477 8.5 18.5V22.5C8.5 23.0523 8.94772 23.5 9.5 23.5H16.5C17.0523 23.5 17.5 23.0523 17.5 22.5V18.5C17.5 17.9477 17.0523 17.5 16.5 17.5H9.5Z"},null,-1)]))):e.icon==="mode-selector-audio--mobile"?(d(),h("svg",Mb,t[19]||(t[19]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 23V5a1 1 0 0 1 2 0v18a1 1 0 1 1-2 0ZM4 8c.6 0 1 .4 1 1v10a1 1 0 1 1-2 0V9c0-.6.4-1 1-1Zm9 2v8a1 1 0 1 0 2 0v-8a1 1 0 1 0-2 0Zm6-3c.6 0 1 .4 1 1v12a1 1 0 1 1-2 0V8c0-.6.4-1 1-1Zm6 5a1 1 0 1 0-2 0v4a1 1 0 1 0 2 0v-4Z"},null,-1)]))):e.icon==="mode-selector-camera--mobile"?(d(),h("svg",Rb,t[20]||(t[20]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.75 5.50098C3.98858 5.50098 1.75 7.73955 1.75 10.501V18.501C1.75 21.2624 3.98858 23.501 6.75 23.501H16.75C19.2312 23.501 21.2903 21.6937 21.6826 19.3237L24.0526 20.9037C25.6331 21.9574 27.7501 20.8244 27.7501 18.9249V10.0754C27.7501 8.1759 25.6331 7.04294 24.0527 8.09657L21.6824 9.67673C21.2894 7.3075 19.2307 5.50098 16.75 5.50098H6.75ZM19.75 10.965L19.75 10.501C19.75 8.84412 18.4069 7.50098 16.75 7.50098H6.75C5.09315 7.50098 3.75 8.84412 3.75 10.501V18.501C3.75 20.1578 5.09315 21.501 6.75 21.501H16.75C18.4069 21.501 19.75 20.1578 19.75 18.501V11.5002L19.75 10.965ZM25.162 9.76067C25.4134 9.59311 25.7501 9.77329 25.7501 10.0754V18.9249C25.7501 19.227 25.4134 19.4072 25.162 19.2396L21.7501 16.965L21.75 12.0353L25.162 9.76067Z",fill:"#3DA3FF"},null,-1)]))):e.icon==="mode-selector-screen--mobile"?(d(),h("svg",Pb,t[21]||(t[21]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.25 6.5H21.25C22.9069 6.5 24.25 7.84315 24.25 9.5V18.5C24.25 20.1569 22.9069 21.5 21.25 21.5H7.25C5.59315 21.5 4.25 20.1569 4.25 18.5V9.5C4.25 7.84315 5.59315 6.5 7.25 6.5ZM2.25 9.5C2.25 6.73858 4.48858 4.5 7.25 4.5H21.25C24.0114 4.5 26.25 6.73858 26.25 9.5V18.5C26.25 21.2614 24.0114 23.5 21.25 23.5H7.25C4.48858 23.5 2.25 21.2614 2.25 18.5V9.5ZM10.25 16.5C9.69772 16.5 9.25 16.9477 9.25 17.5C9.25 18.0523 9.69772 18.5 10.25 18.5L18.25 18.5C18.8023 18.5 19.25 18.0523 19.25 17.5C19.25 16.9477 18.8023 16.5 18.25 16.5L10.25 16.5Z"},null,-1)]))):e.icon==="mode-selector-screen-and-camera--mobile"?(d(),h("svg",Ib,t[22]||(t[22]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.75 6.5H21.75C23.4069 6.5 24.75 7.84315 24.75 9.5V18.5C24.75 20.1569 23.4069 21.5 21.75 21.5H7.75C6.09315 21.5 4.75 20.1569 4.75 18.5V9.5C4.75 7.84315 6.09315 6.5 7.75 6.5ZM2.75 9.5C2.75 6.73858 4.98858 4.5 7.75 4.5H21.75C24.5114 4.5 26.75 6.73858 26.75 9.5V18.5C26.75 21.2614 24.5114 23.5 21.75 23.5H7.75C4.98858 23.5 2.75 21.2614 2.75 18.5V9.5ZM8.75 13.5C8.19772 13.5 7.75 13.9477 7.75 14.5V17.5C7.75 18.0523 8.19772 18.5 8.75 18.5H13.75C14.3023 18.5 14.75 18.0523 14.75 17.5V14.5C14.75 13.9477 14.3023 13.5 13.75 13.5H8.75Z"},null,-1)]))):e.icon==="title-input-edit"?(d(),h("svg",Lb,t[23]||(t[23]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.89459 3.57837C10.3087 3.16428 10.9801 3.16428 11.3942 3.57836L12.4295 4.61369C12.8436 5.02779 12.8436 5.69917 12.4295 6.11327L11.6164 6.92637L9.08151 4.39145L9.89459 3.57837ZM8.08146 5.39151L3.91545 9.55751C3.89013 9.58284 3.8731 9.61526 3.86663 9.65048L3.30596 12.7018L6.35745 12.1413C6.39267 12.1348 6.4251 12.1178 6.45042 12.0924L10.6164 7.92643L8.08146 5.39151ZM12.3942 2.5783C11.4278 1.61191 9.86094 1.61192 8.89454 2.57832L2.9154 8.55746C2.6873 8.78556 2.53393 9.07761 2.47563 9.39488L1.8686 12.6985C1.71203 13.5506 2.45704 14.2956 3.30916 14.1391L6.61295 13.5323C6.93026 13.474 7.22235 13.3206 7.45048 13.0925L13.4296 7.11332C14.396 6.1469 14.396 4.58003 13.4295 3.61363L12.3942 2.5783Z",fill:"white"},null,-1)]))):E("",!0)}const Ye=$(db,[["render",Ob]]),Fb=A({name:"widget-media-recorder-mode-selector",props:{isMobileView:{type:Boolean,required:!0},controller:{type:Object,required:!0},padding:{type:Number,default:0}},emits:["stop-play"],data(){return{isMicrophoneModeEnabled:!0,areScreenModesEnabled:!0,rows:[],availableButtons:[{id:"audio",text:this.$t("mediaRecorder.widgetModeSelector.audio"),icon:"mode-selector-audio",iconMobile:"mode-selector-audio--mobile",isDisabled:!1,classNames:{audio:!0}},{id:"camera",text:this.$t("mediaRecorder.widgetModeSelector.camera"),icon:"mode-selector-camera",iconMobile:"mode-selector-camera--mobile",isDisabled:!1,classNames:{camera:!0}},{id:"screen",text:this.$t("mediaRecorder.widgetModeSelector.screen"),icon:"mode-selector-screen",iconMobile:"mode-selector-screen--mobile",isDisabled:!1,classNames:{screen:!0}},{id:"screen-and-camera",text:this.$t("mediaRecorder.widgetModeSelector.screenAndCamera"),icon:"mode-selector-screen-and-camera",iconMobile:"mode-selector-screen-and-camera--mobile",isDisabled:!1,classNames:{"screen-and-camera":!0}}]}},watch:{isMobileView(){this.configureCameraAspectRatio()}},mounted(){this.configureCameraAspectRatio(),window.addEventListener("resize",this.configureCameraAspectRatio),this.areScreenModesEnabled=!so()&&!Oa(),this.generateRows()},beforeUnmount(){window.removeEventListener("resize",this.configureCameraAspectRatio)},methods:{configureCameraAspectRatio(){this.isMobileView?this.controller.deviceManager.cameraAspectRatio=window.innerWidth/(window.innerHeight-175):this.controller.deviceManager.cameraAspectRatio=900/500},async openCameraRecorder(){this.$emit("stop-play"),await this.controller.openCameraRecorder()},async openScreenRecorder(){this.$emit("stop-play"),await this.controller.openScreenRecorder(this.areScreenModesEnabled)},async openScreenAndCameraRecorder(){this.$emit("stop-play"),await this.controller.openScreenAndCameraRecorder(this.areScreenModesEnabled)},async openMicrophoneRecorder(){this.$emit("stop-play"),await this.controller.openMicrophoneRecorder()},generateRows(){const t=()=>{this.$emit("stop-play");const a=this.controller.stateFragment;a.setCurrentPhase(Ze.CRITICAL_ERROR_DISPLAYED),a.setCurrentError(yt.BROWSER_NOT_SUPPORTED)},i={audio:!this.isMicrophoneModeEnabled,camera:!1,screen:!this.areScreenModesEnabled,"screen-and-camera":!this.areScreenModesEnabled},o={audio:i.audio===!0?t:this.openMicrophoneRecorder,camera:this.openCameraRecorder,screen:i.screen===!0?t:this.openScreenRecorder,"screen-and-camera":i["screen-and-camera"]===!0?t:this.openScreenAndCameraRecorder};let s=this.availableButtons.map(a=>({...a}));for(const a of s)a.isDisabled=i[a.id];s=s.filter(a=>!a.isDisabled).concat(s.filter(a=>a.isDisabled));const l=Array.from({length:Math.ceil(s.length/2)}).map((a,u)=>s.slice(u*2,u*2+2));for(const a of l)for(const u of a)u.onClick=o[u.id];this.rows=l}}}),Db={class:"media-recorder-mode-selector__row"},Vb=["onClick"],Nb={class:"media-recorder-mode-selector__row-item-center"},Bb={class:"media-recorder-mode-selector__row-item-icon media-recorder-mode-selector__row-item-icon--desktop"},jb={class:"media-recorder-mode-selector__row-item-icon media-recorder-mode-selector__row-item-icon--mobile"},zb={class:"media-recorder-mode-selector__row-item-text"};function Hb(e,t,i,o,s,l){const a=Ye;return d(),h("div",{class:F(["media-recorder-mode-selector",[...e.padding!=0?["media-recorder-mode-selector--with-padding"]:[]]])},[(d(!0),h(N,null,q(e.rows,(u,m)=>(d(),h(N,{key:m},[p("div",Db,[(d(!0),h(N,null,q(u,(f,b)=>(d(),h("div",{key:(m+1)*100+b,class:F(["media-recorder-mode-selector__row-item",{...f.classNames,"media-recorder-mode-selector__row-item--disabled":f.isDisabled}]),onClick:f.onClick},[t[0]||(t[0]=p("div",{class:"media-recorder-mode-selector__row-item-background"},null,-1)),p("div",Nb,[p("p",Bb,[r(a,{icon:f.icon},null,8,["icon"])]),p("p",jb,[r(a,{icon:f.iconMobile},null,8,["icon"])]),p("p",zb,g(f.text),1)])],10,Vb))),128))]),m!==e.rows.length-1?(d(),h("div",{key:(m+1)*1e3,class:"media-recorder-mode-selector__row--spacer"})):E("",!0)],64))),128))],2)}const _b=$(Fb,[["render",Hb]]),Ub=A({name:"app-stock-filter-button",props:{isChanged:{type:Boolean,default:!1}}});function qb(e,t,i,o,s,l){return d(),h("button",J({type:"button",class:["app-stock-filter-button",{"app-stock-filter-button--changed":e.isChanged}]},e.$attrs),[w(e.$slots,"default")],16)}const ps=$(Ub,[["render",qb]]),Wb=A({name:"app-stock-audio-grid-item",components:{AppSvgSymbol:K},props:{item:{type:Object,required:!0},isDragPreview:{type:Boolean,default:!1},isDragging:{type:Boolean,default:!1},siblingPlayEventEmitter:{type:Object,default:void 0},timelinePlayEventEmitter:{type:Object,default:void 0},playerFullscreenEventEmitter:{type:Object,default:void 0},filterVisibleEventEmitter:{type:Object,default:void 0}},emits:["play","select","drag-disable","drag-enable","preview-loaded"],data(){return{isPosterLoaded:!1,isPlaying:!1,currentTime:0,playPromise:void 0,isWaitingToPlay:!1,isWaitingToStop:!1,duration:this.item.duration,currentTimeAnimationFrameId:void 0,isSeeking:!1,lastSeekTime:0,lastPlayStartTime:0}},computed:{formattedDuration(){return Ue(this.duration)},currentTimeFormatted(){return Ue(this.currentTime,{referenceTime:this.duration})}},watch:{item(){this.$nextTick(this.waitPosterLoad)}},mounted(){this.disableDrag(),this.waitPosterLoad(),this.siblingPlayEventEmitter!==void 0&&this.siblingPlayEventEmitter.on("start-play",this.handleOtherAudioPlaying),this.timelinePlayEventEmitter!==void 0&&(this.timelinePlayEventEmitter.on("start-play",this.pauseOnExternalEvent),this.timelinePlayEventEmitter.on("stop-play",this.pauseOnTimelinePlayingStop)),this.playerFullscreenEventEmitter!==void 0&&this.playerFullscreenEventEmitter.on("enter-fullscreen",this.pauseOnExternalEvent),this.filterVisibleEventEmitter!==void 0&&this.filterVisibleEventEmitter.on("show-filter",this.pauseOnExternalEvent),document.addEventListener("visibilitychange",this.pauseIfHidden)},beforeUnmount(){this.$refs.poster!==void 0&&this.$refs.poster.removeEventListener("load",this.setPosterLoaded),this.siblingPlayEventEmitter!==void 0&&this.siblingPlayEventEmitter.off("start-play",this.handleOtherAudioPlaying),this.timelinePlayEventEmitter!==void 0&&(this.timelinePlayEventEmitter.off("start-play",this.pauseOnExternalEvent),this.timelinePlayEventEmitter.off("stop-play",this.pauseOnTimelinePlayingStop)),this.playerFullscreenEventEmitter!==void 0&&this.playerFullscreenEventEmitter.off("enter-fullscreen",this.pauseOnExternalEvent),this.filterVisibleEventEmitter!==void 0&&this.filterVisibleEventEmitter.off("show-filter",this.pauseOnExternalEvent),this.currentTimeAnimationFrameId!==void 0&&window.cancelAnimationFrame(this.currentTimeAnimationFrameId),document.removeEventListener("visibilitychange",this.pauseIfHidden)},methods:{setPosterLoaded(){this.enableDrag(),this.isPosterLoaded=!0,this.$emit("preview-loaded")},waitPosterLoad(){if(this.item.thumbnailUrl===void 0){this.setPosterLoaded();return}if(this.isPosterLoaded||this.isDragPreview||this.isDragging)return;const e=this.$refs.poster;e!==void 0&&(e.complete?this.setPosterLoaded():e.addEventListener("load",this.setPosterLoaded,{once:!0}))},togglePlay(){this.isPlaying?this.pause():this.play()},async play(){if(this.isWaitingToPlay||this.$refs.player===void 0)return;this.$emit("play",`${this.item.provider}-${this.item.id}`),this.isPlaying=!0,this.isWaitingToPlay=!0,await this.playPromise;const e=this.$refs.player;e.src!==this.item.sourceUrl&&(e.src=this.item.sourceUrl),this.playPromise=e.play(),this.isWaitingToPlay=!1,this.updateCurrentTime()},async pause(e=!0){if(this.isWaitingToStop||this.$refs.player===void 0)return;this.isPlaying=!1,this.isWaitingToStop=!0,await this.playPromise,this.isWaitingToStop=!1;const t=this.$refs.player;t.pause(),e&&(this.setCurrentTime(0),t.src="",t.load()),this.currentTimeAnimationFrameId!==void 0&&(window.cancelAnimationFrame(this.currentTimeAnimationFrameId),this.currentTimeAnimationFrameId=void 0)},pauseIfHidden(){document.visibilityState==="hidden"&&this.pause()},setCurrentTime(e){if(this.$refs.player===void 0)return;const t=this.$refs.player;t.currentTime=e/1e3,this.currentTime=e},updateDuration(){this.$refs.player!==void 0&&(this.duration=this.$refs.player.duration*1e3)},handleOtherAudioPlaying(e){this.isPlaying&&e.data!==`${this.item.provider}-${this.item.id}`&&this.pause()},pauseOnExternalEvent(){this.isPlaying&&this.pause()},pauseOnTimelinePlayingStop(){this.isPlaying&&Date.now()-this.lastPlayStartTime>300&&this.pause()},updateCurrentTime(){this.$refs.player!==void 0&&(this.currentTime=this.$refs.player.currentTime*1e3),this.currentTimeAnimationFrameId=window.requestAnimationFrame(this.updateCurrentTime)},select(e){const t=e.target;t.closest(".app-stock-audio-grid-item__poster")!==null||t.closest(".app-stock-audio-grid-item__progress")!==null&&!t.classList.contains("app-stock-audio-grid-item__progress")||Date.now()-this.lastSeekTime<300||this.$emit("select")},disableDrag(){this.$emit("drag-disable")},enableDrag(){this.$emit("drag-enable")},startSeek(){this.isSeeking=!0,this.pause(!1),this.disableDrag()},stopSeek(){this.isSeeking=!1,this.lastSeekTime=Date.now(),this.play(),this.enableDrag()}}}),Gb=["src"],Xb={class:"app-stock-audio-grid-item__play"},Yb={class:"app-stock-audio-grid-item__title"},Kb={class:"app-stock-audio-grid-item__artist"},Zb={class:"app-stock-audio-grid-item__duration"},Qb={class:"app-stock-audio-grid-item__current-time"},Jb={class:"app-stock-audio-grid-item__progress"};function xb(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=vr,m=fr;return d(),h("div",{class:F(["app-stock-audio-grid-item",{"app-stock-audio-grid-item--drag-preview":e.isDragPreview,"app-stock-audio-grid-item--dragging":e.isDragging,"app-stock-audio-grid-item--playing":e.isPlaying||e.isSeeking,"app-stock-audio-grid-item--has-poster":e.item.thumbnailUrl!==void 0}]),onClick:t[3]||(t[3]=(...f)=>e.select&&e.select(...f))},[p("div",{class:"app-stock-audio-grid-item__poster",onClick:t[0]||(t[0]=_((...f)=>e.togglePlay&&e.togglePlay(...f),["stop"]))},[e.item.thumbnailUrl!==void 0?(d(),h("img",{key:0,ref:"poster",src:e.item.thumbnailUrl,alt:"",class:"app-stock-audio-grid-item__poster-image",draggable:"false"},null,8,Gb)):(d(),S(a,{key:1,symbol:"svg-main-navigation-tab-icon-stock-audio",class:"app-stock-audio-grid-item__poster-placeholder","is-block":""})),p("div",Xb,[e.isPlaying||e.isSeeking?(d(),S(a,{key:0,symbol:"stocks-audio-stop","is-block":"",width:8,height:8})):(d(),S(a,{key:1,symbol:"stocks-audio-play","is-block":"",width:8,height:10}))])]),p("div",Yb,g(e.item.title),1),p("div",Kb,g(e.item.artist),1),p("div",Zb,g(e.formattedDuration),1),p("div",Qb,g(e.currentTimeFormatted),1),p("div",Jb,[r(m,null,{progress:n(()=>[r(u,{"current-time":e.currentTime,"total-length":e.duration,variant:"green",onStart:e.startSeek,onCurrentTimeUpdate:t[1]||(t[1]=f=>e.setCurrentTime(f)),onFinish:e.stopSeek},null,8,["current-time","total-length","onStart","onFinish"])]),_:1})]),t[4]||(t[4]=Ht('<div class="app-stock-audio-grid-item__bars"><div class="app-stock-audio-grid-item__bar"></div><div class="app-stock-audio-grid-item__bar"></div><div class="app-stock-audio-grid-item__bar"></div><div class="app-stock-audio-grid-item__bar"></div></div>',1)),p("audio",{ref:"player",class:"app-stock-audio-grid-item__player",preload:"none",loop:"",crossorigin:"anonymous",onDurationchange:t[2]||(t[2]=(...f)=>e.updateDuration&&e.updateDuration(...f))},null,544)],2)}const cs=$(Wb,[["render",xb]]),e1=A({name:"app-stock-audio-grid-skeleton-item"}),t1={class:"app-stock-audio-grid-skeleton-item"},i1={class:"app-stock-audio-grid-skeleton-item__poster"},o1={class:"app-stock-audio-grid-skeleton-item__title"},n1={class:"app-stock-audio-grid-skeleton-item__artist"},s1={class:"app-stock-audio-grid-skeleton-item__duration"};function a1(e,t,i,o,s,l){const a=Ne;return d(),h("div",t1,[p("div",i1,[r(a,{class:"app-stock-audio-grid-skeleton-item__skeleton","fixed-width":44,"fixed-height":44,"border-radius":4})]),p("div",o1,[r(a,{"fixed-width":120,"fixed-height":10,"border-radius":2})]),p("div",n1,[r(a,{"fixed-width":70,"fixed-height":10,"border-radius":2})]),p("div",s1,[r(a,{"fixed-width":24,"fixed-height":10,"border-radius":2})])])}const ms=$(e1,[["render",a1]]),r1=A({name:"app-stock-audio-grid",props:{appLayout:{type:String,default:"desktop"},items:{type:Array,default:()=>[]},skeletons:{type:Number,default:0},hiddenItemIds:{type:Array,default:()=>[]}},data(){return{playEventEmitter:new ue}},methods:{play(e){this.playEventEmitter.fire("start-play",e)}}});function l1(e,t,i,o,s,l){return d(),h("div",{class:F(["app-stock-audio-grid",[`app-stock-audio-grid--variant-${e.appLayout}`]])},[(d(!0),h(N,null,q(e.items,a=>(d(),h("div",{key:a.id,class:F(["app-stock-audio-grid__item",{"app-stock-audio-grid__item--hidden":e.hiddenItemIds.includes(a.id)}])},[w(e.$slots,"item",{item:a,play:e.play,eventEmitter:e.playEventEmitter})],2))),128)),e.skeletons>0?(d(!0),h(N,{key:0},q(e.skeletons,a=>(d(),h("div",{key:a,class:"app-stock-audio-grid__item-skeleton"},[w(e.$slots,"skeleton-item")]))),128)):E("",!0)],2)}const hs=$(r1,[["render",l1]]),d1=A({name:"widget-audio-stock",components:{AppSelect:$t,AppSelectOption:wt,AppSvgSymbol:K},props:{state:{type:Object,required:!0},filterState:{type:Object,required:!0},controller:{type:Object,required:!0},filterController:{type:Object,required:!0},timelinePlayEventEmitter:{type:Object,default:void 0},playerFullscreenEventEmitter:{type:Object,default:void 0}},emits:["item-select","item-played","before-drag-stop"],data(){return{filterVisibleEventEmitter:new ue,loadedItemIds:[]}},computed:{stockItems(){return this.state.activeTypeId===H.MUSIC?this.state.stockMusicItems:this.state.stockSfxItems},stockCategories(){return this.state.activeTypeId===H.MUSIC?this.state.stockMusicCategories:this.state.stockSfxCategories},isStockLastPage(){return this.state.activeTypeId===H.MUSIC?this.state.isStockMusicLastPage:this.state.isStockSfxLastPage},currentFilter(){return this.state.activeTypeId===H.MUSIC?this.filterState.currentMusicFilter:this.filterState.currentSfxFilter},activeFilter(){return this.state.activeTypeId===H.MUSIC?this.filterState.activeMusicFilter:this.filterState.activeSfxFilter},isFilterChanged(){const e=["genres","moods","movements","themes","durations"];return Object.entries(this.activeFilter).some(([t,i])=>e.includes(t)&&Array.isArray(i)&&i.length>0)},isLoading(){return this.state.isStockAudioLoading||this.stockItems.some(e=>!this.loadedItemIds.includes(e.id))},hiddenItemIds(){const e=this.$appConfig.stocksLoadPerPage,t=(this.activeFilter.currentPage-1)*e,i=this.stockItems.slice(t,t+e);return i.some(o=>!this.loadedItemIds.includes(o.id))?i.map(o=>o.id):[]},skeletonsCount(){const e=this.currentFilter.currentPage;return this.isLoading&&e>1?3:this.isLoading&&e===1?6:0}},watch:{"filterState.isVisible"(){this.filterState.isVisible&&this.filterVisibleEventEmitter.fire("show-filter")}},mounted(){this.state.activeTypeId===H.MUSIC&&this.state.stockMusicItems.length===0?this.controller.loadStocks(H.MUSIC):this.state.stockSfxItems.length===0&&this.controller.loadStocks(H.SFX)},methods:{setActiveTypeId(e){this.controller.setActiveTypeId(e),this.filterController.setActiveTab(e===H.MUSIC?"genres":"themes"),this.controller.loadStocks(e)},handleClickFilterButton(e){e.stopImmediatePropagation(),this.filterController.changeVisibility(!this.filterState.isVisible)},setPosterLoaded(e){this.loadedItemIds.includes(e.id)||this.loadedItemIds.push(e.id)}}});function u1(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppSelectOption"),m=D("AppSelect"),f=ps,b=At,T=Wt,C=ct,M=mt,L=cs,I=ei,P=ms,j=hs,B=ht;return d(),S(B,{key:e.state.activeTypeId,variant:"audio","is-infinite-scroll-enabled":!e.isStockLastPage&&!e.isLoading,"is-loading":e.state.isStockAudioLoading,"is-skeleton-visible":e.isLoading&&e.currentFilter.currentPage===1,onScrollToEnd:t[5]||(t[5]=Y=>e.controller.loadNextPage(e.state.activeTypeId))},G({_:2},[e.state.isStockAudioLoadingFailed?void 0:{name:"header",fn:n(()=>[r(b,{value:e.currentFilter.searchQueryInput,placeholder:e.state.activeTypeId==="music"?e.$t("editor.stocks.searchMusic"):e.$t("editor.stocks.searchSfx"),"is-disabled":e.filterState.isVisible,onInput:t[0]||(t[0]=Y=>e.controller.updateSearchQuery(e.state.activeTypeId,Y)),onSubmit:t[1]||(t[1]=Y=>e.controller.search(e.state.activeTypeId))},{buttons:n(()=>[r(m,{"active-item-id":e.state.activeTypeId,items:e.state.audioTypes,"is-disabled":e.filterState.isVisible,variant:"stock-audio-type","data-testid":"stocks-audio-type-select"},{"active-item":n(Y=>[y(g(e.$t(`editor.stocks.audioTypes.${Y.activeItem.name}`)),1)]),icon:n(()=>[r(a,{symbol:"svg-chevron-down",width:8,height:16})]),item:n(Y=>[r(u,{type:"button","is-active":Y.isActive,"get-scrollable-parent-callback":Y.getScrollableParentCallback,variant:"stock-audio-type",onClick:ve=>{Y.hideDropdown(),e.setActiveTypeId(Y.item.id)}},{default:n(()=>[y(g(e.$t(`editor.stocks.audioTypes.${Y.item.name}`)),1)]),_:2},1032,["is-active","get-scrollable-parent-callback","onClick"])]),_:1},8,["active-item-id","items","is-disabled"]),r(f,{"is-changed":e.isFilterChanged,"data-testid":"stocks-audio-filter-button",onMousedown:e.handleClickFilterButton,onTouchstart:_(e.handleClickFilterButton,["prevent"])},{default:n(()=>[r(a,{symbol:"svg-filter",width:20,height:20})]),_:1},8,["is-changed","onMousedown","onTouchstart"])]),_:1},8,["value","placeholder","is-disabled"])]),key:"0"},!e.state.isStockAudioLoadingFailed&&(e.isLoading||e.stockItems.length>0)?{name:"categories",fn:n(()=>[r(T,{categories:e.stockCategories,onSelect:t[2]||(t[2]=Y=>{e.controller.updateSearchQuery(e.state.activeTypeId,Y),e.controller.search(e.state.activeTypeId)})},null,8,["categories"])]),key:"1"}:void 0,e.state.isStockAudioLoadingFailed?{name:"empty",fn:n(()=>[r(M,null,{title:n(()=>[y(g(e.$t("appErrorNetworkError.title")),1)]),subtitle:n(()=>[y(g(e.$t("appErrorNetworkError.subtitle")),1)]),buttons:n(()=>[r(C,{state:e.state.isStockAudioLoading?"loading":"default",onClick:t[3]||(t[3]=Y=>e.controller.search(e.state.activeTypeId))},{default:n(()=>[y(g(e.$t("appErrorNetworkError.reload")),1)]),_:1},8,["state"])]),_:1})]),key:"2"}:e.isLoading||e.stockItems.length>0?{name:"content",fn:n(()=>[r(j,{items:e.stockItems,skeletons:e.skeletonsCount,"hidden-item-ids":e.hiddenItemIds},{item:n(Y=>[(d(),S(I,{key:`stock-item-${Y.item.provider}-${Y.item.id}`,"draggable-data":{stockItemId:Y.item.id,stockItemProvider:Y.item.provider,stockItemType:Y.item.stockType,duration:Y.item.duration,type:"stock-item"},"is-source-element-hiding-required":!1,onBeforeDragStop:t[4]||(t[4]=ve=>e.$emit("before-drag-stop",ve))},{default:n(ve=>[r(L,{item:Y.item,"is-dragging":ve.isDragging,"sibling-play-event-emitter":Y.eventEmitter,"timeline-play-event-emitter":e.timelinePlayEventEmitter,"player-fullscreen-event-emitter":e.playerFullscreenEventEmitter,"filter-visible-event-emitter":e.filterVisibleEventEmitter,onSelect:x=>e.$emit("item-select",Y.item),onDragDisable:x=>ve.disableDrag(),onDragEnable:x=>ve.enableDrag(),onPlay:x=>{Y.play(x),e.$emit("item-played")},onPreviewLoaded:x=>e.setPosterLoaded(Y.item)},null,8,["item","is-dragging","sibling-play-event-emitter","timeline-play-event-emitter","player-fullscreen-event-emitter","filter-visible-event-emitter","onSelect","onDragDisable","onDragEnable","onPlay","onPreviewLoaded"])]),preview:n(()=>[r(L,{"is-drag-preview":"",item:Y.item},null,8,["item"])]),_:2},1032,["draggable-data"]))]),"skeleton-item":n(()=>[r(P)]),_:1},8,["items","skeletons","hidden-item-ids"])]),key:"3"}:{name:"empty",fn:n(()=>[y(g(e.$t("editor.stocks.empty")),1)]),key:"4"}]),1032,["is-infinite-scroll-enabled","is-loading","is-skeleton-visible"])}const p1=$(d1,[["render",u1]]),c1=A({name:"app-stock-filter-tab",props:{isActive:{type:Boolean,default:!1},isChanged:{type:Boolean,default:!1}}});function m1(e,t,i,o,s,l){return d(),h("button",J({type:"button",class:["app-stock-filter-tab",{"app-stock-filter-tab--active":e.isActive,"app-stock-filter-tab--changed":e.isChanged}]},e.$attrs),[w(e.$slots,"default")],16)}const h1=$(c1,[["render",m1]]),g1=A({name:"app-checkbox",components:{AppSvgSymbol:K},props:{label:{type:String,required:!0},value:{type:Boolean,default:!1}},emits:{change:e=>!0}}),v1=["checked","value"],f1={class:"app-checkbox__checkbox"},b1={class:"app-checkbox__label"};function y1(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("label",{class:F(["app-checkbox",{"app-checkbox--checked":e.value}])},[p("input",{type:"checkbox",checked:e.value,value:e.value,class:"app-checkbox__input",onInput:t[0]||(t[0]=u=>e.$emit("change",u.target.checked))},null,40,v1),p("span",f1,[r(a,{symbol:"checkbox-checkmark",width:14,height:14,class:"app-checkbox__icon"})]),p("span",b1,g(e.label),1)],2)}const E1=$(g1,[["render",y1]]),S1=A({name:"app-stock-filter",props:{appLayout:{type:String,default:"desktop"},activeTab:{type:String,required:!0}},data(){return{tabsScrollPositions:new Map}},watch:{activeTab(e,t){const i=this.$refs.content;i!==void 0&&this.tabsScrollPositions.set(t,i.scrollTop),this.$nextTick(()=>{i!==void 0&&(i.scrollTop=this.tabsScrollPositions.get(e)??0)})}}}),k1={class:"app-stock-filter__tabs"},C1={key:0,class:"app-stock-filter__search"},T1={ref:"content",class:"app-stock-filter__content"},$1={class:"app-stock-filter__buttons"};function w1(e,t,i,o,s,l){return d(),h("div",{class:F(["app-stock-filter",[`app-stock-filter--layout-${e.appLayout}`]])},[p("div",k1,[w(e.$slots,"tabs")]),e.$slots.search!==void 0?(d(),h("div",C1,[w(e.$slots,"search")])):E("",!0),t[0]||(t[0]=p("div",{class:"app-stock-filter__top-shadow"},null,-1)),p("div",T1,[w(e.$slots,"content")],512),t[1]||(t[1]=p("div",{class:"app-stock-filter__bottom-shadow"},null,-1)),p("div",$1,[w(e.$slots,"buttons")])],2)}const A1=$(S1,[["render",w1]]),M1=A({name:"widget-stock-filter",components:{AppButton:oe},props:{state:{type:Object,required:!0},stocksState:{type:Object,required:!0},controller:{type:Object,required:!0},stocksController:{type:Object,required:!0},appLayout:{type:String,default:"desktop"}},computed:{currentFilters(){return this.stocksState.activeTypeId===H.MUSIC?this.state.musicFilters:this.state.sfxFilters},currentFilter(){return this.stocksState.activeTypeId===H.MUSIC?this.state.currentMusicFilter:this.state.currentSfxFilter},activeFilter(){return this.stocksState.activeTypeId===H.MUSIC?this.state.activeMusicFilter:this.state.activeSfxFilter},currentTabs(){return this.stocksState.activeTypeId===H.MUSIC?["genres","moods","movements","durations"]:["themes","durations"]},stockAudioFilterTabs(){return Object.entries(this.currentFilters).filter(([e,t])=>t.length>0).map(([e])=>{const t=this.activeFilter[e].length>0;return{label:e,isActive:this.state.activeTab===e,isChanged:t}})}},mounted(){document.addEventListener("mousedown",this.hideFilterOnClickOutside),document.addEventListener("touchstart",this.hideFilterOnClickOutside)},beforeUnmount(){document.removeEventListener("mousedown",this.hideFilterOnClickOutside),document.removeEventListener("touchstart",this.hideFilterOnClickOutside)},methods:{hideFilterOnClickOutside(e){const t=e.target;!this.$el.contains(t)&&this.$el!==t&&(this.controller.changeVisibility(!1),this.resetTab(),this.controller.revertCurrentFilters())},resetTab(){this.controller.setActiveTab(this.stocksState.activeTypeId===H.MUSIC?"genres":"themes")},changeFilterSelection(e,t,i){this.controller.changeFilterSelection(this.stocksState.activeTypeId,e,t,i)},changeDurationSelection(e,t){this.controller.changeDurationSelection(this.stocksState.activeTypeId,e,t)},loadStocks(){this.controller.setCurrentPage(this.stocksState.activeTypeId,1),this.controller.activateCurrentFilters(),this.stocksController.loadStocks(this.stocksState.activeTypeId)}}});function R1(e,t,i,o,s,l){const a=h1,u=At,m=E1,f=D("AppButton"),b=A1;return d(),S(b,{"app-layout":e.appLayout,"active-tab":e.state.activeTab},G({tabs:n(()=>[(d(!0),h(N,null,q(e.stockAudioFilterTabs,T=>(d(),S(a,{key:T.label,"is-active":T.isActive,"is-changed":T.isChanged,onClick:C=>{e.controller.setSearchQuery(""),e.controller.setActiveTab(T.label)}},{default:n(()=>[y(g(e.$t(`editor.stocks.filters.${T.label}`)),1)]),_:2},1032,["is-active","is-changed","onClick"]))),128))]),content:n(()=>[(d(!0),h(N,null,q(e.currentTabs,T=>(d(),h(N,null,[e.state.activeTab===T?(d(!0),h(N,{key:0},q(e.currentFilters[T],C=>(d(),h(N,null,[C.label.toLowerCase().includes(e.state.searchQuery.toLowerCase())?(d(),S(m,{key:C.id,label:T==="durations"?e.$t(`editor.stocks.filterDurations.${C.label}`):C.label,value:e.currentFilter[T].some(M=>M.id===C.id),onChange:M=>T==="durations"?e.changeDurationSelection(C,M):e.changeFilterSelection(T,C,M)},null,8,["label","value","onChange"])):E("",!0)],64))),256)):E("",!0)],64))),256))]),buttons:n(()=>[r(f,{variant:"stock-filter-clear",size:"auto-width","rounding-value":5,"fixed-height":e.appLayout==="desktop"?34:36,onClick:t[1]||(t[1]=T=>{e.controller.resetFilter(e.stocksState.activeTypeId),e.loadStocks(),e.controller.changeVisibility(!1),e.resetTab()})},{default:n(()=>[y(g(e.$t("editor.stocks.filterClear")),1)]),_:1},8,["fixed-height"]),r(f,{variant:"stock-filter-apply",size:"auto-width","rounding-value":5,"fixed-height":e.appLayout==="desktop"?34:36,onClick:t[2]||(t[2]=T=>{e.loadStocks(),e.controller.changeVisibility(!1),e.resetTab()})},{default:n(()=>[y(g(e.$t("editor.stocks.filterApply")),1)]),_:1},8,["fixed-height"])]),_:2},[e.state.activeTab!=="durations"?{name:"search",fn:n(()=>[r(u,{value:e.state.searchQuery,placeholder:e.$t(`editor.stocks.filterSearch.${e.state.activeTab}`),"app-layout":e.appLayout,variant:"filters",onInput:t[0]||(t[0]=T=>e.controller.setSearchQuery(T))},null,8,["value","placeholder","app-layout"])]),key:"0"}:void 0]),1032,["app-layout","active-tab"])}const gs=$(M1,[["render",R1]]),P1=A({name:"app-console",props:{activeTab:{type:String,default:void 0},variant:{type:String,default:"solid"},isMenuExtendedHeight:{type:Boolean,default:!1},fixedHeight:{type:Number,default:void 0}},emits:{"set-raw-menu-height":e=>!0},data(){return{buttonsScrollTop:window?.consoleButtonsScrollTop??0,buttonsOffsetHeight:window?.consoleButtonsOffsetHeight??0,buttonsScrollHeight:window?.consoleButtonsScrollHeight??0,buttonsListPadding:16,isImportButtonHovered:!1}},computed:{isTopShadowVisible(){return this.buttonsScrollTop>0},isBottomShadowVisible(){return Math.ceil(this.buttonsOffsetHeight+this.buttonsScrollTop)<this.buttonsScrollHeight}},mounted(){window.addEventListener("resize",this.checkMenuHeight),this.checkMenuHeight(),this.buttonsListPadding=parseInt(getComputedStyle(this.$el).getPropertyValue("--console-buttons-padding-bottom"),10)},beforeUnmount(){window.removeEventListener("resize",this.checkMenuHeight)},methods:{checkMenuHeight(){const e=this.$refs.buttons,t=this.$refs.upload,i=this.$refs.menu;if(e!==void 0&&t!==void 0&&i!==void 0){const o=Array.from(e.children).reduce((l,a)=>(l+=a.clientHeight,l),0);this.$emit("set-raw-menu-height",o+this.buttonsListPadding+t.clientHeight),this.saveButtonsScrollPosition();const s=window.innerHeight;i.style.setProperty("--vh",`${s}px`)}},saveButtonsScrollPosition(){const e=this.$refs.buttons;this.buttonsScrollTop=e.scrollTop,this.buttonsOffsetHeight=e.offsetHeight,this.buttonsScrollHeight=e.scrollHeight},setImportButtonHovered(e){this.isImportButtonHovered=e}}}),I1={ref:"upload",class:"app-console__upload"},L1={class:"app-console__content"},O1={key:0,class:"app-console__content-overlay"};function F1(e,t,i,o,s,l){return d(),h("div",J({class:["app-console",[`app-console--tab-${e.activeTab}`,`app-console--variant-${e.variant}`,{"app-console--menu-height-extended":e.isMenuExtendedHeight,"app-console--top-shadow-visible":e.isTopShadowVisible,"app-console--bottom-shadow-visible":e.isBottomShadowVisible}]]},e.$attrs),[p("div",{ref:"menu",class:"app-console__menu",style:z({height:e.fixedHeight!==void 0?`${e.fixedHeight}px`:void 0})},[p("div",I1,[w(e.$slots,"upload")],512),p("div",{ref:"buttons",class:"app-console__buttons",onScroll:t[0]||(t[0]=a=>{e.saveButtonsScrollPosition()})},[w(e.$slots,"buttons")],544)],4),p("div",L1,[w(e.$slots,"content",{setImportButtonHovered:e.setImportButtonHovered,isImportButtonHovered:e.isImportButtonHovered})]),e.$slots["content-overlay"]!==void 0?(d(),h("div",O1,[w(e.$slots,"content-overlay")])):E("",!0)],16)}const D1=$(P1,[["render",F1]]),V1=A({name:"app-console-mobile-menu"}),N1={class:"app-console-mobile-menu"},B1={class:"app-console-mobile-menu__upload"},j1={class:"app-console-mobile-menu__buttons"};function z1(e,t,i,o,s,l){return d(),h("div",N1,[p("div",B1,[w(e.$slots,"upload")]),p("div",j1,[w(e.$slots,"buttons")])])}const H1=$(V1,[["render",z1]]),_1=A({name:"app-console-mobile-tab-button",props:{isActive:{type:Boolean,default:!1},variant:{type:String,default:"text"}}});function U1(e,t,i,o,s,l){return d(),h("button",J({class:["app-console-mobile-tab-button",[{"app-console-mobile-tab-button--active":e.isActive},`app-console-mobile-tab-button--variant-${e.variant}`]]},e.$attrs),[w(e.$slots,"default")],16)}const q1=$(_1,[["render",U1]]),W1=A({name:"app-console-mobile-tab-buttons-layout",props:{variant:{type:String,default:"text"}},methods:{sortSlots:Jt}}),G1=["data-slot"];function X1(e,t,i,o,s,l){return d(),h("div",{class:F(["app-console-mobile-tab-buttons-layout",`app-console-mobile-tab-buttons-layout--variant-${e.variant}`])},[(d(!0),h(N,null,q(e.sortSlots(e.$slots),(a,u)=>(d(),h("div",{key:u,class:"app-console-mobile-tab-buttons-layout__item","data-slot":u},[w(e.$slots,u)],8,G1))),128))],2)}const Y1=$(W1,[["render",X1]]),K1=A({name:"app-console-mobile-settings-layout",components:{AppSvgSymbol:K},props:{isVisible:{type:Boolean,default:!1},variant:{type:String,default:"default"},paddingVertical:{type:Number,default:16},paddingHorizontal:{type:Number,default:16}},emits:{close:null},methods:{close(){this.$emit("close")}}}),Z1={class:"app-console-mobile-settings-layout__tab-buttons"};function Q1(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),S(pt,{name:"popup"},{default:n(()=>[e.isVisible?(d(),h("div",{key:0,class:F(["app-console-mobile-settings-layout",`app-console-mobile-settings-layout--variant-${e.variant}`])},[p("div",Z1,[w(e.$slots,"tab-buttons"),p("button",{class:"app-console-mobile-settings-layout__close-button",onClick:t[0]||(t[0]=(...u)=>e.close&&e.close(...u))},[r(a,{symbol:"mobile-toolbar-close-button-icon"})])]),p("div",{class:"app-console-mobile-settings-layout__tab-content",style:z({padding:`${e.paddingVertical}px ${e.paddingHorizontal}px`})},[w(e.$slots,"tab-content")],4)],2)):E("",!0)]),_:3})}const J1=$(K1,[["render",Q1]]),x1=A({name:"app-console-mobile-shadow-overlay",props:{isVisible:{type:Boolean,default:!1}},emits:{close:null},methods:{closeShadowOverlay(e){const t=this.$el;e.target===t&&this.$emit("close")}}});function ey(e,t,i,o,s,l){return d(),S(pt,{appear:"",name:"fade"},{default:n(()=>[ae(p("div",{class:"app-console-mobile-shadow-overlay",onClick:t[0]||(t[0]=(...a)=>e.closeShadowOverlay&&e.closeShadowOverlay(...a))},[w(e.$slots,"default")],512),[[pe,e.isVisible]])]),_:3})}const ty=$(x1,[["render",ey]]),iy=A({name:"app-console-mobile-upload-menu-button",components:{AppButton:oe},props:{isLoading:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},variant:{type:String,default:"default"}},data(){return{buttonEventTarget:new ue}},methods:{dispatchClickEvent(){this.buttonEventTarget.fire("click")}}}),oy={class:"app-console-mobile-upload-menu-button"},ny={key:0,class:"app-console-mobile-upload-menu-button__icon"},sy={key:1,class:"app-console-mobile-upload-menu-button__spinner"};function ay(e,t,i,o,s,l){const a=D("AppButton");return d(),h("div",oy,[e.variant==="default"?(d(),h("div",J({key:0,class:"app-console-mobile-upload-menu-button__button-container"},e.$attrs),[p("button",{class:F(["app-console-mobile-upload-menu-button__button",{"app-console-mobile-upload-menu-button__button--loading":e.isLoading,"app-console-mobile-upload-menu-button__button--disabled":e.isDisabled}])},[e.isLoading?(d(),h("span",sy)):(d(),h("span",ny,[w(e.$slots,"icon")]))],2)],16)):E("",!0),e.variant==="local-upload"?(d(),h(N,{key:1},[r(a,J({size:"full-width",variant:"upload-mobile","rounded-edges":"all","rounding-value":6,"fixed-height":54},{...e.$attrs,onClick:u=>{e.dispatchClickEvent(),e.$attrs.onClick!==void 0&&typeof e.$attrs.onClick=="function"&&e.$attrs.onClick(u)}}),{default:n(()=>[w(e.$slots,"default")]),_:3},16),w(e.$slots,"input",{buttonEventTarget:e.buttonEventTarget})],64)):E("",!0)])}const ry=$(iy,[["render",ay]]),ly=A({name:"app-console-mobile-catalog-list",props:{items:{type:Array,required:!0},itemVariant:{type:String,default:"text",validator:e=>["text","media"].includes(e)}},data(){return{selectedItems:[]}},watch:{items:{handler(e){this.selectedItems=this.selectedItems.filter(t=>e.some(i=>i.id===t.id))},deep:!0}},methods:{toggleSelectItem(e){const t=this.selectedItems.indexOf(e);t!==-1?this.selectedItems.splice(t,1):this.selectedItems.push(e)}}}),dy={class:"app-console-mobile-catalog-list"},uy={key:0,class:"app-console-mobile-catalog-list__footer"},py={key:0,class:"app-console-mobile-catalog-list__delete-button"},cy={class:"app-console-mobile-catalog-list__add-button"},my={key:1,class:"app-console-mobile-catalog-list__footer app-console-mobile-catalog-list__footer--no-padding"},hy={class:"app-console-mobile-catalog-list__buttons"};function gy(e,t,i,o,s,l){return d(),h("div",dy,[p("div",{class:F(["app-console-mobile-catalog-list__items",`app-console-mobile-catalog-list__items--variant-${e.itemVariant}`])},[(d(!0),h(N,null,q(e.items,a=>(d(),h("div",{key:a.id,class:F(["app-console-mobile-catalog-list-item",[{"app-console-mobile-catalog-list-item--selected":e.selectedItems.includes(a)},`app-console-mobile-catalog-list-item--variant-${e.itemVariant}`]])},[w(e.$slots,"item",{item:a,toggleSelectItem:e.toggleSelectItem})],2))),128))],2),e.selectedItems.length>0?(d(),h("div",uy,[e.$slots["delete-button"]!==void 0?(d(),h("div",py,[w(e.$slots,"delete-button",{selectedItems:e.selectedItems})])):E("",!0),p("div",cy,[w(e.$slots,"add-button",{selectedItems:e.selectedItems})])])):E("",!0),e.selectedItems.length===0&&e.itemVariant==="media"?(d(),h("div",my,[w(e.$slots,"upload-button"),p("div",hy,[w(e.$slots,"import-buttons")])])):E("",!0)])}const vy=$(ly,[["render",gy]]),fy=A({name:"app-console-mobile-catalog-placeholder"}),by={class:"app-console-mobile-catalog-placeholder"},yy={class:"app-console-mobile-catalog-placeholder__icon"},Ey={class:"app-console-mobile-catalog-placeholder__text"},Sy={class:"app-console-mobile-catalog-placeholder__bottom-panel"},ky={class:"app-console-mobile-catalog-placeholder__buttons"};function Cy(e,t,i,o,s,l){const a=Gn;return d(),h("div",by,[p("div",yy,[r(a,{"is-animate-on-mount":!0})]),p("div",Ey,g(e.$t("appConsoleMobileCatalogPlaceholder.text")),1),p("div",Sy,[w(e.$slots,"upload-button"),p("div",ky,[w(e.$slots,"import-buttons")])])])}const Ty=$(fy,[["render",Cy]]),$y=A({name:"app-mobile-overlay-layout",components:{AppSvgSymbol:K},props:{variant:{type:String,default:"default",validator:e=>["default","stock-video-player","export-settings"].includes(e)},isBackButtonVisible:{type:Boolean,default:!1}},emits:{close:null,back:null},methods:{close(){this.$emit("close")},back(){this.$emit("back")}}}),wy={class:"app-mobile-overlay-layout__title"},Ay={key:1,class:"app-mobile-overlay-layout__text-overflow"},My={key:0,class:"app-mobile-overlay-layout__subtitle"},Ry={class:"app-mobile-overlay-layout__content"};function Py(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",{class:F(["app-mobile-overlay-layout",[`app-mobile-overlay-layout--variant-${e.variant}`]])},[p("div",wy,[e.isBackButtonVisible?(d(),h("button",{key:0,class:"app-mobile-overlay-layout__back-button",onClick:t[0]||(t[0]=(...u)=>e.back&&e.back(...u))},[r(a,{"is-block":"",symbol:"arrow-left-bold-mobile",width:24,height:24})])):E("",!0),p("button",{class:"app-mobile-overlay-layout__close-button",onClick:t[1]||(t[1]=(...u)=>e.close&&e.close(...u))},[r(a,{"is-block":"",symbol:e.variant==="export-settings"?"mobile-back-icon":"close-overlay",width:24,height:24},null,8,["symbol"])]),e.variant==="stock-video-player"?(d(),h("div",Ay,[w(e.$slots,"title")])):w(e.$slots,"title",{key:2})]),e.$slots.subtitle!==void 0?(d(),h("div",My,[w(e.$slots,"subtitle")])):E("",!0),p("div",Ry,[w(e.$slots,"default")])],2)}const ti=$($y,[["render",Py]]),Iy=A({name:"app-mobile-overlay",components:{AppSvgSymbol:K},props:{isCloseButtonVisible:{type:Boolean,default:!1}},emits:{close:null},methods:{close(){this.$emit("close")}}}),Ly={class:"app-mobile-overlay"};function Oy(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",Ly,[e.isCloseButtonVisible?(d(),h("button",{key:0,class:"app-mobile-overlay__close-button",onClick:t[0]||(t[0]=(...u)=>e.close&&e.close(...u))},[r(a,{"is-block":"",symbol:"close-overlay",width:30,height:30})])):E("",!0),w(e.$slots,"default")])}const ii=$(Iy,[["render",Oy]]),Fy=A({name:"widget-video-stock-mobile",props:{state:{type:Object,required:!0},controller:{type:Object,required:!0}},emits:["close","select"],computed:{isSkeletonVisible(){return this.state.stockVideoFilter.currentPage===1&&this.state.isStockVideoLoading}},mounted(){this.state.stockVideoItems.length===0&&this.controller.loadStocks()},methods:{close(){this.$emit("close"),this.controller.updateFilter({searchQueryActual:"",searchQueryInput:"",currentPage:1})},searchStockVideo(){this.controller.updateFilter({searchQueryActual:this.state.stockVideoFilter.searchQueryInput,currentPage:1}),this.controller.loadStocks()}}});function Dy(e,t,i,o,s,l){const a=ct,u=mt,m=At,f=Wt,b=ds,T=Ne,C=Ai,M=ht,L=ti,I=ii;return d(),S(I,null,{default:n(()=>[r(L,{onClose:e.close},{title:n(()=>[y(g(e.$t("editor.mobile.stockVideoTab.title")),1)]),default:n(()=>[e.state.stockVideoLoadingError?(d(),S(u,{key:0},{title:n(()=>[y(g(e.$t("appErrorNetworkError.title")),1)]),subtitle:n(()=>[y(g(e.$t("appErrorNetworkError.subtitle")),1)]),buttons:n(()=>[r(a,{state:e.state.isStockVideoLoading?"loading":"default",onClick:t[0]||(t[0]=P=>e.controller.loadStocks())},{default:n(()=>[y(g(e.$t("appErrorNetworkError.reload")),1)]),_:1},8,["state"])]),_:1})):(d(),S(M,{key:"videos","is-infinite-scroll-enabled":!e.state.isStockVideoLastPage&&!e.isSkeletonVisible,"is-loading":e.state.isStockVideoLoading,"is-skeleton-visible":e.isSkeletonVisible,"app-layout":"mobile",onScrollToEnd:t[3]||(t[3]=P=>e.controller.loadNextPage())},G({header:n(()=>[r(m,{value:e.state.stockVideoFilter.searchQueryInput,placeholder:e.$t("editor.stocks.searchVideos"),"app-layout":"mobile",onInput:t[1]||(t[1]=P=>{e.controller.updateStockVideoQuery(P)}),onSubmit:e.searchStockVideo},null,8,["value","placeholder","onSubmit"])]),_:2},[e.state.stockVideoFilter.searchQueryActual===""?{name:"categories",fn:n(()=>[r(f,{categories:e.state.stockVideoCategories,"app-layout":"mobile",onSelect:t[2]||(t[2]=P=>{e.controller.updateStockVideoQuery(P),e.searchStockVideo()})},null,8,["categories"])]),key:"0"}:void 0,e.state.isStockVideoLoading||e.state.stockVideoPresenterItems.length>0?{name:"content",fn:n(()=>[r(C,{items:e.state.stockVideoPresenterItems,"is-skeleton-visible":e.isSkeletonVisible,"app-layout":"mobile","stock-type":"video"},{item:n(P=>[r(b,{item:P.item,"is-mobile":!0,onSelect:j=>e.$emit("select",P.item)},null,8,["item","onSelect"])]),"skeleton-item":n(()=>[r(T)]),_:1},8,["items","is-skeleton-visible"])]),key:"1"}:{name:"empty",fn:n(()=>[y(g(e.$t("editor.stocks.empty")),1)]),key:"2"}]),1032,["is-infinite-scroll-enabled","is-loading","is-skeleton-visible"]))]),_:1},8,["onClose"])]),_:1})}const Vy=$(Fy,[["render",Dy]]),Ny=A({name:"widget-image-stock-mobile",props:{state:{type:Object,required:!0},controller:{type:Object,required:!0}},emits:["close","select"],computed:{isSkeletonVisible(){return this.state.stockImageFilter.currentPage===1&&this.state.isStockImageLoading}},mounted(){this.state.stockImageItems.length===0&&this.controller.loadStocks()},methods:{close(){this.$emit("close"),this.controller.updateFilter({searchQueryActual:"",searchQueryInput:"",currentPage:1})},searchStockImage(){this.controller.updateFilter({searchQueryActual:this.state.stockImageFilter.searchQueryInput,currentPage:1}),this.controller.loadStocks()}}});function By(e,t,i,o,s,l){const a=ct,u=mt,m=At,f=Wt,b=us,T=Ne,C=Ai,M=ht,L=ti,I=ii;return d(),S(I,null,{default:n(()=>[r(L,{onClose:e.close},{title:n(()=>[y(g(e.$t("editor.mobile.stockImageTab.title")),1)]),default:n(()=>[e.state.stockImageLoadingError?(d(),S(u,{key:0},{title:n(()=>[y(g(e.$t("appErrorNetworkError.title")),1)]),subtitle:n(()=>[y(g(e.$t("appErrorNetworkError.subtitle")),1)]),buttons:n(()=>[r(a,{state:e.state.isStockImageLoading?"loading":"default",onClick:t[0]||(t[0]=P=>e.controller.loadStocks())},{default:n(()=>[y(g(e.$t("appErrorNetworkError.reload")),1)]),_:1},8,["state"])]),_:1})):(d(),S(M,{key:"images","is-infinite-scroll-enabled":!e.state.isStockImageLastPage&&!e.isSkeletonVisible,"is-loading":e.state.isStockImageLoading,"is-skeleton-visible":e.isSkeletonVisible,"app-layout":"mobile",onScrollToEnd:t[3]||(t[3]=P=>e.controller.loadNextPage())},G({header:n(()=>[r(m,{value:e.state.stockImageFilter.searchQueryInput,placeholder:e.$t("editor.stocks.searchImages"),"app-layout":"mobile",onInput:t[1]||(t[1]=P=>{e.controller.updateStockImageQuery(P)}),onSubmit:e.searchStockImage},null,8,["value","placeholder","onSubmit"])]),_:2},[e.state.stockImageFilter.searchQueryActual===""?{name:"categories",fn:n(()=>[r(f,{categories:e.state.stockImageCategories,"app-layout":"mobile",onSelect:t[2]||(t[2]=P=>{e.controller.updateStockImageQuery(P),e.searchStockImage()})},null,8,["categories"])]),key:"0"}:void 0,e.state.isStockImageLoading||e.state.stockImagePresenterItems.length>0?{name:"content",fn:n(()=>[r(C,{items:e.state.stockImagePresenterItems,"is-skeleton-visible":e.isSkeletonVisible,"app-layout":"mobile"},{item:n(P=>[r(b,{item:P.item,onSelect:j=>e.$emit("select",P.item)},null,8,["item","onSelect"])]),"skeleton-item":n(()=>[r(T)]),_:1},8,["items","is-skeleton-visible"])]),key:"1"}:{name:"empty",fn:n(()=>[y(g(e.$t("editor.stocks.empty")),1)]),key:"2"}]),1032,["is-infinite-scroll-enabled","is-loading","is-skeleton-visible"]))]),_:1},8,["onClose"])]),_:1})}const jy=$(Ny,[["render",By]]),zy=A({name:"widget-audio-stock-mobile",components:{AppSelect:$t,AppSelectOption:wt,AppSvgSymbol:K},props:{state:{type:Object,required:!0},filterState:{type:Object,required:!0},controller:{type:Object,required:!0},filterController:{type:Object,required:!0},appLayout:{type:String,default:"mobile"},timelinePlayEventEmitter:{type:Object,default:void 0},playerFullscreenEventEmitter:{type:Object,default:void 0}},emits:["close","item-select","item-played"],data(){return{filterVisibleEventEmitter:new ue,loadedItemIds:[]}},computed:{stockItems(){return this.state.activeTypeId===H.MUSIC?this.state.stockMusicItems:this.state.stockSfxItems},stockCategories(){return this.state.activeTypeId===H.MUSIC?this.state.stockMusicCategories:this.state.stockSfxCategories},isStockLastPage(){return this.state.activeTypeId===H.MUSIC?this.state.isStockMusicLastPage:this.state.isStockSfxLastPage},currentFilter(){return this.state.activeTypeId===H.MUSIC?this.filterState.currentMusicFilter:this.filterState.currentSfxFilter},activeFilter(){return this.state.activeTypeId===H.MUSIC?this.filterState.activeMusicFilter:this.filterState.activeSfxFilter},isFilterChanged(){const e=["genres","moods","movements","themes","durations"];return Object.entries(this.activeFilter).some(([t,i])=>e.includes(t)&&Array.isArray(i)&&i.length>0)},isLoading(){return this.state.isStockAudioLoading||this.stockItems.some(e=>!this.loadedItemIds.includes(e.id))},hiddenItemIds(){const e=this.$appConfig.stocksLoadPerPage,t=(this.activeFilter.currentPage-1)*e,i=this.stockItems.slice(t,t+e);return i.some(o=>!this.loadedItemIds.includes(o.id))?i.map(o=>o.id):[]},skeletonsCount(){const e=this.currentFilter.currentPage;return this.isLoading&&e>1?3:this.isLoading&&e===1?6:0}},watch:{"filterState.isVisible"(){this.filterState.isVisible&&this.filterVisibleEventEmitter.fire("show-filter")}},mounted(){this.state.activeTypeId===H.MUSIC&&this.state.stockMusicItems.length===0?this.controller.loadStocks(H.MUSIC):this.state.stockSfxItems.length===0&&this.controller.loadStocks(H.SFX)},methods:{close(){this.$emit("close"),this.controller.updateFilter(H.MUSIC,{searchQueryActual:"",searchQueryInput:"",currentPage:1}),this.controller.updateFilter(H.SFX,{searchQueryActual:"",searchQueryInput:"",currentPage:1}),this.setActiveTypeId(H.MUSIC)},setActiveTypeId(e){this.controller.setActiveTypeId(e),this.filterController.setActiveTab(e===H.MUSIC?"genres":"themes"),this.controller.loadStocks(e)},handleClickFilterButton(e){e.stopImmediatePropagation(),this.filterController.changeVisibility(!this.filterState.isVisible)},setPosterLoaded(e){this.loadedItemIds.includes(e.id)||this.loadedItemIds.push(e.id)}}});function Hy(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppSelectOption"),m=D("AppSelect"),f=ps,b=At,T=Wt,C=ct,M=mt,L=cs,I=ms,P=hs,j=gs,B=ht,Y=ti,ve=ii;return d(),S(ve,null,{default:n(()=>[r(Y,{onClose:e.close},{title:n(()=>[y(g(e.$t("editor.mobile.stockAudioTab.title")),1)]),default:n(()=>[(d(),S(B,{key:e.state.activeTypeId,variant:"audio","app-layout":e.appLayout,"is-infinite-scroll-enabled":!e.isStockLastPage&&!e.isLoading,"is-loading":e.state.isStockAudioLoading,"is-skeleton-visible":e.isLoading&&e.currentFilter.currentPage===1,onScrollToEnd:t[4]||(t[4]=x=>e.controller.loadNextPage(e.state.activeTypeId))},G({_:2},[e.state.isStockAudioLoadingFailed?void 0:{name:"header",fn:n(()=>[r(b,{value:e.currentFilter.searchQueryInput,placeholder:e.state.activeTypeId==="music"?e.$t("editor.stocks.searchMusic"):e.$t("editor.stocks.searchSfx"),"app-layout":e.appLayout,"is-disabled":e.filterState.isVisible,onInput:t[0]||(t[0]=x=>e.controller.updateSearchQuery(e.state.activeTypeId,x)),onSubmit:t[1]||(t[1]=x=>e.controller.search(e.state.activeTypeId))},{buttons:n(()=>[r(m,{"active-item-id":e.state.activeTypeId,items:e.state.audioTypes,"is-disabled":e.filterState.isVisible,"app-layout":e.appLayout,variant:"stock-audio-type","data-testid":"stocks-audio-type-select"},{"active-item":n(x=>[y(g(e.$t(`editor.stocks.audioTypes.${x.activeItem.name}`)),1)]),icon:n(()=>[r(a,{symbol:"svg-chevron-down",width:8,height:16})]),item:n(x=>[r(u,{type:"button","is-active":x.isActive,"get-scrollable-parent-callback":x.getScrollableParentCallback,"font-size":13,variant:"stock-audio-type",onClick:He=>{x.hideDropdown(),e.setActiveTypeId(x.item.id)}},{default:n(()=>[y(g(e.$t(`editor.stocks.audioTypes.${x.item.name}`)),1)]),_:2},1032,["is-active","get-scrollable-parent-callback","onClick"])]),_:1},8,["active-item-id","items","is-disabled","app-layout"]),r(f,{"is-changed":e.isFilterChanged,"data-testid":"stocks-audio-filter-button",onMousedown:e.handleClickFilterButton,onTouchstart:_(e.handleClickFilterButton,["prevent"])},{default:n(()=>[r(a,{symbol:"svg-filter",width:20,height:20})]),_:1},8,["is-changed","onMousedown","onTouchstart"])]),_:1},8,["value","placeholder","app-layout","is-disabled"])]),key:"0"},!e.state.isStockAudioLoadingFailed&&(e.isLoading||e.stockItems.length>0)?{name:"categories",fn:n(()=>[r(T,{"app-layout":e.appLayout,categories:e.stockCategories,onSelect:t[2]||(t[2]=x=>{e.controller.updateSearchQuery(e.state.activeTypeId,x),e.controller.search(e.state.activeTypeId)})},null,8,["app-layout","categories"])]),key:"1"}:void 0,e.state.isStockAudioLoadingFailed?{name:"empty",fn:n(()=>[r(M,null,{title:n(()=>[y(g(e.$t("appErrorNetworkError.title")),1)]),subtitle:n(()=>[y(g(e.$t("appErrorNetworkError.subtitle")),1)]),buttons:n(()=>[r(C,{state:e.state.isStockAudioLoading?"loading":"default",onClick:t[3]||(t[3]=x=>e.controller.search(e.state.activeTypeId))},{default:n(()=>[y(g(e.$t("appErrorNetworkError.reload")),1)]),_:1},8,["state"])]),_:1})]),key:"2"}:e.isLoading||e.stockItems.length>0?{name:"content",fn:n(()=>[r(P,{items:e.stockItems,skeletons:e.skeletonsCount,"hidden-item-ids":e.hiddenItemIds},{item:n(x=>[(d(),S(L,{key:`stock-item-${x.item.provider}-${x.item.id}`,item:x.item,"sibling-play-event-emitter":x.eventEmitter,"timeline-play-event-emitter":e.timelinePlayEventEmitter,"player-fullscreen-event-emitter":e.playerFullscreenEventEmitter,"filter-visible-event-emitter":e.filterVisibleEventEmitter,onSelect:He=>e.$emit("item-select",x.item),onPlay:He=>{x.play(He),e.$emit("item-played")},onPreviewLoaded:He=>e.setPosterLoaded(x.item)},null,8,["item","sibling-play-event-emitter","timeline-play-event-emitter","player-fullscreen-event-emitter","filter-visible-event-emitter","onSelect","onPlay","onPreviewLoaded"]))]),"skeleton-item":n(()=>[r(I)]),_:1},8,["items","skeletons","hidden-item-ids"])]),key:"3"}:{name:"empty",fn:n(()=>[y(g(e.$t("editor.stocks.empty")),1)]),key:"4"},e.filterState.isVisible?{name:"content-overlay",fn:n(()=>[r(j,{state:e.filterState,"stocks-state":e.state,controller:e.filterController,"stocks-controller":e.controller,"app-layout":e.appLayout},null,8,["state","stocks-state","controller","stocks-controller","app-layout"])]),key:"5"}:void 0]),1032,["app-layout","is-infinite-scroll-enabled","is-loading","is-skeleton-visible"]))]),_:1},8,["onClose"])]),_:1})}const _y=$(zy,[["render",Hy]]),Uy=A({name:"app-console-element-category-title",props:{activeElementCategory:{type:String,default:void 0}}}),qy={class:"app-console-element-category-title"},Wy={class:"app-console-element-category-title__caption"},Gy={key:0,class:"app-console-element-category-title__badge"};function Xy(e,t,i,o,s,l){const a=Yn;return d(),h("div",qy,[p("div",Wy,g(e.activeElementCategory!==void 0?e.$t(`appConsoleElementCategories.categories.${e.activeElementCategory}`):e.$t("editor.mobile.elementsTab.title")),1),e.activeElementCategory==="sticker"||e.activeElementCategory==="gif"?(d(),h("div",Gy,[r(a,{width:42,height:9,"svg-symbol":"logo-giphy"})])):E("",!0)])}const Yy=$(Uy,[["render",Xy]]),Ky=A({name:"widget-element-stock-mobile",props:{state:{type:Object,required:!0},controller:{type:Object,required:!0}},emits:["close","item-select"],computed:{previewType(){return no()?ze.PREVIEW_2X:ze.PREVIEW_1X},searchPlaceholder(){switch(this.state.activeElementCategory){case we.GIF:return this.$t("appConsoleElementCategories.searchGIFs");case we.STICKER:return this.$t("appConsoleElementCategories.searchStickers");case we.EMOJI:return this.$t("appConsoleElementCategories.searchEmojis");default:return""}},isSkeletonVisible(){return this.state.isElementLoading&&(this.state.activeElementCategory===void 0||this.state.currentPage===1)}},mounted(){this.controller.showElementsIndex()},methods:{handleScrollToEnd(){this.state.activeElementCategory!==void 0&&this.controller.loadNextPage(this.state.activeElementCategory)},handleClose(){this.controller.showElementsIndex(),this.$emit("close")},handleSelectElement(e){this.$emit("item-select",e)},closeSearch(){this.controller.toggleSearch(),this.controller.searchElements("")}}});function Zy(e,t,i,o,s,l){const a=Yy,u=Xn,m=ct,f=mt,b=Kn,T=ho,C=Zn,M=Qn,L=ht,I=ti,P=ii;return d(),S(P,null,{default:n(()=>[r(I,{"is-back-button-visible":e.state.activeElementCategory!==void 0,onClose:e.handleClose,onBack:t[5]||(t[5]=j=>e.controller.showElementsIndex())},G({title:n(()=>[r(a,{"active-element-category":e.state.activeElementCategory},null,8,["active-element-category"])]),default:n(()=>[r(L,{key:"element","is-infinite-scroll-enabled":!e.state.isElementLastPage&&!e.isSkeletonVisible,"is-loading":e.state.isElementLoading,"is-skeleton-visible":e.isSkeletonVisible,"app-layout":"mobile",variant:"element",onScrollToEnd:e.handleScrollToEnd},G({_:2},[e.state.isElementLoadingFailed&&e.state.activeElementCategory!==void 0?{name:"empty",fn:n(()=>[r(f,null,{title:n(()=>[y(g(e.$t("appErrorNetworkError.title")),1)]),subtitle:n(()=>[y(g(e.$t("appErrorNetworkError.subtitle")),1)]),buttons:n(()=>[r(m,{state:e.state.isElementLoading?"loading":"default",onClick:t[2]||(t[2]=j=>e.controller.searchElements(e.state.searchQueryInput))},{default:n(()=>[y(g(e.$t("appErrorNetworkError.reload")),1)]),_:1},8,["state"])]),_:1})]),key:"0"}:e.state.isElementLoading||e.state.elementItems.length>0||!e.state.activeElementCategory?{name:"content",fn:n(()=>[e.state.activeElementCategory?(d(),S(b,{key:0,type:e.state.activeElementCategory,items:e.state.elementItems,"is-skeleton-visible":e.isSkeletonVisible,"app-layout":"mobile",onSelectElement:e.handleSelectElement},null,8,["type","items","is-skeleton-visible","onSelectElement"])):(d(),S(M,{key:1,categories:e.state.elementCategories,"is-skeleton-visible":e.isSkeletonVisible,"app-layout":"mobile",onShowCategory:t[4]||(t[4]=j=>e.controller.showCategory(j))},{category:n(j=>[r(C,{elements:j.category.previewItems,category:j.category.type,"is-skeleton-visible":e.isSkeletonVisible,"app-layout":"mobile",onShowCategory:t[3]||(t[3]=B=>e.controller.showCategory(B))},{item:n(B=>[r(T,{element:B.item,"select-event-emitter":B.selectEventEmitter,"preview-type":e.previewType,"is-skeleton-visible":e.isSkeletonVisible,onSelect:e.handleSelectElement},null,8,["element","select-event-emitter","preview-type","is-skeleton-visible","onSelect"])]),_:2},1032,["elements","category","is-skeleton-visible"])]),_:1},8,["categories","is-skeleton-visible"]))]),key:"1"}:{name:"empty",fn:n(()=>[y(g(e.$t("editor.stocks.empty")),1)]),key:"2"}]),1032,["is-infinite-scroll-enabled","is-loading","is-skeleton-visible","onScrollToEnd"])]),_:2},[e.state.activeElementCategory!==void 0&&e.state.activeElementCategory!=="shape"?{name:"subtitle",fn:n(()=>[r(u,{value:e.state.searchQueryInput,placeholder:e.searchPlaceholder,"app-layout":"mobile",onClose:e.closeSearch,onInput:t[0]||(t[0]=j=>e.controller.setSearchQuery(j)),onSubmit:t[1]||(t[1]=j=>e.controller.searchElements(j))},null,8,["value","placeholder","onClose"])]),key:"0"}:void 0]),1032,["is-back-button-visible","onClose"])]),_:1})}const Qy=$(Ky,[["render",Zy]]),Jy=A({name:"app-console-mobile-toolbar-button",props:{isDisabled:{type:Boolean,default:!1}}}),xy={class:"app-console-mobile-toolbar-button__icon"},e0={class:"app-console-mobile-toolbar-button__text"};function t0(e,t,i,o,s,l){return d(),h("button",J({class:["app-console-mobile-toolbar-button",{"app-console-mobile-toolbar-button--disabled":e.isDisabled}]},e.$attrs),[p("span",xy,[w(e.$slots,"icon")]),p("span",e0,[w(e.$slots,"text")])],16)}const i0=$(Jy,[["render",t0]]),o0=A({name:"app-console-mobile-toolbar-buttons-layout",methods:{sortSlots:Jt}}),n0={class:"app-console-mobile-toolbar-buttons-layout"};function s0(e,t,i,o,s,l){return d(),h("div",n0,[(d(!0),h(N,null,q(e.sortSlots(e.$slots),(a,u)=>(d(),h("div",{key:u,class:"app-console-mobile-toolbar-buttons-layout__item"},[w(e.$slots,u)]))),128)),w(e.$slots,"default")])}const a0=$(o0,[["render",s0]]),r0=A({name:"app-console-mobile-toolbar",components:{AppSvgSymbol:K},props:{isVisible:{type:Boolean,default:!1}},emits:{close:null},methods:{close(){this.$emit("close")}}}),l0={key:0,class:"app-console-mobile-toolbar"},d0={class:"app-console-mobile-toolbar__tool-buttons"};function u0(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),S(pt,{appear:"",name:"popup"},{default:n(()=>[e.isVisible?(d(),h("div",l0,[p("div",d0,[w(e.$slots,"default")]),p("button",{class:"app-console-mobile-toolbar__close-button",onClick:t[0]||(t[0]=(...u)=>e.close&&e.close(...u))},[r(a,{symbol:"mobile-toolbar-close-button-icon"})])])):E("",!0)]),_:3})}const p0=$(r0,[["render",u0]]),c0=A({name:"app-console-mobile-tab-content",props:{width:{type:String,default:"default"},isFullHeight:{type:Boolean,default:!1}}});function m0(e,t,i,o,s,l){return d(),h("div",{class:F(["app-console-mobile-tab-content",[`app-console-mobile-tab-content--width-${e.width}`,e.isFullHeight?"app-console-mobile-tab-content--full-height":""]])},[w(e.$slots,"default")],2)}const h0=$(c0,[["render",m0]]),g0=A({name:"app-console-settings-audio-fade",props:{volumeFadeInTime:{type:Number,required:!0},volumeFadeOutTime:{type:Number,required:!0},playbackDuration:{type:Number,required:!0}},emits:["audio-volume-fade-in-time-change-start","audio-volume-fade-in-time-change","audio-volume-fade-in-time-change-finish","audio-volume-fade-out-time-change-start","audio-volume-fade-out-time-change","audio-volume-fade-out-time-change-finish"],computed:{fadeMaxDuration(){const e=Math.min(Math.round(this.playbackDuration*.45),5e3);return Math.ceil(e/100)*100}}}),v0={class:"app-console-settings-audio-fade"},f0={class:"app-console-settings-fade-volume__fade-in"},b0={class:"app-console-settings-audio-volume__fade-out"};function y0(e,t,i,o,s,l){const a=We,u=Ge,m=Xe;return d(),h("div",v0,[p("div",f0,[r(m,{min:0,max:e.fadeMaxDuration,step:.1,value:e.volumeFadeInTime,onStart:t[0]||(t[0]=f=>e.$emit("audio-volume-fade-in-time-change-start")),onChange:t[1]||(t[1]=f=>e.$emit("audio-volume-fade-in-time-change",f)),onFinish:t[2]||(t[2]=f=>e.$emit("audio-volume-fade-in-time-change-finish"))},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsAudioVolume.fadeIn")),1)]),label:n(()=>[p("span",null,g((e.volumeFadeInTime/1e3).toFixed(1))+g(e.$t("appConsoleSettingsAudioVolume.secondsShort")),1)]),line:n(f=>[r(a,{"is-hovered":f.isHovered},null,8,["is-hovered"])]),stick:n(f=>[r(u,{"is-hovered":f.isHovered},null,8,["is-hovered"])]),_:1},8,["max","value"])]),p("div",b0,[r(m,{min:0,max:e.fadeMaxDuration,step:.1,value:e.volumeFadeOutTime,onStart:t[3]||(t[3]=f=>e.$emit("audio-volume-fade-out-time-change-start")),onChange:t[4]||(t[4]=f=>e.$emit("audio-volume-fade-out-time-change",f)),onFinish:t[5]||(t[5]=f=>e.$emit("audio-volume-fade-out-time-change-finish"))},{title:n(()=>[p("span",null,g(e.$t("appConsoleSettingsAudioVolume.fadeOut")),1)]),label:n(()=>[p("span",null,g((e.volumeFadeOutTime/1e3).toFixed(1))+g(e.$t("appConsoleSettingsAudioVolume.secondsShort")),1)]),line:n(f=>[r(a,{"is-hovered":f.isHovered},null,8,["is-hovered"])]),stick:n(f=>[r(u,{"is-hovered":f.isHovered},null,8,["is-hovered"])]),_:1},8,["max","value"])])])}const E0=$(g0,[["render",y0]]),S0=A({name:"app-console-settings-custom-color",props:{color:{type:Object,default:void 0},isAlphaEnabled:{type:Boolean,default:!1},spectrumSize:{type:String,default:lt.DEFAULT}},emits:{"color-change-start":null,"color-change":e=>!0,"color-change-finish":null}}),k0={class:"app-console-settings-custom-color"},C0={class:"app-console-settings-custom-color__color-picker"};function T0(e,t,i,o,s,l){const a=wi;return d(),h("div",k0,[p("div",C0,[r(a,{"is-alpha-enabled":e.isAlphaEnabled,color:e.color,size:e.spectrumSize,onColorChangeStart:t[0]||(t[0]=u=>e.$emit("color-change-start")),onColorChange:t[1]||(t[1]=u=>e.$emit("color-change",u)),onColorChangeFinish:t[2]||(t[2]=u=>e.$emit("color-change-finish"))},null,8,["is-alpha-enabled","color","size"])])])}const $0=$(S0,[["render",T0]]),w0=A({name:"app-console-settings-custom-gradient",props:{color:{type:Object,required:!0},isAlphaEnabled:{type:Boolean,default:!1},isGradientEnabled:{type:Boolean,default:!1},solidSpectrumSize:{type:String,default:lt.DEFAULT},gradientSpectrumSize:{type:String,default:lt.DEFAULT}},emits:["color-change-start","color-change-finish","color-change"],data(){return{activeGradientColorIndex:0}},methods:{setActiveGradientColorIndex(e){this.activeGradientColorIndex=e},emitColorChange(e){const t=[...this.color.linearGradientColors];switch(t[this.activeGradientColorIndex]=e,this.color?.type){case Tt.SOLID:this.$emit("color-change",{...this.color,solidColor:e});break;case Tt.LINEAR_GRADIENT:this.$emit("color-change",{...this.color,linearGradientColors:t});break}},emitAngleChange(e){this.$emit("color-change",{...this.color,linearGradientSkewAngle:e}),this.$emit("color-change-finish")}}}),A0={class:"app-console-settings-custom-gradient"},M0={class:"app-console-settings-custom-gradient__color-picker"},R0={class:"app-console-settings-custom-gradient__gradient-header"},P0={class:"app-console-settings-custom-gradient__gradient-colors"};function I0(e,t,i,o,s,l){const a=wi,u=ss,m=vo,f=as;return d(),h("div",A0,[p("div",M0,[e.color.type==="solid"?(d(),S(a,{key:0,"is-alpha-enabled":e.isAlphaEnabled,color:e.color.solidColor,size:e.solidSpectrumSize,onColorChangeStart:t[0]||(t[0]=b=>e.$emit("color-change-start")),onColorChange:e.emitColorChange,onColorChangeFinish:t[1]||(t[1]=b=>e.$emit("color-change-finish"))},null,8,["is-alpha-enabled","color","size","onColorChange"])):E("",!0),e.isGradientEnabled&&e.color.type==="linear-gradient"?(d(),h(N,{key:1},[p("div",R0,[p("div",P0,[r(u,{color:e.color.linearGradientColors[0],"is-active":e.activeGradientColorIndex===0,onClick:t[2]||(t[2]=b=>e.setActiveGradientColorIndex(0))},null,8,["color","is-active"]),r(m,{fill:e.color,class:"app-console-settings-custom-gradient__gradient-preview"},null,8,["fill"]),r(u,{color:e.color.linearGradientColors[1],"is-active":e.activeGradientColorIndex===1,onClick:t[3]||(t[3]=b=>e.setActiveGradientColorIndex(1))},null,8,["color","is-active"])]),r(f,{value:e.color.linearGradientSkewAngle,class:"app-console-settings-custom-gradient__skew-input",onInput:e.emitAngleChange},null,8,["value","onInput"])]),p("div",null,[r(a,{"is-alpha-enabled":e.isAlphaEnabled,color:e.color.linearGradientColors[e.activeGradientColorIndex],size:e.gradientSpectrumSize,onColorChangeStart:t[4]||(t[4]=b=>e.$emit("color-change-start")),onColorChange:e.emitColorChange,onColorChangeFinish:t[5]||(t[5]=b=>e.$emit("color-change-finish"))},null,8,["is-alpha-enabled","color","size","onColorChange"])])],64)):E("",!0)])])}const L0=$(w0,[["render",I0]]),O0=A({name:"app-console-mobile"}),F0={class:"app-console-mobile__menu"},D0={class:"app-console-mobile__popup-settings"},V0={class:"app-console-mobile__popup-toolbar"},N0={class:"app-console-mobile__opaque-overlay"},B0={class:"app-console-mobile__shadow-overlay"};function j0(e,t,i,o,s,l){return d(),h("div",{class:F(["app-console-mobile",{"app-console-mobile--height-extended":e.$slots["popup-settings"]!==void 0}])},[p("div",F0,[w(e.$slots,"menu")]),p("div",D0,[w(e.$slots,"popup-settings")]),p("div",V0,[w(e.$slots,"popup-toolbar")]),p("div",N0,[w(e.$slots,"opaque-overlay")]),p("div",B0,[w(e.$slots,"shadow-overlay")])],2)}const z0=$(O0,[["render",j0]]),H0=A({name:"app-button-group",methods:{sortSlots:Jt}}),_0={class:"app-button-group"};function U0(e,t,i,o,s,l){return d(),h("div",_0,[(d(!0),h(N,null,q(e.sortSlots(e.$slots),(a,u)=>(d(),h("div",{key:u,class:"app-button-group__item"},[w(e.$slots,u)]))),128))])}const q0=$(H0,[["render",U0]]),W0=A({name:"app-player-controls",components:{AppButton:oe,AppSvgSymbol:K},props:{isPlaying:{type:Boolean,default:!1},isPlayAvailable:{type:Boolean,default:!1},isPreviousAvailable:{type:Boolean,default:!1},isNextAvailable:{type:Boolean,default:!1}},emits:["move-to-previous-position","move-to-next-position","toggle-play"],methods:{previous(){this.$emit("move-to-previous-position")},next(){this.$emit("move-to-next-position")},togglePlay(){this.$emit("toggle-play")}}}),G0={class:"app-player-controls"};function X0(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppButton");return d(),h("div",G0,[r(u,{class:"app-player-controls__navigation-button",variant:"icon","is-disabled":!e.isPreviousAvailable,"fixed-width":32,"fixed-height":30,onClick:e.previous},{default:n(()=>[r(a,{class:"app-player-controls__button-icon",symbol:"rewind",width:20,height:20})]),_:1},8,["is-disabled","onClick"]),r(u,{class:"app-player-controls__play-pause-button",variant:"icon","is-disabled":!e.isPlayAvailable,"fixed-width":30,"fixed-height":30,"rounding-value":100,onClick:e.togglePlay},{default:n(()=>[r(a,{class:"app-player-controls__button-icon app-player-controls__play-pause-icon",symbol:e.isPlaying?"pause":"play",width:20,height:20},null,8,["symbol"])]),_:1},8,["is-disabled","onClick"]),r(u,{class:"app-player-controls__navigation-button",variant:"icon","is-disabled":!e.isNextAvailable,"fixed-width":32,"fixed-height":30,onClick:e.next},{default:n(()=>[r(a,{class:"app-player-controls__button-icon",symbol:"forward",width:20,height:20})]),_:1},8,["is-disabled","onClick"])])}const Y0=$(W0,[["render",X0]]),K0=A({name:"app-timeline-timings",props:{currentTime:{type:Number,required:!0},timelineLength:{type:Number,required:!0},isDisabled:{type:Boolean,default:!1}},computed:{formattedCurrentTime(){return Ue(this.currentTime,{isShowMilliseconds:!0,referenceTime:this.timelineLength})},formattedTimelineLength(){return Ue(this.timelineLength,{isShowMilliseconds:!0})}}}),Z0={class:"app-timeline-timings__current"},Q0={class:"app-timeline-timings__total"};function J0(e,t,i,o,s,l){return d(),h("div",{class:F(["app-timeline-timings",{"app-timeline-timings--disabled":e.isDisabled}])},[p("div",Z0,g(e.formattedCurrentTime),1),t[0]||(t[0]=p("div",{class:"app-timeline-timings__delimiter"}," / ",-1)),p("div",Q0,g(e.formattedTimelineLength),1)],2)}const x0=$(K0,[["render",J0]]),eE=A({name:"app-timeline-settings",components:{AppSwitch:ro},props:{variant:{type:String,required:!0},isSnapEnabled:{type:Boolean,required:!0},isRippleEnabled:{type:Boolean,required:!0}},emits:{"snap-setting-change":e=>!0,"ripple-setting-change":e=>!0},data(){return{isDropdownVisible:!1,dropdownLeftOffset:0,dropdownTopOffset:0,dropdownPositionCalculationRequestId:void 0}},watch:{async isDropdownVisible(){this.isDropdownVisible?await this.showDropdown():this.hideDropdown()}},beforeUnmount(){this.dropdownPositionCalculationRequestId!==void 0&&window.cancelAnimationFrame(this.dropdownPositionCalculationRequestId),this.hideDropdown()},methods:{async showDropdown(){this.isDropdownVisible=!0,await this.$nextTick(),await this.calculateDropdownPosition(),this.bindListenersForDropdown()},hideDropdown(){this.isDropdownVisible=!1,this.unbindListenersForDropdown()},toggleDropdown(){this.isDropdownVisible?this.hideDropdown():this.showDropdown()},bindListenersForDropdown(){document.addEventListener("mousedown",this.checkClickOutsideDropdownAndHide,{capture:!0}),window.addEventListener("resize",this.requestDropdownPositionCalculation),document.addEventListener("dragstart",this.hideDropdown),document.addEventListener("touchstart",this.checkClickOutsideDropdownAndHide,{capture:!0})},unbindListenersForDropdown(){document.removeEventListener("mousedown",this.checkClickOutsideDropdownAndHide,{capture:!0}),window.removeEventListener("resize",this.requestDropdownPositionCalculation),document.removeEventListener("dragstart",this.hideDropdown),document.removeEventListener("touchstart",this.checkClickOutsideDropdownAndHide,{capture:!0})},requestDropdownPositionCalculation(){this.dropdownPositionCalculationRequestId===void 0&&(this.dropdownPositionCalculationRequestId=window.requestAnimationFrame(async()=>{await this.calculateDropdownPosition(),this.dropdownPositionCalculationRequestId=void 0}))},async calculateDropdownPosition(){const e=this.$refs.button,t=this.$refs.dropdown;if(e===void 0||t===void 0)return;const{x:i,y:o}=await uo(e,t,{placement:"top-end",middleware:[co({mainAxis:5,crossAxis:0}),po({crossAxis:!0,fallbackPlacements:["top-start"]}),br({padding:8})]});this.dropdownTopOffset=o,this.dropdownLeftOffset=i},checkClickOutsideDropdownAndHide(e){const t=e.target,i=this.$refs.dropdown,o=this.$refs.button;!this.$el.contains(t)&&i!==void 0&&i!==t&&!i.contains(t)&&o!==void 0&&o!==t&&!o.contains(t)&&this.hideDropdown()}}}),tE={class:"app-timeline-settings"},iE={ref:"button",class:"app-timeline-settings__button"},oE={class:"app-timeline-settings__item-switch"},nE={class:"app-timeline-settings__item-title"},sE={class:"app-timeline-settings__item-switch"},aE={class:"app-timeline-settings__item-title"};function rE(e,t,i,o,s,l){const a=tt,u=D("AppSwitch"),m=Ar;return d(),h("div",tE,[r(a,{offset:8,"is-disabled":e.isDropdownVisible},{text:n(()=>[y(g(e.$t("editor.timelineActions.timelineSettings")),1)]),anchor:n(()=>[p("div",iE,[w(e.$slots,"button",{isDropdownVisible:e.isDropdownVisible,toggleDropdown:e.toggleDropdown})],512)]),_:3},8,["is-disabled"]),r(m,null,{default:n(()=>[(d(),S(Ci,{to:"#teleport-target-dropdown"},[r(pt,{name:"fade"},{default:n(()=>[e.isDropdownVisible?(d(),h("div",{key:0,ref:"dropdown",class:"app-timeline-settings__dropdown",style:z({transform:`translate3d(${e.dropdownLeftOffset}px, ${e.dropdownTopOffset}px, 0)`})},[p("div",oE,[r(u,{variant:e.variant==="mobile"?"timeline-settings-mobile":"timeline-settings","is-active":e.isSnapEnabled,onChange:t[0]||(t[0]=f=>e.$emit("snap-setting-change",f))},{label:n(()=>[p("div",nE,g(e.$t("editor.timelineActions.toggleSnap")),1)]),_:1},8,["variant","is-active"])]),p("div",sE,[r(u,{variant:e.variant==="mobile"?"timeline-settings-mobile":"timeline-settings","is-active":e.isRippleEnabled,onChange:t[1]||(t[1]=f=>e.$emit("ripple-setting-change",f))},{label:n(()=>[p("div",aE,g(e.$t("editor.timelineActions.toggleRipple")),1)]),_:1},8,["variant","is-active"])])],4)):E("",!0)]),_:1})]))]),_:1})])}const lE=$(eE,[["render",rE]]),dE=A({name:"app-timeline-button-divider"}),uE={class:"app-timeline-button-divider"};function pE(e,t,i,o,s,l){return d(),h("div",uE)}const cE=$(dE,[["render",pE]]),mE=A({name:"app-timeline-toolbar",props:{isConsoleMenuHeightExtended:{type:Boolean,default:!1}},emits:{"mousedown-on-free-space":null},methods:{checkIfMouseDownOnFreeSpace(e){const t=e.target;!(t instanceof HTMLButtonElement)&&t.closest("button")===null&&this.$emit("mousedown-on-free-space")},callCallbackOnlyAfterBlurOnActiveInputElement:Qt}}),hE={class:"app-timeline-toolbar__left-side"},gE={class:"app-timeline-toolbar__center-side"},vE={class:"app-timeline-toolbar__player-controls"},fE={class:"app-timeline-toolbar__timings"},bE={class:"app-timeline-toolbar__right-side"};function yE(e,t,i,o,s,l){const a=cE;return d(),h("div",{class:F(["app-timeline-toolbar",{"app-timeline-toolbar--console-menu-height-extended":e.isConsoleMenuHeightExtended}]),onMousedown:t[0]||(t[0]=u=>e.callCallbackOnlyAfterBlurOnActiveInputElement(()=>e.checkIfMouseDownOnFreeSpace(u)))},[p("div",hE,[w(e.$slots,"track-element-options")]),p("div",gE,[p("div",vE,[w(e.$slots,"player-controls")]),p("div",fE,[w(e.$slots,"timings")])]),p("div",bE,[w(e.$slots,"timeline-settings"),r(a),w(e.$slots,"zoom-out"),w(e.$slots,"zoom-in"),w(e.$slots,"fit-to-screen"),r(a),w(e.$slots,"fullscreen")])],34)}const EE=$(mE,[["render",yE]]),SE=A({name:"app-timeline-toolbar-mobile",emits:["mousedown-on-free-space"],methods:{checkIfMouseDownOnFreeSpace(e){const t=e.target;!(t instanceof HTMLButtonElement)&&t.closest("button")===null&&this.$emit("mousedown-on-free-space")},callCallbackOnlyAfterBlurOnActiveInputElement:Qt}}),kE={class:"app-timeline-toolbar__left-side"},CE={class:"app-timeline-toolbar__right-side"};function TE(e,t,i,o,s,l){return d(),h("div",{class:"app-timeline-toolbar-mobile",onMousedown:t[0]||(t[0]=a=>e.callCallbackOnlyAfterBlurOnActiveInputElement(()=>e.checkIfMouseDownOnFreeSpace(a)))},[p("div",kE,[w(e.$slots,"timeline-settings")]),p("div",CE,[w(e.$slots,"zoom-out"),w(e.$slots,"zoom-in"),w(e.$slots,"fit-to-screen")])],32)}const $E=$(SE,[["render",TE]]),wE=60,AE=A({name:"app-timeline-ruler",props:{timelineScale:{type:Number,required:!0},timelineLength:{type:Number,required:!0},isPointerCursorActive:{type:Boolean,default:!1}},emits:{"timeline-cursor-move-start":null,"current-time-update":e=>!0,"timeline-cursor-move-stop":null},data(){return{rulerRect:void 0}},computed:{divisions(){const e=s=>[...Array(s).keys()],t=(s,l)=>{const a=Math.ceil(l/s);return e(a).map(u=>u*s)};let i;switch(this.divisionValue){case 0:i=t(1e3,this.timelineLength);break;case 1:i=t(15*1e3,this.timelineLength);break;case 2:i=t(300*1e3,this.timelineLength);break;default:throw new Error("unknown divisions value")}const o=Math.ceil(wE/this.divisionWidth);return i.map((s,l)=>{const a={isLeftSerifVisible:!0,isRightSerifVisible:!1};if(l===i.length-1&&(a.isRightSerifVisible=!0),l%o===0)a.leftLabel=this.convertToHumanReadableTime(s);else if(l===i.length-1&&l%o===o-1){const u=s-i[l-1];a.rightLabel=this.convertToHumanReadableTime(s+u)}return a})},divisionWidth(){switch(this.divisionValue){case 0:return this.timelineScale;case 1:return this.timelineScale*15;case 2:return this.timelineScale*300;default:throw new Error("unknown division value")}},divisionValue(){return this.timelineScale>5?0:this.timelineScale*15>5?1:2}},beforeUnmount(){this.stopPointerMoving()},methods:{convertToHumanReadableTime(e){const t=l=>`${l}`.padStart(2,"0"),i=Math.floor(e/1e3/3600),o=Math.floor((e-i*1e3*3600)/1e3/60),s=Math.floor((e-i*1e3*3600-o*1e3*60)/1e3);return i!==0?`${i}:${t(o)}:${t(s)}`:`${o}:${t(s)}`},bindPointerMoveEventListeners(){document.addEventListener("mousemove",this.updateCurrentTime),document.addEventListener("touchmove",this.updateCurrentTime),document.addEventListener("mouseup",this.stopPointerMoving),document.addEventListener("touchend",this.stopPointerMoving)},unbindPointerMoveEventListeners(e){e!==void 0&&e.preventDefault(),document.removeEventListener("mousemove",this.updateCurrentTime),document.removeEventListener("touchmove",this.updateCurrentTime),document.removeEventListener("mouseup",this.stopPointerMoving),document.removeEventListener("touchend",this.stopPointerMoving)},updateRulerRect(){this.rulerRect=this.$el.getBoundingClientRect()},updateCurrentTime(e){const t=e instanceof MouseEvent?e.pageX:e.touches[0].pageX;V(this.rulerRect!==void 0,"rulerRect is undefined");const i=t-this.rulerRect.left,o=Math.round(i/this.timelineScale*1e3);this.$emit("current-time-update",o)},startPointerMoving(){this.bindPointerMoveEventListeners(),window.onselectstart=()=>!1,this.$emit("timeline-cursor-move-start")},stopPointerMoving(e){this.unbindPointerMoveEventListeners(e),window.onselectstart=()=>!0,this.$emit("timeline-cursor-move-stop")}}}),ME={key:0,class:"app-timeline-ruler__serif app-timeline-ruler__serif--left"},RE={key:1,class:"app-timeline-ruler__label app-timeline-ruler__label--left"},PE={key:2,class:"app-timeline-ruler__serif app-timeline-ruler__serif--right"},IE={key:3,class:"app-timeline-ruler__label app-timeline-ruler__label--right"};function LE(e,t,i,o,s,l){return d(),h("div",{class:F(["app-timeline-ruler",{"app-timeline-ruler--cursor-active":e.isPointerCursorActive}]),onMousedown:t[0]||(t[0]=_(a=>{e.updateRulerRect(),e.startPointerMoving(),e.updateCurrentTime(a)},["stop"])),onTouchstart:t[1]||(t[1]=_(a=>{e.updateRulerRect(),e.startPointerMoving(),e.updateCurrentTime(a)},["prevent"]))},[(d(!0),h(N,null,q(e.divisions,(a,u)=>(d(),h("div",{key:u,class:"app-timeline-ruler__division",style:z({width:`${e.divisionWidth}px`})},[a.isLeftSerifVisible?(d(),h("div",ME)):E("",!0),a.leftLabel!==void 0?(d(),h("div",RE,g(a.leftLabel),1)):E("",!0),a.isRightSerifVisible?(d(),h("div",PE)):E("",!0),a.rightLabel!==void 0?(d(),h("div",IE,g(a.rightLabel),1)):E("",!0)],4))),128))],34)}const OE=$(AE,[["render",LE]]),FE=A({name:"app-timeline-cursor",props:{currentTime:{type:Number,required:!0},timelineScale:{type:Number,required:!0},isPointerCursorActive:{type:Boolean,default:!1}},emits:{"timeline-cursor-move-start":e=>!0,"timeline-cursor-move-stop":null,"current-time-update":e=>!0,"timeline-cursor-move":e=>!0},data(){return{originalCurrentTime:0,cursorOriginalPosition:0,isCursorMoving:!1}},beforeUnmount(){this.unbindMouseEventListeners()},methods:{saveCursorOriginalPosition(e){this.cursorOriginalPosition=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,this.originalCurrentTime=this.currentTime},startDragging(e){this.isCursorMoving=!0,window.onselectstart=()=>!1;const t=e instanceof MouseEvent?e.pageY:e.touches[0].pageY;this.$emit("timeline-cursor-move-start",{y:t}),this.bindMouseEventListeners()},stopDragging(){window.onselectstart=()=>!0,this.isCursorMoving&&(this.isCursorMoving=!1,this.$emit("timeline-cursor-move-stop")),this.unbindMouseEventListeners()},bindMouseEventListeners(){document.addEventListener("touchmove",this.moveCursor),document.addEventListener("mousemove",this.moveCursor),document.addEventListener("touchend",this.stopDragging),document.addEventListener("mouseup",this.stopDragging)},unbindMouseEventListeners(){document.removeEventListener("touchmove",this.moveCursor),document.removeEventListener("mousemove",this.moveCursor),document.removeEventListener("touchend",this.stopDragging),document.removeEventListener("mouseup",this.stopDragging)},moveCursor(e){this.isCursorMoving||this.startDragging(e);const i=(e instanceof MouseEvent?e.pageX:e.touches[0].pageX)-this.cursorOriginalPosition,o=Math.round(i/this.timelineScale*1e3),s=this.originalCurrentTime+o;this.$emit("current-time-update",s);const l=e instanceof MouseEvent?e.pageY:e.touches[0].pageY;this.$emit("timeline-cursor-move",{y:l})}}});function DE(e,t,i,o,s,l){return d(),h("div",{class:F(["app-timeline-cursor",{"app-timeline-cursor--cursor-active":e.isPointerCursorActive}]),onMousedown:t[0]||(t[0]=a=>{e.saveCursorOriginalPosition(a),e.bindMouseEventListeners()}),onTouchstart:t[1]||(t[1]=_(a=>{e.saveCursorOriginalPosition(a),e.bindMouseEventListeners()},["prevent"]))},t[2]||(t[2]=[p("div",{class:"app-timeline-cursor__stick"},null,-1),p("div",{class:"app-timeline-cursor__line"},null,-1)]),34)}const VE=$(FE,[["render",DE]]),NE=A({name:"app-timeline-spacer",props:{getTimelineScrollPositionFunction:{type:Function,required:!0},timelineScale:{type:Number,required:!0},position:{type:String,default:"intermediate",validator:e=>["upper","lower","intermediate"].includes(e)},trackPageLeftOffset:{type:Number,default:0}},emits:{drop:e=>!0,"drag-over":null},data:()=>({isHighlightingActive:!1,isDropZoneActive:!1}),mounted(){this.bindDragEventListeners()},beforeUnmount(){this.unbindDragEventListeners()},methods:{parseDataAndEmitDropEvent(e){const t=le.getInstance().getData();V(t!==void 0,"dragDropDataTransfer is empty");const o=this.getTimelineScrollPositionFunction()+e.clientX-this.trackPageLeftOffset,s=o-t.offsetX,l=Math.max(Math.round(o/this.timelineScale*1e3),0),a=Math.max(Math.round(s/this.timelineScale*1e3),0),u={pointerTime:l,previewStartTime:a,payload:t.payload};this.$emit("drop",u),this.deactivateHighlighting()},setDropEffect(e){this.$emit("drag-over"),V(e.dataTransfer!==null,"DragEvent.dataTransfer is null"),e.dataTransfer.dropEffect="move"},activateHighlighting(){this.isHighlightingActive=!0},deactivateHighlighting(){this.isHighlightingActive=!1},activateDropZone(){setTimeout(()=>{this.isDropZoneActive=!0})},deactivateDropZone(){this.isDropZoneActive=!1},bindDragEventListeners(){document.addEventListener("dragstart",this.activateDropZone),document.addEventListener("dragend",this.deactivateDropZone),document.addEventListener("drop",this.deactivateDropZone)},unbindDragEventListeners(){document.removeEventListener("dragstart",this.activateDropZone),document.removeEventListener("dragend",this.deactivateDropZone),document.removeEventListener("drop",this.deactivateDropZone)},removeDropTarget(){const e=le.getInstance(),t=e.getData();V(t!==void 0,"DragDropDataTransfer is empty"),e.setData({...t,lastDropTargetDOMElement:void 0})}}});function BE(e,t,i,o,s,l){return d(),h("div",{class:F(["app-timeline-spacer",[{"app-timeline-spacer--highlighted":e.isHighlightingActive},`app-timeline-spacer--${e.position}`]])},[t[4]||(t[4]=p("div",{class:"app-timeline-spacer__line"},null,-1)),ae(p("div",{class:"app-timeline-spacer__drop-zone",onDragenter:t[0]||(t[0]=_(a=>{e.activateHighlighting(),e.removeDropTarget()},["prevent"])),onDragleave:t[1]||(t[1]=(...a)=>e.deactivateHighlighting&&e.deactivateHighlighting(...a)),onDrop:t[2]||(t[2]=_((...a)=>e.parseDataAndEmitDropEvent&&e.parseDataAndEmitDropEvent(...a),["prevent"])),onDragover:t[3]||(t[3]=_((...a)=>e.setDropEffect&&e.setDropEffect(...a),["prevent"]))},null,544),[[pe,e.isDropZoneActive]])],2)}const jE=$(NE,[["render",BE]]),zE=A({name:"app-track-element-placeholder",props:{timelineScale:{type:Number,required:!0},length:{type:Number,required:!0},playbackStartTime:{type:Number,required:!0},isActive:{type:Boolean,default:!1},isMultiSelectInProgress:{type:Boolean,default:!1}},emits:["select"],data(){return{isPressed:!1}},computed:{width(){return Math.round(this.length/1e3*this.timelineScale)},offsetFromOrigin(){return Math.round(this.playbackStartTime/1e3*this.timelineScale)}},watch:{isMultiSelectInProgress(){this.isPressed=!1}},methods:{select(e){if(!this.isPressed||this.isMultiSelectInProgress){this.isPressed=!1;return}this.isPressed=!1,e.stopPropagation(),this.$emit("select")}}});function HE(e,t,i,o,s,l){return d(),h("div",{class:F(["app-track-element-placeholder",{"app-track-element-placeholder--active":e.isActive,"app-track-element-placeholder--no-hover":e.isMultiSelectInProgress}]),style:z({width:`${e.width}px`,transform:`translate3d(${e.offsetFromOrigin}px, 0, 0)`}),onMousedown:t[0]||(t[0]=a=>e.isPressed=!0),onTouchstart:t[1]||(t[1]=a=>e.isPressed=!0),onClick:t[2]||(t[2]=(...a)=>e.select&&e.select(...a))},t[3]||(t[3]=[p("div",{class:"app-track-element-placeholder__background"},null,-1)]),38)}const _E=$(zE,[["render",HE]]),UE=A({name:"app-track-element-preloader",props:{mediaElementStatus:{type:String,default:yi.INITIALIZING},mediaElementUploadProgress:{type:Number,default:0}}}),qE={class:"app-track-element-preloader"},WE={class:"app-track-element-preloader__text"};function GE(e,t,i,o,s,l){return d(),h("div",qE,[p("div",WE,[e.mediaElementStatus==="initializing"||e.mediaElementStatus==="preparing"?(d(),h(N,{key:0},[y(g(e.$t("appConsoleMediaElement.preparing")),1)],64)):e.mediaElementStatus==="uploading"?(d(),h(N,{key:1},[y(g(e.$t("appConsoleMediaElement.uploading"))+" "+g(e.mediaElementUploadProgress)+"% ",1)],64)):E("",!0)]),t[0]||(t[0]=p("div",{class:"app-track-element-preloader__background"},null,-1))])}const XE=$(UE,[["render",GE]]),YE=A({name:"app-track-element-preview-frames",props:{timelineScale:{type:Number,default:0},frames:{type:Array,required:!0},duration:{type:Number,default:0},width:{type:Number,default:0},height:{type:Number,default:0},trimFromStartTime:{type:Number,default:0},basicSpeed:{type:Number,required:!0},frameHeight:{type:Number,required:!0},isShouldLoop:{type:Boolean,required:!0},length:{type:Number,required:!0}},computed:{containerWidth(){return this.isShouldLoop&&(this.length+this.trimFromStartTime)*this.basicSpeed>this.duration?Math.round(Math.ceil((this.length+this.trimFromStartTime)*this.basicSpeed/this.duration)*this.duration/1e3*this.timelineScale/this.basicSpeed):this.mediaContainerWidth},mediaContainerWidth(){return Math.round(this.duration/1e3*this.timelineScale/this.basicSpeed)},containerOffsetLeft(){return Math.round(this.trimFromStartTime/1e3*this.timelineScale)},frameWidth(){return Math.round(this.width/this.height*this.frameHeight)},framesVisible(){const e=function(s,l){const a=[],u=(s.length-1)/Math.max(l-1,1);for(let m=0;m<l;m++){const f=Math.min(Math.round(u*m),s.length-1);a.push(s[f])}return a},t=[];let i=0;const o=Math.max(Math.round(this.mediaContainerWidth/this.frameWidth),1);if(this.duration===0)return t;for(;i<this.length+this.trimFromStartTime&&(o>=this.frames.length?t.push(...this.frames):t.push(...e(this.frames,o)),i+=Math.ceil(this.duration/this.basicSpeed),!(i>0&&!this.isShouldLoop)););return t}}});function KE(e,t,i,o,s,l){return d(),h("div",{class:"app-track-element-frames",style:z({width:`${e.containerWidth}px`,transform:`translateX(${-e.containerOffsetLeft}px)`})},[(d(!0),h(N,null,q(e.framesVisible,(a,u)=>(d(),h("div",{key:a+u,style:z({backgroundImage:`url(${a})`,width:`${100/e.framesVisible.length}%`}),class:"app-track-element-frames__frame"},null,4))),128))],4)}const ZE=$(YE,[["render",KE]]),QE=e=>`
    <svg width="8" height="${e}" xmlns="http://www.w3.org/2000/svg" shape-rendering="crispEdges">
        <g fill="#FFFFFF">
            <rect x='6' y="${e/2-1}" height="2" width="2"  />
        </g>
    </svg>
  `.trim(),JE=A({name:"app-track-element-preview-audio-loader",props:{isAudioFromText:{type:Boolean,default:!1}},data(){return{backgroundUrl:""}},mounted(){const{clientHeight:e}=this.$el,t=QE(e),i="data:image/svg+xml;base64,"+btoa(t);this.backgroundUrl=`url('${i}')`}});function xE(e,t,i,o,s,l){return d(),h("div",{class:F(["app-track-element-preview-audio-loader",{"app-track-element-preview-audio-loader--audio-from-text":e.isAudioFromText}])},[p("div",{class:"app-track-element-preview-audio-loader__wave",style:z({backgroundImage:e.backgroundUrl})},null,4)],2)}const eS=$(JE,[["render",xE]]);var eo=(e=>(e[e.HIDDEN=0]="HIDDEN",e[e.PRE_RENDERED=1]="PRE_RENDERED",e[e.RENDERED=2]="RENDERED",e))(eo||{});const kt=class kt{constructor(t,i,o){U(this,"rootElement");U(this,"observableElements");U(this,"items");U(this,"preRenderedCount");U(this,"observer");this.rootElement=t,this.observableElements=i,this.preRenderedCount=o,this.items=this.observableElements.map((s,l)=>({index:l,element:s,state:0}))}computePreRendered(){const t=this.items.filter(a=>a.state===2).map(a=>a.index);if(t.length===0)return;const i=Math.max(...t),o=Math.min(...t),s=Math.max(0,o-this.preRenderedCount),l=Math.min(this.items.length-1,i+this.preRenderedCount);this.items.forEach(a=>{a.state!==2&&(a.state=0)});for(let a=s;a<o;a++)this.items[a].state=1;for(let a=i+1;a<=l;a++)this.items[a].state=1}observe(t){if(this.observer!==void 0)throw new Error("Observer already active");this.observableElements.forEach((i,o)=>{i.setAttribute(kt.ATTRIBUTE_NAME,`${o}`)}),this.observer=new IntersectionObserver(i=>{for(const o of i){const s=o.target.getAttribute(kt.ATTRIBUTE_NAME);if(s===null)throw new Error(`Attribute '${kt.ATTRIBUTE_NAME}' of observed cannot be null`);const l=parseInt(s);this.items[l].state=o.isIntersecting?2:0}this.computePreRendered(),t(this.items)},{root:this.rootElement,threshold:[0,.001]});for(const i of this.observableElements)this.observer.observe(i)}unobserve(){if(this.observer===void 0)throw new Error("Unable to disconnect observer as it was not initialized");this.observableElements.forEach(t=>{t.removeAttribute(kt.ATTRIBUTE_NAME)}),this.observer.disconnect()}};U(kt,"ATTRIBUTE_NAME","data-render-observer-element-index");let to=kt;const tS=A({name:"app-track-element-preview-audio",props:{isActive:{type:Boolean,default:!1},timelineScale:{type:Number,required:!0},basicSpeed:{type:Number,required:!0},waveformArrayBuffer:{type:ArrayBuffer,required:!1,default:void 0},trimFromStartTime:{type:Number,required:!0},getTrackpadContainer:{type:Function,required:!0},isAudioFromText:{type:Boolean,default:!1}},data(){return{waveformPlots:[],waveformConverter:new on(new ArrayBuffer(0)),renderObserver:null,resizeObserver:null,renderedElementsIndexes:new Set}},computed:{marginLeft(){return-this.trimFromStartTime*this.timelineScale/this.basicSpeed/1e3},isWaveformLoaded(){return this.waveformArrayBuffer!==void 0}},watch:{waveformArrayBuffer(){this.drawWaveform()},timelineScale(){this.drawWaveform()},basicSpeed(){this.drawWaveform()}},mounted(){const e=_t(async()=>{await this.drawWaveform()},100),t=window.ResizeObserver??Ut;this.resizeObserver=new t(e),this.resizeObserver.observe(this.getTrackpadContainer())},beforeUnmount(){this.resizeObserver?.disconnect(),this.renderObserver!==null&&this.renderObserver.unobserve()},methods:{async drawWaveform(){const e=this.waveformArrayBuffer;if(e===void 0)return;const t=this.$container.get(k.WORKER_MEDIA_ENCODER_SERVICE),i=async(a,u)=>{const m=new ArrayBuffer(a.byteLength);return new Uint8Array(m).set(new Uint8Array(a)),await t.resampleWaveform(m,u)};this.waveformConverter=new on(e,i),await this.waveformConverter.parse();const o=Math.floor(this.getTrackpadContainer().clientWidth),s=o%2===1?o+1:o,l=await this.waveformConverter.getPlots(s,this.timelineScale,this.basicSpeed);this.waveformPlots=l.map(a=>({left:a.left,width:a.width,points:[]})),await this.$nextTick(),this.renderObserver!==null&&this.renderObserver.unobserve(),this.renderObserver=new to(null,[...this.$el.getElementsByClassName("app-track-element-preview-audio__block")],1),this.renderObserver.observe(async a=>{const u=new Set;a.filter(C=>[eo.RENDERED,eo.PRE_RENDERED].includes(C.state)).forEach(C=>{u.add(C.index)}),this.renderedElementsIndexes=u,await this.$nextTick();const m=Dn([...this.$el.getElementsByTagName("canvas")],C=>parseInt(C.getAttribute("data-render-index"))),f=window?.devicePixelRatio??1,b={background:"#165C4F",waves:"#1D7867"},T={background:"#006268",waves:"#117a81"};for(const C of u){const M=l[C],L=m[C][0];setTimeout(()=>{Mr(M,L,{width:M.width,height:L.clientHeight},this.isAudioFromText?T:b,f)},0)}})}}}),iS=["width","data-render-index"];function oS(e,t,i,o,s,l){const a=eS;return d(),h("div",{class:F(["app-track-element-preview-audio",[{"app-track-element-preview-audio--active":e.isActive,"app-track-element-preview-audio--audio-from-text":e.isAudioFromText}]]),style:z({left:`${e.marginLeft}px`})},[e.isWaveformLoaded?(d(!0),h(N,{key:1},q(e.waveformPlots,(u,m)=>(d(),h("div",{key:m,class:"app-track-element-preview-audio__block",style:z({left:`${u.left}px`,maxWidth:`${u.width}px`,width:`${u.width}px`})},[e.renderedElementsIndexes.has(m)?(d(),h("canvas",{key:0,class:"app-track-element-preview-audio__block__canvas",style:z({width:`${u.width}px`}),width:u.width,"data-render-index":m},null,12,iS)):E("",!0)],4))),128)):(d(),S(a,{key:0,style:z({left:`${-e.marginLeft}px`}),"is-audio-from-text":e.isAudioFromText},null,8,["style","is-audio-from-text"])),e.$slots.text!==void 0?(d(),h("span",{key:2,class:"app-track-element-preview-audio__label",style:z({left:`${-e.marginLeft}px`})},[w(e.$slots,"text")],4)):E("",!0)],6)}const nS=$(tS,[["render",oS]]),sS=A({name:"app-track-element",props:{type:{type:String,required:!0},disableToggleSelection:{type:Boolean,required:!1,default:!1},isDragPreview:{type:Boolean,default:!1},isDragging:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},timelineScale:{type:Number,default:void 0},playbackStartTime:{type:Number,default:void 0},trackElementLength:{type:Number,default:void 0},previewImage:{type:String,default:void 0},getTimelineScrollPositionFunction:{type:Function,default:()=>0},currentTime:{type:Number,default:0},cursorEventTarget:{type:ue,default:void 0},width:{type:Number,default:void 0}},emits:{"rect-accessor-add-on-mounted":e=>!0,"rect-accessor-delete-on-destroy":null,"track-element-select":null,"left-stick-start-drag":null,"right-stick-start-drag":null,"left-stick-stop-drag":null,"right-stick-stop-drag":null,"left-stick-drag":e=>!0,"right-stick-drag":e=>!0,"track-element-toggle-selection":null,"track-element-select-single":null},data(){return{pressed:!1,leftStickOriginalPosition:0,rightStickOriginalPosition:0,isLeftStickDraggingHasStarted:!1,isRightStickDraggingHasStarted:!1,originalPlaybackStartTime:0,originalTrackElementLength:0,originalTimelineScrollPosition:0,imagePreloader:void 0,previewImagePreloaded:void 0}},computed:{isSticksMinimized(){return this.width!==void 0&&this.width<24},isSticksHidden(){return this.width!==void 0&&this.width<12},isTextHidden(){return this.width!==void 0&&this.width<48}},watch:{previewImage(e,t){if(e===void 0||t===void 0)return this.updatePreloadedImageLink();this.$nextTick(this.waitPosterLoad)},isDragging(){this.pressed=!1}},mounted(){this.cursorEventTarget?.on("pointerdown",this.startDraggingThroughTimelineCursor),this.$emit("rect-accessor-add-on-mounted",this.getElementRect),this.updatePreloadedImageLink()},beforeUnmount(){this.cursorEventTarget?.off("pointerdown",this.startDraggingThroughTimelineCursor),this.$emit("rect-accessor-delete-on-destroy"),this.imagePreloader!==void 0&&this.imagePreloader.removeEventListener("load",this.updatePreloadedImageLink)},methods:{selectTrackElement(e){this.pressed&&(this.pressed=!1),!(this.isLeftStickDraggingHasStarted||this.isRightStickDraggingHasStarted)&&(!this.disableToggleSelection&&e.shiftKey?this.$emit("track-element-toggle-selection"):this.$emit("track-element-select-single"),e.stopPropagation())},updatePreloadedImageLink(){this.previewImagePreloaded=this.previewImage},waitPosterLoad(){if(this.previewImage===void 0){this.updatePreloadedImageLink();return}this.imagePreloader=new Image,this.imagePreloader.src=this.previewImage,this.imagePreloader.complete?this.updatePreloadedImageLink():this.imagePreloader.addEventListener("load",this.updatePreloadedImageLink,{once:!0})},saveLeftStickOriginalPosition(e){this.leftStickOriginalPosition=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,V(this.playbackStartTime!==void 0,"playbackStartTime is undefined"),V(this.trackElementLength!==void 0,"trackElementLength is undefined"),this.originalPlaybackStartTime=this.playbackStartTime,this.originalTrackElementLength=this.trackElementLength,this.originalTimelineScrollPosition=this.getTimelineScrollPositionFunction()},saveRightStickOriginalPosition(e){this.rightStickOriginalPosition=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,V(this.playbackStartTime!==void 0,"playbackStartTime is undefined"),V(this.trackElementLength!==void 0,"trackElementLength is undefined"),this.originalPlaybackStartTime=this.playbackStartTime,this.originalTrackElementLength=this.trackElementLength,this.originalTimelineScrollPosition=this.getTimelineScrollPositionFunction()},startLeftStickDragging(){this.$emit("left-stick-start-drag"),this.isLeftStickDraggingHasStarted=!0,this.bindMouseEventListeners("left")},startRightStickDragging(){this.$emit("right-stick-start-drag"),this.isRightStickDraggingHasStarted=!0,this.bindMouseEventListeners("right")},stopLeftStickDragging(){this.isLeftStickDraggingHasStarted&&(this.isLeftStickDraggingHasStarted=!1,this.$emit("left-stick-stop-drag")),this.unbindMouseEventListeners()},stopRightStickDragging(){this.isRightStickDraggingHasStarted&&(this.$emit("right-stick-stop-drag"),this.isRightStickDraggingHasStarted=!1),this.unbindMouseEventListeners()},bindMouseEventListeners(e){const t=e==="left"?this.moveLeftStick:this.moveRightStick,i=e==="left"?this.stopLeftStickDragging:this.stopRightStickDragging;document.addEventListener("touchmove",t),document.addEventListener("mousemove",t),document.addEventListener("touchend",i),document.addEventListener("mouseup",i)},unbindMouseEventListeners(){document.removeEventListener("touchend",this.stopLeftStickDragging),document.removeEventListener("mouseup",this.stopLeftStickDragging),document.removeEventListener("touchmove",this.moveLeftStick),document.removeEventListener("mousemove",this.moveLeftStick),document.removeEventListener("touchend",this.stopRightStickDragging),document.removeEventListener("mouseup",this.stopRightStickDragging),document.removeEventListener("touchmove",this.moveRightStick),document.removeEventListener("mousemove",this.moveRightStick)},moveLeftStick(e){this.isLeftStickDraggingHasStarted||this.startLeftStickDragging(),V(this.timelineScale!==void 0,"timelineScale is undefined");const t=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,i=this.getTimelineScrollPositionFunction()-this.originalTimelineScrollPosition,o=t-this.leftStickOriginalPosition+i,s=Math.round(o/this.timelineScale*1e3),l=this.originalTrackElementLength-s;if(l<1)return;const a={offsetFromStart:this.originalPlaybackStartTime+s,elementLength:l};this.isActive||this.selectTrackElement(e),this.$emit("left-stick-drag",a)},moveRightStick(e){this.isRightStickDraggingHasStarted||this.startRightStickDragging(),V(this.timelineScale!==void 0,"timelineScale is undefined");const t=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,i=this.getTimelineScrollPositionFunction()-this.originalTimelineScrollPosition,o=t-this.rightStickOriginalPosition+i,s=Math.round(o/this.timelineScale*1e3),l={offsetFromStart:this.originalPlaybackStartTime,elementLength:this.originalTrackElementLength+s};this.isActive||this.selectTrackElement(e),this.$emit("right-stick-drag",l)},startDraggingThroughTimelineCursor(e){V(this.currentTime!==void 0,"currentTime is undefined"),V(this.playbackStartTime!==void 0,"playbackStartTime is undefined"),V(this.trackElementLength!==void 0,"trackElementLength is undefined");const t=e.data;if(V(!(t instanceof MouseEvent)||!(window.TouchEvent!==void 0&&t instanceof TouchEvent),"unexpected event type"),this.currentTime>this.playbackStartTime+this.trackElementLength&&this.currentTime<this.playbackStartTime)return;const[i,o]=t instanceof MouseEvent?[t.pageX,t.pageY]:[t.touches[0].pageX,t.touches[0].pageY],s=this.$refs["left-stick"].getBoundingClientRect();i<s.left+s.width&&i>s.left&&o<s.top+s.height&&o>s.top&&(t.stopPropagation(),t.preventDefault(),this.saveLeftStickOriginalPosition(t),this.bindMouseEventListeners("left"));const l=this.$refs["right-stick"].getBoundingClientRect();i<l.left+l.width&&i>l.left&&o<l.top+l.height&&o>l.top&&(t.stopPropagation(),t.preventDefault(),this.saveRightStickOriginalPosition(t),this.bindMouseEventListeners("right"))},getElementRect(){return this.$el.getBoundingClientRect()}}}),aS={key:0,class:"miniature"},rS={key:1},lS={key:2},dS={key:3};function uS(e,t,i,o,s,l){return d(),h("div",J({class:["app-track-element",[{"app-track-element--active":e.isActive,"app-track-element--drag-preview":e.isDragPreview,"app-track-element--sticks-minimized":e.isSticksMinimized},`app-track-element--type-${e.type}`]]},e.$attrs,{onMousedown:t[8]||(t[8]=_(a=>e.pressed=!0,["stop"])),onTouchstart:t[9]||(t[9]=a=>e.pressed=!0),onClick:t[10]||(t[10]=(...a)=>e.selectTrackElement&&e.selectTrackElement(...a))}),[t[13]||(t[13]=p("div",{class:"app-track-element__border"},null,-1)),ae(p("div",{ref:"left-stick",class:"app-track-element__stick-layout app-track-element__stick-layout--left",draggable:"true",onClick:t[0]||(t[0]=(...a)=>e.selectTrackElement&&e.selectTrackElement(...a)),onMousedown:t[1]||(t[1]=_(a=>{e.saveLeftStickOriginalPosition(a),e.bindMouseEventListeners("left")},["stop"])),onTouchstart:t[2]||(t[2]=_(a=>{e.saveLeftStickOriginalPosition(a),e.bindMouseEventListeners("left")},["stop","prevent"])),onDragstart:t[3]||(t[3]=_(()=>{},["prevent","stop"]))},t[11]||(t[11]=[p("div",{class:"app-track-element__stick app-track-element__stick--left"},null,-1)]),544),[[pe,!e.isSticksHidden]]),ae(p("div",{ref:"right-stick",class:"app-track-element__stick-layout app-track-element__stick-layout--right",draggable:"true",onClick:t[4]||(t[4]=(...a)=>e.selectTrackElement&&e.selectTrackElement(...a)),onMousedown:t[5]||(t[5]=_(a=>{e.saveRightStickOriginalPosition(a),e.bindMouseEventListeners("right")},["stop"])),onTouchstart:t[6]||(t[6]=_(a=>{e.saveRightStickOriginalPosition(a),e.bindMouseEventListeners("right")},["stop","prevent"])),onDragstart:t[7]||(t[7]=_(()=>{},["prevent","stop"]))},t[12]||(t[12]=[p("div",{class:"app-track-element__stick app-track-element__stick--right"},null,-1)]),544),[[pe,!e.isSticksHidden]]),p("div",{class:"app-track-element__content",style:z({backgroundImage:e.previewImagePreloaded!==void 0?`url(${e.previewImagePreloaded})`:void 0})},[e.$slots.miniature!==void 0?(d(),h("span",aS,[w(e.$slots,"miniature")])):E("",!0),w(e.$slots,"frames"),w(e.$slots,"audio",{isTextVisible:!e.isTextHidden}),e.$slots.text!==void 0?ae((d(),h("span",rS,[w(e.$slots,"text")],512)),[[pe,!e.isTextHidden]]):E("",!0),e.$slots.element!==void 0?(d(),h("span",lS,[w(e.$slots,"element")])):E("",!0),e.$slots.preloader!==void 0?(d(),h("span",dS,[w(e.$slots,"preloader")])):E("",!0)],4)],16)}const pS=$(sS,[["render",uS]]),cS=A({name:"app-track-element-container",props:{timelineScale:{type:Number,required:!0},playbackStartTime:{type:Number,required:!0},trackElementLength:{type:Number,required:!0}},computed:{width(){return Math.round(this.trackElementLength/1e3*this.timelineScale)},contentWidth(){return this.width-2-2},offset(){return Math.round(this.playbackStartTime/1e3*this.timelineScale)}}}),mS={class:"app-track-element-container__content"};function hS(e,t,i,o,s,l){return d(),h("div",{class:"app-track-element-container",style:z({width:`${e.width}px`,transform:`translate3d(${e.offset}px, 0, 0)`})},[p("div",mS,[w(e.$slots,"default",{width:e.contentWidth})])],4)}const gS=$(cS,[["render",hS]]),vS=A({name:"app-track-drop-zone",props:{width:{type:Number,required:!0},offset:{type:Number,required:!0}}});function fS(e,t,i,o,s,l){return d(),h("div",{class:"app-track-drop-zone",style:z({width:`${e.width}px`,transform:`translate3d(${e.offset}px, 0, 0)`})},null,4)}const bS=$(vS,[["render",fS]]),yS=A({name:"app-track",props:{forceVisibleDropMarkers:{type:Boolean,default:!1},getTimelineScrollPositionFunction:{type:Function,required:!0},timelineScale:{type:Number,required:!0},trackElementFallbackDuration:{type:Number,required:!0},type:{type:String,required:!0},isShouldListenForNativeDropEvent:{type:Boolean,default:!1},isSnapEnabled:{type:Boolean,default:!0},snapThreshold:{type:Number,required:!0},snapPoints:{type:Array,default:()=>[]},trackPageLeftOffset:{type:Number,default:0}},emits:{drop:e=>!0,"drag-over":null,"drag-enter":null},data(){return{draggableElementCoordinateX:0,draggableElementPointerOffsetX:0,isDropZoneMarkerVisible:!1,dragEnterCounter:0,isDropAllowed:!0}},computed:{dropElementInformation(){const e=this.draggableElementCoordinateX-this.draggableElementPointerOffsetX,t=le.getInstance().getData();if(t===void 0||!this.isSnapEnabled)return{dropZoneMarkerOffset:e,snapToElementSide:void 0,snappableElementSide:void 0};const i=this.getDropZoneMarkerWidth(),o=this.snapPoints.filter(l=>t.payload.type===Q.TRACK_ELEMENT?l.trackElementId!==t.payload.trackElementId:!0).flatMap(l=>[{point:l.snapPoints[0],side:"left"},{point:l.snapPoints[1],side:"right"}]).concat({point:0,side:"left"}).filter(l=>Math.min(Math.abs(i+e-l.point),Math.abs(e-l.point))<this.snapThreshold).sort((l,a)=>l.point-a.point)[0];if(o===void 0)return{dropZoneMarkerOffset:e,snappableElementSide:void 0,snapToElementSide:void 0};const s=Math.abs(e-o.point)<Math.abs(i+e-o.point);return s||(o.point-=i),{dropZoneMarkerOffset:o.point,snappableElementSide:s?"left":"right",snapToElementSide:o.side}}},methods:{handleDrop(e){if(e instanceof CustomEvent&&e.detail instanceof DragEvent){const t=le.getInstance().getData();V(t!==void 0,"DragDropDataTransfer is empty");let i=!1;if(t.payload.type===Q.MEDIA_ELEMENT){const o=Zo(t.payload.mediaElementType);i=ui(o,this.type)}else if(t.payload.type===Q.TRACK_ELEMENT)i=t.isDraggingMultipleElements?!0:ui(t.payload.trackElementType,this.type);else if(t.payload.type===Q.TEXT_ELEMENT)i=this.type===Pe.TEXT;else if(t.payload.type===Q.STOCK_ITEM)([H.IMAGE,H.VIDEO].includes(t.payload.stockItemType)&&[Pe.IMAGE,Pe.VIDEO].includes(this.type)||[H.MUSIC,H.SFX].includes(t.payload.stockItemType)&&[Pe.AUDIO].includes(this.type))&&(i=!0);else if(t.payload.type===Q.ELEMENT_ITEM)[we.STICKER,we.GIF].includes(t.payload.elementItem.type)&&[Pe.IMAGE,Pe.VIDEO].includes(this.type)&&(i=!0);else throw new Error("unknown draggableDataType");if(!i){this.isDropAllowed=!0,this.hideDropZoneMarker(),this.resetDragEnterCounter();return}this.handleNativeDrop(e.detail)}else this.isShouldListenForNativeDropEvent&&this.handleNativeDrop(e)},getPreviewStartDropTimeForDrag(e){const t=le.getInstance().getData();V(t!==void 0,"dragDropDataTransfer is empty");const s=this.getTimelineScrollPositionFunction()+e.clientX-this.trackPageLeftOffset-t.offsetX;return Math.round(s*1e3/this.timelineScale)},parseDataAndEmitDropEvent(e){if(!this.isDropAllowed)return;const t=le.getInstance().getData();V(t!==void 0,"dragDropDataTransfer is empty");const i=this.getTimelineScrollPositionFunction(),s=this.$el.getBoundingClientRect().left+i,l=e.clientX-s+i,a=l-t.offsetX;let u=Math.round(l*1e3/this.timelineScale),m=Math.round(a*1e3/this.timelineScale);const f=u,b=m;if(this.isSnapEnabled){const{dropZoneMarkerOffset:C,snappableElementSide:M,snapToElementSide:L}=this.dropElementInformation,I=Math.round(C*1e3/this.timelineScale);u-=m-I,m=I,C!==0&&(M==="left"&&L==="right"?(u+=1,m+=1):M==="right"&&L==="left"&&(u-=1,m-=1))}u=Math.max(u,0),m=Math.max(m,0);const T={pointerTimeWithoutSnap:f,previewStartTimeWithoutSnap:b,pointerTime:u,previewStartTime:m,payload:t.payload};this.$emit("drop",T)},setDropEffect(e){V(e.dataTransfer!==null,"DragEvent.dataTransfer is null");const t=le.getInstance().getData();if(t===void 0){this.disallowDrop();return}let i=!1;if(t.payload.type===Q.MEDIA_ELEMENT){const o=Zo(t.payload.mediaElementType);i=ui(o,this.type),e.dataTransfer.dropEffect=i?"copy":"none"}else if(t.payload.type===Q.TRACK_ELEMENT)i=t.isDraggingMultipleElements?!0:ui(t.payload.trackElementType,this.type),e.dataTransfer.dropEffect=i?"move":"none";else if(t.payload.type===Q.TEXT_ELEMENT)i=this.type===Pe.TEXT,e.dataTransfer.dropEffect=i?"copy":"none";else if(t.payload.type===Q.STOCK_ITEM)([H.IMAGE,H.VIDEO].includes(t.payload.stockItemType)&&[Pe.IMAGE,Pe.VIDEO].includes(this.type)||[H.MUSIC,H.SFX].includes(t.payload.stockItemType)&&[Pe.AUDIO].includes(this.type))&&(i=!0),e.dataTransfer.dropEffect=i?"copy":"none";else if(t.payload.type===Q.ELEMENT_ITEM)[we.STICKER,we.GIF].includes(t.payload.elementItem.type)&&[Pe.IMAGE,Pe.VIDEO].includes(this.type)&&(i=!0),e.dataTransfer.dropEffect=i?"copy":"none";else throw new Error("unknown draggableDataType");i||this.disallowDrop()},allowDrop(){const e=le.getInstance().getData();this.isDropAllowed=!0,e!==void 0&&e.allowDrop()},disallowDrop(){const e=le.getInstance().getData();this.isDropAllowed=!1,e!==void 0&&e.disallowDrop()},saveDraggableElementCoordinates(e){const t=this.getTimelineScrollPositionFunction();this.draggableElementCoordinateX=t+e.clientX-this.trackPageLeftOffset},saveDraggableElementOffsets(){if(!this.isDropAllowed)return;const e=le.getInstance().getData();V(e!==void 0,"dragDropDataTransfer is empty"),this.draggableElementPointerOffsetX=e.offsetX},callCallbackOnlyIfDragEnterOccurredOnRootElement(e,t){this.dragEnterCounter===0&&e(),t.currentTarget===this.$el&&(this.dragEnterCounter+=1)},callCallbackOnlyIfDragLeaveOccurredOnRootElement(e,t){t.currentTarget===this.$el&&(this.dragEnterCounter-=1),this.dragEnterCounter===0&&e()},resetDragEnterCounter(){this.dragEnterCounter=0},showDropZoneMarker(){this.isDropZoneMarkerVisible=!0},hideDropZoneMarker(){this.isDropZoneMarkerVisible=!1},getDropZoneMarkerWidth(){const e=le.getInstance().getData();V(e!==void 0,"DragDropDataTransfer is empty");let t;if(e.payload.type===Q.MEDIA_ELEMENT)switch(e.payload.mediaElementType){case De.IMAGE:t=this.trackElementFallbackDuration;break;case De.AUDIO:case De.VIDEO:t=e.payload.duration;break;default:throw new Error("unknown MediaElement type")}else if(e.payload.type===Q.TRACK_ELEMENT)t=e.payload.trackElementLength;else if(e.payload.type===Q.TEXT_ELEMENT)t=this.trackElementFallbackDuration;else if(e.payload.type===Q.STOCK_ITEM)e.payload.duration!==void 0?t=e.payload.duration:t=this.trackElementFallbackDuration;else if(e.payload.type===Q.ELEMENT_ITEM)t=this.trackElementFallbackDuration;else throw new Error("unknown DraggableDataType");return Math.round(t/1e3*this.timelineScale)},saveDropTarget(){const e=le.getInstance(),t=e.getData();V(t!==void 0,"DragDropDataTransfer is empty"),e.setData({...t,lastDropTargetDOMElement:this.$el})},handleNativeDrop(e){this.parseDataAndEmitDropEvent(e),this.hideDropZoneMarker(),this.resetDragEnterCounter(),this.allowDrop()}}}),ES={key:0,class:"app-track__drop-zone-marker"};function SS(e,t,i,o,s,l){return d(),h("div",{class:F(["app-track",{"app-track--large":["image","video"].includes(e.type)}]),onDragover:t[0]||(t[0]=_(a=>{e.saveDraggableElementCoordinates(a),e.$emit("drag-over",e.getPreviewStartDropTimeForDrag(a))},["prevent"])),onDragenter:t[1]||(t[1]=_(a=>{e.callCallbackOnlyIfDragEnterOccurredOnRootElement(()=>{e.setDropEffect(a),e.showDropZoneMarker(),e.saveDraggableElementOffsets(),e.saveDropTarget(),e.$emit("drag-enter",e.getPreviewStartDropTimeForDrag(a))},a)},["prevent"])),onDragleave:t[2]||(t[2]=a=>{e.callCallbackOnlyIfDragLeaveOccurredOnRootElement(()=>{e.hideDropZoneMarker(),e.allowDrop()},a)}),onDrop:t[3]||(t[3]=(...a)=>e.handleDrop&&e.handleDrop(...a))},[w(e.$slots,"content"),e.forceVisibleDropMarkers||e.isDropZoneMarkerVisible&&e.isDropAllowed?(d(),h("div",ES,[w(e.$slots,"drop-zone-marker",{offset:e.dropElementInformation.dropZoneMarkerOffset,width:e.getDropZoneMarkerWidth})])):E("",!0)],34)}const kS=$(yS,[["render",SS]]);class CS{constructor(t){U(this,"edgeRadius",50);U(this,"velocityCoefficient",.8);U(this,"scrollableContainer");U(this,"requestAnimationFrameId");U(this,"clientX",0);U(this,"clientY",0);U(this,"scrollBounded");U(this,"cancelRequestAnimationFrameBounded");this.scrollableContainer=t,this.scrollBounded=this.scroll.bind(this),this.cancelRequestAnimationFrameBounded=this.cancelRequestAnimationFrame.bind(this)}enable(){this.scrollableContainer.addEventListener("mousemove",this.scrollBounded),this.scrollableContainer.addEventListener("touchmove",this.scrollBounded),this.scrollableContainer.addEventListener("mouseleave",this.cancelRequestAnimationFrameBounded),this.scrollableContainer.addEventListener("touchend",this.cancelRequestAnimationFrameBounded)}disable(){this.cancelRequestAnimationFrame(),this.scrollableContainer.removeEventListener("mousemove",this.scrollBounded),this.scrollableContainer.removeEventListener("touchmove",this.scrollBounded),this.scrollableContainer.removeEventListener("mouseleave",this.cancelRequestAnimationFrameBounded),this.scrollableContainer.removeEventListener("touchend",this.cancelRequestAnimationFrameBounded)}scroll(t){if(!t.isTrusted)return;const i=this.scrollableContainer.getBoundingClientRect();this.clientX=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,this.clientY=t instanceof MouseEvent?t.clientY:t.touches[0].clientY,window.TouchEvent!==void 0&&t instanceof TouchEvent&&t.preventDefault(),this.requestAnimationFrameId!==void 0&&(window.cancelAnimationFrame(this.requestAnimationFrameId),this.requestAnimationFrameId=void 0);const o=()=>{const{isInRadius:s,isInTopRadius:l,isInBottomRadius:a,isInRightRadius:u,isInLeftRadius:m}=this.determineOccurrencesInEdgeRadius(this.clientX,this.clientY,i);if(!s)return;let f=0,b=!0;(l||a)&&(f=this.calculateVelocity(this.clientY,"vertical",i),b=this.checkIfScrollReachedEnd("vertical",Math.sign(f)));let T=0,C=!0;(m||u)&&(T=this.calculateVelocity(this.clientX,"horizontal",i),C=this.checkIfScrollReachedEnd("horizontal",Math.sign(T))),!(C&&b)&&(this.scrollableContainer.scrollBy(T*this.velocityCoefficient,f*this.velocityCoefficient),this.scrollableContainer.dispatchEvent(t),this.requestAnimationFrameId=window.requestAnimationFrame(o))};this.requestAnimationFrameId=window.requestAnimationFrame(o)}determineOccurrencesInEdgeRadius(t,i,o){const{top:s,left:l,width:a,height:u}=o,m={isInTopRadius:i<s+this.edgeRadius&&i>s,isInBottomRadius:i<s+u&&i>s+u-this.edgeRadius,isInLeftRadius:t<l+this.edgeRadius&&t>l,isInRightRadius:t<l+a&&t>l+a-this.edgeRadius};return{...m,isInRadius:Object.values(m).some(f=>f)}}calculateVelocity(t,i,o){const{top:s,left:l,width:a,height:u}=o,m=i==="horizontal"?l:s,f=i==="horizontal"?a:u;return m+f/2>t?-(this.edgeRadius+m-t):-(m+f-t-this.edgeRadius)}checkIfScrollReachedEnd(t,i){if(t==="horizontal"&&i<0)return this.scrollableContainer.scrollLeft===0;if(t==="horizontal"&&i>0)return this.scrollableContainer.scrollLeft+this.scrollableContainer.clientWidth===this.scrollableContainer.scrollWidth;if(t==="vertical"&&i<0)return this.scrollableContainer.scrollTop===0;if(t==="vertical"&&i>0)return this.scrollableContainer.scrollTop+this.scrollableContainer.clientHeight===this.scrollableContainer.scrollHeight;throw new Error("unhandled situation, error in input parameters")}cancelRequestAnimationFrame(t){t!==void 0&&window.TouchEvent!==void 0&&t instanceof TouchEvent&&t.preventDefault(),this.requestAnimationFrameId!==void 0&&(window.cancelAnimationFrame(this.requestAnimationFrameId),this.requestAnimationFrameId=void 0)}}const TS=100,hi=40,$n=20,Dt=6,Xi=13,gi=26,bt=18,$S=20,wn="data-track-element-id",wS=A({name:"app-timeline-trackpad",directives:{selectableDirective:Mm},props:{selectableDisabled:{type:Boolean,required:!0},currentTime:{type:Number,required:!0},timelineScale:{type:Number,required:!0},timelineLength:{type:Number,required:!0},scrollEventEmitter:{type:ue,required:!0},isTimelineCursorPointerEventsDisabled:{type:Boolean,default:!1},isEdgeScrollingEnabled:{type:Boolean,default:!1},trackElementSelectionViewModel:{type:Object,required:!0},isAutoScrollingEnabled:{type:Boolean,default:!0}},emits:{"trackpad-drop":null,"trackpad-dragenter":null,"trackpad-dragleave":null,"trackpad-width-update":e=>!0,"track-element-unselect":null,"click-on-trackpad":e=>!0,"current-time-update":e=>!0,"timeline-length-increase":null,"track-element-select-many":null,"track-element-deselect-all":null,"current-time-update-on-drag":null},data(){return{isPositionStickySupported:!0,scrollCompensationY:0,cursorHeight:400,edgeScroller:void 0,isPointerCursorActive:!1,dragEnterCounter:0,trackpadWidth:0,cursorRect:void 0,cursorEventTarget:new ue,cursorAlertYPosition:0,cursorAlertAlign:"top",isCursorAlertVisible:!1,isScrollEventSynthetic:!1,isTimelineScrolling:!1,isPointerPressed:!1,cursorAlertAnchorRectAccessors:{},trackPageLeftOffset:0,lastTrackpadCoordinates:[0,0],isMultiSelectInProgress:!1}},computed:{selectableConfig(){return{idAttr:wn,itemsSelector:`[${wn}]:not([data-track-element-type="preloader"])`,disabled:this.selectableDisabled,onSelect:this.onSelectableSelect,onStart:()=>{this.isMultiSelectInProgress=!0},onStop:()=>{this.isMultiSelectInProgress=!1},boundaries:[".app-timeline-trackpad__tracks"]}},timelineWidth(){return Math.round(this.timelineLength/1e3*this.timelineScale)+hi},timelineCursorOffset(){return Math.round(this.currentTime/1e3*this.timelineScale-$S/2)},formattedCurrentTime(){return Ue(this.currentTime,{isShowMilliseconds:!0,isMinutesCanBeTrimmed:!0})}},watch:{isEdgeScrollingEnabled(e){V(this.edgeScroller!==void 0,"edgeScroller is undefined"),e?this.edgeScroller.enable():this.edgeScroller.disable()},timelineScale(e,t){const i=this.$el.scrollLeft;this.$nextTick(()=>{const o=hi/2;this.$el.scrollLeft=(i-o)/t*e+o})},currentTime(){if(this.isTimelineScrolling||this.isPointerPressed||!this.isAutoScrollingEnabled)return;const e=this.$el.scrollLeft+this.trackpadWidth-$n/2,t=Math.round(e/this.timelineScale*1e3);this.currentTime>t&&this.scrollToCurrentTime();const i=this.$el.scrollLeft-$n/2,o=Math.round(i/this.timelineScale*1e3);this.currentTime<o&&this.scrollToCurrentTime()}},mounted(){this.isPositionStickySupported=CSS.supports("position","sticky"),this.updateCursorHeight(),this.updateTrackpadWidth(),this.bindTrackpadResizeEventListener(),this.isPositionStickySupported||this.updateStickyBoxScrollCompensation(),this.edgeScroller=new CS(this.$el),this.isEdgeScrollingEnabled&&this.edgeScroller.enable(),this.scrollEventEmitter.on("timeline-scroll-to",this.scrollToTimeWithPaddings)},beforeUnmount(){this.scrollEventEmitter.off("timeline-scroll-to",this.scrollToTimeWithPaddings),this.unbindTrackpadResizeEventListener(),this.edgeScroller!==void 0&&this.edgeScroller.disable()},methods:{onSelectableSelect(e){this.$emit("track-element-select-many",e)},updateStickyBoxScrollCompensation(){this.$el.scrollTop+this.$el.clientHeight>this.$el.scrollHeight||(this.scrollCompensationY=this.$el.scrollTop)},updateCursorHeight(){this.cursorHeight=this.$el.clientHeight-1},updateTrackpadWidth(){this.trackpadWidth=this.$el.clientWidth-hi,this.$emit("trackpad-width-update",this.trackpadWidth)},bindTrackpadResizeEventListener(){const e=window.ResizeObserver??Ut;this.resizeObserver=new e(()=>{this.updateCursorHeight(),this.updateTrackpadWidth(),this.calculateTrackPageLeftOffset()}),this.resizeObserver.observe(this.$el)},unbindTrackpadResizeEventListener(){this.resizeObserver!==void 0&&this.resizeObserver.disconnect()},getTimelineScrollPosition(){return this.$el.scrollLeft},unselectAllTrackElements(){this.$emit("track-element-deselect-all")},emitClickOnTrackpadEvent(e){const t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=this.$el.scrollLeft+t-this.trackPageLeftOffset,o=Math.round(i/this.timelineScale*1e3);this.$emit("click-on-trackpad",o)},checkDraggableDataAndUpdateCurrentTime(e){const t=le.getInstance().getData();if(t===void 0)return;const i=t.movingOffsetX!==void 0?t.movingOffsetX:t.offsetX,o=t.sourceRect===void 0?this.$el.scrollLeft+e.clientX-this.trackPageLeftOffset-i:this.$el.scrollLeft+(t.sourceRect.x+i)-this.trackPageLeftOffset,s=Math.round(o/this.timelineScale*1e3);this.$emit("current-time-update-on-drag",s)},increaseTimelineLength(e){const t=this.$el.scrollLeft+e.clientX-this.trackPageLeftOffset;this.$el.scrollWidth-t<TS&&this.$emit("timeline-length-increase")},activatePointerCursor(){this.isPointerCursorActive=!0},deactivatePointerCursor(){this.isPointerCursorActive=!1},emitClickOnTrackpadEventOnDoubleTapOrClick:Qi(function(e){this.emitClickOnTrackpadEvent(e)}),getTrackpadContainer(){return this.$el},callCallbackOnlyIfDragEnterOccurredOnRootElement(e,t){this.dragEnterCounter===0&&e(t),t.currentTarget===this.$el&&(this.dragEnterCounter+=1)},callCallbackOnlyIfDragLeaveOccurredOnRootElement(e,t){t.currentTarget===this.$el&&(this.dragEnterCounter-=1),this.dragEnterCounter===0&&e(t)},resetDragEnterCounter(){this.dragEnterCounter=0},scrollToTimeWithPaddings(e){const t=e.data.startTime,i=Math.round(t*this.timelineScale/1e3),o=this.$el.scrollLeft;(i<o||i-o>this.trackpadWidth*.8)&&this.scrollToTime(t-this.trackpadWidth*.1),"positionTop"in e.data&&(this.$el.scrollTop=e.data.positionTop)},scrollToTime(e){this.isScrollEventSynthetic=!0,this.$el.scrollLeft=Math.round(e/1e3*this.timelineScale-hi/2)},scrollToCurrentTime(){this.scrollToTime(this.currentTime)},dispatchPointerDownOnCursorEventTarget(e){this.cursorEventTarget.fire("pointerdown",e)},showCursorAlert(e,t){switch(this.cursorRect=this.$refs.cursor.getBoundingClientRect(),e){case"fixed":this.calculateCursorAlertYPositionInFixedMode();break;case"follow-pointer":V(t!==void 0,"y is undefined"),this.cursorAlertAlign="top",this.calculateCursorAlertYPositionInPointerMode(t);break;case"follow-draggable":if(V(t!==void 0,"y is undefined"),le.getInstance().getData()===void 0)return;this.calculateCursorAlertYPositionInDraggableMode(t);break;default:throw new Error("unknown cursor alert mode")}this.isCursorAlertVisible=!0},hideCursorAlert(){this.isCursorAlertVisible=!1},calculateCursorAlertYPositionInPointerMode(e){V(this.cursorRect!==void 0,"cursorRect is undefined");const t=e-this.cursorRect.top-bt-Xi,i=gi,o=this.cursorRect.height-bt-Xi;this.cursorAlertYPosition=Math.max(i,Math.min(t,o))},calculateCursorAlertYPositionInFixedMode(){V(this.cursorRect!==void 0,"cursorRect is undefined"),V(this.trackElementSelectionViewModel.getActiveId()!==void 0,"activeTrackElementId is undefined");const e=this.cursorAlertAnchorRectAccessors[this.trackElementSelectionViewModel.getActiveId()];V(e!==void 0,"cursorAlertAnchorRectAccessor is undefined");const t=e(),i=t.top-this.cursorRect.top;i-gi>bt+Dt?(this.cursorAlertAlign="top",this.cursorAlertYPosition=i-Dt-bt):(this.cursorAlertAlign="bottom",this.cursorAlertYPosition=i+t.height+Dt)},calculateCursorAlertYPositionInDraggableMode(e){const t=le.getInstance().getData();if(t===void 0)return;V(this.cursorRect!==void 0,"cursorRect is undefined");const{offsetY:i,previewHeight:o}=t,s=e-this.cursorRect.top;if(s-gi-bt-Dt-i>0)this.cursorAlertAlign="top",this.cursorAlertYPosition=Math.max(gi,s-bt-Dt-i);else{this.cursorAlertAlign="bottom";const l=this.cursorRect.height-bt-Xi;this.cursorAlertYPosition=Math.min(l,s-i+o+Dt)}},addCursorAlertAnchorRectAccessor(e,t){this.cursorAlertAnchorRectAccessors[e]=t},deleteCursorAlertAnchorRectAccessor(e){e in this.cursorAlertAnchorRectAccessors&&delete this.cursorAlertAnchorRectAccessors[e]},stopTimelineScrollingByUser:_t(function(){this.isTimelineScrolling=!1},1e3),prolongTimelineScrollingByUser(){if(this.isScrollEventSynthetic){this.isScrollEventSynthetic=!1;return}this.isTimelineScrolling=!0,this.stopTimelineScrollingByUser()},callCallbackOnlyAfterBlurOnActiveInputElement:Qt,...(()=>{const{callback:e,cancel:t}=zn();return{callCallbackOnlyOncePerFrame:e,cancelCallCallbackOnlyOncePerFrame:t}})(),calculateTrackPageLeftOffset(){const t=this.$refs.tracks.firstElementChild;this.trackPageLeftOffset=this.getTimelineScrollPosition()+t.getBoundingClientRect().left},saveCoordinates(e){const t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;this.lastTrackpadCoordinates=[t,i]},isClickOnTrackpad(e){const t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,o=Math.abs(t-this.lastTrackpadCoordinates[0]),s=Math.abs(i-this.lastTrackpadCoordinates[1]);return o<10&&s<10}}}),AS={class:"app-timeline-trackpad__ruler"};function MS(e,t,i,o,s,l){const a=ao("selectable-directive");return ae((d(),h("div",J({class:["app-timeline-trackpad",{"app-timeline-trackpad--sticky-supported":e.isPositionStickySupported,"app-timeline-trackpad--sticky-unsupported":!e.isPositionStickySupported,"app-timeline-trackpad--cursor-pointer-events-disabled":e.isTimelineCursorPointerEventsDisabled,"app-timeline-trackpad--pointer-cursor-active":e.isPointerCursorActive}],onScroll:t[6]||(t[6]=(...u)=>e.prolongTimelineScrollingByUser&&e.prolongTimelineScrollingByUser(...u))},lo(e.isPositionStickySupported?{}:{scroll:e.updateStickyBoxScrollCompensation}),{onDragover:t[7]||(t[7]=u=>{e.callCallbackOnlyOncePerFrame(()=>{e.increaseTimelineLength(u),e.checkDraggableDataAndUpdateCurrentTime(u),e.calculateCursorAlertYPositionInDraggableMode(u.pageY)})}),onDrop:t[8]||(t[8]=u=>{e.resetDragEnterCounter(),e.$emit("trackpad-drop"),e.hideCursorAlert(),e.cancelCallCallbackOnlyOncePerFrame()}),onDragenter:t[9]||(t[9]=u=>{e.callCallbackOnlyIfDragEnterOccurredOnRootElement(()=>{e.$emit("trackpad-dragenter"),e.showCursorAlert("follow-draggable",u.pageY)},u)}),onDragleave:t[10]||(t[10]=u=>{e.callCallbackOnlyIfDragLeaveOccurredOnRootElement(()=>{e.$emit("trackpad-dragleave"),e.hideCursorAlert()},u)}),onMouseup:t[11]||(t[11]=u=>{e.isPointerPressed=!1}),onMousedown:t[12]||(t[12]=u=>{e.isPointerPressed=!0})}),[p("div",{class:"app-timeline-trackpad__sticky-box",style:z({width:`${e.timelineWidth}px`,transform:e.isPositionStickySupported?void 0:`translate3d(0, ${e.scrollCompensationY}px, 0)`})},[p("div",{ref:"cursor",class:"app-timeline-trackpad__cursor",style:z({height:`${e.cursorHeight}px`,transform:`translate3d(${e.timelineCursorOffset}px, 0, 0)`}),onMousedownCapture:t[0]||(t[0]=(...u)=>e.dispatchPointerDownOnCursorEventTarget&&e.dispatchPointerDownOnCursorEventTarget(...u)),onTouchstartCapture:t[1]||(t[1]=(...u)=>e.dispatchPointerDownOnCursorEventTarget&&e.dispatchPointerDownOnCursorEventTarget(...u))},[w(e.$slots,"cursor",{isPointerCursorActive:e.isPointerCursorActive,activatePointerCursor:e.activatePointerCursor,deactivatePointerCursor:e.deactivatePointerCursor,calculateCursorAlertYPositionInPointerMode:e.calculateCursorAlertYPositionInPointerMode,showCursorAlert:e.showCursorAlert,hideCursorAlert:e.hideCursorAlert}),ae(p("div",{class:F(["app-timeline-trackpad__cursor-alert",[`app-timeline-trackpad__cursor-alert--align-${e.cursorAlertAlign}`]]),style:z({transform:`translate3d(-50%, ${e.cursorAlertYPosition}px, 0)`})},g(e.formattedCurrentTime),7),[[pe,e.isCursorAlertVisible]])],36),p("div",AS,[w(e.$slots,"ruler",{isPointerCursorActive:e.isPointerCursorActive,activatePointerCursor:e.activatePointerCursor,deactivatePointerCursor:e.deactivatePointerCursor,calculateCursorAlertYPositionInPointerMode:e.calculateCursorAlertYPositionInPointerMode,showCursorAlert:e.showCursorAlert,hideCursorAlert:e.hideCursorAlert})])],4),p("div",{ref:"tracks",class:"app-timeline-trackpad__tracks",style:z({width:`${e.timelineWidth}px`}),onClickCapture:t[2]||(t[2]=u=>e.emitClickOnTrackpadEventOnDoubleTapOrClick(u)),onClick:t[3]||(t[3]=u=>{e.callCallbackOnlyAfterBlurOnActiveInputElement(()=>{e.isClickOnTrackpad(u)&&(e.unselectAllTrackElements(),e.emitClickOnTrackpadEvent(u))})}),onMousedown:t[4]||(t[4]=(...u)=>e.saveCoordinates&&e.saveCoordinates(...u)),onTouchstart:t[5]||(t[5]=(...u)=>e.saveCoordinates&&e.saveCoordinates(...u))},[w(e.$slots,"tracks",{getTimelineScrollPosition:e.getTimelineScrollPosition,cursorEventTarget:e.cursorEventTarget,addCursorAlertAnchorRectAccessor:e.addCursorAlertAnchorRectAccessor,deleteCursorAlertAnchorRectAccessor:e.deleteCursorAlertAnchorRectAccessor,getTrackpadContainer:e.getTrackpadContainer,showCursorAlert:e.showCursorAlert,hideCursorAlert:e.hideCursorAlert,timelineWidth:e.timelineWidth,trackPageLeftOffset:e.trackPageLeftOffset,isMultiSelectInProgress:e.isMultiSelectInProgress})],36)],16)),[[a,e.selectableConfig]])}const RS=$(wS,[["render",MS]]),PS=A({name:"app-timeline-placeholder",emits:{"drop-on-placeholder":e=>!0},data(){return{isDropZoneMarkerVisible:!1}},methods:{parseDataAndEmitDropEvent(){const e=le.getInstance().getData();V(e!==void 0,"dragDropDataTransfer is empty"),this.$emit("drop-on-placeholder",e.payload)},setDropEffect(e){V(e.dataTransfer!==null,"DragEvent.dataTransfer is null"),e.dataTransfer.dropEffect="copy"},showDropZoneMarker(){this.isDropZoneMarkerVisible=!0},hideDropZoneMarker(){this.isDropZoneMarkerVisible=!1}}}),IS={class:"app-timeline-placeholder__text"};function LS(e,t,i,o,s,l){return d(),h("div",J({class:"app-timeline-placeholder"},e.$attrs,{onDrop:t[0]||(t[0]=_(a=>{e.parseDataAndEmitDropEvent(),e.hideDropZoneMarker()},["prevent"])),onDragover:t[1]||(t[1]=_((...a)=>e.setDropEffect&&e.setDropEffect(...a),["prevent"])),onDragenter:t[2]||(t[2]=_((...a)=>e.showDropZoneMarker&&e.showDropZoneMarker(...a),["prevent"])),onDragleave:t[3]||(t[3]=(...a)=>e.hideDropZoneMarker&&e.hideDropZoneMarker(...a))}),[p("div",IS,g(e.$t("appTimelinePlaceholder.text")),1),p("div",{class:F(["app-timeline-placeholder__marker",{"app-timeline-placeholder__marker--active":e.isDropZoneMarkerVisible}])},null,2)],16)}const OS=$(PS,[["render",LS]]),FS=A({name:"app-timeline",props:{isConsoleMenuHeightExtended:{type:Boolean,default:!1}}}),DS={class:"app-timeline__toolbar app-timeline__toolbar--mobile"},VS={class:"app-timeline__toolbar app-timeline__toolbar--desktop"},NS={class:"app-timeline__trackpad"};function BS(e,t,i,o,s,l){return d(),h("div",{class:F(["app-timeline",{"app-timeline--console-menu-height-extended":e.isConsoleMenuHeightExtended}])},[p("div",DS,[w(e.$slots,"toolbar-mobile")]),p("div",VS,[w(e.$slots,"toolbar-desktop")]),p("div",NS,[w(e.$slots,"trackpad")])],2)}const jS=$(FS,[["render",BS]]),zS=A({name:"media-recorder-title-input-mobile",props:{value:{type:String,required:!0}},emits:{edit:null,display:null,"text-changed":e=>!0},data(){return{isEditing:!1,currentValue:""}},watch:{value(){this.currentValue=this.value}},mounted(){this.currentValue=this.value,document.addEventListener("mousedown",this.checkClickOutsideTitleAndBlur,{capture:!0}),document.addEventListener("touchstart",this.checkClickOutsideTitleAndBlur,{capture:!0})},beforeUnmount(){document.removeEventListener("mousedown",this.checkClickOutsideTitleAndBlur,{capture:!0}),document.removeEventListener("touchstart",this.checkClickOutsideTitleAndBlur,{capture:!0})},methods:{async setEditing(e){this.isEditing=e,e&&(await this.$nextTick(),this.$refs.input.focus()),e?this.$emit("edit"):this.$emit("display")},checkClickOutsideTitleAndBlur(e){const t=e.target;!this.$el.contains(t)&&this.$el!==t&&this.setEditing(!1)}}}),HS={class:"media-recorder-title-input-mobile__placeholder"},_S={class:"media-recorder-title-input-mobile__placeholder-icon"},US={key:1,class:"media-recorder-title-input-mobile"},qS=["value"];function WS(e,t,i,o,s,l){const a=Ye;return e.isEditing?(d(),h("div",US,[p("input",J({ref:"input",type:"text",class:"media-recorder-title-input-mobile__input",value:e.currentValue},{...e.$attrs,onInput:u=>(e.currentValue=u.target.value,!0)},{onKeyup:[t[1]||(t[1]=Ce(_(u=>{e.setEditing(!1)},["prevent"]),["esc"])),t[2]||(t[2]=Ce(_(u=>{e.setEditing(!1),e.$emit("text-changed",e.currentValue)},["prevent"]),["enter"]))],onKeydown:t[3]||(t[3]=Ce(u=>{u.stopPropagation()},["space"])),onFocusout:t[4]||(t[4]=u=>{e.setEditing(!1),e.$emit("text-changed",e.currentValue)}),onBlur:t[5]||(t[5]=u=>{e.setEditing(!1),e.$emit("text-changed",e.currentValue)})}),null,16,qS),(d(),h("svg",{class:"media-recorder-title-input-mobile__close",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:t[6]||(t[6]=u=>e.setEditing(!1))},t[7]||(t[7]=[Ht('<circle cx="20" cy="20" r="9" fill="white" fill-opacity="0.2"></circle><g clip-path="url(#clip0_19994_107575)"><path fill-rule="evenodd" clip-rule="evenodd" d="M23.5303 17.5303C23.8232 17.2374 23.8232 16.7626 23.5303 16.4697C23.2374 16.1768 22.7626 16.1768 22.4697 16.4697L20 18.9393L17.5303 16.4697C17.2374 16.1768 16.7626 16.1768 16.4697 16.4697C16.1768 16.7626 16.1768 17.2374 16.4697 17.5303L18.9393 20L16.4697 22.4697C16.1768 22.7626 16.1768 23.2374 16.4697 23.5303C16.7626 23.8232 17.2374 23.8232 17.5303 23.5303L20 21.0607L22.4697 23.5303C22.7626 23.8232 23.2374 23.8232 23.5303 23.5303C23.8232 23.2374 23.8232 22.7626 23.5303 22.4697L21.0607 20L23.5303 17.5303Z" fill="#151519"></path></g><defs><clipPath id="clip0_19994_107575"><rect width="8" height="8" fill="white" transform="translate(16 16)"></rect></clipPath></defs>',3)])))])):(d(),h("div",{key:0,class:F(["media-recorder-title-input-mobile",{"media-recorder-title-input-mobile--editing":e.isEditing}])},[p("div",{class:"media-recorder-title-input-mobile__placeholder-container",onClick:t[0]||(t[0]=u=>e.setEditing(!0))},[p("span",HS,g(e.value),1),p("span",_S,[r(a,{icon:"title-input-edit"})])])],2))}const GS=$(zS,[["render",WS]]),XS=A({name:"media-recorder-title-input",props:{value:{type:String,required:!0},isDisabled:{type:Boolean,default:!1}},emits:{"text-changed":null},data(){return{isEditing:!1,inputWidth:"auto",currentValue:""}},mounted(){this.expandInputWidth(this.value),document.addEventListener("mousedown",this.checkClickOutsideTitleAndBlur,{capture:!0}),document.addEventListener("touchstart",this.checkClickOutsideTitleAndBlur,{capture:!0})},beforeUnmount(){document.removeEventListener("mousedown",this.checkClickOutsideTitleAndBlur,{capture:!0}),document.removeEventListener("touchstart",this.checkClickOutsideTitleAndBlur,{capture:!0})},methods:{async setEditing(e){this.isEditing=e,e&&(await this.$nextTick(),this.$refs.input.focus(),this.expandInputWidth(this.value))},async expandInputWidth(e){const t=this.$refs.input,i=this.$refs.buffer;if(t===void 0||i===void 0)return;this.currentValue=e.trim(),await this.$nextTick();const o=i.clientWidth;this.inputWidth=`${Math.max(100,o)}px`},checkClickOutsideTitleAndBlur(e){const t=e.target;!this.$el.contains(t)&&this.$el!==t&&(this.isEditing&&this.$emit("text-changed",this.currentValue),this.setEditing(!1))}}}),YS={class:"media-recorder-title-input__placeholder"},KS={class:"media-recorder-title-input__placeholder-icon"},ZS={key:1,class:"media-recorder-title-input"},QS=["value"];function JS(e,t,i,o,s,l){const a=Ye;return e.isEditing?(d(),h("div",ZS,[p("input",J({ref:"input",type:"text",class:"media-recorder-title-input__input",value:e.currentValue,style:{width:e.inputWidth}},{...e.$attrs,onInput:u=>(e.expandInputWidth(u.target.value??""),!0)},{onKeyup:[t[1]||(t[1]=Ce(_(u=>{e.setEditing(!1)},["prevent"]),["esc"])),t[2]||(t[2]=Ce(_(u=>{e.setEditing(!1),e.$emit("text-changed",e.currentValue)},["prevent"]),["enter"]))],onKeydown:t[3]||(t[3]=Ce(u=>{u.stopPropagation()},["space"]))}),null,16,QS),p("div",{ref:"buffer",class:"media-recorder-title-input__buffer"},g(e.currentValue),513)])):(d(),h("div",{key:0,class:F(["media-recorder-title-input",{"media-recorder-title-input--disabled":e.isDisabled}])},[p("div",{class:"media-recorder-title-input__placeholder-container",onClick:t[0]||(t[0]=u=>e.setEditing(!0))},[p("span",YS,g(e.value),1),p("span",KS,[r(a,{icon:"title-input-edit"})])])],2))}const xS=$(XS,[["render",JS]]),An=e=>Math.floor(Math.ceil(e)/60).toString().padStart(2,"0")+":"+(Math.ceil(e)%60).toString().padStart(2,"0"),ek=A({name:"media-recorder-recording-progress",props:{time:{type:Number,required:!0},finishTime:{type:Number,default:void 0},isPaused:{type:Boolean,required:!0},isDisabled:{type:Boolean,default:!1}},computed:{timeString(){return An(this.time)},finishTimeString(){return this.finishTime===void 0?"":An(this.finishTime)}}}),tk={class:"media-recorder-recording-progress__time"},ik={key:0,class:"media-recorder-recording-progress__separator"},ok={key:1,class:"media-recorder-recording-progress__finish-time"};function nk(e,t,i,o,s,l){return d(),h("div",{class:F(["media-recorder-recording-progress",{"is-paused":e.isPaused,"media-recorder-recording-progress--disabled":e.isDisabled}])},[t[0]||(t[0]=p("span",{class:"media-recorder-recording-progress__icon"},null,-1)),p("span",tk,g(e.timeString),1),e.finishTime!==void 0?(d(),h("span",ik," / ")):E("",!0),e.finishTime!==void 0?(d(),h("span",ok,g(e.finishTimeString),1)):E("",!0)],2)}const sk=$(ek,[["render",nk]]),ak=A({name:"media-recorder-alert-browser-not-supported",components:{AppModal:qe,AppButton:oe,AppModalContentError:et},emits:["close"]}),rk={class:"media-recorder-alert-browser-not-supported__text"},lk={class:"media-recorder-alert-browser-not-supported__link",href:"https://help.clideo.com/hc/en-us/articles/10566048523548-How-to-make-your-own-audio-video-or-screen-recording-",target:"_blank"};function dk(e,t,i,o,s,l){const a=D("AppButton"),u=D("AppModalContentError"),m=D("AppModal");return d(),S(m,{"is-expand-on-mobile":"","is-close-button-visible":!1,onClose:t[1]||(t[1]=f=>e.$emit("close"))},{default:n(()=>[r(u,{variant:"light"},{title:n(()=>[y(g(e.$t("mediaRecorder.alertBrowserNotSupported.browserNotSupported")),1)]),subtitle:n(()=>[p("span",rk,[y(g(e.$t("mediaRecorder.alertBrowserNotSupported.browserNotSupportedExplanationStart"))+" ",1),p("a",lk,g(e.$t("mediaRecorder.alertBrowserNotSupported.helpCenter")),1),y(" "+g(e.$t("mediaRecorder.alertBrowserNotSupported.browserNotSupportedExplanationEnd")),1)])]),"close-button":n(()=>[r(a,{variant:"outline",size:"modal","font-weight":500,"rounding-value":5,onClick:t[0]||(t[0]=f=>e.$emit("close"))},{default:n(()=>[y(g(e.$t("mediaRecorder.alertBrowserNotSupported.close")),1)]),_:1})]),_:1})]),_:1})}const uk=$(ak,[["render",dk]]),pk=A({name:"media-recorder-alert-permission-denied",components:{AppModal:qe,AppButton:oe,AppModalContentError:et},emits:["close"]}),ck={class:"media-recorder-alert-permission-denied__text"},mk={class:"media-recorder-alert-permission-denied__link",href:"https://help.clideo.com/hc/en-us/articles/10566048523548-How-to-make-your-own-audio-video-or-screen-recording-",target:"_blank"};function hk(e,t,i,o,s,l){const a=D("AppButton"),u=D("AppModalContentError"),m=D("AppModal");return d(),S(m,{"is-expand-on-mobile":"","is-close-button-visible":!1,onClose:t[1]||(t[1]=f=>e.$emit("close"))},{default:n(()=>[r(u,{variant:"light"},{title:n(()=>[y(g(e.$t("mediaRecorder.alertPermissionDenied.cannotStartRecording")),1)]),subtitle:n(()=>[p("span",ck,[y(g(e.$t("mediaRecorder.alertPermissionDenied.permissionDeniedMessage"))+" ",1),p("a",mk,g(e.$t("mediaRecorder.alertPermissionDenied.helpCenter")),1),y(" "+g(e.$t("mediaRecorder.alertPermissionDenied.moreInfo")),1)])]),"close-button":n(()=>[r(a,{variant:"outline",size:"modal","font-weight":500,"rounding-value":5,onClick:t[0]||(t[0]=f=>e.$emit("close"))},{default:n(()=>[y(g(e.$t("mediaRecorder.alertPermissionDenied.close")),1)]),_:1})]),_:1})]),_:1})}const gk=$(pk,[["render",hk]]),vk=A({name:"media-recorder-alert-no-screen-record",components:{AppModal:qe,AppButton:oe,AppModalContentError:et},emits:["close"]}),fk={class:"media-recorder-alert-no-screen-record__text"};function bk(e,t,i,o,s,l){const a=D("AppButton"),u=D("AppModalContentError"),m=D("AppModal");return d(),S(m,{"is-expand-on-mobile":"","is-close-button-visible":!1,onClose:t[1]||(t[1]=f=>e.$emit("close"))},{default:n(()=>[r(u,{variant:"light"},{title:n(()=>[y(g(e.$t("mediaRecorder.alertNoScreenRecord.cannotStartRecording")),1)]),subtitle:n(()=>[p("span",fk,g(e.$t("mediaRecorder.alertNoScreenRecord.yourBrowserDoesNotSupportScreenRecording")),1)]),"close-button":n(()=>[r(a,{variant:"outline",size:"modal","font-weight":500,"rounding-value":5,onClick:t[0]||(t[0]=f=>e.$emit("close"))},{default:n(()=>[y(g(e.$t("mediaRecorder.alertNoScreenRecord.close")),1)]),_:1})]),_:1})]),_:1})}const yk=$(vk,[["render",bk]]),Ek=A({name:"media-recorder-alert-no-camera",components:{AppModal:qe,AppButton:oe,AppModalContentError:et},emits:{close:null}}),Sk={class:"media-recorder-alert-no-camera__text"},kk={class:"media-recorder-alert-no-camera__link",href:"https://help.clideo.com/hc/en-us/articles/10566048523548-How-to-make-your-own-audio-video-or-screen-recording-",target:"_blank"};function Ck(e,t,i,o,s,l){const a=D("AppButton"),u=D("AppModalContentError"),m=D("AppModal");return d(),S(m,{"is-expand-on-mobile":"","is-close-button-visible":!1,onClose:t[1]||(t[1]=f=>e.$emit("close"))},{default:n(()=>[r(u,{variant:"light"},{title:n(()=>[y(g(e.$t("mediaRecorder.alertPermissionDenied.cannotStartRecording")),1)]),subtitle:n(()=>[p("span",Sk,[y(g(e.$t("mediaRecorder.alertPermissionDenied.noCameraMessage"))+" ",1),p("a",kk,g(e.$t("mediaRecorder.alertPermissionDenied.helpCenter")),1),y(" "+g(e.$t("mediaRecorder.alertPermissionDenied.moreInfo")),1)])]),"close-button":n(()=>[r(a,{variant:"outline",size:"modal","font-weight":500,"rounding-value":5,onClick:t[0]||(t[0]=f=>e.$emit("close"))},{default:n(()=>[y(g(e.$t("mediaRecorder.alertPermissionDenied.close")),1)]),_:1})]),_:1})]),_:1})}const Tk=$(Ek,[["render",Ck]]),$k=A({name:"media-recorder-alert-no-microphone",components:{AppModal:qe,AppButton:oe,AppModalContentError:et},emits:{close:null}}),wk={class:"media-recorder-alert-permission-denied__text"},Ak={class:"media-recorder-alert-permission-denied__link",href:"https://help.clideo.com/hc/en-us/articles/10566048523548-How-to-make-your-own-audio-video-or-screen-recording-",target:"_blank"};function Mk(e,t,i,o,s,l){const a=D("AppButton"),u=D("AppModalContentError"),m=D("AppModal");return d(),S(m,{"is-expand-on-mobile":"","is-close-button-visible":!1,onClose:t[1]||(t[1]=f=>e.$emit("close"))},{default:n(()=>[r(u,{variant:"light"},{title:n(()=>[y(g(e.$t("mediaRecorder.alertPermissionDenied.cannotStartRecording")),1)]),subtitle:n(()=>[p("span",wk,[y(g(e.$t("mediaRecorder.alertPermissionDenied.noMicrophoneMessage"))+" ",1),p("a",Ak,g(e.$t("mediaRecorder.alertPermissionDenied.helpCenter")),1),y(" "+g(e.$t("mediaRecorder.alertPermissionDenied.moreInfo")),1)])]),"close-button":n(()=>[r(a,{variant:"outline",size:"modal","font-weight":500,"rounding-value":5,onClick:t[0]||(t[0]=f=>e.$emit("close"))},{default:n(()=>[y(g(e.$t("mediaRecorder.alertPermissionDenied.close")),1)]),_:1})]),_:1})]),_:1})}const Rk=$($k,[["render",Mk]]);class Pk{constructor(){U(this,"resizeObserver")}observe(t,i){if(document===void 0||window===void 0)throw new Error("document or body are undefined");this.resizeObserver!==void 0&&this.resizeObserver.disconnect(),window.ResizeObserver===void 0?this.resizeObserver=new Ut(i):this.resizeObserver=new ResizeObserver(i),this.resizeObserver.observe(t)}unobserve(){if(this.resizeObserver===void 0)throw new Error("Resize Observer was not initialized");this.resizeObserver.disconnect()}}const Ik=A({name:"media-recorder-overlay",props:{anchor:{type:Function,default:()=>{}},isDarkBackgroundEnabled:{type:Boolean,default:!1},isMobileView:{type:Boolean,default:!1},portalName:{type:String,default:"#teleport-target-overlay"}},emits:["close"],data(){return{resizeObserver:new Pk}},computed:{shouldBeCentered(){return this.anchor()===void 0}},watch:{anchor(){this.updateContentPosition()}},async mounted(){await this.$nextTick(),this.updateContentPosition(),window.addEventListener("resize",()=>{this.updateContentPosition()});const e=this.$refs.content;this.resizeObserver.observe(e,this.updateContentPosition)},beforeUnmount(){this.resizeObserver.unobserve()},methods:{updateContentPosition(){const e=this.anchor();if(e===void 0)return;const t=this.$refs.content;if(t===void 0)return;const i=e.getBoundingClientRect();t.style.left=`${i.left+i.width-t.clientWidth}px`,t.style.top=`${i.top-t.clientHeight-12}px`}}});function Lk(e,t,i,o,s,l){return d(),S(Ci,{defer:"",to:e.portalName},[p("div",{class:F(["media-recorder-overlay",{"dark-background":e.isDarkBackgroundEnabled,"media-recorder-overlay--mobile":e.isMobileView}]),onClick:t[1]||(t[1]=a=>e.$emit("close"))},[p("div",{ref:"content",class:F(["media-recorder-overlay__content",{centered:e.shouldBeCentered}]),onClick:t[0]||(t[0]=a=>a.stopPropagation())},[w(e.$slots,"default")],2)],2)],8,["to"])}const vs=$(Ik,[["render",Lk]]),Ok=A({name:"media-recorder-alert",components:{AppButton:oe},props:{okButtonVariant:{type:String,default:"accent"},okLabel:{type:String,default:void 0},cancelLabel:{type:String,default:void 0},isMobileView:{type:Boolean,default:!1}},emits:{cancel:null,ok:null}}),Fk={class:"buttons"},Dk={key:0,class:"button-container"},Vk={key:1,class:"button-container"};function Nk(e,t,i,o,s,l){const a=D("AppButton");return d(),h("div",{class:F(["media-recorder-alert",{"media-recorder-alert--mobile":e.isMobileView}])},[p("h3",null,[w(e.$slots,"header")]),p("p",null,[w(e.$slots,"content")]),p("div",Fk,[e.cancelLabel?(d(),h("div",Dk,[r(a,{variant:"outline",class:"media-recorder-alert__cancel-button","rounding-value":5,size:"large","fixed-height":e.isMobileView?40:36,onClick:t[0]||(t[0]=u=>e.$emit("cancel"))},{default:n(()=>[y(g(e.cancelLabel),1)]),_:1},8,["fixed-height"])])):E("",!0),e.okLabel?(d(),h("div",Vk,[r(a,{variant:e.okButtonVariant,class:"media-recorder-alert__ok-button","rounding-value":5,size:"large","font-weight":600,"fixed-height":e.isMobileView?40:36,onClick:t[1]||(t[1]=u=>e.$emit("ok"))},{default:n(()=>[y(g(e.okLabel),1)]),_:1},8,["variant","fixed-height"])])):E("",!0)])],2)}const Eo=$(Ok,[["render",Nk]]),Bk=A({name:"media-recorder-alert-retake-recording",props:{isMobileView:{type:Boolean,default:!1}},emits:{cancel:null,ok:null}});function jk(e,t,i,o,s,l){const a=Eo;return d(),S(a,{"ok-label":e.$t("mediaRecorder.alertRetakeRecording.retake"),"cancel-label":e.$t("mediaRecorder.alertRetakeRecording.stayHere"),"is-mobile-view":e.isMobileView,onCancel:t[0]||(t[0]=u=>e.$emit("cancel")),onOk:t[1]||(t[1]=u=>e.$emit("ok"))},{header:n(()=>[y(g(e.$t("mediaRecorder.alertRetakeRecording.retakeRecording")),1)]),content:n(()=>[y(g(e.$t("mediaRecorder.alertRetakeRecording.retakeWarning")),1)]),_:1},8,["ok-label","cancel-label","is-mobile-view"])}const zk=$(Bk,[["render",jk]]),Hk=A({name:"media-recorder-alert-exit-prompt",props:{isMobileView:{type:Boolean,default:!1}},emits:{cancel:null,ok:null}});function _k(e,t,i,o,s,l){const a=Eo;return d(),S(a,{"ok-label":e.$t("mediaRecorder.alertExitPrompt.exit"),"cancel-label":e.$t("mediaRecorder.alertExitPrompt.stayHere"),"ok-button-variant":"error","is-mobile-view":e.isMobileView,onCancel:t[0]||(t[0]=u=>e.$emit("cancel")),onOk:t[1]||(t[1]=u=>e.$emit("ok"))},{header:n(()=>[y(g(e.$t("mediaRecorder.alertExitPrompt.exitRecording")),1)]),content:n(()=>[y(g(e.$t("mediaRecorder.alertExitPrompt.ifYouCloseThisWindow")),1)]),_:1},8,["ok-label","cancel-label","is-mobile-view"])}const Uk=$(Hk,[["render",_k]]),qk=A({name:"media-recorder-screen-and-camera-view",props:{screenStream:{default:void 0},cameraStream:{default:void 0}},computed:{isScreenStreamAvailable(){return this.screenStream!==void 0}},watch:{screenStream(){this.startStreaming()},cameraStream(){this.startStreaming()}},mounted(){this.startStreaming()},methods:{startStreaming(){const e=(t,i)=>{i!==void 0&&(i.srcObject=t??null)};e(this.screenStream,this.$refs.screenVideo),e(this.cameraStream,this.$refs.cameraVideo)}}}),Wk={class:"media-recorder-screen-and-camera-view"},Gk={ref:"screenVideo",class:"screen",autoplay:"",muted:"",playsinline:""},Xk={ref:"cameraVideo",class:"camera",autoplay:"",muted:"",playsinline:""},Yk={key:0,class:"media-recorder-screen-and-camera-view__tip"};function Kk(e,t,i,o,s,l){return d(),h("div",Wk,[p("video",Gk,null,512),p("video",Xk,null,512),e.isScreenStreamAvailable?E("",!0):(d(),h("div",Yk,g(e.$t("mediaRecorder.screenAndCameraView.check")),1))])}const Zk=$(qk,[["render",Kk]]),Qk=A({name:"media-recorder-camera-view",props:{cameraStream:{default:void 0}},watch:{cameraStream(){this.startStreaming()}},mounted(){this.startStreaming()},methods:{startStreaming(){((t,i)=>{i!==void 0&&(i.srcObject=t??null)})(this.cameraStream,this.$refs.cameraVideo)}}}),Jk={class:"media-recorder-camera-view"},xk={ref:"cameraVideo",class:"camera",autoplay:"",muted:"",playsinline:""};function eC(e,t,i,o,s,l){return d(),h("div",Jk,[p("video",xk,null,512)])}const tC=$(Qk,[["render",eC]]),iC=A({name:"media-recorder-screen-view",props:{cameraStream:{type:Object,default:void 0}},computed:{isScreenStreamAvailable(){return this.cameraStream!==void 0}},watch:{cameraStream(){this.startStreaming()}},mounted(){this.startStreaming()},methods:{startStreaming(){((t,i)=>{i!==void 0&&(i.srcObject=t??null)})(this.cameraStream,this.$refs.cameraVideo)}}}),oC={class:"media-recorder-screen-view"},nC={ref:"cameraVideo",class:"camera",autoplay:"",muted:"",playsinline:""},sC={key:0,class:"media-recorder-screen-view__tip"};function aC(e,t,i,o,s,l){return d(),h("div",oC,[p("video",nC,null,512),e.isScreenStreamAvailable?E("",!0):(d(),h("div",sC,g(e.$t("mediaRecorder.screenView.check")),1))])}const rC=$(iC,[["render",aC]]);function lC(e,t,i){const o=e.getContext("2d");if(o===null)throw new Error("Canvas context is null inside drawFFT!");let s=!1;return function(){const a=t.frequencyBinCount,u=new Uint8Array(a),m=function(){if(s)return;const f=e.width,b=e.height;requestAnimationFrame(m),t.getByteFrequencyData(u),o.clearRect(0,0,f,b);const T=4,C=4,M=a*3/4,L=Math.floor(M/((f-C)/(T+C)));let I=C;for(let P=0;P<M&&!(I>=f-C);P+=L){const j=b*Math.max(u[P],4)/256;o.fillStyle=i?"#165C4F":"rgba(255, 255, 255, 0.3)",o.fillRect(I,b/2-j/2,T,j),I+=T+C}};m()}(),()=>{s=!0}}const dC=A({name:"media-recorder-microphone-view",props:{analyzerNode:{required:!0},isActive:{type:Boolean,required:!0}},data(){return{cancelFFT:void 0}},watch:{analyzerNode(){this.initFFTRenderer()},isActive(){this.initFFTRenderer()}},mounted(){this.initFFTRenderer()},beforeUnmount(){window.removeEventListener("resize",this.updateView),this.cancelFFT!==void 0&&this.cancelFFT()},methods:{initFFTRenderer(){this.cancelFFT!==void 0&&this.cancelFFT();const e=this.$refs.canvas;this.cancelFFT=lC(e,this.analyzerNode,this.isActive),this.updateView(),window.addEventListener("resize",this.updateView)},updateView(){const e=this.$refs.canvas,t=this.$refs["canvas-container"];e.width=t.clientWidth,e.height=t.clientHeight}}}),uC={class:"media-recorder-microphone-view"},pC={ref:"canvas-container",class:"media-recorder-microphone-view__waveform"},cC={ref:"canvas"};function mC(e,t,i,o,s,l){return d(),h("div",uC,[p("div",pC,[p("canvas",cC,null,512)],512)])}const hC=$(dC,[["render",mC]]),Mn=e=>Math.floor(Math.ceil(e)/60).toString().padStart(2,"0")+":"+(Math.ceil(e)%60).toString().padStart(2,"0"),gC=A({name:"media-recorder-microphone-result-view",props:{audioBlobUrl:{type:String,required:!0},pointsArrayBuffer:{type:ArrayBuffer,required:!0},isMobileView:{type:Boolean,default:!1}},data(){return{currentPosition:0,isPaused:!0,canvasContainerLeft:0,canvasContainerWidth:0,duration:0,points:[]}},computed:{cursorLeft(){return this.canvasContainerLeft+this.canvasContainerWidth*this.currentPosition/100},durationString(){return Mn(this.duration)},currentTimeString(){return Mn(Math.floor(this.currentPosition*this.duration/100))}},async mounted(){this.points=Fa(this.pointsArrayBuffer),this.updateView();const e=this.$refs.audio;this.duration=await this.getDuration(),e.addEventListener("timeupdate",this.updateCurrentPosition),window.addEventListener("resize",this.updateView),e.addEventListener("ended",()=>{this.isPaused=!0}),window.addEventListener("keydown",this.windowKeyDown)},beforeUnmount(){window.removeEventListener("resize",this.updateView),window.removeEventListener("keydown",this.windowKeyDown)},methods:{adjustCanvases(){const e=this.$refs["canvas-container"],t=i=>{i.width=e.clientWidth,i.height=e.clientHeight};t(this.$refs["canvas-past"]),t(this.$refs["canvas-future"])},toggle(){const e=this.$refs.audio;e.paused?(this.isPaused=!1,e.play()):(this.isPaused=!0,e.pause())},changePosition(e){const t=this.$refs.audio,i=this.$refs["canvas-container"];let o=(e.clientX-i.getBoundingClientRect().left)/i.getBoundingClientRect().width;o<0?o=0:o>1&&(o=1),t.currentTime=o*this.duration},updateView(){this.adjustCanvases();const e=this.points;Qo(this.$refs["canvas-past"],e,"#006151"),Qo(this.$refs["canvas-future"],e,"#403f43");const t=this.$refs["canvas-container"];this.canvasContainerLeft=t.getBoundingClientRect().left-t.parentNode.getBoundingClientRect().left,this.canvasContainerWidth=t.clientWidth},updateCurrentPosition(){const e=this.$refs.audio;this.currentPosition=100*e.currentTime/this.duration},async getDuration(){return await Da(Nt.MICROPHONE,this.audioBlobUrl)},windowKeyDown(e){e.stopPropagation();const t=this.$refs.audio;switch(e.key){case" ":this.toggle();break;case"ArrowLeft":t.currentTime=(this.currentPosition/100-.05)*this.duration;break;case"ArrowRight":t.currentTime=(this.currentPosition/100+.05)*this.duration;break}}}}),vC={class:"media-recorder-microphone-result-view__top"},fC={ref:"canvas-past"},bC={ref:"canvas-future"},yC={class:"media-recorder-microphone-result-view__bottom"},EC=["src"],SC={class:"time-progress"},kC={class:"shadowed"};function CC(e,t,i,o,s,l){const a=Ye;return d(),h("div",{class:F(["media-recorder-microphone-result-view",{"media-recorder-microphone-result-view--mobile":e.isMobileView}])},[p("div",vC,[p("div",{ref:"canvas-container",class:"media-recorder-microphone-result-view__fft",onClick:t[0]||(t[0]=u=>e.changePosition(u))},[p("div",{class:"media-recorder-microphone-result-view__fft-past",style:z({width:`${e.currentPosition}%`})},[p("canvas",fC,null,512)],4),p("canvas",bC,null,512)],512),p("div",{class:"media-recorder-microphone-result-view__cursor",style:z({left:`${e.cursorLeft}px`})},null,4)]),p("div",yC,[p("audio",{ref:"audio",src:e.audioBlobUrl},null,8,EC),p("div",SC,[p("span",kC,g(e.currentTimeString),1),t[2]||(t[2]=p("span",{class:"shadowed separator"},"/",-1)),p("span",null,g(e.durationString),1)]),p("div",{class:"play",onClick:t[1]||(t[1]=u=>e.toggle())},[e.isPaused?(d(),S(a,{key:0,icon:"microphone-play"})):(d(),S(a,{key:1,icon:"microphone-pause"}))])])],2)}const TC=$(gC,[["render",CC]]),$C=A({name:"media-recorder-videos-result-view",props:{largeVideoBlobUrl:{type:String,default:void 0},smallVideoBlobUrl:{type:String,default:void 0},audioBlobUrl:{type:String,default:void 0}},methods:{play(){const e=this.$refs["small-video"];e!==void 0&&e.play();const t=this.$refs.audio;t!==void 0&&t.play()},stop(){const e=this.$refs["small-video"];e!==void 0&&e.pause();const t=this.$refs.audio;t!==void 0&&t.pause()},currentTimeUpdate(e){const t=this.$refs["small-video"];t!==void 0&&(t.currentTime=e/1e3,t.pause());const i=this.$refs.audio;i!==void 0&&(i.currentTime=e/1e3,i.pause())}}}),wC={class:"media-recorder-videos-result-view"},AC=["src"],MC=["src"];function RC(e,t,i,o,s,l){const a=_n;return d(),h("div",wC,[e.largeVideoBlobUrl!==void 0?(d(),S(a,{key:0,ref:"large-video",variant:"records",class:"media-recorder-videos-result-view__large-video",source:e.largeVideoBlobUrl,onStopVideo:e.stop,onStartVideo:e.play,onCurrentTimeUpdate:t[0]||(t[0]=u=>e.currentTimeUpdate(u))},null,8,["source","onStopVideo","onStartVideo"])):E("",!0),e.smallVideoBlobUrl!==void 0?(d(),h("video",{key:1,ref:"small-video",class:"media-recorder-videos-result-view__small-video",src:e.smallVideoBlobUrl},null,8,AC)):E("",!0),e.audioBlobUrl!==void 0?(d(),h("audio",{key:2,ref:"audio",src:e.audioBlobUrl},null,8,MC)):E("",!0)])}const PC=$($C,[["render",RC]]),IC=A({name:"media-recorder-circle-button",props:{isActive:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}}}),LC={class:"icon"};function OC(e,t,i,o,s,l){return d(),h("div",J({class:["media-recorder-circle-button",{active:e.isActive,"media-recorder-circle-button--disabled":e.isDisabled}]},e.$attrs),[p("div",LC,[w(e.$slots,"default")])],16)}const fs=$(IC,[["render",OC]]),FC=2,DC=A({name:"media-recorder-stop-recording-button",props:{progress:{type:Number,required:!0},isDisabled:{type:Boolean,default:!1}},data(){return{radius:40}},computed:{circleRadius(){return this.radius-FC/2},circumference(){return 2*Math.PI*this.circleRadius},offset(){return this.circumference-Math.max(this.progress,1)/100*this.circumference}},mounted(){const e=this.$refs.arc;this.radius=e.clientWidth/2}}),VC=["width","height"],NC=["r","cx","cy","stroke-dasharray","stroke-dashoffset","transform"];function BC(e,t,i,o,s,l){const a=Ye;return d(),h("div",J({class:["media-recorder-stop-recording-button",{"media-recorder-stop-recording-button--disabled":e.isDisabled}]},e.$attrs),[r(a,{class:"media-recorder-stop-recording-button__svg",icon:"stop-recording"}),(d(),h("svg",{ref:"arc",class:"media-recorder-stop-recording-button__arc",width:e.radius*2,height:e.radius*2},[p("circle",{stroke:"white","stroke-width":2,fill:"transparent",r:e.circleRadius,cx:e.radius,cy:e.radius,"stroke-dasharray":`${e.circumference} ${e.circumference}`,"stroke-dashoffset":e.offset,transform:`rotate(-90, ${e.radius}, ${e.radius})`},null,8,NC)],8,VC))],16)}const jC=$(DC,[["render",BC]]),zC=A({name:"media-recorder-checkbox",props:{checked:{type:Boolean,required:!0}},emits:{changed:null}});function HC(e,t,i,o,s,l){return d(),h("div",{class:F(["media-recorder-checkbox"].concat(e.checked?["checked"]:[])),onClick:t[0]||(t[0]=a=>e.$emit("changed",!e.checked))},t[1]||(t[1]=[p("div",{class:"media-recorder-checkbox__circle"},null,-1)]),2)}const _C=$(zC,[["render",HC]]),UC=A({name:"media-recorder-settings",props:{settings:{type:Array,required:!0}},emits:{"toggle-group":null,"select-item":null}}),qC={class:"media-recorder-settings"},WC={class:"media-recorder-settings__group"},GC={key:0,class:"checkbox-container"},XC=["onClick"],YC={class:"prefix"},KC={key:0,class:"checked"},ZC={class:"text"};function QC(e,t,i,o,s,l){const a=_C,u=Ye;return d(),h("div",qC,[(d(!0),h(N,null,q(e.settings,(m,f)=>(d(),h("div",{key:f},[p("div",WC,[p("span",null,g(m.name),1),t[0]||(t[0]=p("span",{class:"min-space"},null,-1)),m.canBeDisabled?(d(),h("span",GC,[r(a,{checked:m.enabled,onChanged:b=>e.$emit("toggle-group",[m.id,b])},null,8,["checked","onChanged"])])):E("",!0)]),(d(!0),h(N,null,q(m.items,(b,T)=>(d(),h("div",{key:T,class:F({"media-recorder-settings__group-item":!0,selected:b.selected,"media-recorder-settings__group-item--disabled":b.isSelectionDisabled}),style:z({...m.enabled?{}:{display:"none"}}),onClick:()=>{b.isSelectionDisabled||e.$emit("select-item",[m.id,b.id])}},[p("span",YC,[b.selected?(d(),h("span",KC,[r(u,{icon:"checked"})])):E("",!0)]),p("span",ZC,g(b.name),1)],14,XC))),128))]))),128))])}const JC=$(UC,[["render",QC]]),xC=A({name:"media-recorder-controls",props:{settingsOpened:{type:Boolean,required:!0},settings:{type:Array,required:!0},currentPhase:{type:String,required:!0},isRecordingPaused:{type:Boolean,required:!0},progress:{type:Number,required:!0},isButtonsDisabled:{type:Boolean,default:!1},isPauseSupported:{type:Boolean,required:!0}},emits:{"pause-recording":null,"reset-recording":null,"stop-recording":null,"resume-recording":null,"start-recording":null,"open-settings-window":null,"close-settings-window":null,"toggle-group":null,"select-item":null},computed:{ECurrentPhase(){return Ze}},methods:{pauseRecording(){this.isPauseSupported&&this.$emit("pause-recording")}}}),eT={class:"media-recorder-controls"},tT={class:"media-recorder-controls__counter"},iT={key:0,class:"media-recorder-controls__center"},oT={key:1,class:"media-recorder-controls__center"};function nT(e,t,i,o,s,l){const a=Ye,u=fs,m=jC,f=JC,b=vs;return d(),h("div",eT,[p("div",tT,[w(e.$slots,"counter")]),e.currentPhase==="recording"?(d(),h("div",iT,[r(u,{"is-disabled":e.isButtonsDisabled,onClick:t[0]||(t[0]=T=>e.$emit("reset-recording"))},{default:n(()=>[r(a,{icon:"reset"})]),_:1},8,["is-disabled"]),t[8]||(t[8]=p("div",{class:"spacer"},null,-1)),r(m,{progress:e.progress,"is-disabled":e.isButtonsDisabled,onClick:t[1]||(t[1]=T=>e.$emit("stop-recording"))},null,8,["progress","is-disabled"]),t[9]||(t[9]=p("div",{class:"spacer"},null,-1)),e.isRecordingPaused?(d(),S(u,{key:1,"is-disabled":e.isButtonsDisabled,onClick:t[2]||(t[2]=T=>e.$emit("resume-recording"))},{default:n(()=>[r(a,{icon:"resume"})]),_:1},8,["is-disabled"])):(d(),S(u,{key:0,"is-disabled":e.isButtonsDisabled||!e.isPauseSupported,onClick:e.pauseRecording},{default:n(()=>[r(a,{icon:"pause"})]),_:1},8,["is-disabled","onClick"]))])):(d(),h("div",oT,[p("div",{class:F(["media-recorder-controls__record-button",{"media-recorder-controls__record-button--disabled":e.isButtonsDisabled}]),onClick:t[3]||(t[3]=T=>e.$emit("start-recording"))},[r(a,{icon:"start-recording"})],2)])),e.currentPhase===e.ECurrentPhase.RECORDING_WINDOW_OPENED?(d(),S(u,{key:2,ref:"settings-button",class:F({"media-recorder-controls__settings-button":!0,"media-recorder-controls__settings-button--active":e.settingsOpened,"media-recorder-controls__settings-button--disabled":e.isButtonsDisabled}),"is-active":e.settingsOpened,onClick:t[4]||(t[4]=T=>e.$emit("open-settings-window"))},{default:n(()=>[r(a,{icon:"settings"})]),_:1},8,["class","is-active"])):E("",!0),e.settingsOpened?(d(),S(Ci,{key:3,defer:"",to:"#teleport-target-overlay-settings"},[r(b,{anchor:()=>e.$refs["settings-button"].$el,onClose:t[7]||(t[7]=T=>e.$emit("close-settings-window"))},{default:n(()=>[r(f,{settings:e.settings,onToggleGroup:t[5]||(t[5]=T=>e.$emit("toggle-group",T)),onSelectItem:t[6]||(t[6]=T=>e.$emit("select-item",T))},null,8,["settings"])]),_:1},8,["anchor"])])):E("",!0)])}const sT=$(xC,[["render",nT]]),aT=A({name:"media-recorder-result-controls",components:{AppButton:oe},props:{isButtonsDisabled:{type:Boolean,default:!1},isMediaButtonsDisabled:{type:Boolean,required:!0},isTimelineButtonDisabled:{type:Boolean,required:!0}},emits:{"reset-recording":null,"add-to-uploads":null,"add-to-timeline":null}}),rT={class:"media-recorder-result-controls"},lT={class:"media-recorder-result-controls__desktop"},dT={class:"media-recorder-result-controls__buttons-left"},uT={class:"media-recorder-result-controls__buttons-right"},pT={class:"media-recorder-result-controls__mobile"},cT={class:"media-recorder-result-controls__buttons"},mT={class:"media-recorder-result-controls__retake"};function hT(e,t,i,o,s,l){const a=Ye,u=fs,m=D("AppButton");return d(),h("div",rT,[p("div",lT,[p("div",dT,[r(u,{"is-disabled":e.isButtonsDisabled,onClick:t[0]||(t[0]=f=>e.$emit("reset-recording"))},{default:n(()=>[r(a,{icon:"reset"})]),_:1},8,["is-disabled"])]),p("div",uT,[r(m,{class:"media-recorder-result-controls__button media-recorder-result-controls__button--add-to-uploads",variant:"records-add-default",size:"large","rounding-value":6,"fixed-height":48,"font-weight":500,"is-disabled":e.isButtonsDisabled||e.isMediaButtonsDisabled,onClick:t[1]||(t[1]=f=>e.$emit("add-to-uploads"))},{icon:n(()=>[r(a,{icon:"results-add-to-uploads"})]),default:n(()=>[y(g(e.$t("mediaRecorder.resultControls.addToUploads")),1)]),_:1},8,["is-disabled"]),e.isTimelineButtonDisabled?E("",!0):(d(),S(m,{key:0,class:"media-recorder-result-controls__button media-recorder-result-controls__button--add-to-timeline",variant:"records-add-accent",size:"huge","font-weight":500,"rounding-value":6,"horizontal-align":"left","fixed-height":48,"is-disabled":e.isButtonsDisabled||e.isMediaButtonsDisabled,onClick:t[2]||(t[2]=f=>e.$emit("add-to-timeline"))},{icon:n(()=>[r(a,{icon:"results-add-to-timeline"})]),default:n(()=>[y(g(e.$t("mediaRecorder.resultControls.addToTimeline")),1)]),_:1},8,["is-disabled"]))])]),p("div",pT,[p("div",cT,[r(m,{class:"media-recorder-result-controls__button media-recorder-result-controls__button--add-to-uploads",variant:"gray",size:"large","rounding-value":6,"fixed-height":40,"font-weight":600,"is-disabled":e.isButtonsDisabled||e.isMediaButtonsDisabled,onClick:t[3]||(t[3]=f=>e.$emit("add-to-uploads"))},{default:n(()=>[y(g(e.$t("mediaRecorder.resultControls.addToUploads")),1)]),_:1},8,["is-disabled"]),e.isTimelineButtonDisabled?E("",!0):(d(),S(m,{key:0,class:"media-recorder-result-controls__button media-recorder-result-controls__button--add-to-timeline",variant:"accent","rounding-value":6,"fixed-height":40,"font-weight":600,"is-disabled":e.isButtonsDisabled||e.isMediaButtonsDisabled,size:"large",onClick:t[4]||(t[4]=f=>e.$emit("add-to-timeline"))},{default:n(()=>[y(g(e.$t("mediaRecorder.resultControls.addToTimeline")),1)]),_:1},8,["is-disabled"]))]),p("div",mT,[r(m,{class:"media-recorder-result-controls__button media-recorder-result-controls__button--retake",variant:"shaded",size:"normal","rounding-value":6,"fixed-height":32,"font-weight":600,"is-disabled":e.isButtonsDisabled,onClick:t[5]||(t[5]=f=>e.$emit("reset-recording"))},{icon:n(()=>[r(a,{icon:"reset"})]),default:n(()=>[y(g(e.$t("mediaRecorder.resultControls.retake")),1)]),_:1},8,["is-disabled"])])])])}const gT=$(aT,[["render",hT]]);function vT(e,t,i,o,s,l,a){const u={[je.CAMERA]:{audioinput:!0,videoinput:!1},[je.SCREEN]:{audioinput:!0,videoinput:!0},[je.CAMERA_SCREEN]:{audioinput:!0,videoinput:!0},[je.AUDIO]:{audioinput:!1,videoinput:!1}}[l],m=T=>T==="videoinput"&&l===je.SCREEN?!1:T==="videoinput"&&l===je.CAMERA_SCREEN?!0:T==="audioinput"?t:i,f=["audioinput","videoinput"].map(T=>({id:T,name:T==="audioinput"?"Microphone":"Camera",enabled:m(T),canBeDisabled:u[T],items:e.filter(C=>C.kind===T).map(C=>({id:C.deviceId,name:C.label,selected:(T==="audioinput"?o:s)===C.deviceId,isSelectionDisabled:a}))})).filter(T=>T.items.length!==0),b=f.find(T=>T.id==="videoinput")!==void 0;return l===je.SCREEN&&!b&&f.push({id:"videoinput",name:"Camera",enabled:!1,canBeDisabled:!0,items:[]}),f}function fT(e){switch(e){case"camera":return Nt.CAMERA;case"microphone":return Nt.MICROPHONE;case"screen":return Nt.SCREEN;default:throw new Error(`Unknown TBlobs key: ${e}`)}}function Rn(e,t,i,o,s,l,a){const u={camera:void 0,microphone:void 0,screen:void 0},m=new Set(["camera","screen"]),f=Object.entries(e).filter(([C,M])=>M!==void 0&&m.has(C)).length>1,b=C=>f?`-${C}`:"";let T=0;for(const[C,M]of Object.entries(e))M!==void 0&&(u[C]={file:new File([M],i+b(T+1)+"."+(m.has(C)?a:l),{type:m.has(C)?s:o}),duration:t[fT(C)]},T++);return u}const bT=A({name:"media-recorder-view-layout-mobile",props:{layout:{type:String,required:!0,validator:e=>["video","audio"].includes(e)}},emits:["close"],data(){return{isEditingTitle:!1}},computed:{isCriticalError(){return this.$slots["critical-error"]!==void 0}},methods:{setIsEditingTitle(e){this.isEditingTitle=e}}}),yT={class:"media-recorder-view-layout-mobile"},ET={key:0,class:"media-recorder-view-layout-mobile__container"},ST={class:"media-recorder-view-layout-mobile__container__header"},kT={class:"media-recorder-view-layout-mobile__container__header__label"},CT={class:"media-recorder-view-layout-mobile__container__header__result-name-input"},TT={class:"media-recorder-view-layout-mobile__container__content"};function $T(e,t,i,o,s,l){const a=Ye;return d(),h("div",yT,[t[1]||(t[1]=p("div",{id:"teleport-target-overlay-settings"},null,-1)),t[2]||(t[2]=p("div",{id:"teleport-target-overlay"},null,-1)),e.isCriticalError?(d(),h("div",ET,[w(e.$slots,"critical-error")])):(d(),h("div",{key:1,class:F(["media-recorder-view-layout-mobile__container",{audio:e.layout==="audio"}])},[p("div",ST,[p("span",kT,[w(e.$slots,"label")]),p("span",CT,[w(e.$slots,"result-name-input",{setIsEditingTitle:e.setIsEditingTitle})]),e.isEditingTitle?E("",!0):(d(),h("div",{key:0,class:"media-recorder-view-layout-mobile__container__header__cross",onClick:t[0]||(t[0]=u=>e.$emit("close"))},[r(a,{icon:"cross-mobile"})]))]),p("div",TT,[w(e.$slots,"default")]),w(e.$slots,"footer")],2))])}const wT=$(bT,[["render",$T]]),AT=A({name:"media-recorder-view-layout",props:{layout:{type:String,required:!0,validator:e=>["video","audio"].includes(e)},isButtonsDisabled:{type:Boolean,default:!1}},emits:{close:null},data(){return{contentWidth:0,contentHeight:0}},computed:{isCriticalError(){return this.$slots["critical-error"]!==void 0}},mounted(){this.adjustContentSize(),window.addEventListener("resize",this.adjustContentSize)},beforeUnmount(){window.removeEventListener("resize",this.adjustContentSize)},methods:{adjustContentSize(){const e=window.innerWidth,t=window.innerHeight,i=900,o=this.layout==="audio"?300:500,s=i/o;t<e?(this.contentHeight=Math.min(t*.7,o),this.contentWidth=this.contentHeight*s):(this.contentWidth=Math.min(e*.7,i),this.contentHeight=this.contentWidth/s)}}}),MT={class:"media-recorder-view-layout"},RT={key:0,class:"media-recorder-view-layout__container"},PT={class:"media-recorder-view-layout__container__header"},IT={class:"media-recorder-view-layout__container__header__result-name-input"},LT={class:"media-recorder-view-layout__container__header__counter"};function OT(e,t,i,o,s,l){const a=Ye;return d(),h("div",MT,[t[1]||(t[1]=p("div",{id:"teleport-target-overlay-settings"},null,-1)),t[2]||(t[2]=p("div",{id:"teleport-target-overlay"},null,-1)),e.isCriticalError?(d(),h("div",RT,[w(e.$slots,"critical-error")])):(d(),h("div",{key:1,class:F(["media-recorder-view-layout__container",{audio:e.layout==="audio"}])},[p("div",PT,[p("span",IT,[w(e.$slots,"result-name-input")]),p("span",LT,[w(e.$slots,"counter")]),p("div",{class:F(["media-recorder-view-layout__container__header__cross",{"media-recorder-view-layout__container__header__cross--disabled":e.isButtonsDisabled}]),onClick:t[0]||(t[0]=u=>e.$emit("close"))},[r(a,{icon:"cross"})],2)]),p("div",{class:F(["media-recorder-view-layout__container__content",{"media-recorder-view-layout__container__content--disabled":e.isButtonsDisabled}]),style:z({width:`${e.contentWidth}px`,height:`${e.contentHeight}px`})},[w(e.$slots,"default")],6),w(e.$slots,"footer")],2))])}const FT=$(AT,[["render",OT]]),DT=A({name:"widget-media-recorder",components:{AppModal:qe,AppButton:oe,AppModalContentError:et},props:{isMobileView:{type:Boolean,required:!0},controller:{type:Object,required:!0},maximumFileSize:{type:Number,required:!0},maximumRecordingDuration:{type:Number,required:!0}},emits:["add-to-timeline","add-to-uploads"],data(){return{stateFragment:this.controller.stateFragment,state:this.controller.stateFragment.state}},computed:{MediaRecorderViewLayoutMobile(){return X(wT)},MediaRecorderViewLayout(){return X(FT)},settings(){const e=this.state;return vT(e.availableDevices,e.isMicrophoneEnabled,e.isCameraEnabled,e.currentMicrophoneId,e.currentCameraId,e.selectedMode,e.isDeviceSelectionBlocked).map(t=>({...t,name:this.$t(`mediaRecorder.mediaRecorderSettings.${t.name.toLowerCase()}`)}))},isInAskingPermissionsPhase(){return this.state.currentPhase===Ze.ASKING_PERMISSION},isInRecordingWindowOpenedPhase(){return this.state.currentPhase===Ze.RECORDING_WINDOW_OPENED},isInRecordingPhase(){return this.state.currentPhase===Ze.RECORDING},isInResultsPhase(){return this.state.currentPhase===Ze.RECORDING_FINISHED},isInCriticalErrorDisplayedPhase(){return this.state.currentPhase===Ze.CRITICAL_ERROR_DISPLAYED},areResultBlobsReady(){return this.state.areBlobsReady},isMicrophoneMode(){return this.state.selectedMode===je.AUDIO},isCameraMode(){return this.state.selectedMode===je.CAMERA},isScreenMode(){return this.state.selectedMode===je.SCREEN},isScreenAndCameraMode(){return this.state.selectedMode===je.CAMERA_SCREEN},isBrowserNotSupportedErrorSet(){return this.state.currentError===yt.BROWSER_NOT_SUPPORTED},isPermissionDeniedErrorSet(){return this.state.currentError===yt.PERMISSION_DENIED},isScreenRecordNotSupportedErrorSet(){return this.state.currentError===yt.SCREEN_RECORD_NOT_SUPPORTED},isPreviewChangeIsTooOftenErrorSet(){return this.state.currentError===yt.PREVIEW_CHANGE_IS_TOO_OFTEN},isNoCameraDetectedErrorSet(){return this.state.currentError===yt.NO_CAMERA_DETECTED},isNoMicrophoneDetectedErrorSet(){return this.state.currentError===yt.NO_MICROPHONE_DETECTED}},watch:{maximumRecordingDuration(){this.controller.stateFragment.setMaximumTime(this.maximumRecordingDuration*60)}},async mounted(){this.controller.stateFragment.setMaximumTime(this.maximumRecordingDuration*60),await this.controller.getAvailableDevices()},methods:{toggleGroup([e,t]){this.controller.switchSettingsGroup(e,t)},selectItem([e,t]){const i=this.state.availableDevices.find(o=>o.kind===e&&o.deviceId===t);i!==void 0&&(i.kind==="audioinput"?this.controller.setMicrophoneDeviceId(t):this.controller.setCameraDeviceId(t),this.controller.startPreview())},async startRecording(){if(this.state.isDeviceSelectionBlocked)return;let e;if(this.isScreenMode||this.isScreenAndCameraMode){const t=await this.controller.recorderFactory.create(Nt.SCREEN);t.setMediaDeviceManager(this.controller.deviceManager),await t.startRecording(),e=new Map([[Nt.SCREEN,t]])}await this.controller.startRecording(e)},stopRecording(){this.controller.stopRecording()},openRecordingResetModal(){this.stateFragment.setIsResetPromptOpened(!0)},closeRecordingResetModal(){this.stateFragment.setIsResetPromptOpened(!1)},openRecordingExitModal(){this.state.currentPhase===Ze.RECORDING_WINDOW_OPENED?this.closeRecordingWindow():this.stateFragment.setExitPromptOpened(!0)},closeRecordingExitModal(){this.stateFragment.setExitPromptOpened(!1)},resetRecording(){this.stateFragment.setIsResetPromptOpened(!1),this.controller.resetRecording()},pauseRecording(){this.controller.pauseRecording()},resumeRecording(){this.controller.resumeRecording()},closeRecordingWindow(){this.closeRecordingExitModal(),this.controller.closeRecordingWindow()},addToTimeline(){this.$emit("add-to-timeline",Rn({screen:this.state.screenBlob,camera:this.state.cameraBlob,microphone:this.state.microphoneBlob},this.state.blobDurations,this.state.recordingName,this.controller.deviceManager.audioFileMime,this.controller.deviceManager.videoFileMime,this.controller.deviceManager.audioExtension,this.controller.deviceManager.videoExtension)),this.controller.closeRecordingWindow()},addToUploads(){this.$emit("add-to-uploads",Rn({screen:this.state.screenBlob,camera:this.state.cameraBlob,microphone:this.state.microphoneBlob},this.state.blobDurations,this.state.recordingName,this.controller.deviceManager.audioFileMime,this.controller.deviceManager.videoFileMime,this.controller.deviceManager.audioExtension,this.controller.deviceManager.videoExtension)),this.controller.closeRecordingWindow()},clearError(){this.stateFragment.setCurrentError(void 0)}}}),VT={key:0},NT={key:0},BT={key:1},jT={key:2},zT={key:3},HT={key:0},_T={key:1},UT={key:4,class:"media-recorder-main-view__tip"},qT={key:5,class:"media-recorder-main-view__phase"},WT={key:6,class:"media-recorder-main-view__phase"};function GT(e,t,i,o,s,l){const a=GS,u=xS,m=sk,f=uk,b=gk,T=yk,C=Tk,M=Rk,L=vs,I=Eo,P=zk,j=Uk,B=Zk,Y=tC,ve=rC,x=hC,He=TC,it=PC,ce=sT,me=gT;return d(),S(In(e.isMobileView?e.MediaRecorderViewLayoutMobile:e.MediaRecorderViewLayout),{layout:e.state.selectedMode==="audio"?"audio":"video","is-buttons-disabled":(e.state.isCountdownEnabled||e.state.isResetPromptOpened||e.state.isExitPromptOpened)&&!e.isMobileView,onClose:e.openRecordingExitModal},G({counter:n(()=>[e.isInRecordingPhase?(d(),S(m,{key:0,time:e.state.recordingTime,"finish-time":e.state.maximumTime,"is-paused":e.state.isRecordingPaused,"is-disabled":(e.state.isResetPromptOpened||e.state.isExitPromptOpened)&&!e.isMobileView},null,8,["time","finish-time","is-paused","is-disabled"])):E("",!0)]),default:n(()=>[e.state.currentError!==void 0?(d(),S(L,{key:0,"is-dark-background-enabled":!0,"is-mobile-view":e.isMobileView},{default:n(()=>[e.isPermissionDeniedErrorSet?(d(),S(b,{key:0,onClose:t[7]||(t[7]=ne=>e.clearError())})):E("",!0),e.isNoCameraDetectedErrorSet?(d(),S(C,{key:1,onClose:t[8]||(t[8]=ne=>e.clearError())})):E("",!0),e.isNoMicrophoneDetectedErrorSet?(d(),S(M,{key:2,onClose:t[9]||(t[9]=ne=>e.clearError())})):e.isPreviewChangeIsTooOftenErrorSet?(d(),S(I,{key:3,"ok-label":e.$t("mediaRecorder.widgetMediaRecorder.ok"),onOk:t[10]||(t[10]=ne=>e.clearError())},{header:n(()=>[y(g(e.$t("mediaRecorder.widgetMediaRecorder.deviceError")),1)]),content:n(()=>[y(g(e.$t("mediaRecorder.widgetMediaRecorder.deviceSwitchingError")),1)]),_:1},8,["ok-label"])):E("",!0)]),_:1},8,["is-mobile-view"])):E("",!0),e.state.isResetPromptOpened?(d(),S(L,{key:1,"is-dark-background-enabled":e.isMobileView,"is-mobile-view":e.isMobileView},{default:n(()=>[r(P,{"is-mobile-view":e.isMobileView,onOk:e.resetRecording,onCancel:e.closeRecordingResetModal},null,8,["is-mobile-view","onOk","onCancel"])]),_:1},8,["is-dark-background-enabled","is-mobile-view"])):E("",!0),e.state.isExitPromptOpened?(d(),S(L,{key:2,"is-dark-background-enabled":e.isMobileView,"is-mobile-view":e.isMobileView},{default:n(()=>[r(j,{"is-mobile-view":e.isMobileView,onOk:e.closeRecordingWindow,onCancel:e.closeRecordingExitModal},null,8,["is-mobile-view","onOk","onCancel"])]),_:1},8,["is-dark-background-enabled","is-mobile-view"])):E("",!0),e.state.isCountdownEnabled?(d(),S(L,{key:3,"is-dark-background-enabled":e.isMobileView,onClose:t[12]||(t[12]=ne=>e.controller.stopCountdown())},{default:n(()=>[p("div",{class:"media-recorder-main-view__countdown",onClick:t[11]||(t[11]=()=>{e.controller.stopCountdown(),e.stateFragment.setCountdownEnabled(!1)})},[p("h1",null,g(e.state.countdown),1),e.isMobileView?(d(),h("p",HT,g(e.$t("mediaRecorder.widgetMediaRecorder.tapToCancel")),1)):(d(),h("p",_T,g(e.$t("mediaRecorder.widgetMediaRecorder.clickAnywhereToCancel")),1))])]),_:1},8,["is-dark-background-enabled"])):E("",!0),e.state.isRecordingPaused?(d(),h("div",UT,g(e.$t("mediaRecorder.widgetMediaRecorder.recordingPaused")),1)):E("",!0),e.isInRecordingWindowOpenedPhase||e.isInRecordingPhase?(d(),h("div",qT,[e.state.selectedMode==="camera-screen"?(d(),S(B,{key:0,"camera-stream":e.state.cameraStream,"screen-stream":e.state.screenStream},null,8,["camera-stream","screen-stream"])):e.state.selectedMode==="camera"?(d(),S(Y,{key:1,"camera-stream":e.state.cameraStream},null,8,["camera-stream"])):e.state.selectedMode==="screen"?(d(),S(ve,{key:2,"camera-stream":e.state.screenStream},null,8,["camera-stream"])):e.state.selectedMode==="audio"&&e.state.audioAnalyserNode!==void 0?(d(),S(x,{key:3,"analyzer-node":e.state.audioAnalyserNode,"is-active":e.isInRecordingPhase&&!e.state.isRecordingPaused},null,8,["analyzer-node","is-active"])):E("",!0)])):e.isInResultsPhase?(d(),h("div",WT,[e.isMicrophoneMode&&e.state.audioBlobUrl&&e.state.waveformPointsArrayBuffer?(d(),S(He,{key:0,"audio-blob-url":e.state.audioBlobUrl,"points-array-buffer":e.state.waveformPointsArrayBuffer,"is-mobile-view":e.isMobileView},null,8,["audio-blob-url","points-array-buffer","is-mobile-view"])):e.isScreenAndCameraMode?(d(),S(it,{key:1,"large-video-blob-url":e.state.screenBlobUrl,"small-video-blob-url":e.state.cameraBlobUrl},null,8,["large-video-blob-url","small-video-blob-url"])):e.isCameraMode?(d(),S(it,{key:2,"large-video-blob-url":e.state.cameraBlobUrl},null,8,["large-video-blob-url"])):e.isScreenMode?(d(),S(it,{key:3,"large-video-blob-url":e.state.screenBlobUrl,"audio-blob-url":e.state.audioBlobUrl},null,8,["large-video-blob-url","audio-blob-url"])):E("",!0)])):E("",!0)]),footer:n(()=>[e.isInRecordingPhase||e.isInRecordingWindowOpenedPhase||e.isInAskingPermissionsPhase?(d(),S(ce,{key:0,"settings-opened":e.state.isSettingsWindowOpened,settings:e.settings,"current-phase":e.state.currentPhase,"is-recording-paused":e.state.isRecordingPaused,progress:100*e.state.recordingTime/e.state.maximumTime,"is-buttons-disabled":(e.state.isCountdownEnabled||e.state.isResetPromptOpened||e.state.isExitPromptOpened)&&!e.isMobileView,"is-mobile-view":e.isMobileView,"is-pause-supported":e.state.isPauseSupported,onOpenSettingsWindow:t[13]||(t[13]=ne=>e.stateFragment.setSettingsWindowOpened(!0)),onCloseSettingsWindow:t[14]||(t[14]=ne=>e.stateFragment.setSettingsWindowOpened(!1)),onToggleGroup:t[15]||(t[15]=ne=>e.toggleGroup(ne)),onSelectItem:t[16]||(t[16]=ne=>e.selectItem(ne)),onStartRecording:t[17]||(t[17]=ne=>e.startRecording()),onStopRecording:t[18]||(t[18]=ne=>e.stopRecording()),onResetRecording:t[19]||(t[19]=ne=>e.openRecordingResetModal()),onPauseRecording:t[20]||(t[20]=ne=>e.pauseRecording()),onResumeRecording:t[21]||(t[21]=ne=>e.resumeRecording())},{counter:n(()=>[e.isInRecordingPhase||e.isMobileView&&e.isInRecordingWindowOpenedPhase?(d(),S(m,{key:0,time:e.state.recordingTime,"finish-time":e.state.maximumTime,"is-paused":e.state.isRecordingPaused||e.isMobileView&&e.isInRecordingWindowOpenedPhase,"is-disabled":e.isMobileView&&e.isInRecordingWindowOpenedPhase},null,8,["time","finish-time","is-paused","is-disabled"])):E("",!0)]),_:1},8,["settings-opened","settings","current-phase","is-recording-paused","progress","is-buttons-disabled","is-mobile-view","is-pause-supported"])):e.isInResultsPhase?(d(),S(me,{key:1,"is-buttons-disabled":(e.state.isResetPromptOpened||e.state.isExitPromptOpened)&&!e.isMobileView,"is-media-buttons-disabled":!e.areResultBlobsReady,"is-timeline-button-disabled":e.state.isResultAddToTimelineButtonDisabled,onResetRecording:t[22]||(t[22]=ne=>e.openRecordingResetModal()),onAddToUploads:t[23]||(t[23]=ne=>e.addToUploads()),onAddToTimeline:t[24]||(t[24]=ne=>e.addToTimeline())},null,8,["is-buttons-disabled","is-media-buttons-disabled","is-timeline-button-disabled"])):E("",!0)]),_:2},[e.isInResultsPhase?void 0:{name:"label",fn:n(()=>[e.isMobileView?(d(),h("span",VT,[e.state.selectedMode==="camera-screen"?(d(),h("span",NT,g(e.$t("mediaRecorder.widgetMediaRecorder.recordScreenAndCamera")),1)):e.state.selectedMode==="camera"?(d(),h("span",BT,g(e.$t("mediaRecorder.widgetMediaRecorder.recordCamera")),1)):e.state.selectedMode==="audio"?(d(),h("span",jT,g(e.$t("mediaRecorder.widgetMediaRecorder.recordAudio")),1)):e.state.selectedMode==="screen"?(d(),h("span",zT,g(e.$t("mediaRecorder.widgetMediaRecorder.recordScreen")),1)):E("",!0)])):E("",!0)]),key:"0"},e.isInResultsPhase?{name:"result-name-input",fn:n(ne=>[e.isMobileView?(d(),S(a,{key:0,maxlength:"35",value:e.state.recordingName,onEdit:gt=>ne.setIsEditingTitle(!0),onDisplay:gt=>ne.setIsEditingTitle(!1),onTextChanged:t[0]||(t[0]=gt=>e.stateFragment.setRecordingName(gt))},null,8,["value","onEdit","onDisplay"])):(d(),S(u,{key:1,maxlength:"50",value:e.state.recordingName,"is-disabled":(e.state.isResetPromptOpened||e.state.isExitPromptOpened)&&!e.isMobileView,onTextChanged:t[1]||(t[1]=gt=>e.stateFragment.setRecordingName(gt))},null,8,["value","is-disabled"]))]),key:"1"}:void 0,e.isInCriticalErrorDisplayedPhase?{name:"critical-error",fn:n(()=>[r(L,{"is-dark-background-enabled":!1,"is-mobile-view":e.isMobileView},{default:n(()=>[e.isBrowserNotSupportedErrorSet?(d(),S(f,{key:0,onClose:t[2]||(t[2]=ne=>e.closeRecordingWindow())})):E("",!0),e.isPermissionDeniedErrorSet?(d(),S(b,{key:1,onClose:t[3]||(t[3]=ne=>e.closeRecordingWindow())})):E("",!0),e.isScreenRecordNotSupportedErrorSet?(d(),S(T,{key:2,onClose:t[4]||(t[4]=ne=>e.closeRecordingWindow())})):E("",!0),e.isNoCameraDetectedErrorSet?(d(),S(C,{key:3,onClose:t[5]||(t[5]=ne=>e.closeRecordingWindow())})):E("",!0),e.isNoMicrophoneDetectedErrorSet?(d(),S(M,{key:4,onClose:t[6]||(t[6]=ne=>e.closeRecordingWindow())})):E("",!0)]),_:1},8,["is-mobile-view"])]),key:"2"}:void 0]),1064,["layout","is-buttons-disabled","onClose"])}const XT=$(DT,[["render",GT]]),YT=A({name:"app-modal-export-settings-presets",components:{AppSvgSymbol:K},props:{settingsPresets:{type:Array,required:!0},isGifPresetDisabled:{type:Boolean,required:!0},activeSettingsPresetId:{type:Number,required:!0},doesUserHaveSubscription:{type:Boolean,required:!0},isMobile:{type:Boolean,default:!1}},emits:["preset-change"],methods:{changeActivePreset(e){this.$emit("preset-change",e.id)}}}),KT={class:"app-modal-export-settings-presets"},ZT=["disabled","onClick"],QT={class:"app-modal-export-settings-preset-button__text"},JT={class:"app-modal-export-settings-preset-button__label"},xT={key:0,class:"app-modal-export-settings-preset-button__crown"},e$={class:"app-modal-export-settings-preset-button__selection-checkbox"};function t$(e,t,i,o,s,l){const a=D("AppSvgSymbol");return d(),h("div",KT,[(d(!0),h(N,null,q(e.settingsPresets,u=>(d(),h("button",{key:u.id,class:F(["app-modal-export-settings-preset-button",{"app-modal-export-settings-preset-button--active":e.activeSettingsPresetId===u.id,"app-modal-export-settings-preset-button--full-width":u.label==="gif","app-modal-export-settings-preset-button--disabled":u.label==="gif"&&e.isGifPresetDisabled}]),disabled:u.label==="gif"&&e.isGifPresetDisabled,onClick:m=>e.changeActivePreset(u)},[p("span",QT,g(u.title),1),p("span",JT,g(e.$t(`header.exportSettingsPresets.${u.label}`)),1),u.doesRequireSubscription&&!e.doesUserHaveSubscription?(d(),h("span",xT,[e.isMobile?(d(),S(a,{key:0,width:16,height:16,symbol:"crown-16"})):(d(),S(a,{key:1,width:14,height:14,symbol:"crown-14"}))])):E("",!0),ae(p("span",e$,[r(a,{width:24,height:24,symbol:"selection-checkbox-rounded"})],512),[[pe,e.activeSettingsPresetId===u.id]])],10,ZT))),128))])}const i$=$(YT,[["render",t$]]),o$=A({name:"app-modal-content-export",props:{isExportDisabled:{type:Boolean,default:!1}}}),n$={class:"app-modal-content-export__title"},s$={class:"app-modal-content-export__resolution-buttons"},a$={class:"app-modal-content-export__export-disabled-text"},r$={class:"app-modal-content-export__export-button"};function l$(e,t,i,o,s,l){return d(),h("div",{class:F(["app-modal-content-export",{"app-modal-content-export--disabled":e.isExportDisabled}])},[p("div",n$,[w(e.$slots,"title")]),p("div",s$,[w(e.$slots,"resolution-buttons")]),p("div",a$,[w(e.$slots,"export-disabled-text")]),p("div",r$,[w(e.$slots,"export-button")])],2)}const d$=$(o$,[["render",l$]]),u$=A({name:"app-modal-content-upload-limit-upgrade"}),p$={class:"app-modal-content-upload-limit-upgrade"},c$={class:"app-modal-content-upload-limit-upgrade__title"},m$={class:"app-modal-content-upload-limit-upgrade__subtitle"},h$={class:"app-modal-content-upload-limit-upgrade__buttons"},g$={class:"app-modal-content-upload-limit-upgrade__button-left"},v$={class:"app-modal-content-upload-limit-upgrade__button-right"};function f$(e,t,i,o,s,l){return d(),h("div",p$,[p("div",c$,[w(e.$slots,"title")]),p("div",m$,[w(e.$slots,"subtitle")]),p("div",h$,[p("div",g$,[w(e.$slots,"left-button")]),p("div",v$,[w(e.$slots,"right-button")])])])}const b$=$(u$,[["render",f$]]),y$=A({name:"app-modal-project-already-opened"}),E$={class:"app-modal-project-already-opened"},S$={class:"app-modal-project-already-opened__title"},k$={class:"app-modal-project-already-opened__subtitle"},C$={class:"app-modal-project-already-opened__button"},T$={class:"app-modal-project-already-opened__button-refresh"};function $$(e,t,i,o,s,l){return d(),h("div",E$,[p("div",S$,[w(e.$slots,"title")]),p("div",k$,[w(e.$slots,"subtitle")]),p("div",C$,[p("div",T$,[w(e.$slots,"refresh-button")])])])}const w$=$(y$,[["render",$$]]),A$=A({name:"app-modal-stock-media-image",props:{item:{type:Object,required:!0}},computed:{rootStyles(){return this.item.assetPreview.source===void 0?{}:{aspectRatio:`${this.item.assetLarge.width}/${this.item.assetLarge.height}`,backgroundImage:`url(${this.item.assetPreview.source.sourceUrl})`}},imageStyles(){const e={};return this.item.assetLarge.width/this.item.assetLarge.height>1?e.width=`${this.item.assetLarge.width}px`:e.height=`${this.item.assetLarge.height}px`,e}}}),M$=["src","alt","width","height"];function R$(e,t,i,o,s,l){return d(),h("div",{class:"app-modal-stock-media-image",style:z(e.rootStyles)},[e.item.assetLarge.source!==void 0?(d(),h("img",{key:0,class:"app-modal-stock-media-image__image",src:e.item.assetLarge.source.sourceUrl,alt:e.item.title,style:z(e.imageStyles),width:e.item.assetLarge.width,height:e.item.assetLarge.height},null,12,M$)):E("",!0)],4)}const P$=$(A$,[["render",R$]]),I$=A({name:"app-modal-stock-button-uploads",components:{AppButton:oe,AppSvgSymbol:K},props:{stateChangeTimeout:{type:Number,default:1500},isIconVisible:{type:Boolean,default:!0},state:{type:String,default:"default"}},emits:["click"],data:()=>({innerState:"default",stateChangeTimerId:void 0}),watch:{state:{handler(){this.changeState(this.state)},immediate:!0}},beforeUnmount(){window.clearTimeout(this.stateChangeTimerId)},methods:{changeState(e){this.innerState==="added"||e==="added"&&this.innerState==="adding"||(this.innerState=e,e==="adding"&&(this.stateChangeTimerId=window.setTimeout(()=>{this.innerState="added"},this.stateChangeTimeout)))}}});function L$(e,t,i,o,s,l){const a=D("AppSvgSymbol"),u=D("AppButton");return d(),S(u,J({variant:"stocks-add-default","rounding-value":6},e.$attrs,{"is-disabled":e.innerState==="adding",onClick:t[0]||(t[0]=m=>{e.$emit("click",e.innerState),e.changeState("adding")})}),G({default:n(()=>[e.innerState==="default"?(d(),h(N,{key:0},[y(g(e.$t("editor.modalStockButtonUploads.addToUploads")),1)],64)):E("",!0),e.innerState==="adding"?(d(),h(N,{key:1},[y(g(e.$t("editor.modalStockButtonUploads.added")),1)],64)):E("",!0),e.innerState==="added"?(d(),h(N,{key:2},[y(g(e.$t("editor.modalStockButtonUploads.viewInUploads")),1)],64)):E("",!0)]),_:2},[e.isIconVisible?{name:"icon",fn:n(()=>[e.innerState==="default"||e.innerState==="added"?(d(),S(a,{key:0,symbol:"svg-main-navigation-tab-icon-media",width:20,height:20})):E("",!0),e.innerState==="adding"?(d(),S(a,{key:1,symbol:"check-mark",width:20,height:20})):E("",!0)]),key:"0"}:void 0]),1040,["is-disabled"])}const O$=$(I$,[["render",L$]]),F$=A({name:"app-modal-stock-item-preview",props:{provider:{type:String,required:!0},stockType:{type:String,required:!0},link:{type:String,required:!0},appLayout:{type:String,default:"desktop"}},computed:{providerTermsLink(){return"https://pixabay.com/service/license-summary/"}},mounted(){this.getWindowHeight(),window.addEventListener("resize",this.getWindowHeight)},beforeUnmount(){window.removeEventListener("resize",this.getWindowHeight)},methods:{getWindowHeight(){const e=window.innerHeight;this.$el.style.setProperty("--vh",`${e}px`)}}}),D$={class:"app-modal-stock-item-preview__media"},V$={class:"app-modal-stock-item-preview__sidebar"},N$={key:0,class:"app-modal-stock-item-preview__title"},B$={class:"app-modal-stock-item-preview__description"},j$=["href"],z$=["href"],H$={class:"app-modal-stock-item-preview__buttons"},_$={class:"app-modal-stock-item-preview__button-add-timeline"},U$={class:"app-modal-stock-item-preview__button-add-uploads"};function q$(e,t,i,o,s,l){return d(),h("div",{class:F(["app-modal-stock-item-preview",[`app-modal-stock-item-preview--variant-${e.appLayout}`]])},[p("div",D$,[w(e.$slots,"media")]),p("div",V$,[e.$slots.title!==void 0?(d(),h("div",N$,[w(e.$slots,"title")])):E("",!0),p("div",B$,[p("div",null,[y(g(e.$t(`editor.modalStockItemPreview.stockTypes.${e.stockType}`))+" "+g(e.$t("editor.modalStockItemPreview.from"))+" ",1),p("a",{href:e.link,rel:"noreferrer nofollow",target:"_blank",class:"app-modal-stock-item-preview__link"},g(e.$t(`editor.modalStockItemPreview.providers.${e.provider}`)),9,j$),t[0]||(t[0]=y(". "))]),p("div",null,[y(g(e.$t("editor.modalStockItemPreview.freeToUse"))+" ",1),p("a",{href:e.providerTermsLink,rel:"noreferrer nofollow",target:"_blank",class:"app-modal-stock-item-preview__link"},g(e.$t("editor.modalStockItemPreview.contentLicense")),9,z$),t[1]||(t[1]=y(". "))])]),p("div",H$,[p("div",_$,[w(e.$slots,"button-add-timeline")]),p("div",U$,[w(e.$slots,"button-add-uploads")])])])],2)}const W$=$(F$,[["render",q$]]),G$=A({name:"widget-project-not-found",components:{AppOverlay:Ti,AppModal:qe,AppModalContentError:et,AppButton:oe},props:{state:{type:Object,required:!0}},emits:["close"],methods:{close(){this.$emit("close")}}});function X$(e,t,i,o,s,l){const a=D("AppButton"),u=D("AppModalContentError"),m=D("AppModal"),f=D("AppOverlay");return d(),S(f,{variant:"modal-blur","is-visible":e.state.isModalVisible},{default:n(()=>[r(m,{"is-expand-on-mobile":!0,"is-close-button-visible":!1},{default:n(()=>[r(u,null,{title:n(()=>[y(g(e.$t("widgetProjectNotFound.title")),1)]),subtitle:n(()=>[y(g(e.$t("widgetProjectNotFound.description")),1)]),"close-button":n(()=>[r(a,{variant:"outline",size:"modal","font-weight":600,"rounding-value":6,onClick:e.close},{default:n(()=>[y(g(e.$t("close")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["is-visible"])}const Y$=$(G$,[["render",X$]]),K$=A({name:"widget-project-save-error",components:{AppOverlay:Ti,AppModal:qe,AppModalContentError:et,AppButton:oe},props:{state:{type:Object,required:!0}},emits:["close"],computed:{EProjectSaveErrorReason(){return Hn}},methods:{close(){this.$emit("close")}}});function Z$(e,t,i,o,s,l){const a=D("AppButton"),u=D("AppModalContentError"),m=D("AppModal"),f=D("AppOverlay");return d(),S(f,{variant:"modal-blur","is-visible":e.state.isModalVisible},{default:n(()=>[r(m,{"is-expand-on-mobile":!0,"is-close-button-visible":!1},{default:n(()=>[r(u,null,{title:n(()=>[e.state.reason===e.EProjectSaveErrorReason.SYNC_PAUSED?(d(),h(N,{key:0},[y(g(e.$t("widgetProjectSaveError.syncPaused.title")),1)],64)):(d(),h(N,{key:1},[y(g(e.$t("widgetProjectSaveError.default.title")),1)],64))]),subtitle:n(()=>[e.state.reason===e.EProjectSaveErrorReason.SYNC_PAUSED?(d(),h(N,{key:0},[y(g(e.$t("widgetProjectSaveError.syncPaused.description")),1)],64)):(d(),h(N,{key:1},[y(g(e.$t("widgetProjectSaveError.default.description")),1)],64))]),"close-button":n(()=>[r(a,{variant:"outline",size:"modal","font-weight":600,"rounding-value":6,onClick:e.close},{default:n(()=>[y(g(e.$t("close")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["is-visible"])}const Q$=$(K$,[["render",Z$]]),J$=A({name:"file-converter-upload"}),x$={class:"file-converter-upload"},e2={class:"file-converter-upload__title"},t2={class:"file-converter-upload__area"},i2={class:"file-converter-upload__text"};function o2(e,t,i,o,s,l){return d(),h("div",x$,[p("div",e2,g(e.$t("fileConverter.upload.title")),1),p("div",t2,[w(e.$slots,"input"),p("div",i2,g(e.$t("fileConverter.upload.areaText")),1)])])}const n2=$(J$,[["render",o2]]),s2=A({name:"file-converter-icons",props:{icon:{type:String,required:!0}}}),a2={class:"file-converter-icons"},r2={key:0,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l2={key:1,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d2={key:2,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u2={key:3,width:"100",height:"100",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p2={key:4,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c2={key:5,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m2={key:6,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h2={key:7,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g2={key:8,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function v2(e,t,i,o,s,l){return d(),h("div",a2,[e.icon==="video-default-icon"?(d(),h("svg",r2,t[0]||(t[0]=[p("rect",{width:"48",height:"48",rx:"6",fill:"#36363C"},null,-1),p("g",{opacity:"0.4"},[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 15C16.2386 15 14 17.2386 14 20V28C14 30.7614 16.2386 33 19 33H29C31.7614 33 34 30.7614 34 28V20C34 17.2386 31.7614 15 29 15H19ZM16 20C16 18.3431 17.3431 17 19 17H29C30.6569 17 32 18.3431 32 20V28C32 29.6569 30.6569 31 29 31H19C17.3431 31 16 29.6569 16 28V20ZM22 21.4633V26.5367C22 27.0242 22.5506 27.3082 22.9479 27.0256L26.5129 24.4889C26.8491 24.2496 26.8491 23.7503 26.5129 23.5111L22.9479 20.9744C22.5506 20.6918 22 20.9758 22 21.4633Z",fill:"white"})],-1)]))):e.icon==="audio-default-icon"?(d(),h("svg",l2,t[1]||(t[1]=[p("rect",{width:"48",height:"48",rx:"6",fill:"#165C4F"},null,-1),p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 32.768V15.232L0.261519 14.981L0.984449 20.5312L1.70738 12.206L2.43031 21.9187H3.15324L3.87617 17.7561L4.5991 12.206L5.32202 13.5935L6.04495 12.206L7.49081 16.3686L8.21374 14.981L8.93667 17.7561L9.6596 16.3686L10.3825 20.5312L11.1055 16.3686L11.8284 10.8184L12.5513 14.981L13.2742 23.3062L14.7201 10.8184L16.166 21.9187L16.8889 12.206L17.6118 21.9187L18.3348 23.3062L19.0577 21.7127L19.7806 17.4634L21.2265 23.3062L21.9494 16.3686L22.6723 12.206L23.3953 17.7561L24.1182 20.5312L24.8411 10.8184L25.564 21.9187L26.287 14.981L27.0099 9.43089L28.4558 16.3686L29.1787 12.206L29.9016 20.5312L30.6245 14.981L31.3475 21.9187L32.0704 14.981L32.7933 23.3062L33.5163 17.7561L34.2392 16.3686L35.6851 8L36.408 23.3062L37.1309 13.5935L37.8538 14.981L38.5768 19.1436L39.2997 10.8184L40.0226 20.5312H40.7456L41.4685 12.206L42.9144 16.3686L43.6373 17.7561L44.3602 13.5935H45.0831L45.8061 21.9187L46.529 20.5312L47.2519 16.3686L47.9749 21.9187L48 21.8222V26.1778L47.9749 26.0813L47.2519 31.6314L46.529 27.4688L45.8061 26.0813L45.0831 34.4065H44.3602L43.6373 30.2439L42.9144 31.6314L41.4685 35.794L40.7456 27.4688H40.0226L39.2997 37.1816L38.5768 28.8564L37.8538 33.019L37.1309 34.4065L36.408 24.6938L35.6851 40L34.2392 31.6314L33.5163 30.2439L32.7933 24.6938L32.0704 33.019L31.3475 26.0813L30.6245 33.019L29.9016 27.4688L29.1787 35.794L28.4558 31.6314L27.0099 38.5691L26.287 33.019L25.564 26.0813L24.8411 37.1816L24.1182 27.4688L23.3953 30.2439L22.6723 35.794L21.9494 31.6314L21.2265 24.6938L19.7806 30.5366L19.0577 26.2873L18.3348 24.6938L17.6118 26.0813L16.8889 35.794L16.166 26.0813L14.7201 37.1816L13.2742 24.6938L12.5513 33.019L11.8284 37.1816L11.1055 31.6314L10.3825 27.4688L9.6596 31.6314L8.93667 30.2439L8.21374 33.019L7.49081 31.6314L6.04495 35.794L5.32202 34.4065L4.5991 35.794L3.87617 30.2439L3.15324 26.0813H2.43031L1.70738 35.794L0.984449 27.4688L0.261519 33.019L0 32.768Z",fill:"#1F8E78"},null,-1)]))):e.icon==="image-default-icon"?(d(),h("svg",d2,t[2]||(t[2]=[p("rect",{width:"48",height:"48",rx:"6",fill:"#36363C"},null,-1),p("g",{opacity:"0.4"},[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 15C16.2386 15 14 17.2386 14 20V28C14 30.7614 16.2386 33 19 33H29C31.7614 33 34 30.7614 34 28V20C34 17.2386 31.7614 15 29 15H19ZM16 20C16 18.3431 17.3431 17 19 17H29C30.6569 17 32 18.3431 32 20V28C32 29.525 30.8622 30.7842 29.3892 30.975L23.4142 25C22.6332 24.219 21.3668 24.219 20.5858 25L16.2924 29.2934C16.105 28.9018 16 28.4631 16 28V20ZM17.7066 30.7076C18.0982 30.895 18.5369 31 19 31H26.5858L22 26.4142L17.7066 30.7076ZM28 21.5C28 22.3284 27.3284 23 26.5 23C25.6716 23 25 22.3284 25 21.5C25 20.6716 25.6716 20 26.5 20C27.3284 20 28 20.6716 28 21.5Z",fill:"white"})],-1)]))):e.icon==="audio-result-icon"?(d(),h("svg",u2,t[3]||(t[3]=[Ht('<rect width="100" height="100" rx="8" fill="#165C4F"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M0 63.6996V36.3004L0.545403 35.9079L2.05151 44.5799L3.55761 31.5718L5.06371 46.748H6.56982L8.07592 40.2439L9.58202 31.5718L11.0881 33.7398L12.5942 31.5718L15.6064 38.0759L17.1125 35.9079L18.6186 40.2439L20.1247 38.0759L21.6308 44.5799L23.1369 38.0759L24.643 29.4038L26.1492 35.9079L27.6553 48.916L30.6675 29.4038L33.6797 46.748L35.1858 31.5718L36.6919 46.748L38.198 48.916L39.7041 46.4262L41.2102 39.7866L44.2224 48.916L45.7285 38.0759L47.2346 31.5718L48.7407 40.2439L50.2468 44.5799L51.7529 29.4038L53.259 46.748L54.7651 35.9079L56.2712 27.2358L59.2834 38.0759L60.7895 31.5718L62.2956 44.5799L63.8017 35.9079L65.3078 46.748L66.8139 35.9079L68.32 48.916L69.8261 40.2439L71.3322 38.0759L74.3444 25L75.8506 48.916L77.3567 33.7398L78.8628 35.9079L80.3689 42.4119L81.875 29.4038L83.3811 44.5799H84.8872L86.3933 31.5718L89.4055 38.0759L90.9116 40.2439L92.4177 33.7398H93.9238L95.4299 46.748L96.936 44.5799L98.4421 38.0759L99.9482 46.748L100 46.5988V53.4012L99.9482 53.252L98.4421 61.9241L96.936 55.4201L95.4299 53.252L93.9238 66.2602H92.4177L90.9116 59.7561L89.4055 61.9241L86.3933 68.4282L84.8872 55.4201H83.3811L81.875 70.5962L80.3689 57.5881L78.8628 64.0921L77.3567 66.2602L75.8506 51.084L74.3444 75L71.3322 61.9241L69.8261 59.7561L68.32 51.084L66.8139 64.0921L65.3078 53.252L63.8017 64.0921L62.2956 55.4201L60.7895 68.4282L59.2834 61.9241L56.2712 72.7642L54.7651 64.0921L53.259 53.252L51.7529 70.5962L50.2468 55.4201L48.7407 59.7561L47.2346 68.4282L45.7285 61.9241L44.2224 51.084L41.2102 60.2134L39.7041 53.5738L38.198 51.084L36.6919 53.252L35.1858 68.4282L33.6797 53.252L30.6675 70.5962L27.6553 51.084L26.1492 64.0921L24.643 70.5962L23.1369 61.9241L21.6308 55.4201L20.1247 61.9241L18.6186 59.7561L17.1125 64.0921L15.6064 61.9241L12.5942 68.4282L11.0881 66.2602L9.58202 68.4282L8.07592 59.7561L6.56982 53.252H5.06371L3.55761 68.4282L2.05151 55.4201L0.545403 64.0921L0 63.6996Z" fill="#1F8E78"></path><g filter="url(#filter0_dd_30133_177164)"><rect x="56" y="10" width="54" height="30" rx="4" fill="#08B37F"></rect><path d="M69.5997 30L66.6863 19.8182H69.0379L70.7233 26.8928H70.8078L72.6672 19.8182H74.6807L76.5351 26.9077H76.6246L78.3099 19.8182H80.6615L77.7481 30H75.6501L73.7112 23.343H73.6317L71.6977 30H69.5997ZM82.5432 30H80.2364L83.7513 19.8182H86.5255L90.0354 30H87.7286L85.1782 22.1449H85.0986L82.5432 30ZM82.3991 25.9979H87.8479V27.6783H82.3991V25.9979ZM91.8289 19.8182L94.2899 27.554H94.3843L96.8502 19.8182H99.2366L95.7267 30H92.9525L89.4376 19.8182H91.8289Z" fill="white"></path></g><defs><filter id="filter0_dd_30133_177164" x="53" y="9" width="60" height="37" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="3"></feOffset><feGaussianBlur stdDeviation="1.5"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.12549 0 0 0 0 0.12549 0 0 0 0 0.141176 0 0 0 0.15 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_30133_177164"></feBlend><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feMorphology radius="1" operator="dilate" in="SourceAlpha" result="effect2_dropShadow_30133_177164"></feMorphology><feOffset></feOffset><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.12549 0 0 0 0 0.12549 0 0 0 0 0.141176 0 0 0 0.05 0"></feColorMatrix><feBlend mode="normal" in2="effect1_dropShadow_30133_177164" result="effect2_dropShadow_30133_177164"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_30133_177164" result="shape"></feBlend></filter></defs>',4)]))):e.icon==="expand"?(d(),h("svg",p2,t[4]||(t[4]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.4801 3.92383C10.202 3.69206 9.79798 3.69205 9.51984 3.92383L6.51984 6.42383C6.20163 6.68901 6.15864 7.16193 6.42381 7.48014C6.68899 7.79835 7.16191 7.84134 7.48012 7.57617L9.99998 5.47628L12.5198 7.57617C12.838 7.84134 13.311 7.79835 13.5761 7.48014C13.8413 7.16193 13.7983 6.68901 13.4801 6.42383L10.4801 3.92383ZM9.51984 16.0762C9.79798 16.3079 10.202 16.3079 10.4801 16.0762L13.4801 13.5762C13.7983 13.311 13.8413 12.8381 13.5761 12.5199C13.311 12.2017 12.838 12.1587 12.5198 12.4238L9.99998 14.5237L7.48012 12.4238C7.16191 12.1587 6.68899 12.2017 6.42381 12.5199C6.15864 12.8381 6.20164 13.311 6.51984 13.5762L9.51984 16.0762Z"},null,-1)]))):e.icon==="gear"?(d(),h("svg",c2,t[5]||(t[5]=[p("g",{"clip-path":"url(#clip0_29723_146235)"},[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.6238 3.47373C13.4024 3.3392 13.2562 3.10361 13.2491 2.84552C13.2747 1.42716 12.1756 -0.000450147 10.554 1.06476e-07H10.5535H9.44291H9.4429C7.8499 -1.18145e-05 6.75594 1.38682 6.75602 2.78395C6.7502 3.0464 6.59924 3.30102 6.37366 3.44591C6.16368 3.58078 5.96162 3.58303 5.78146 3.47002L5.76809 3.46177C4.44943 2.66318 2.79596 3.16414 2.0669 4.48725L1.48003 5.50687L1.46871 5.52706C1.1559 6.10085 1.0615 6.74085 1.15398 7.34004C1.27352 8.11454 1.71211 8.85335 2.43933 9.30045L2.44219 9.3022C2.65941 9.43475 2.79991 9.68945 2.79991 10C2.79991 10.3105 2.65941 10.5653 2.44219 10.6978L2.44142 10.6983C1.16021 11.4817 0.759905 13.1661 1.46901 14.4649L1.46999 14.4667L2.02557 15.4794C2.70902 16.7705 4.37388 17.3622 5.72735 16.5603L5.74254 16.5512C5.93916 16.4299 6.15918 16.4358 6.37145 16.5674C6.59579 16.7066 6.74411 16.9513 6.74793 17.215C6.75127 18.7011 7.90531 20 9.4429 20H10.5539C12.0885 20 13.2422 18.7057 13.2489 17.2217H13.249L13.2489 17.2126C13.2477 16.9444 13.3949 16.6868 13.6154 16.5413C13.8146 16.4098 14.0258 16.394 14.2368 16.521C15.553 17.321 17.2069 16.8245 17.9388 15.5029L18.5198 14.4794L18.5198 14.4794L18.5259 14.4685C19.2223 13.2052 18.8633 11.4849 17.5533 10.6884C17.344 10.5611 17.2012 10.3084 17.2004 9.99488C17.1995 9.68333 17.3388 9.43288 17.5516 9.30404L17.5517 9.30407L17.5596 9.29917C18.8032 8.53042 19.2121 6.91267 18.5762 5.62838C18.5621 5.59381 18.5461 5.55996 18.5281 5.52701L17.9767 4.51564L17.9766 4.51558C17.2507 3.18411 15.5917 2.67808 14.2693 3.47892L14.2693 3.47885L14.2588 3.48538C14.0614 3.60826 13.8375 3.60362 13.6238 3.47373ZM10.5544 2C10.8908 1.99985 11.2623 2.3388 11.2493 2.81569C11.249 2.82802 11.2489 2.84035 11.249 2.85268C11.268 4.78755 13.4324 6.34899 15.3092 5.18731C15.6082 5.00912 16.0143 5.09445 16.2207 5.47293L16.2207 5.47299L16.7324 6.41157C16.7439 6.438 16.7565 6.46397 16.7702 6.48942C16.9899 6.89633 16.8402 7.39046 16.5106 7.59632C14.7474 8.66907 14.7786 11.342 16.5142 12.3973C16.8426 12.597 16.9898 13.1063 16.7768 13.4986L16.1966 14.5206L16.1965 14.5206L16.1902 14.5321C15.982 14.9104 15.5738 14.9936 15.275 14.8116L15.272 14.8098C14.3229 14.2364 13.2786 14.3673 12.5138 14.872C11.7711 15.3621 11.2461 16.2288 11.2489 17.2171C11.2445 17.7025 10.8843 18 10.554 18H9.4429C9.1105 18 8.74792 17.6985 8.74792 17.2086H8.74797L8.74788 17.1987C8.73797 16.1907 8.182 15.3369 7.42555 14.8678C6.65894 14.3923 5.62489 14.2795 4.70297 14.8426C4.41237 15.0107 3.9839 14.9074 3.79193 14.5413L3.78303 14.5247L3.22442 13.5065L3.22403 13.5058C3.00324 13.1005 3.1545 12.6067 3.48446 12.4047C4.38268 11.8564 4.79991 10.9003 4.79991 10C4.79991 9.10002 4.38297 8.14426 3.48538 7.59582C3.30178 7.48231 3.16849 7.28065 3.13057 7.03496C3.10217 6.85097 3.13109 6.66059 3.22029 6.49261L3.80543 5.47599L3.81675 5.45579C4.02294 5.07756 4.42867 4.99209 4.72757 5.16982C5.65826 5.74866 6.69644 5.61559 7.45449 5.12871C8.19759 4.65143 8.74247 3.7969 8.75594 2.80501L8.75602 2.78688C8.75392 2.32372 9.11624 2 9.44289 2H9.4429H10.554L10.5544 2ZM9.00009 10C9.00009 9.44772 9.44781 9 10.0001 9C10.5524 9 11.0001 9.44772 11.0001 10C11.0001 10.5523 10.5524 11 10.0001 11C9.44781 11 9.00009 10.5523 9.00009 10ZM10.0001 7C8.34324 7 7.00009 8.34315 7.00009 10C7.00009 11.6569 8.34324 13 10.0001 13C11.6569 13 13.0001 11.6569 13.0001 10C13.0001 8.34315 11.6569 7 10.0001 7Z"})],-1),p("defs",null,[p("clipPath",{id:"clip0_29723_146235"},[p("rect",{width:"20",height:"20"})])],-1)]))):e.icon==="video-formats"?(d(),h("svg",m2,t[6]||(t[6]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 1C2.23858 1 0 3.23858 0 6V14C0 16.7614 2.23858 19 5 19H15C17.7614 19 20 16.7614 20 14V6C20 3.23858 17.7614 1 15 1H5ZM2 6C2 4.34315 3.34315 3 5 3H15C16.6569 3 18 4.34315 18 6V14C18 15.6569 16.6569 17 15 17H5C3.34315 17 2 15.6569 2 14V6ZM8 7.4633V12.5367C8 13.0242 8.55062 13.3082 8.94785 13.0256L12.5129 10.4889C12.8491 10.2496 12.8491 9.75033 12.5129 9.51111L8.94785 6.97442C8.55062 6.69178 8 6.97577 8 7.4633Z"},null,-1)]))):e.icon==="audio-formats"?(d(),h("svg",h2,t[7]||(t[7]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.7369 3.15412C16.373 2.98063 17 3.45951 17 4.11889V10.4686C16.4117 10.1708 15.7286 10.0004 15 10.0004C12.7909 10.0004 11 11.5674 11 13.5004C11 15.4334 12.7909 17.0004 15 17.0004C17.2091 17.0004 19 15.4334 19 13.5004V4.11889C19 2.14077 17.1191 0.704115 15.2106 1.22459L8.21065 3.13369C6.90546 3.48964 6 4.67512 6 6.02798V12.4686C5.41165 12.1708 4.72857 12.0004 4 12.0004C1.79086 12.0004 0 13.5674 0 15.5004C0 17.4334 1.79086 19.0004 4 19.0004C6.20914 19.0004 8 17.4334 8 15.5004C8 15.5004 8 15.5004 8 15.5004V6.02798C8 5.57703 8.30182 5.18187 8.73688 5.06321L15.7369 3.15412ZM6 15.5004C5.99999 14.9145 5.36377 14.0004 4 14.0004C2.63622 14.0004 2 14.9145 2 15.5004C2 16.0863 2.63622 17.0004 4 17.0004C5.36378 17.0004 6 16.0863 6 15.5004C6 15.5004 6 15.5004 6 15.5004ZM17 13.5004C17 12.9145 16.3638 12.0004 15 12.0004C13.6362 12.0004 13 12.9145 13 13.5004C13 14.0863 13.6362 15.0004 15 15.0004C16.3638 15.0004 17 14.0863 17 13.5004Z"},null,-1)]))):e.icon==="image-formats"?(d(),h("svg",g2,t[8]||(t[8]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 1C2.23858 1 0 3.23858 0 6V14C0 16.7614 2.23858 19 5 19H15C17.7614 19 20 16.7614 20 14V6C20 3.23858 17.7614 1 15 1H5ZM2 6C2 4.34315 3.34315 3 5 3H15C16.6569 3 18 4.34315 18 6V14C18 15.525 16.8622 16.7842 15.3892 16.975L9.41421 11C8.63317 10.219 7.36684 10.219 6.58579 11L2.29237 15.2934C2.10495 14.9018 2 14.4631 2 14V6ZM3.70658 16.7076C4.09822 16.895 4.53685 17 5 17H12.5858L8 12.4142L3.70658 16.7076ZM14 7.5C14 8.32843 13.3284 9 12.5 9C11.6716 9 11 8.32843 11 7.5C11 6.67157 11.6716 6 12.5 6C13.3284 6 14 6.67157 14 7.5Z"},null,-1)]))):E("",!0)])}const So=$(s2,[["render",v2]]),f2=A({name:"file-converter-formats-dropdown",props:{selectedFormat:{type:String,required:!0},availableFormats:{type:Object,required:!0}},emits:["file-converter-format-selected"],data(){return{activeType:"video"}},created(){this.availableFormats.video.includes(this.selectedFormat)?this.activeType="video":this.availableFormats.audio.includes(this.selectedFormat)?this.activeType="audio":this.availableFormats.image.includes(this.selectedFormat)&&(this.activeType="image")}}),b2={class:"file-converter-formats-dropdown"},y2={class:"file-converter-formats-dropdown__types"},E2={class:"file-converter-formats-dropdown__formats"},S2=["onClick"];function k2(e,t,i,o,s,l){const a=So;return d(),h("div",b2,[p("div",y2,[e.availableFormats.video.length>0?(d(),h("div",{key:0,class:F(["file-converter-formats-dropdown__type-icon",{"file-converter-formats-dropdown__type-icon--active":e.activeType==="video"}]),onMouseenter:t[0]||(t[0]=u=>e.activeType="video"),onClick:t[1]||(t[1]=u=>e.activeType="video")},[r(a,{icon:"video-formats"})],34)):E("",!0),e.availableFormats.audio.length>0?(d(),h("div",{key:1,class:F(["file-converter-formats-dropdown__type-icon",{"file-converter-formats-dropdown__type-icon--active":e.activeType==="audio"}]),onMouseenter:t[2]||(t[2]=u=>e.activeType="audio"),onClick:t[3]||(t[3]=u=>e.activeType="audio")},[r(a,{icon:"audio-formats"})],34)):E("",!0),e.availableFormats.image.length>0?(d(),h("div",{key:2,class:F(["file-converter-formats-dropdown__type-icon",{"file-converter-formats-dropdown__type-icon--active":e.activeType==="image"}]),onMouseenter:t[4]||(t[4]=u=>e.activeType="image"),onClick:t[5]||(t[5]=u=>e.activeType="image")},[r(a,{icon:"image-formats"})],34)):E("",!0)]),p("div",E2,[(d(!0),h(N,null,q(e.availableFormats[e.activeType],u=>(d(),h("div",{key:"format_"+u,class:F(["file-converter-formats-dropdown__formats-item",{"file-converter-formats-dropdown__formats-item--active":u===e.selectedFormat}]),onClick:m=>e.$emit("file-converter-format-selected",u)},g(u),11,S2))),128))])])}const C2=$(f2,[["render",k2]]),T2=A({name:"file-converter-settings",props:{convertTo:{type:String,default:""},fileName:{type:String,required:!0}},emits:["file-converter-options-toggle"],data(){return{isFormatsOpen:!1,isOptionsOpen:!1}},methods:{toggleDropdown(){this.isFormatsOpen=!this.isFormatsOpen,this.isFormatsOpen?this.bindListenersForDropdown():this.unbindListenersForDropdown()},hideDropdown(){this.isFormatsOpen=!1,this.unbindListenersForDropdown()},optionsToggle(){this.isOptionsOpen=!this.isOptionsOpen,this.$emit("file-converter-options-toggle",this.isOptionsOpen)},bindListenersForDropdown(){this.$el.addEventListener("mousedown",this.checkClickOutsideDropdownAndHide,{capture:!0}),this.$el.addEventListener("dragstart",this.hideDropdown),this.$el.addEventListener("touchstart",this.checkClickOutsideDropdownAndHide,{capture:!0})},unbindListenersForDropdown(){this.$el.removeEventListener("mousedown",this.checkClickOutsideDropdownAndHide,{capture:!0}),this.$el.removeEventListener("dragstart",this.hideDropdown),this.$el.removeEventListener("touchstart",this.checkClickOutsideDropdownAndHide,{capture:!0})},checkClickOutsideDropdownAndHide(e){const t=e.target,i=this.$el.querySelector(".file-converter-settings__output-content");i!==null&&!i.contains(t)&&this.hideDropdown()}}}),$2={class:"file-converter-settings"},w2={class:"file-converter-settings__file"},A2={class:"file-converter-settings__file-icon"},M2={class:"file-converter-settings__file-info"},R2={class:"file-converter-settings__tool-title"},P2={class:"file-converter-settings__file-name"},I2={class:"file-converter-settings__output"},L2={class:"file-converter-settings__output-title"},O2={class:"file-converter-settings__output-content"},F2={class:"file-converter-settings__output-selected-text"},D2={class:"file-converter-settings__output-selected-icon"},V2={key:1,class:"file-converter-settings__output-dropdown"},N2={key:0,class:"file-converter-settings__format-options"},B2={key:1,class:"file-converter-settings__options"},j2={class:"file-converter-settings__options-content"},z2={class:"file-converter-settings__convert-button"};function H2(e,t,i,o,s,l){const a=So;return d(),h("div",$2,[p("div",w2,[p("div",A2,[w(e.$slots,"thumbnail")]),p("div",M2,[p("div",R2,[w(e.$slots,"tool-title")]),p("div",P2,g(e.fileName),1)])]),p("div",I2,[p("div",L2,g(e.$t("fileConverter.settings.convertTo"))+": ",1),p("div",O2,[p("div",{class:F(["file-converter-settings__output-selected",{"file-converter-settings__output-selected--active":e.isFormatsOpen}]),onClick:t[0]||(t[0]=(...u)=>e.toggleDropdown&&e.toggleDropdown(...u))},[p("div",F2,g(e.convertTo),1),p("div",D2,[r(a,{icon:"expand"})])],2),!e.isFormatsOpen&&e.$slots.options!==void 0?(d(),h("div",{key:0,class:"file-converter-settings__output-settings-button",onClick:t[1]||(t[1]=(...u)=>e.optionsToggle&&e.optionsToggle(...u))},[r(a,{icon:"gear"})])):E("",!0),e.isFormatsOpen?(d(),h("div",V2,[w(e.$slots,"formats",{hideDropdown:e.hideDropdown})])):E("",!0)])]),e.$slots["format-options"]!==void 0?(d(),h("div",N2,[w(e.$slots,"format-options")])):E("",!0),e.isOptionsOpen&&e.$slots.options!==void 0?(d(),h("div",B2,[p("div",j2,[w(e.$slots,"options")])])):E("",!0),p("div",z2,[w(e.$slots,"convert-button")])])}const _2=$(T2,[["render",H2]]),U2=A({name:"file-converter-progress",props:{progress:{type:Number,required:!0}},data:()=>({circleRadius:42.29999923706055}),computed:{circumference(){return 2*Math.PI*this.circleRadius},strokeDashoffset(){return(1-this.progress/100)*this.circumference}},mounted(){this.updateCircleRadius()},methods:{updateCircleRadius(){this.circleRadius=this.$refs.circle.getBBox().width/2}}}),q2={class:"file-converter-progress"},W2={class:"file-converter-progress__svg"},G2={class:"file-converter-progress-svg",width:"100%",height:"100%"},X2=["stroke-dasharray","stroke-dashoffset"],Y2={class:"file-converter-progress__number"},K2={class:"file-converter-progress__title"},Z2={class:"file-converter-progress__description"};function Q2(e,t,i,o,s,l){return d(),h("div",q2,[p("div",W2,[(d(),h("svg",G2,[t[0]||(t[0]=p("circle",{class:"file-converter-progress-svg__background",cx:"50%",cy:"50%",r:"47%","stroke-width":"8"},null,-1)),p("circle",{ref:"circle",class:"file-converter-progress-svg__value",cx:"50%",cy:"50%",r:"47%","stroke-width":"8","stroke-linecap":"round","stroke-dasharray":e.circumference,"stroke-dashoffset":e.strokeDashoffset},null,8,X2)]))]),p("div",Y2,g(e.progress)+"% ",1),p("div",K2,[w(e.$slots,"title")]),p("div",Z2,[w(e.$slots,"description")])])}const J2=$(U2,[["render",Q2]]),x2=A({name:"file-converter-result",props:{fileName:{type:String,required:!0}},computed:{fileExtension(){const e=this.fileName.split(".");return e.length===1?null:e[e.length-1]}}}),ew={class:"file-converter-result"},tw={class:"file-converter-result__title"},iw={class:"file-converter-result__thumbnail"},ow={class:"file-converter-result__thumbnail-icon"},nw={key:0,class:"file-converter-result__file-extension"},sw={class:"file-converter-result__file-name"},aw={class:"file-converter-result__download"},rw={class:"file-converter-result__change-settings"},lw={class:"file-converter-result__another-file"};function dw(e,t,i,o,s,l){return d(),h("div",ew,[p("div",tw,[w(e.$slots,"title")]),p("div",iw,[p("div",ow,[w(e.$slots,"thumbnail")]),e.fileExtension!==null?(d(),h("div",nw,g(e.fileExtension),1)):E("",!0)]),p("div",sw,g(e.fileName),1),p("div",aw,[w(e.$slots,"download")]),p("div",rw,[w(e.$slots,"change-settings")]),p("div",lw,[w(e.$slots,"another-file")])])}const uw=$(x2,[["render",dw]]),pw=A({name:"widget-file-converter",components:{AppOverlay:Ti,AppModal:qe,AppButton:oe,AppSelect:$t,AppSelectOption:wt,AppModalContentError:et},props:{convertTo:{type:String,default:""},isMobile:{type:Boolean,required:!0},uploadingFileName:{type:String,required:!0},projectId:{type:String,default:null},mediaElement:{type:Object,default:null},mediaElementsCount:{type:Number,required:!0},isProjectSyncedAfterUpload:{type:Boolean,required:!0}},emits:["file-converter-close","media-files-add-from-local","file-converter-reset"],data(){const e=this.$container.get(Va.FILE_CONVERTER_CONTROLLER);return{controller:X(e),state:X(e.stateFragment.state)}},computed:{fileName(){return this.mediaElement!==null&&typeof this.mediaElement.fileName<"u"&&this.mediaElement.fileName.length>0?this.mediaElement.fileName:this.uploadingFileName},fileType(){return this.mediaElement===null?null:this.mediaElement.type},hasFile(){return this.fileName.length>0},convertFrom(){const e=this.fileName.split(".");if(e.length===1)return"";const t=e[e.length-1].toUpperCase(),i=new Map([["JPEG","JPG"],["TIF","TIFF"]]);return i.has(t)?i.get(t)??"":t},thumbnail(){return this.mediaElement===null?null:this.mediaElement.previewImage},hasResult(){return this.state.resultUrl!==null&&this.state.resultUrl.length>0},hasError(){return this.state.errorMessage!==null&&this.state.errorMessage.length>0},localizedErrorMessage(){if(this.state.errorMessage===null)return null;const t=[{pattern:"This media does not contain any stream, suitable to convert in output format",localizationKey:"convertioNoStream"},{pattern:"Unknown Error occurred. Try again.",localizationKey:"convertioUnknownError"},{pattern:"We can't convert files in the direction BIN->CONV_MEDIA yet",localizationKey:"convertioDirection"},{pattern:"Invalid data found when processing input. The input file may be corrupted",localizationKey:"convertioCorruptedFile"},{pattern:"Error occurred, please reconvert!",localizationKey:"convertioErrorReconvert"},{pattern:"Can't determine Type of the Input File",localizationKey:"convertioTypeOfFile"},{pattern:"This media is DRM-protected!",localizationKey:"convertioDRM"}].find(o=>this.state.errorMessage?.startsWith(o.pattern))?.localizationKey;if(t===void 0)return this.state.errorMessage;let i="";if(t==="convertioTypeOfFile"){const o=this.state.errorMessage.indexOf(" [");o!==-1&&(i=this.state.errorMessage.slice(o))}return this.$t(`fileConverter.error.${t}`)+i},resultFileName(){if(this.state.resultUrl===null)return"";const e=this.state.resultUrl.split("/");return e[e.length-1]},availableFormats(){if(!this.hasFile)return{video:[],audio:[],image:[]};const e=this.state.allSettings["from-to-format"][this.convertFrom];return{video:this.state.allSettings["categories-output"].video.filter(i=>e.includes(i)),audio:this.state.allSettings["categories-output"].audio.filter(i=>e.includes(i)),image:this.state.allSettings["categories-output"].image.filter(i=>this.canConvertToImage&&e.includes(i))}},availableFrameRates(){const e=[];if(this.fileType!==De.VIDEO&&this.state.selectedFormatType===De.VIDEO)return e.push({id:"25",name:"25"}),e.push({id:"30",name:"30"}),e.push({id:"60",name:"60"}),e;for(const[t,i]of Object.entries(this.state.allSettings.options.available.video_fps))e.push({id:t,name:i});return e.sort((t,i)=>t.id===""?-1:i.id===""?1:parseInt(t.id)-parseInt(i.id))},availableFrequencies(){const e=[],t=[];this.state.selectedFormat in this.state.allSettings.options["to-format"]&&this.state.allSettings.options["to-format"][this.state.selectedFormat]?.audio_frequency?.forEach(i=>{t.push(String(i))});for(const[i,o]of Object.entries(this.state.allSettings.options.available.audio_frequency))(t.length===0||t.includes(i))&&e.push({id:i,name:o});return e.sort((i,o)=>i.id===""?-1:o.id===""?1:parseInt(i.id)-parseInt(o.id))},availableChannels(){const e=[],t=[];this.state.selectedFormat in this.state.allSettings.options["to-format"]&&this.state.allSettings.options["to-format"][this.state.selectedFormat]?.audio_channels?.forEach(i=>{t.push(String(i))});for(const[i,o]of Object.entries(this.state.allSettings.options.available.audio_channels))(t.length===0||t.includes(i))&&e.push({id:i,name:o});return e.sort((i,o)=>i.id===""?-1:o.id===""?1:parseInt(i.id)-parseInt(o.id))},availableTime(){const e=[];for(let t=0;t<60;t++)e.push({id:t.toString(),name:t.toString()});return e},videoType(){return De.VIDEO},audioType(){return De.AUDIO},imageType(){return De.IMAGE},isUploaded(){return this.mediaElement!==null&&this.mediaElement.status===yi.READY&&this.isProjectSyncedAfterUpload},canConvertToImage(){return this.mediaElement!==null&&this.mediaElement.size<104857600}},watch:{projectId:{handler(e){this.controller.setProjectId(e)},immediate:!0},mediaElementsCount:{handler(e){e>1&&this.controller.setErrorMessage(this.$t("fileConverter.error.tooManyFiles"))},immediate:!0},availableFormats:{handler(){this.hasFile&&((this.state.selectedFormat===null||this.state.selectedFormat.length===0)&&this.controller.setFormat(this.convertTo),this.checkIfFormatIsValidAndSetDefault())},immediate:!0},availableFrameRates:{handler(e){if(e.length!==0){for(let t=0;t<e.length;t++)if(e[t].id===this.state.selectedFrameRate)return;this.controller.setFrameRate(e[0].id)}},immediate:!0},availableChannels:{handler(e){if(e.length!==0){for(let t=0;t<e.length;t++)if(e[t].id===this.state.selectedChannels)return;this.controller.setChannels(e[0].id)}},immediate:!0},availableFrequencies:{handler(e){if(e.length!==0){for(let t=0;t<e.length;t++)if(e[t].id===this.state.selectedFrequency)return;this.controller.setFrequency(e[0].id)}},immediate:!0},isUploaded:{handler(e){this.controller.setUploaded(e)},immediate:!0},hasFile(e){e&&this.checkIfFormatIsValidAndSetDefault()}},methods:{closeConverter(){if(this.hasError){this.controller.setErrorMessage(""),this.changeSettings();return}if(this.state.isConverting||this.state.isWaiting){this.changeSettings(),this.projectId!==null&&this.state.conversionId!==null&&this.controller.cancelConversion(this.projectId,this.state.conversionId);return}this.hasFile&&this.mediaElementsCount===1&&!confirm(this.$t("fileConverter.error.closeConfirm"))||(this.$emit("file-converter-close"),this.projectId!==null&&this.state.conversionId!==null&&this.controller.userRetained(this.projectId,this.state.conversionId))},addFilesFromFilesystem(e){const t=[...e];this.$emit("media-files-add-from-local",t);const i=this.$refs.fileInput;i!==void 0&&(i.value="")},startConversion(){this.projectId!==null&&this.isUploaded?this.controller.startConversion():this.controller.startFakeProgress()},changeSettings(){this.controller.changeSettings(),this.$nextTick(()=>{this.state.isOptionsOpen&&this.$refs.fileConverterSettings?.methods.optionsToggle()})},checkIfFormatIsValidAndSetDefault(){const e=this.state.selectedFormat;!this.availableFormats.video?.includes(e)&&!this.availableFormats.audio?.includes(e)&&!this.availableFormats.image?.includes(e)&&(this.fileType===De.VIDEO?this.controller.setFormat(this.convertFrom==="MP4"?"MOV":"MP4"):this.fileType===De.AUDIO?this.controller.setFormat(this.convertFrom==="MP3"?"WAV":"MP3"):this.fileType===De.IMAGE&&this.controller.setFormat(this.convertFrom==="JPG"?"PNG":"JPG"))}}}),cw={class:"widget-file-converter"},mw=["src"],hw={class:"widget-file-converter__settings-option"},gw={class:"widget-file-converter__settings-option-title"},vw={class:"widget-file-converter__settings-option-multiple"},fw={key:0,class:"widget-file-converter__settings-option"},bw={class:"widget-file-converter__settings-option-title"},yw={key:1,class:"widget-file-converter__settings-option"},Ew={class:"widget-file-converter__settings-option-title"},Sw={key:2,class:"widget-file-converter__settings-option"},kw={class:"widget-file-converter__settings-option-title"},Cw=["src"];function Tw(e,t,i,o,s,l){const a=D("AppButton"),u=D("AppModalContentError"),m=D("AppModal"),f=n2,b=So,T=C2,C=D("AppSelectOption"),M=D("AppSelect"),L=_2,I=J2,P=uw,j=D("AppOverlay");return d(),h("div",cw,[r(j,{variant:"modal-blur-converter"},{default:n(()=>[e.hasError?(d(),S(m,{key:0,"is-expand-on-mobile":"","is-close-button-visible":!0,onClose:e.closeConverter},{default:n(()=>[r(u,{variant:"dark"},{title:n(()=>[y(g(e.$t("fileConverter.error.title")),1)]),subtitle:n(()=>[y(g(e.localizedErrorMessage),1)]),"close-button":n(()=>[r(a,{variant:"outline",size:"modal","font-weight":500,"rounding-value":5,onClick:e.closeConverter},{default:n(()=>[y(g(e.$t("fileConverter.error.close")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["onClose"])):e.hasFile?(d(),S(m,{key:2,"modal-variant":"default","modal-position":e.isMobile?"center":"top-right","is-close-denied":!0,onClose:e.closeConverter},{default:n(()=>[!e.state.isConverting&&!e.state.isWaiting&&!e.hasResult?(d(),S(L,{key:0,ref:"fileConverterSettings","convert-from":e.convertFrom,"convert-to":e.state.selectedFormat,"file-name":e.fileName,onFileConverterOptionsToggle:t[1]||(t[1]=B=>e.controller.setOptionsOpen(B))},G({"tool-title":n(()=>[e.fileType===e.videoType?(d(),h(N,{key:0},[y(g(e.$t("fileConverter.settings.videoTitle")),1)],64)):e.fileType===e.audioType?(d(),h(N,{key:1},[y(g(e.$t("fileConverter.settings.audioTitle")),1)],64)):(d(),h(N,{key:2},[y(g(e.$t("fileConverter.settings.imageTitle")),1)],64))]),thumbnail:n(()=>[e.fileType===e.audioType?(d(),S(b,{key:0,icon:"audio-default-icon"})):(d(),h(N,{key:1},[e.thumbnail!==null?(d(),h("img",{key:0,class:"widget-file-converter__settings-file-icon",src:e.thumbnail,alt:"File thumbnail"},null,8,mw)):e.fileType===e.videoType?(d(),S(b,{key:1,icon:"video-default-icon"})):(d(),S(b,{key:2,icon:"image-default-icon"}))],64))]),formats:n(B=>[r(T,{"selected-format":e.state.selectedFormat,"available-formats":e.availableFormats,onFileConverterFormatSelected:Y=>{B.hideDropdown(),e.controller.setFormat(Y)}},null,8,["selected-format","available-formats","onFileConverterFormatSelected"])]),"convert-button":n(()=>[r(a,{variant:"file-converter","rounding-value":6,size:"huge",onClick:e.startConversion},{default:n(()=>[y(g(e.$t("fileConverter.settings.convertButton")),1)]),_:1},8,["onClick"])]),_:2},[e.fileType===e.imageType&&e.state.selectedFormatType===e.videoType?{name:"format-options",fn:n(()=>[p("div",hw,[p("div",gw,g(e.$t("fileConverter.settings.duration")),1),p("div",vw,[r(M,{"active-item-id":e.state.selectedMinutes,items:e.availableTime,variant:"file-converter"},{"active-item":n(B=>[y(g(B.activeItem.name)+" "+g(e.$t("fileConverter.settings.min")),1)]),icon:n(()=>[r(b,{class:"widget-file-converter__settings-option-icon",icon:"expand"})]),item:n(B=>[r(C,{type:"button","is-active":B.isActive,"get-scrollable-parent-callback":B.getScrollableParentCallback,variant:"file-converter",onClick:Y=>{B.hideDropdown(),e.controller.setMinutes(B.item.id)}},{default:n(()=>[y(g(B.item.name),1)]),_:2},1032,["is-active","get-scrollable-parent-callback","onClick"])]),_:1},8,["active-item-id","items"]),r(M,{"active-item-id":e.state.selectedSeconds,items:e.availableTime,variant:"file-converter"},{"active-item":n(B=>[y(g(B.activeItem.name)+" "+g(e.$t("fileConverter.settings.sec")),1)]),icon:n(()=>[r(b,{class:"widget-file-converter__settings-option-icon",icon:"expand"})]),item:n(B=>[r(C,{type:"button","is-active":B.isActive,"get-scrollable-parent-callback":B.getScrollableParentCallback,variant:"file-converter",onClick:Y=>{B.hideDropdown(),e.controller.setSeconds(B.item.id)}},{default:n(()=>[y(g(B.item.name),1)]),_:2},1032,["is-active","get-scrollable-parent-callback","onClick"])]),_:1},8,["active-item-id","items"])])])]),key:"0"}:void 0,e.fileType!==e.imageType&&e.state.selectedFormatType!==e.imageType?{name:"options",fn:n(()=>[e.state.selectedFormatType===e.videoType?(d(),h("div",fw,[p("div",bw,g(e.$t("fileConverter.settings.frameRate")),1),r(M,{"active-item-id":e.state.selectedFrameRate,items:e.availableFrameRates,variant:"file-converter"},{"active-item":n(B=>[y(g(B.activeItem.name),1)]),icon:n(()=>[r(b,{class:"widget-file-converter__settings-option-icon",icon:"expand"})]),item:n(B=>[r(C,{type:"button","is-active":B.isActive,"get-scrollable-parent-callback":B.getScrollableParentCallback,variant:"file-converter",onClick:Y=>{B.hideDropdown(),e.controller.setFrameRate(B.item.id)}},{default:n(()=>[y(g(B.item.name),1)]),_:2},1032,["is-active","get-scrollable-parent-callback","onClick"])]),_:1},8,["active-item-id","items"])])):E("",!0),e.state.selectedFormatType!==e.imageType?(d(),h("div",yw,[p("div",Ew,g(e.$t("fileConverter.settings.audioFrequency")),1),r(M,{"active-item-id":e.state.selectedFrequency,items:e.availableFrequencies,variant:"file-converter"},{"active-item":n(B=>[y(g(B.activeItem.name),1)]),icon:n(()=>[r(b,{class:"widget-file-converter__settings-option-icon",icon:"expand"})]),item:n(B=>[r(C,{type:"button","is-active":B.isActive,"get-scrollable-parent-callback":B.getScrollableParentCallback,variant:"file-converter",onClick:Y=>{B.hideDropdown(),e.controller.setFrequency(B.item.id)}},{default:n(()=>[y(g(B.item.name),1)]),_:2},1032,["is-active","get-scrollable-parent-callback","onClick"])]),_:1},8,["active-item-id","items"])])):E("",!0),e.state.selectedFormatType!==e.imageType?(d(),h("div",Sw,[p("div",kw,g(e.$t("fileConverter.settings.audioChannels")),1),r(M,{"active-item-id":e.state.selectedChannels,items:e.availableChannels,variant:"file-converter"},{"active-item":n(B=>[y(g(B.activeItem.name),1)]),icon:n(()=>[r(b,{class:"widget-file-converter__settings-option-icon",icon:"expand"})]),item:n(B=>[r(C,{type:"button","is-active":B.isActive,"get-scrollable-parent-callback":B.getScrollableParentCallback,variant:"file-converter",onClick:Y=>{B.hideDropdown(),e.controller.setChannels(B.item.id)}},{default:n(()=>[y(g(B.item.name),1)]),_:2},1032,["is-active","get-scrollable-parent-callback","onClick"])]),_:1},8,["active-item-id","items"])])):E("",!0)]),key:"1"}:void 0]),1032,["convert-from","convert-to","file-name"])):e.state.isConverting||e.state.isWaiting?(d(),S(I,{key:1,progress:Math.max(e.state.progress,e.state.fakeProgress)},{title:n(()=>[y(g(e.$t("fileConverter.progress.title")),1)]),description:n(()=>[y(g(e.$t("fileConverter.progress.description")),1)]),_:1},8,["progress"])):e.hasResult?(d(),S(P,{key:2,"file-name":e.resultFileName},{title:n(()=>[y(g(e.$t("fileConverter.result.title")),1)]),thumbnail:n(()=>[e.fileType===e.audioType?(d(),S(b,{key:0,icon:"audio-result-icon"})):(d(),h("img",{key:1,class:"widget-file-converter__result-file-icon",src:e.thumbnail??void 0,alt:"File thumbnail"},null,8,Cw))]),download:n(()=>[r(a,{tag:"a",variant:"file-converter","rounding-value":6,size:"huge",href:e.state.resultUrl},{default:n(()=>[y(g(e.$t("fileConverter.result.download")),1)]),_:1},8,["href"])]),"change-settings":n(()=>[p("span",{onClick:t[2]||(t[2]=(...B)=>e.changeSettings&&e.changeSettings(...B))},g(e.$t("fileConverter.result.changeSettings")),1)]),"another-file":n(()=>[p("span",{onClick:t[3]||(t[3]=B=>e.$emit("file-converter-reset"))},g(e.$t("fileConverter.result.convertAnotherFile")),1)]),_:1},8,["file-name"])):E("",!0)]),_:1},8,["modal-position","onClose"])):(d(),S(m,{key:1,"modal-variant":"default","is-close-denied":!0,onClose:e.closeConverter},{default:n(()=>[r(f,null,{input:n(()=>[r(a,{variant:"file-converter",class:"widget-file-converter__upload-button","rounding-value":6,size:"huge",tag:"label",for:"widget-file-converter-upload-input"},{default:n(()=>[y(g(e.$t("fileConverter.upload.button")),1)]),_:1}),p("input",{id:"widget-file-converter-upload-input",ref:"fileInput",class:"widget-file-converter__upload-input",type:"file",onChange:t[0]||(t[0]=B=>e.addFilesFromFilesystem(B.target.files))},null,544)]),_:1})]),_:1},8,["onClose"]))]),_:1})])}const $w=$(pw,[["render",Tw]]),ww=A({name:"app-editor-layout",directives:{disableWebkitRubberBandScrollDirective:Sm},emits:{"toggle-drop-zone-visibility":e=>!0,"media-files-add-from-local":e=>!0,"reduce-menu-height":null,"extend-menu-height":null},data:()=>({draggingChildCounter:0,consoleMenuFixedHeight:window?.consoleMenuFixedHeight??void 0,isMenuHeightExtended:!1,consoleTopPadding:2}),mounted(){this.consoleTopPadding=parseInt(getComputedStyle(this.$el).getPropertyValue("--options-panel-padding-top"),10)},methods:{dragEndDragging(){this.draggingChildCounter=0,this.$emit("toggle-drop-zone-visibility",!1)},checkAndAddFilesFromFilesystem(e){if(e.dataTransfer!==null){const t=e.dataTransfer.files;t!==void 0&&t.length>0&&this.addFilesFromFilesystem(t)}},dragIncrementChildrenCount(e){e.dataTransfer!==null&&e.dataTransfer.types.includes("Files")&&this.$emit("toggle-drop-zone-visibility",!0),this.draggingChildCounter++},dragDecrementChildrenCount(){this.draggingChildCounter--,this.draggingChildCounter<=0&&(this.draggingChildCounter=0,this.$emit("toggle-drop-zone-visibility",!1))},addFilesFromFilesystem(e){const t=[...e];this.$emit("media-files-add-from-local",t)},setMenuHeight(e){const t=this.$refs.header,i=this.$refs.timeline;t!=null&&i!==void 0&&i!==null&&(window.innerHeight-t.clientHeight-this.consoleTopPadding-i.clientHeight-e>=0?(this.$emit("reduce-menu-height"),this.isMenuHeightExtended=!1):(this.$emit("extend-menu-height"),this.isMenuHeightExtended=!0),document.documentElement.scrollHeight>window.innerHeight&&this.isMenuHeightExtended?this.consoleMenuFixedHeight=document.documentElement.scrollHeight-t.clientHeight-this.consoleTopPadding:this.consoleMenuFixedHeight=void 0)}}}),Aw={ref:"header",class:"app-editor-layout__header"},Mw={class:"app-editor-layout__player"},Rw={class:"app-editor-layout__options-panel"},Pw={ref:"timeline",class:"app-editor-layout__timeline"},Iw={class:"app-editor-layout__modals"},Lw={class:"app-editor-layout__portal"},Ow={class:"app-editor-layout__upload-drop-zone"};function Fw(e,t,i,o,s,l){const a=ao("disable-webkit-rubber-band-scroll-directive");return ae((d(),h("div",{class:"app-editor-layout",onDrop:t[0]||(t[0]=_(u=>{e.dragEndDragging(),e.checkAndAddFilesFromFilesystem(u)},["prevent"])),onDragenter:t[1]||(t[1]=_((...u)=>e.dragIncrementChildrenCount&&e.dragIncrementChildrenCount(...u),["prevent"])),onDragleave:t[2]||(t[2]=_((...u)=>e.dragDecrementChildrenCount&&e.dragDecrementChildrenCount(...u),["prevent"])),onDragover:_(()=>!1,["prevent"])},[p("div",Aw,[w(e.$slots,"header")],512),p("div",Mw,[w(e.$slots,"player")]),p("div",Rw,[w(e.$slots,"options-panel",{setMenuHeight:e.setMenuHeight,consoleMenuFixedHeight:e.consoleMenuFixedHeight})]),p("div",Pw,[w(e.$slots,"timeline")],512),p("div",Iw,[w(e.$slots,"modals")]),p("div",Lw,[w(e.$slots,"portal")]),p("div",Ow,[w(e.$slots,"upload-drop-zone")])],32)),[[a]])}const Dw=$(ww,[["render",Fw]]),Vw="https://www.googleapis.com/auth/photoslibrary.readonly https://www.googleapis.com/auth/userinfo.email",Nw={picker(e){return new Promise(t=>{google.accounts.oauth2.initTokenClient({client_id:e,scope:Vw,callback:async o=>{const s=o.access_token,a=await(await fetch(`https://www.googleapis.com/oauth2/v3/userinfo?access_token=${s}`)).json();t({access_token:s,email:a.email,avatar:a.picture})}}).requestAccessToken()})}},Bw=Nw,bs={data(){return{getUploadConfigUrl:"/api/converter/loader/config",getUploadURL:"/api/files/upload",getUploadLocationURL:"/api/files/location",acceptVideoFormats:[],acceptImageFormats:[],acceptAudioFormats:[],acceptSubtitleFormats:[],acceptFormats:[],acceptTypes:[],acceptAudioFormatsInEditor:!1,audioFormatsList:[],videos:[],images:[],audios:[],subtitles:[]}},computed:{...Na(["currentConfig"]),acceptFormatsInputAttribute(){return this.acceptFormats.map(e=>`.${e}`).join(",")}},methods:{...Ba(["setErrors","clearErrors"]),setAcceptAudioFormatsInEditor(e){this.acceptAudioFormatsInEditor=e},getFormats(e=!0,t=!0,i=!0,o=!1){return Di.get(this.getUploadConfigUrl).then(s=>({videoFormats:s.data.videoFormats.map(l=>l.toLowerCase()),audioFormats:s.data.audioFormats.map(l=>l.toLowerCase()),imageFormats:s.data.imageFormats.map(l=>l.toLowerCase()),subtitleFormats:s.data.subtitleFormats.map(l=>l.toLowerCase())})).then(s=>{e&&(this.acceptVideoFormats=s.videoFormats,this.acceptFormats.push(...this.acceptVideoFormats),this.acceptTypes.push("video")),t&&(this.acceptAudioFormats=s.audioFormats,this.acceptFormats.push(...this.acceptAudioFormats),this.acceptTypes.push("audio")),i&&(this.acceptImageFormats=s.imageFormats,this.acceptFormats.push(...this.acceptImageFormats),this.acceptTypes.push("images")),o&&(this.acceptSubtitleFormats=s.subtitleFormats,this.acceptFormats.push(...this.acceptSubtitleFormats),this.acceptTypes.push(".srt")),this.audioFormatsList=s.audioFormats})},initDragDrop(e,t){typeof t=="function"&&(["dragenter","dragover","dragleave","drop"].forEach(i=>{e.addEventListener(i,this.preventDefaults,!1)}),e.addEventListener("drop",t,!1))},preventDefaults(e){e.preventDefault(),e.stopPropagation()},dispatchErrorMessage(e){if(Di.isCancel(e))return;const t=this.$t("errors.browser-dropped-connection-during-upload");if(typeof e.message=="string"&&e.message==="Network Error")this.setErrors([t]);else if(e.response&&e.response.status===499)this.setErrors([t]);else if(e.response&&e.response.status===422){const i=[],o=e.response.data.errors;for(const s in o)i.push(...o[s]);this.setErrors(i)}else e.response?this.setErrors([e.response.data.message]):this.setErrors([this.$t("errors.something-went-wrong")])},async validateSelectedFiles(e){const t=[];for(const i of e){const o={message:"",upgradeToFix:!1},s=/[.]/.exec(i.name)?/[^.]+$/.exec(i.name)[0].toLowerCase():null;if(s===null&&"source"in i&&["URL"].includes(i.source)||(this.acceptAudioFormatsInEditor&&this.audioFormatsList.includes(s)?o.message=this.$t("message.wrong-upload-order-audio-allowed-in-editor"):s===null||!this.acceptFormats.includes(s)?(o.message=this.$t("errors.type-not-supported"),o.upgradeToFix=!1):this.acceptVideoFormats.includes(s)&&i.size>this.currentConfig.limits.maxFileSizeVideo?(o.message=this.$t("errors.video-file-size",{max:this.currentConfig.limits.maxFileSizeVideo/1024/1024}),o.upgradeToFix=!0):this.acceptImageFormats.includes(s)&&i.size>this.currentConfig.limits.maxFileSizeImage?(o.message=this.$t("errors.image-file-size",{max:this.currentConfig.limits.maxFileSizeImage/1024/1024}),o.upgradeToFix=!0):this.acceptAudioFormats.includes(s)&&i.size>this.currentConfig.limits.maxFileSizeAudio&&(o.message=this.$t("errors.audio-file-size",{max:this.currentConfig.limits.maxFileSizeAudio/1024/1024}),o.upgradeToFix=!0)),o.message.trim().length){const a=Array(o.message);o.upgradeToFix&&a.push("flag-upgrade"),this.setErrors(a)}else t.push(i)}return t},chooseFromDropboxPromise(e){return Hi("fileChooseDialog"),this.clearErrors(),new Promise((t,i)=>{window.Dropbox.choose({linkType:"direct",multiselect:e,extensions:this.acceptTypes,success:o=>{const s=o.map(l=>({src:l.link,size:l.bytes,name:l.name,timeStamp:Date.now(),source:"DropBox"}));this.validateSelectedFiles(s).then(l=>{if(!s.length||!l.length)return i();t(l)})},cancel:()=>i()})})},chooseFromGooglePhotosPromise(e){return Bw.picker(e)},clearUploadFiles(){this.videos=[],this.images=[],this.audios=[]},chooseLocalFilesPromise(e){return new Promise((t,i)=>{if(!e.length)return i();this.clearErrors(),this.clearUploadFiles(),this.validateSelectedFiles(e).then(o=>o.length?(o.forEach(s=>{const l=/[.]/.exec(s.name)?/[^.]+$/.exec(s.name)[0].toLowerCase():null;this.acceptVideoFormats.includes(l)?this.videos.push(s):this.acceptImageFormats.includes(l)?this.images.push(s):this.acceptAudioFormats.includes(l)?this.audios.push(s):this.acceptSubtitleFormats.includes(l)&&this.subtitles.push(s)}),this.videos.length>0||this.images.length>0||this.audios.length>0||this.subtitles.length>0?t():i()):i())})},chooseFromURLPromise(e){return new Promise((t,i)=>{if(Hi("fileChooseDialog"),this.clearErrors(),!yr(e))return this.setErrors([this.$t("errors.url",{url:Er(e,50)})]),i();const o=[{src:e,size:0,name:Sr(e),timeStamp:Date.now(),source:"URL"}];this.validateSelectedFiles(o).then(s=>{if(!o.length||!s.length)return i();t(s)})})},async uploadURLs(e,t,i,o=!1,s=!1){Hi("fileChosen");const l=e.map(f=>new Promise(b=>{const T=f.webContentLink||f.src;kr(T).then(C=>b(C))})),a=await Promise.all(l),m={files:e.map((f,b)=>({...f,playable:a[b]})),type:t,extractAudio:s};return o&&(m.clear=1),Di.post(this.getUploadLocationURL,m,{cancelToken:i})}}},jw={mounted(){document.body.style.overflow="hidden",this.$refs.modal.addEventListener("click",t=>{t.target===t.currentTarget&&this.$emit("close")}),document.addEventListener("keyup",t=>{t.key==="Escape"&&this.$emit("close")}),Ei&&(window.addEventListener("resize",this.resize),this.resize())},beforeDestroy(){document.body.style.overflow="auto",this.$refs.modal.removeEventListener("click",t=>{t.target===t.currentTarget&&this.$emit("close")}),document.removeEventListener("keyup",t=>{t.key==="Escape"&&this.$emit("close")}),Ei&&window.removeEventListener("resize",this.resize)},methods:{resize(){const e=window.innerHeight*.01;this.$refs.modalContainer.style.setProperty("--vh",`${e}px`)}}},zw={ref:"modalContainer",class:"modal-dialog modal-dialog-centered"},Hw={class:"modal-content"};function _w(e,t,i,o,s,l){return d(),h("div",J({ref:"modal",class:"modal modal-editor-control"},e.$attrs,{onKeydown:t[0]||(t[0]=Ce(a=>e.$emit("close"),["esc"]))}),[p("div",zw,[p("div",Hw,[w(e.$slots,"default",{},void 0,!0)])],512)],16)}const Uw=$(jw,[["render",_w],["__scopeId","data-v-99826615"]]),qw={props:{isFilterAvailable:{type:Boolean,default:!1},isAlbumsList:{type:Boolean,default:!1},isAlbumElementsList:{type:Boolean,default:!1},isLightTheme:{type:Boolean,default:!1},isEmpty:{type:Boolean,required:!0},isLoading:{type:Boolean,required:!0}},mounted(){Ei&&(window.addEventListener("resize",this.resize),this.resize())},beforeDestroy(){Ei&&window.removeEventListener("resize",this.resize)},methods:{resize(){const e=window.innerHeight*.01;this.$refs.filesChooser.style.setProperty("--vh",`${e}px`)}}},Ww={key:0,class:"files-chooser__body"},Gw={key:0,class:"files-chooser__spinner spinner-border spinner-border-sm visible"},Xw={key:1,class:"files-chooser__empty"},Yw={key:0,class:"files-chooser__spinner spinner-border spinner-border-sm visible"},Kw={key:1};function Zw(e,t,i,o,s,l){return d(),h("div",J({ref:"filesChooser",class:["files-chooser",{"files-chooser--light":i.isLightTheme}]},e.$attrs),[w(e.$slots,"header"),i.isEmpty?E("",!0):(d(),h("div",Ww,[w(e.$slots,"album-header"),p("div",{class:F(["files-chooser__body-container",{"files-chooser__body-container--with-filter":i.isFilterAvailable,"files-chooser__body-container--albums-list":i.isAlbumsList,"files-chooser__body-container--album-elements-list":i.isAlbumElementsList}]),onScroll:t[0]||(t[0]=a=>e.$emit("scroll-body-container",a))},[i.isLoading?(d(),h("div",Gw)):E("",!0),w(e.$slots,"default")],34),w(e.$slots,"filter")])),w(e.$slots,"footer"),i.isEmpty?(d(),h("div",Xw,[i.isLoading?(d(),h("div",Yw)):(d(),h("p",Kw,g(e.$t("editor.modalGooglePhotos.text.empty")),1))])):E("",!0)],16)}const Qw=$(qw,[["render",Zw]]),Jw={props:{title:{type:String,required:!0},cover:{type:String,required:!0},filesCount:{type:Number,default:0},isLightTheme:{type:Boolean,default:!1},isCounterShown:{type:Boolean,required:!0}}},xw={class:"files-chooser-album-element__thumb"},eA=["src","alt"],tA={class:"files-chooser-album-element__title"},iA={key:0,class:"files-chooser-album-element__description"};function oA(e,t,i,o,s,l){return d(),h("div",J({class:["files-chooser-album-element",{"files-chooser-album-element--light":i.isLightTheme}]},lo(e.$listeners)),[p("div",xw,[p("img",{class:"files-chooser-album-element__image",src:i.cover,alt:i.title,onError:t[0]||(t[0]=a=>e.$emit("image-error"))},null,40,eA)]),p("div",tA,g(i.title),1),i.isCounterShown?(d(),h("div",iA,g(e.$t("editor.modalGooglePhotos.text.filesCount",i.filesCount)),1)):E("",!0)],16)}const nA=$(Jw,[["render",oA]]),sA={props:{albumTitle:{type:String,default:""},isLightTheme:{type:Boolean,default:!1}}},aA={class:"files-chooser-album-header__title"};function rA(e,t,i,o,s,l){return d(),h("div",{class:F(["files-chooser-album-header",{"files-chooser-album-header--light":i.isLightTheme}])},[(d(),h("svg",{class:"files-chooser-album-header__back",width:"16",height:"16",onClick:t[0]||(t[0]=a=>e.$emit("back"))},t[1]||(t[1]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.70711 1.70711C9.09763 1.31658 9.09763 0.683417 8.70711 0.292893C8.31658 -0.0976311 7.68342 -0.0976311 7.29289 0.292893L0.292893 7.29289C-0.0976308 7.68342 -0.0976308 8.31658 0.292893 8.70711L7.29289 15.7071C7.68342 16.0976 8.31658 16.0976 8.70711 15.7071C9.09763 15.3166 9.09763 14.6834 8.70711 14.2929L3.41421 9H15C15.5523 9 16 8.55229 16 8C16 7.44772 15.5523 7 15 7H3.41421L8.70711 1.70711Z"},null,-1)]))),p("span",aA,g(i.albumTitle),1)],2)}const lA=$(sA,[["render",rA]]),dA={props:{type:{type:Number,default:0},filters:{type:Array,default:()=>{}},isLightTheme:{type:Boolean,default:!1}}},uA=["disabled","onClick"];function pA(e,t,i,o,s,l){return d(),h("div",{class:F(["files-chooser-filter",{"files-chooser-filter--light":i.isLightTheme}])},[(d(!0),h(N,null,q(i.filters,(a,u)=>(d(),h("button",{key:u,type:"button",disabled:i.type===a.value,class:F(["files-chooser-filter__button",{"files-chooser-filter__button--active":i.type===a.value}]),onClick:m=>e.$emit("choose-media-filter",a.value)},g(a.title),11,uA))),128))],2)}const cA=$(dA,[["render",pA]]),mA={props:{selectedFilesCount:{type:Number,default:0},isLightTheme:{type:Boolean,default:!1},isAllowMultipleSelect:{type:Boolean,required:!0}},computed:{selectedFilesCountText(){let e=+this.isAllowMultipleSelect;return this.selectedFilesCount>0?this.$t("editor.modalGooglePhotos.text.filesSelected",this.selectedFilesCount):this.$t("editor.modalGooglePhotos.text.selectYourFiles",++e)}}},hA=["disabled"];function gA(e,t,i,o,s,l){return d(),h("div",{class:F(["files-chooser-footer",{"files-chooser-footer--light":i.isLightTheme}])},[p("span",{class:F(["files-chooser-footer__files-counter",{"files-chooser-footer__files-counter--active":i.selectedFilesCount>0}])},g(l.selectedFilesCountText),3),p("button",{class:F(["files-chooser-footer__button-next",{"files-chooser-footer__button-next--disabled":i.selectedFilesCount===0}]),disabled:i.selectedFilesCount===0,onClick:t[0]||(t[0]=a=>e.$emit("download"))},g(e.$t("editor.modalGooglePhotos.action.next")),11,hA)],2)}const vA=$(mA,[["render",gA]]),fA={props:{tabs:{type:Array,required:!0},activeTab:{type:Number,required:!0},isLightTheme:{type:Boolean,default:!1},isTabsShown:{type:Boolean,required:!0}}},bA={class:"files-chooser-header__title"},yA={class:"files-chooser-header__second"},EA={key:0,class:"files-chooser-header__tabs"},SA=["onClick"],kA={class:"files-chooser-header__account"};function CA(e,t,i,o,s,l){return d(),h("div",{class:F(["files-chooser-header",{"files-chooser-header--light":i.isLightTheme}])},[p("div",bA,[t[2]||(t[2]=Ht('<svg class="files-chooser-header__logo"><use xlink:href="#svg-google-photos-logo"></use><symbol id="svg-google-photos-logo" viewBox="0 0 20 20"><path d="M4.9758 4.72095C7.53736 4.72095 10 6.67144 10 9.9993H0.589328C0.239901 9.9993 -0.0317586 9.69695 0.0030003 9.34928C0.298197 6.39958 2.61207 4.72095 4.9758 4.72095Z" fill="#FFDA2D"></path><path d="M15.0242 15.2774C12.4626 15.2774 10 13.3269 10 9.99902H19.4107C19.7601 9.99902 20.0318 10.3014 19.997 10.649C19.7019 13.5987 17.388 15.2774 15.0242 15.2774Z" fill="#4175DF"></path><path d="M4.72266 15.0235C4.72266 12.4619 6.67315 9.99927 10.001 9.99927V19.41C10.001 19.7594 9.69866 20.031 9.35099 19.9963C6.40129 19.7011 4.72266 17.3872 4.72266 15.0235Z" fill="#59C36A"></path><path d="M15.2784 4.97482C15.2784 7.53639 13.3279 9.99903 10 9.99903V0.588351C10 0.238924 10.3024 -0.0327352 10.65 0.00202373C13.5997 0.297221 15.2784 2.61109 15.2784 4.97482Z" fill="#F03800"></path></symbol></svg><span class="files-chooser-header__first">Google</span>',2)),p("span",yA,g(e.$t("editor.modalGooglePhotos.header.photos")),1),w(e.$slots,"dropdown")]),i.isTabsShown?(d(),h("div",EA,[(d(!0),h(N,null,q(i.tabs,(a,u)=>(d(),h("span",{key:u,class:F(["files-chooser-header__tabs-item",{"files-chooser-header__tabs-item--active":a.value===i.activeTab}]),onClick:m=>e.$emit("handle-change-tab",a.value)},g(a.title),11,SA))),128))])):E("",!0),p("div",kA,[w(e.$slots,"account"),p("button",{type:"button",class:"files-chooser-header__close",onClick:t[0]||(t[0]=a=>e.$emit("close"))},t[3]||(t[3]=[p("svg",{width:"30",height:"30",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.5304 9.46978L10.0001 8.93945L8.93945 10.0001L9.46978 10.5304L13.9395 15.0001L9.46978 19.4698L8.93945 20.0001L10.0001 21.0608L10.5304 20.5304L15.0001 16.0608L19.4698 20.5304L20.0001 21.0608L21.0608 20.0001L20.5304 19.4698L16.0608 15.0001L20.5304 10.5304L21.0608 10.0001L20.0001 8.93945L19.4698 9.46978L15.0001 13.9395L10.5304 9.46978Z"})],-1)])),p("button",{type:"button",class:"files-chooser-header__close--mobile",onClick:t[1]||(t[1]=a=>e.$emit("close"))},t[4]||(t[4]=[p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 13.468L18.532 20L20 18.532L13.468 12L20 5.46796L18.532 4L12 10.532L5.46796 4L4 5.46796L10.532 12L4 18.532L5.46796 20L12 13.468Z"})],-1)]))])],2)}const TA=$(fA,[["render",CA]]),$A={props:{avatar:{type:String,required:!0},email:{type:String,required:!0},isLightTheme:{type:Boolean,default:!1}}},wA=["src"],AA={class:"files-chooser-header-account__email"};function MA(e,t,i,o,s,l){return d(),h("div",{class:F(["files-chooser-header-account",{"files-chooser-header-account--light":i.isLightTheme}])},[p("img",{class:"files-chooser-header-account__avatar",src:i.avatar,alt:"Avatar",onClick:t[0]||(t[0]=a=>e.$emit("logout"))},null,8,wA),p("span",AA,g(i.email),1),p("span",{class:"files-chooser-header-account__sign-out",onClick:t[1]||(t[1]=a=>e.$emit("logout"))},g(e.$t("editor.modalGooglePhotos.action.signOut")),1)],2)}const RA=$($A,[["render",MA]]),PA={props:{title:{type:String,required:!0},cover:{type:String,required:!0},isSelected:{type:Boolean,default:!1},isVideo:{type:Boolean,default:!1},videoDurationTime:{type:String,default:"00:00"},isLightTheme:{type:Boolean,default:!1},isAllowMultipleSelect:{type:Boolean,required:!0}}},IA=["src","alt"];function LA(e,t,i,o,s,l){return d(),h("div",J({class:["files-chooser-media-element",{"files-chooser-media-element--light":i.isLightTheme}]},lo(e.$listeners)),[p("div",{class:F(["files-chooser-media-element__placeholder",{"files-chooser-media-element__placeholder--active":i.isSelected}])},[p("img",{class:"files-chooser-media-element__image",src:i.cover,alt:i.title,onError:t[0]||(t[0]=a=>e.$emit("image-error"))},null,40,IA)],2),p("span",{class:F(["files-chooser-media-element__checkbox",{"files-chooser-media-element__checkbox--hide":!i.isAllowMultipleSelect,"files-chooser-media-element__checkbox--active":i.isSelected}])},null,2),(i.isVideo,E("",!0))],16)}const OA=$(PA,[["render",LA]]),FA={props:{tabs:{type:Array,required:!0},activeTab:{type:Number,required:!0},isLightTheme:{type:Boolean,default:!1}},data(){return{isDropdownShown:!1}},computed:{activeTabTitle(){return this.tabs.find(e=>e.value===this.activeTab).title}},methods:{toggleDropdown(){this.isDropdownShown=!this.isDropdownShown,this.isDropdownShown&&window.addEventListener("click",this.handleCloseDropdownShown)},handleCloseDropdownShown(){this.isDropdownShown=!1,window.removeEventListener("click",this.handleCloseDropdownShown)}}},DA=["onClick"];function VA(e,t,i,o,s,l){return d(),h("div",{class:F(["files-chooser-dropdown",{"files-chooser-dropdown--light":i.isLightTheme}])},[p("span",{ref:"filesChooserDropdown",class:F(["files-chooser-dropdown__selected",{"files-chooser-dropdown__selected--open":s.isDropdownShown}]),onClick:t[0]||(t[0]=_((...a)=>l.toggleDropdown&&l.toggleDropdown(...a),["stop"]))},g(l.activeTabTitle),3),p("div",{ref:"filesChooserDropdownContainer",class:F(["files-chooser-dropdown__container",{"files-chooser-dropdown__container--open":s.isDropdownShown}])},[(d(!0),h(N,null,q(i.tabs,(a,u)=>(d(),h("span",{key:u,class:F(["files-chooser-dropdown__item",{"files-chooser-dropdown__item--active":a.value===i.activeTab}]),onClick:_(m=>{e.$emit("handle-change-tab",a.value),s.isDropdownShown=!1},["stop"])},g(a.title),11,DA))),128))],2)],2)}const NA=$(FA,[["render",VA]]),BA={props:{isLightTheme:{type:Boolean,default:!1}}};function jA(e,t,i,o,s,l){return d(),h("p",{class:F(["files-chooser-empty",{"files-chooser-empty--light":i.isLightTheme}])},g(e.$t("editor.modalGooglePhotos.text.empty")),3)}const zA=$(BA,[["render",jA]]),HA={components:{FilesChooserEmpty:zA,Modal:Uw,FilesChooser:Qw,FilesChooserAlbumElement:nA,FilesChooserAlbumHeader:lA,FilesChooserFilter:cA,FilesChooserFooter:vA,FilesChooserHeader:TA,FilesChooserHeaderAccount:RA,FilesChooserMediaElement:OA,FilesChooserDropdown:NA},mixins:[bs],props:{isLightTheme:{type:Boolean,default:!1},email:{type:String,required:!0},avatar:{type:String,required:!0},isAllowMultipleSelect:{type:Boolean,required:!0},isAllowVideos:{type:Boolean,required:!0},isAllowImages:{type:Boolean,required:!0}},data(){return{client:null,mediaList:[],selectedMediaList:[],pageSize:20,pageToken:null,albumPageSize:50,albumPageToken:null,isLoading:!0,mediaTypes:[],albumList:[],filterType:0,tab:0,selectedAlbumId:null,selectedAlbumTitle:"",filters:[{title:this.$t("editor.modalGooglePhotos.filter.all"),value:0},{title:this.$t("editor.modalGooglePhotos.filter.photos"),value:1},{title:this.$t("editor.modalGooglePhotos.filter.videos"),value:2}],tabs:[{title:this.$t("editor.modalGooglePhotos.filter.allFiles"),value:0},{title:this.$t("editor.modalGooglePhotos.filter.albums"),value:1}],canScroll:!0,isEmpty:!0,isAlbumListEmpty:!1}},computed:{isFilterAvailable(){return this.isAllowImages&&this.isAllowVideos&&this.tab===0},isAlbumsList(){return this.tab===1&&!this.selectedAlbumId},isAlbumElementsList(){return this.tab===1&&!!this.selectedAlbumId},isCounterShown(){return this.isAllowImages&&this.isAllowVideos},mediaListTypeAllowFiltered(){return this.isAllowImages&&!this.isAllowVideos?this.mediaList.filter(e=>!/video/.test(e.mimeType)):this.isAllowVideos&&!this.isAllowImages?this.mediaList.filter(e=>/video/.test(e.mimeType)):this.mediaList}},created(){this.client=window.gapi.client,(!this.isAllowImages||!this.isAllowVideos)&&(this.isAllowImages?this.mediaTypes.push("PHOTO"):this.isAllowVideos&&this.mediaTypes.push("VIDEO")),this.loadAlbumList().then(()=>{this.isAlbumListEmpty=!this.albumList.length}).then(this.loadMediaList)},methods:{mediaElementsScrollEvent(e){this.canScroll&&e.target.offsetHeight+e.target.scrollTop+200>=e.target.scrollHeight&&!this.isLoading&&this.loadMediaList()},handleChooseMediaElement(e){if(this.isAllowMultipleSelect){const t=this.selectedMediaList.map(i=>i.id).indexOf(e);if(t!==-1)this.selectedMediaList.splice(t,1);else{const i=this.mediaList.map(o=>o.id).indexOf(e);this.selectedMediaList.push(this.mediaList[i])}}else{const t=this.mediaList.map(i=>i.id).indexOf(e);this.selectedMediaList=[this.mediaList[t]]}},loadAlbumList(){return this.isLoading=!0,this.client.request({method:"GET",path:"https://photoslibrary.googleapis.com/v1/albums",params:{pageSize:this.albumPageSize,pageToken:this.albumPageToken}}).then(e=>(this.albumList.push(...e.result?.albums||[]),this.albumPageToken=e.result?.nextPageToken||null,this.isLoading=!1,e)).catch(e=>{console.error(e.message),this.isLoading=!1,this.$emit("load-album-list-error")})},loadMediaListRequest(){let e;return!this.selectedAlbumId&&this.mediaTypes.length>0?e={filters:{mediaTypeFilter:{mediaTypes:this.mediaTypes}}}:e=null,this.client.request({method:"POST",path:"https://photoslibrary.googleapis.com/v1/mediaItems:search",params:{pageSize:this.pageSize,pageToken:this.pageToken,orderBy:"MediaMetadata.creation_time desc",albumId:this.selectedAlbumId},body:e})},loadMediaList(){return this.isLoading=!0,this.loadMediaListRequest().then(e=>(this.mediaList.push(...e.result?.mediaItems||[]),this.pageToken=e.result?.nextPageToken||null,e)).then(async e=>{this.canScroll=!!this.pageToken,this.isEmpty=!this.mediaList.length&&!this.selectedAlbumId,await this.$nextTick();const t=document.querySelector(".files-chooser__body-container");return!(this.tab===1&&!this.selectedAlbumId)&&this.canScroll&&t.scrollHeight<=t.clientHeight?this.loadMediaList():(this.isLoading=!1,e)}).catch(e=>{console.error(e.message),this.isLoading=!1,this.$emit("load-media-list-error")})},back(){this.isLoading||(this.selectedAlbumId=null,this.resetMediaList())},download(){const e=this.selectedMediaList.map(t=>{const i=/video/.test(t.mimeType)?"dv":"d";return{id:t.id,name:t.filename,url:`${t.baseUrl}=${i}`}});this.$emit("download",e),this.selectedMediaList=[],this.resetMediaList()},handleChooseMediaFilter(e){if(this.filterType!==e){switch(e){case 0:this.mediaTypes=[];break;case 1:this.mediaTypes=["PHOTO"];break;case 2:this.mediaTypes=["VIDEO"];break;default:this.mediaTypes=[]}this.filterType=e,this.resetMediaList(),this.loadMediaList()}},handleChangeTab(e){this.tab!==e&&(this.tab=e,this.selectedAlbumId=null,this.selectedAlbumTitle="",this.albumList=[],this.resetMediaList(),e===0?this.loadMediaList():e===1&&this.loadAlbumList())},handleChooseAlbumElement(e,t){this.selectedAlbumId=e,this.selectedAlbumTitle=t,this.resetMediaList(),this.loadMediaList()},resetMediaList(){this.canScroll=!0,this.pageToken=null,this.albumPageToken=null,this.mediaList=[]}}};function _A(e,t,i,o,s,l){const a=D("files-chooser-header-account"),u=D("files-chooser-dropdown"),m=D("files-chooser-header"),f=D("files-chooser-album-header"),b=D("files-chooser-media-element"),T=D("files-chooser-album-element"),C=D("files-chooser-empty"),M=D("files-chooser-filter"),L=D("files-chooser-footer"),I=D("files-chooser");return d(),S(I,{"is-light-theme":i.isLightTheme,"is-filter-available":l.isFilterAvailable,"is-albums-list":l.isAlbumsList,"is-album-elements-list":l.isAlbumElementsList,"is-empty":s.isEmpty,"is-loading":s.isLoading,onScrollBodyContainer:l.mediaElementsScrollEvent},G({header:n(()=>[r(m,{"is-light-theme":i.isLightTheme,"active-tab":s.tab,tabs:s.tabs,"is-tabs-shown":!s.isEmpty&&!s.isAlbumListEmpty,onHandleChangeTab:l.handleChangeTab,onClose:t[2]||(t[2]=P=>e.$emit("close"))},{account:n(()=>[r(a,{"is-light-theme":i.isLightTheme,avatar:i.avatar,email:i.email,onLogout:t[0]||(t[0]=P=>e.$emit("logout")),onClose:t[1]||(t[1]=P=>e.$emit("close"))},null,8,["is-light-theme","avatar","email"])]),dropdown:n(()=>[!s.isEmpty&&!s.isAlbumListEmpty?(d(),S(u,{key:0,"is-light-theme":i.isLightTheme,"active-tab":s.tab,tabs:s.tabs,onHandleChangeTab:l.handleChangeTab},null,8,["is-light-theme","active-tab","tabs","onHandleChangeTab"])):E("",!0)]),_:1},8,["is-light-theme","active-tab","tabs","is-tabs-shown","onHandleChangeTab"])]),footer:n(()=>[s.isEmpty?E("",!0):(d(),S(L,{key:0,"is-light-theme":i.isLightTheme,"selected-files-count":s.selectedMediaList.length,"is-allow-multiple-select":i.isAllowMultipleSelect,onDownload:l.download},null,8,["is-light-theme","selected-files-count","is-allow-multiple-select","onDownload"]))]),default:n(()=>[l.mediaListTypeAllowFiltered.length&&(s.tab===0||s.selectedAlbumId)?(d(!0),h(N,{key:0},q(l.mediaListTypeAllowFiltered,(P,j)=>(d(),S(b,{key:j,"is-light-theme":i.isLightTheme,cover:P.baseUrl,title:P.filename,"is-selected":!!s.selectedMediaList.map(B=>B.id).some(B=>B===P.id),"is-video":/video/.test(P.mimeType),"is-allow-multiple-select":i.isAllowMultipleSelect,onClick:B=>l.handleChooseMediaElement(P.id),onImageError:t[3]||(t[3]=B=>e.$emit("image-error"))},null,8,["is-light-theme","cover","title","is-selected","is-video","is-allow-multiple-select","onClick"]))),128)):s.albumList.length&&s.tab===1&&!s.selectedAlbumId?(d(!0),h(N,{key:1},q(s.albumList,(P,j)=>(d(),S(T,{key:j,"is-light-theme":i.isLightTheme,title:P.title,cover:P.coverPhotoBaseUrl,"files-count":+P.mediaItemsCount||0,"is-counter-shown":l.isCounterShown,onClick:B=>l.handleChooseAlbumElement(P.id,P.title),onImageError:t[4]||(t[4]=B=>e.$emit("image-error"))},null,8,["is-light-theme","title","cover","files-count","is-counter-shown","onClick"]))),128)):s.isLoading?E("",!0):(d(),S(C,{key:2,"is-light-theme":i.isLightTheme},null,8,["is-light-theme"]))]),_:2},[s.selectedAlbumId?{name:"album-header",fn:n(()=>[r(f,{"is-light-theme":i.isLightTheme,"album-title":s.selectedAlbumTitle,onBack:l.back},null,8,["is-light-theme","album-title","onBack"])]),key:"0"}:void 0,l.isFilterAvailable&&!s.isLoading?{name:"filter",fn:n(()=>[r(M,{"is-light-theme":i.isLightTheme,type:s.filterType,filters:s.filters,onChooseMediaFilter:l.handleChooseMediaFilter},null,8,["is-light-theme","type","filters","onChooseMediaFilter"])]),key:"1"}:void 0]),1032,["is-light-theme","is-filter-available","is-albums-list","is-album-elements-list","is-empty","is-loading","onScrollBodyContainer"])}const UA=$(HA,[["render",_A]]),qA=globalThis.AudioWorkletNode;class WA extends qA{constructor(t,i){super(t,"rnnoise",{channelCountMode:"explicit",channelCount:1,channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[1],processorOptions:{module:i}})}toggle(t){const i={type:"toggle",enabled:t};this.port.postMessage(i)}}const Pn=e=>{let t=!1,i;const o=async()=>{try{await e()}finally{t=!0}};return{hasSettled:()=>t,run:()=>(i===void 0&&(i=o()),i)}};class GA{constructor(t){U(this,"wasmModule");U(this,"wasmModulePromise");U(this,"processorPromise");U(this,"registeredAudioContexts",new WeakMap);this.contextService=t,this.wasmModulePromise=Pn(()=>this.loadWasmModule()),this.processorPromise=Pn(async()=>{await(await fetch(this.resolveAssetAbsoluteUrl("/editor/rnnoise/rnnoise-processor.js"))).arrayBuffer()})}isSupported(){const{engine:t,browser:i}=new jt(window.navigator.userAgent).getResult(),o=/^firefox$/i.test(i.name??"unknown"),s=/^safari$/i.test(i.name??"unknown"),l=/^webkit$/i.test(t.name??"unknown");return o||s||l?!1:typeof WebAssembly<"u"&&typeof AudioContext<"u"&&typeof AudioWorkletNode<"u"}async warmUp(){await Promise.all([this.processorPromise.run(),this.wasmModulePromise.run()])}async registerInAudioContext(t){V(this.isSupported(),"RNNoise is not supported"),await this.wasmModulePromise.run(),V(this.wasmModule!==void 0,"RNNoise WASM module is not loaded");const i=this.registeredAudioContexts.get(t);if(i!==void 0)await i;else{const o=new ja;this.registeredAudioContexts.set(t,o);try{await t.audioWorklet.addModule(this.resolveAssetAbsoluteUrl("/editor/rnnoise/rnnoise-processor.js")),o.remoteResolve()}catch(s){throw o.remoteReject(s),s}}return new WA(t,this.wasmModule)}resolveAssetAbsoluteUrl(t){const{cdnUrl:i}=this.contextService;if(i!==void 0&&i.length>0){const o=new URL(i);return o.pathname=t,o.href}return t}async loadWasmModule(){const t=fetch(this.resolveAssetAbsoluteUrl("/editor/rnnoise/rnnoise-processor.wasm"));if(typeof WebAssembly.compileStreaming=="function")this.wasmModule=await WebAssembly.compileStreaming(t);else{const o=await(await t).arrayBuffer();this.wasmModule=await WebAssembly.compile(o)}}}class ko{constructor(t,i){U(this,"selectionMeta",za(()=>this.getSelectionMeta()));this.trackElementSelectionViewModel=t,this.imageAnimationService=i}isMixed(){return this.selectionMeta.value.values.length>1}getValue(){const{values:t}=this.selectionMeta.value;return t.length===1?t[0]:this.getDefaultValue()}getSelectionMeta(){const t=new Set;let i=!0;for(const o of this.trackElementSelectionViewModel.getSelectedTrackElements())if(this.isSupported(o)){const l=this.read(o);t.add(l)}else i=!1;return{values:Array.from(t),isAllSelectedSupported:i}}}class XA extends ko{constructor(){super(...arguments);U(this,"isSupported",ke)}read(i){return i.textOptions.opacity}getDefaultValue(){return 100}}class YA extends ko{constructor(){super(...arguments);U(this,"isSupported",Se)}read(i){return i.shapeOptions.opacity}getDefaultValue(){return 100}}class KA extends ko{isSupported(t){return!0}read(t){return t.timelineOptions.length}getDefaultValue(){return 0}getPresets(){const t=this.trackElementSelectionViewModel.getSelectedTrackElementsCount();let i=1/0,o=1/0,s=0,l=0,a=0,u=0,m=0;for(const j of this.trackElementSelectionViewModel.getSelectedTrackElements()){const B=this.read(j),Y=vi(j,this.imageAnimationService);i=Math.min(i,Y);const ve=1e3,x=60*ve;B<=ve?a++:B>ve&&B<=x?m++:B>x&&B<=5*x&&u++,Number.isFinite(Y)?(o=Math.min(o,B),s++):l++}const f=s===t,b=l===t,T=a===t,C=m===t,M=u===t,I=(()=>{if(t===0)return[];if(t===1)return Vi(this.getValue());if(f||b){if(T)return Ha();if(C)return _a();if(M)return Jo()}return b?Jo():f?[]:o!==1/0?Vi(o):Vi(this.getValue())})().filter(j=>j<i&&j!==this.getValue());return Array.from(new Set(I))}}class ZA{constructor(t,i){U(this,"textOpacity");U(this,"shapeOpacity");U(this,"duration");this.trackElementSelectionViewModel=t,this.imageAnimationService=i,this.textOpacity=this.create(XA),this.shapeOpacity=this.create(YA),this.duration=this.create(KA)}create(t){return new t(this.trackElementSelectionViewModel,this.imageAnimationService)}}const QA=5e3,JA=15e3,xA=$r({name:"page-editor",components:{AppModal:qe,AppModalContentConfirm:Ua,AppOverlay:Ti,AppButton:oe,AppSvgSymbol:K,GooglePhotosPreviewLoader:UA,WidgetCommonError:qa,WidgetLoginViaEmail:Wa,WidgetLoginViaSocialNetworks:Ga,WidgetSocialLoginError:Xa,WidgetCookies:Ya},data(){const e=new Ka().extend(this.$container),t=this.$container.get(k.CONTEXT_SERVICE),i=e.get(Za.RECORDING_MANAGER_CONTROLLER),o=e.get(k.TRACK_ELEMENT_SELECTION_VIEW_MODEL),s=new ZA(o,this.$container.get(k.IMAGE_ANIMATION_SERVICE)),l=new GA(t);return{trackElementDropMarkers:{},trackElementDropMarkersCalculationFailed:!1,appLayout:void 0,timelineWidth:void 0,timelineLength:0,farthestTrackElementPosition:0,timelineScale:40,timelineCurrentTime:0,timelineScrollEventEmitter:X(new ue),trackElementDragAndDropEventEmitter:X(new ue),cropEmitter:X(new ue),previousFrameTime:0,isPlaying:!1,isTrackElementDragging:!1,isTrackElementExpanding:!1,isCursorDragging:!1,cursorPositionAnimationRequestId:0,forceVisibleTrackElementId:void 0,mediaElementIdsForDelete:[],isFullscreenEnabled:!1,isAppDropZoneVisible:!1,modalUpgradeUploadLimitSize:"",playerMediaElementTextEventTarget:X(new ue),trackElementsEventEmitters:new Map,isMediaElementUsedInTimeline:!1,isDesktopBackgroundColorPickerDropdownVisible:!1,isMobileBackgroundColorPickerDropdownVisible:!1,googleApiLoadState:"uninitiated",googlePhotosApiLoadState:"uninitiated",dropboxApiLoadState:"uninitiated",isContinueExportButtonInLoadingState:!1,projectSaveStatus:vt.SUCCESS,isProjectSaveStatusDisplayed:!1,projectPeriodicAutoSaveTimeoutId:void 0,isSnapEnabled:!0,isRippleEnabled:!1,isTransparentWebmSupports:!0,isShouldSimulateDropOnDragEnd:!1,selectedStockItem:void 0,timelinePlayEventEmitter:X(new ue),playerFullscreenEventEmitter:X(new ue),trackElementsMediaElements:new Map,selectedGapIds:[],isRecordsTabVisibleOverMediaTab:!1,isConsoleMenuHeightExtended:window?.isMenuHeightExtended??!1,isFileConverterActive:!1,fileConverterDesiredOutput:"",uploadingFileName:"",isProjectSyncedAfterUpload:!0,trackElementSelectionViewModel:X(o),trackElementMultiEditAttributeAccessorRegistry:X(s),commonErrorStateFragment:X(e.get(k.COMMON_ERROR_STATE_FRAGMENT)),loginViaEmailStateFragment:X(e.get(k.LOGIN_VIA_EMAIL_STATE_FRAGMENT)),loginViaSocialNetworksStateFragment:X(e.get(k.LOGIN_VIA_SOCIAL_NETWORKS_STATE_FRAGMENT)),googlePhotosStateFragment:X(e.get(k.GOOGLE_PHOTOS_STATE_FRAGMENT)),leaveEditorModalStateFragment:X(e.get(k.LEAVE_EDITOR_MODAL_STATE_FRAGMENT)),socialLoginErrorStateFragment:X(e.get(k.SOCIAL_LOGIN_ERROR_STATE_FRAGMENT)),projectNotFoundStateFragment:X(e.get(k.PROJECT_NOT_FOUND_STATE_FRAGMENT)),projectSaveErrorStateFragment:X(e.get(k.PROJECT_SAVE_ERROR_STATE_FRAGMENT)),stocksAudioStateFragment:X(e.get(k.STOCKS_AUDIO_STATE_FRAGMENT)),stocksAudioFilterStateFragment:X(e.get(k.STOCKS_AUDIO_FILTER_STATE_FRAGMENT)),elementStateFragment:X(e.get(k.ELEMENT_STATE_FRAGMENT)),textToSpeechStateFragment:X(e.get(k.TEXT_TO_SPEECH_STATE_FRAGMENT)),stocksImageStateFragment:X(e.get(k.STOCKS_IMAGE_STATE_FRAGMENT)),stocksVideoStateFragment:X(e.get(k.STOCKS_VIDEO_STATE_FRAGMENT)),mediaRecorderStateFragment:X(i.stateFragment),cookiesStateFragment:X(e.get(k.COOKIES_STATE_FRAGMENT)),commonErrorController:X(e.get(k.COMMON_ERROR_CONTROLLER)),loginViaEmailController:X(e.get(k.LOGIN_VIA_EMAIL_CONTROLLER)),loginViaSocialNetworksController:X(e.get(k.LOGIN_VIA_SOCIAL_NETWORKS_CONTROLLER)),googlePhotosController:X(e.get(k.GOOGLE_PHOTOS_CONTROLLER)),leaveEditorModalController:X(e.get(k.LEAVE_EDITOR_MODAL_CONTROLLER)),socialLoginErrorController:X(e.get(k.SOCIAL_LOGIN_ERROR_CONTROLLER)),projectNotFoundController:X(e.get(k.PROJECT_NOT_FOUND_CONTROLLER)),projectSaveErrorController:X(e.get(k.PROJECT_SAVE_ERROR_CONTROLLER)),stocksAudioController:X(e.get(k.STOCKS_AUDIO_CONTROLLER)),stocksAudioFilterController:X(e.get(k.STOCKS_AUDIO_FILTER_CONTROLLER)),elementsController:X(e.get(k.ELEMENTS_CONTROLLER)),textToSpeechController:X(e.get(k.TEXT_TO_SPEECH_CONTROLLER)),stocksImageController:X(e.get(k.STOCKS_IMAGE_CONTROLLER)),stocksVideoController:X(e.get(k.STOCKS_VIDEO_CONTROLLER)),recordingManagerController:X(i),cookiesController:X(e.get(k.COOKIES_CONTROLLER)),isModalDeleteMediaElementVisible:!1,isModalExportVisible:!1,isModalUpgradeAccountVisible:!1,isModalProjectAlreadyOpenedVisible:!1,isModalUploadLimitUpgradeVisible:!1,isModalStockPreviewVisible:!1,isTouchDevice:!1,rnnoiseAdapter:X(l),isNoiseReductionReady:!1,isNoiseReductionSupported:!1}},computed:{isInCropMode(){return this.canCrop&&this.navigationState.mainTab==="tab-crop"},canCrop(){const e=this.trackElementSelectionViewModel.getFirstSelectedTrackElement();return e!==void 0&&this.trackElementSelectionViewModel.hasSelectedSingle()&&(ge(e)||$e(e))},isSelectedTrackElementsBothInfiniteAndFinite(){const e=this.$container.get(k.IMAGE_ANIMATION_SERVICE);let t=0,i=0;for(const o of this.trackElementSelectionViewModel.getSelectedTrackElements())vi(o,e)===1/0?i++:t++;return t>0&&i>0&&this.trackElementSelectionViewModel.getSelectedTrackElementsCount()>1},canExpandToProject(){return this.$container.get(k.TRACK_ELEMENT_EXPAND_TO_PROJECT_INTERACTOR).canExpandToProject(this.videoLength)},canExtendToTheEnd(){return this.$container.get(k.TRACK_ELEMENT_EXTEND_TO_THE_END_INTERACTOR).canExtendToTheEnd(this.videoLength)},canIncreaseDuration(){const e=this.$container.get(k.IMAGE_ANIMATION_SERVICE);let t=0;for(const i of this.trackElementSelectionViewModel.getSelectedTrackElements()){const o=vi(i,e);o!==1/0&&o===i.timelineOptions.length&&t++}return t<this.trackElementSelectionViewModel.getSelectedTrackElementsCount()},canDecreaseDuration(){let e=0;for(const t of this.trackElementSelectionViewModel.getSelectedTrackElements())t.timelineOptions.length<=this.$appConfig.trackElementMinimumDuration&&e++;return e<this.trackElementSelectionViewModel.getSelectedTrackElementsCount()},isConsoleTabDurationHidden(){if(!this.trackElementSelectionViewModel.hasAnySelected())return!0;const e=Number(this.canExpandToProject)+Number(this.canExtendToTheEnd),t=this.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets().length;if(this.isSelectedTrackElementsBothInfiniteAndFinite&&t+e<4)return!0;const i=this.$container.get(k.IMAGE_ANIMATION_SERVICE);for(const o of this.trackElementSelectionViewModel.getSelectedTrackElements()){const l=vi(o,i)<1e3;if(Ni(o)||l)return!0}return!1},activeTrackElement(){return this.trackElementSelectionViewModel.getActiveTrackElement()},isMobileLayout(){return this.appLayout==="mobile"},isMediaRecorderOpened(){return this.mediaRecorderStateFragment===void 0?!1:this.mediaRecorderStateFragment.state.currentPhase!==Ze.MODE_SELECTION},projectTitle(){return this.$store.getters.projectTitle},projectId(){return this.$store.getters.projectId},tracks(){return this.$store.getters.tracks},reversedTracks(){return this.$store.getters.reversedTracks},mediaCollection(){return this.$store.getters.mediaCollection},isExportButtonDisabled(){return this.$store.getters.isExportButtonDisabled},fileExtensionsAllowedToUpload(){return this.$store.getters.fileExtensionsAllowedToUpload},textColorPresets(){return this.$store.getters.textColorPresets},textBackgroundColorPresets(){return this.$store.getters.textBackgroundColorPresets},canvasBackgroundColorPresets(){return this.$store.getters.canvasBackgroundColorPresets},shapeBackgroundColorPresets(){return this.$store.getters.shapeBackgroundColorPresets},canvasBackgroundColor(){return this.$store.getters.canvasBackgroundColor},canvasAspectRatios(){return this.$store.getters.canvasAspectRatios},activeAspectRatio(){return this.$store.getters.activeAspectRatio},fonts(){return this.$store.getters.fonts},recentFonts(){return this.$store.getters.recentFonts},pictureFilters(){return this.$store.getters.pictureFilters},trackElementFallbackDuration(){return this.$store.getters.trackElementFallbackDuration},trackElementMinimumDuration(){return this.$store.getters.trackElementMinimumDuration},textElementPresets(){return this.$store.getters.textElementPresets},navigationState(){return this.$store.getters.navigationState},playerLayoutSize(){return this.$store.getters.playerLayoutSize},exportSettingsPresets(){return this.$store.getters.exportSettingsPresets},activeExportSettingsPresetId(){return this.$store.getters.activeExportSettingsPresetId},videoLength(){return this.$store.getters.videoLength},isUserLoggedIn(){return this.$store.getters.isUserLoggedIn},isUserPremiumMember(){return this.$store.getters.isUserPremiumMember},backendConfig(){return this.$store.getters.backendConfig},isAllMediaElementsUploaded(){return this.$store.getters.isAllMediaElementsUploaded},logoHrefPath(){return this.$store.getters.logoHrefPath},baseAbstractWidthForScaleBlur(){return this.$store.getters.baseAbstractWidthForScaleBlur},canvasSnapState(){return this.$store.getters.canvasSnapState},maximumProjectDurationForGifPreset(){return this.$store.getters.maximumProjectDurationForGifPreset},uploadFileSizeLimit(){return this.$store.getters.uploadFileSizeLimit},storeTracks(){return this.$container.get(k.STORE_SERVICE).state.tracks},storeActiveAspectRatioValue(){return this.activeAspectRatio.value},isNextTrackElementShouldBeAvailable(){return this.storeTracks.length>0&&this.timelineCurrentTime<this.farthestTrackElementPosition},isPreviousTrackElementShouldBeAvailable(){return this.storeTracks.length>0&&this.timelineCurrentTime>0},isCanUndo(){return this.$container.get(k.UNDO_REDO_SERVICE).isCanUndo},isCanRedo(){return this.$container.get(k.UNDO_REDO_SERVICE).isCanRedo},isZoomInTimelineButtonDisabled(){const{appConfig:e}=this.$container.get(k.CONTEXT_SERVICE),t=this.storeTracks.length===0,i=this.timelineScale>=e.timelineMaximumScale;return t||i},isZoomOutTimelineButtonDisabled(){const{appConfig:e}=this.$container.get(k.CONTEXT_SERVICE),t=this.storeTracks.length===0,i=this.timelineScale<=e.timelineMinimumScale;return t||i},isZoomFitTimelineButtonDisabled(){return this.storeTracks.length===0},splittableSelectedTrackElements(){return this.trackElementSelectionViewModel.getSelectedSplittableTrackElements(this.timelineCurrentTime)},isSplitTrackElementAvailable(){return this.splittableSelectedTrackElements.length>0},isFreezeFrameTrackElementAvailable(){const e=this.trackElementSelectionViewModel.getActiveTrackElement();if(this.trackElementSelectionViewModel.hasSelectedMany()||e===void 0)return!1;const{playbackStartTime:t,length:i}=e.timelineOptions;return ge(e)&&this.timelineCurrentTime>=t&&this.timelineCurrentTime<=t+i},isFreezeFrameTrackElementVisible(){const e=this.trackElementSelectionViewModel.getActiveTrackElement();return e!==void 0&&ge(e)},isBringTrackElementForwardAvailable(){return this.trackElementSelectionViewModel.canBringForward()},isSendTrackElementBackwardAvailable(){return this.trackElementSelectionViewModel.canSendBackward()},nonServiceTracks(){return this.tracks.filter(e=>!e.isService)},nonServiceTracksWithSpacers(){const e=(t,i,o)=>({type:"spacer",key:`track-spacer-${t}-${i}`,position:t,previousTrackId:o});return[...this.nonServiceTracks].flatMap((t,i,o)=>[...i===0?[e("upper",t.id,void 0)]:[],{type:"track",key:`track-${t.id}`,trackIndex:i,value:t},e(i+1===o.length?"lower":"intermediate",t.id,t.id)])},isPageExitConfirmationShouldBeDisplayed(){const{mediaElements:e}=this.$container.get(k.STORE_SERVICE).state;return e.some(t=>!t.isSavedToBackend)||this.projectSaveStatus===vt.IN_PROGRESS||this.projectSaveStatus===vt.ERROR},elementsSnapPoints(){return this.nonServiceTracks.flatMap(e=>e.content.filter(t=>t.type!=="placeholder").map(t=>({trackElementId:t.id,snapPoints:[t.timelineOptions.playbackStartTime,t.timelineOptions.playbackStartTime+t.timelineOptions.length].map(i=>i/1e3*this.timelineScale)})))},isSnapForceInverted(){return this.$container.get(k.KEY_MODIFIERS_SERVICE).getActiveModifiers().mod},isGifExportSettingsPresetDisabled(){return this.farthestTrackElementPosition>this.maximumProjectDurationForGifPreset||this.isAudioTracksOnly},isFeatureStocksVideoImageEnabled(){return this.backendConfig.features[Qa.STOCKS_IMAGE_VIDEO]===!0},isAudioTracksOnly(){return this.tracks.every(e=>e.type===Pe.AUDIO)},isModalActive(){return this.isModalExportVisible||this.isModalDeleteMediaElementVisible||this.leaveEditorModalStateFragment.state.isLeaveEditorModalVisible||this.loginViaEmailStateFragment.state.isFormVisible||this.loginViaSocialNetworksStateFragment.state.isFormVisible||this.isModalUpgradeAccountVisible||this.isModalUploadLimitUpgradeVisible||this.isModalStockPreviewVisible||this.projectNotFoundStateFragment.state.isModalVisible||this.projectSaveErrorStateFragment.state.isModalVisible||this.mediaRecorderStateFragment.isRecordingWindowOpened()||this.isFileConverterActive},isFileConverterVisible(){return this.isFileConverterActive&&!this.commonErrorStateFragment.state.isModalVisible&&!this.isModalUploadLimitUpgradeVisible&&!this.loginViaEmailStateFragment.state.isFormVisible&&!this.loginViaSocialNetworksStateFragment.state.isFormVisible&&!this.isModalUpgradeAccountVisible},preloadersInPlayer(){return this.storeTracks.flatMap(e=>e.content.filter(t=>Ja(t)&&t.mediaElement.type!=="audio"))},consoleSettingsTimingLabel(){return this.isConsoleTabDurationHidden?this.$t("editor.videoSettings.timing"):this.trackElementSelectionViewModel.hasSelectedMany()?this.$t("editor.appConsoleDuration.title"):this.$t("editor.videoSettings.time")}},watch:{reversedTracks:{handler(e){const t=e.map(i=>i.content.map(o=>{const s=this.trackElementsEventEmitters.get(o.id)??new ue;return[o.id,s]})).flat();this.trackElementsEventEmitters=new Map(t)},immediate:!0},isPageExitConfirmationShouldBeDisplayed(e,t){e!==t&&(e?this.$container.get(k.EXIT_CONFIRMATION).register():this.$container.get(k.EXIT_CONFIRMATION).unregister())},isSnapForceInverted(){this.toggleSnap()},projectId(){if(this.projectId===void 0)return;const e={name:"editor",params:{projectId:this.projectId}};this.isFileConverterActive&&(e.query={convertTo:this.fileConverterDesiredOutput});const t=this.$router.resolve(e).href;window.history.pushState({route:t},this.projectTitle,t),this.startProjectDualOpenDetection()}},created(){if(this.calculateTimelineLength(),(this._.provides[Me]||this.$route).query.convertTo!==void 0&&(this.isFileConverterActive=!0,this.fileConverterDesiredOutput=(this._.provides[Me]||this.$route).query.convertTo),(this._.provides[Me]||this.$route).query.aspectRatio!==void 0){const e=parseInt((this._.provides[Me]||this.$route).query.aspectRatio),t=[Bi.SQUARE,Bi.PORTRAIT,Bi.WIDESCREEN];!isNaN(e)&&t.includes(e)&&this.$container.get(k.CANVAS_SET_ASPECT_RATIO_ID_INTERACTOR).execute(e)}this.$watch(()=>this.trackElementSelectionViewModel.getFirstSelectedTrackElement()?.id,(e,t)=>{const i=e!==t;(!this.canCrop||i)&&this.trackElementSelectionViewModel.switchBackFromCropPaneTab()}),this.$watch(()=>this.trackElementSelectionViewModel.getSelectedIds(),e=>{this.stocksAudioFilterController.changeVisibility(!1),e.length>0&&this.unselectGaps()})},asyncData(){const e=xa().currentRoute.value,{$container:t}=er(),i=t.get(k.CONTEXT_SERVICE);return e.params.projectId!==void 0&&e.params.projectId!==null&&typeof e.params.projectId=="string"&&e.params.projectId!==""&&!/^([\w]{8}-[\w]{4}-[\w]{4}-[\w]{4}-[\w]{12})$/.test(e.params.projectId)?(i.showGlobalErrorOverlay(new tr),{}):{}},mounted(){this.isNoiseReductionSupported=this.rnnoiseAdapter.isSupported(),this.isNoiseReductionSupported&&this.rnnoiseAdapter.warmUp().then(()=>{this.isNoiseReductionReady=!0});const e=new jt(window.navigator.userAgent).getResult();this.isTransparentWebmSupports=!(e.os.version!==void 0&&e.os.name==="iOS"||e.browser.name==="Safari"&&e.os.name==="Mac OS"&&e.browser.version!==void 0&&parseFloat(e.browser.version)<16),this.isShouldSimulateDropOnDragEnd=(e.os.name==="Mac OS"||e.os.name==="Linux")&&e.engine.name==="Blink";const{project:t,user:i}=this.$container.get(k.STORE_SERVICE).state,o=i!==void 0,s=i?.isPremium===!0,l=(this._.provides[Me]||this.$route).query.hasSameTypeSocialAccount!==void 0,a=(this._.provides[Me]||this.$route).query.openModalUpgrade!==void 0,u=(this._.provides[Me]||this.$route).query.error==="social-account-authorization-failed";if(l){const M=(this._.provides[Me]||this.$route).query.hasSameTypeSocialAccount;V(typeof M=="string","Wrong format for hasSameTypeSocialAccount query parameter");const L=JSON.parse(decodeURI(M)),I={...L,socialName:L.social_service_name};this.socialLoginErrorController.showModal(I)}a&&o&&!s&&!l&&(this.isModalUpgradeAccountVisible=!0),(l||a||u)&&this.$router.replace({name:"editor",params:t!==void 0?{projectId:t.id}:void 0,query:{...(this._.provides[Me]||this.$route).query,openModalUpgrade:void 0,hasSameTypeSocialAccount:void 0,error:void 0}}),u&&this.commonErrorController.showModal(new ir);const f=this.$container.get(k.STORE_SERVICE);this.preloadFontsCSS(f.state.projectFonts),this.detectMobileLayoutChange(),window.addEventListener("keydown",this.performHotKeyAction),window.addEventListener("keyup",this.performHotKeyAction),this.$container.get(k.PROJECT_PREVIEW_GENERATE_INTERACTOR).saveFirstPreviewAreaFingerprint(),this.startProjectDualOpenDetection(),this.$container.get(k.KEY_MODIFIERS_SERVICE).bindEvents(),this.loadGoogleApi(),this.loadDropboxApi(),this.loadGooglePhotosApi(),this.$container.get(k.PROJECT_LOAD_INTERACTOR).executeOnClient(),this.isFeatureStocksVideoImageEnabled&&(this.stocksImageController.loadCategories(),this.stocksVideoController.loadCategories()),this.stocksAudioController.loadCategories(H.MUSIC),this.stocksAudioController.loadCategories(H.SFX),this.stocksAudioFilterController.loadFilters(H.MUSIC),this.stocksAudioFilterController.loadFilters(H.SFX),this.isTouchDevice=xo(),document.addEventListener("visibilitychange",this.onTabSwitch),document.addEventListener("paste",this.handlePaste),document.addEventListener("copy",this.handleCopy),document.addEventListener("cut",this.handleCut),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",this.togglePlay),navigator.mediaSession.setActionHandler("pause",this.togglePlay)),window.isPasteEventAdded=!0;const C=jn();document.documentElement.style.setProperty("--computed-scrollbar-width",`${C.scrollbarWidth}px`),C.canUserThinScrollbar&&document.documentElement.classList.add("use-thin-scrollbars"),this.backendConfig.isCookiesConsentRequired&&this.cookiesController.showModalIfNeeded()},beforeUnmount(){window.cancelAnimationFrame(this.cursorPositionAnimationRequestId),window.removeEventListener("keydown",this.performHotKeyAction),window.removeEventListener("keyup",this.performHotKeyAction),this.cancelThrottledCalculateTimelineLength(),this.cancelThrottledTextElementPredictFonts(),this.cancelThrottledIncreaseTimelineLengthByTrackElementExpand(),this.stopProjectDualOpenDetection(),this.$container.get(k.EXIT_CONFIRMATION).unregister(),this.$container.get(k.KEY_MODIFIERS_SERVICE).unbindEvents(),document.removeEventListener("visibilitychange",this.onTabSwitch),document.removeEventListener("paste",this.handlePaste),document.removeEventListener("copy",this.handleCopy),document.removeEventListener("cut",this.handleCut)},methods:{trackElementCropRevertToOriginal(){this.undoRedoRecordCurrentState(),this.$container.get(k.TRACK_ELEMENT_CROP_REVERT_TO_ORIGINAL).execute(),this.trackElementSelectionViewModel.switchBackFromCropPaneTab(),this.saveProject()},trackElementCropSetRotateAngle(e){e=-e;const t=this.trackElementSelectionViewModel.getActiveTrack(),i=this.trackElementSelectionViewModel.getActiveTrackElement();this.$container.get(k.MEDIA_ELEMENT_ROTATE_INSIDE_PREVIEW_INTERACTOR).executeForContentRotateAngle(t.id,i.id,e)},trackElementCropSetStrategy(e){this.undoRedoRecordCurrentState(),this.$container.get(k.TRACK_ELEMENT_CROP_SET_STRATEGY).execute(e),this.saveProject()},trackElementExpandToProject(){this.undoRedoRecordCurrentState(),this.$container.get(k.TRACK_ELEMENT_EXPAND_TO_PROJECT_INTERACTOR).execute(this.videoLength),this.increaseTimelineLengthByTrackElementExpand(),this.calculateTimelineLength(),this.saveProject()},trackElementExtendToTheEnd(){this.undoRedoRecordCurrentState(),this.$container.get(k.TRACK_ELEMENT_EXTEND_TO_THE_END_INTERACTOR).execute(this.videoLength),this.increaseTimelineLengthByTrackElementExpand(),this.calculateTimelineLength(),this.saveProject()},trackElementIncreaseDuration(){this.undoRedoRecordCurrentState(),this.$container.get(k.TRACK_ELEMENT_DURATION_INCREASE_INTERACTOR).execute(),this.increaseTimelineLengthByTrackElementExpand(),this.calculateTimelineLength(),this.saveProject()},trackElementDecreaseDuration(){this.undoRedoRecordCurrentState(),this.$container.get(k.TRACK_ELEMENT_DURATION_DECREASE_INTERACTOR).execute(),this.increaseTimelineLengthByTrackElementExpand(),this.calculateTimelineLength(),this.saveProject()},changeTimelineCurrentTimeOnDrag(e){const t=le.getInstance().getData()?.payload;if(t!==void 0&&t.type===Q.TRACK_ELEMENT){let i,o;for(const s of this.trackElementSelectionViewModel.getSelectedTrackElements()){const{playbackStartTime:l}=s.timelineOptions;i===void 0?i=l:i=Math.min(i,l),s.id===t.trackElementId&&(o=l)}if(i!==void 0&&o!==void 0){const s=i-o;e+=s}}this.stopPlay(),this.changeTimelineCurrentTime(e,!0)},switchCanvasBackgroundColorTab(e){this.canvasBackgroundColorChange({...this.canvasBackgroundColor,type:e})},...(()=>{const e=()=>{},t=gr();let i=e;const o=()=>t.callback(()=>i());return{resetTrackElementDropMarkers:function(){i=()=>{this.trackElementDropMarkers={},this.trackElementDropMarkersCalculationFailed=!1},o()},calculateTrackElementDropMarkers:function(a,u,m){m&&this.resetTrackElementDropMarkers(),i=()=>{const f=this.$container.get(k.TRACK_ELEMENT_DROP_MARKERS_CALCULATOR);try{this.trackElementDropMarkersCalculationFailed=!1,this.trackElementDropMarkers=f.calculate(a,this.timelineScale,u,this.isSnapEnabled,this.$appConfig.timelineSnapThreshold,this.elementsSnapPoints)}catch{this.trackElementDropMarkersCalculationFailed=!0}},o()}}})(),switchNavigationMainTab(e,t){this.trackElementSelectionViewModel.switchNavigationMainTab(e,t)},switchNavigationVideoSettingsPaneTab(e){this.trackElementSelectionViewModel.switchNavigationVideoSettingsPaneTab(e)},switchNavigationImageSettingsPaneTab(e){this.trackElementSelectionViewModel.switchNavigationImageSettingsPaneTab(e)},switchNavigationAudioSettingsPaneTab(e){this.trackElementSelectionViewModel.switchNavigationAudioSettingsPaneTab(e)},switchNavigationTextSettingsPaneTab(e){this.trackElementSelectionViewModel.switchNavigationTextSettingsPaneTab(e)},switchNavigationShapeSettingsPaneTab(e){this.trackElementSelectionViewModel.switchNavigationShapeSettingsPaneTab(e)},switchNavigationEmojiSettingsPaneTab(e){this.trackElementSelectionViewModel.switchNavigationEmojiSettingsPaneTab(e)},switchMobileNavigationCustomColorPaneTab(e){this.trackElementSelectionViewModel.switchNavigationMobileCustomColorPaneTab(e)},switchBackFromMobileNavigationCustomColorPaneTab(){this.trackElementSelectionViewModel.switchBackFromMobileNavigationCustomColorPaneTab()},switchTextBackgroundColorTab(e){this.textElementApplyBackgroundColor({...this.activeTrackElement?.textOptions.backgroundFill,type:e})},switchShapeBackgroundColorTab(e){this.shapeElementApplyBackgroundColor({...this.activeTrackElement?.shapeOptions.backgroundFill,type:e})},detectMobileLayoutChange(){const e=i=>{this.appLayout=i?"mobile":"desktop",this.$container.get(k.STORE_SERVICE).appLayoutSet(this.appLayout),this.trackElementSelectionViewModel.resetNavigationOnAppLayoutChange()},t=or(i=>{e(i.matches)});e(t.matches)},async loadGoogleApi(){try{await this.$container.get(k.MEDIA_SOURCE_CHOOSER_GOOGLE_DRIVE).loadGoogleApi(),this.googleApiLoadState="done"}catch(e){throw this.googleApiLoadState="failed",e}},async loadGooglePhotosApi(){try{await this.googlePhotosController.loadGooglePhotosApi(),this.googlePhotosApiLoadState="done"}catch(e){throw this.googlePhotosApiLoadState="failed",e}},async loadDropboxApi(){try{await this.$container.get(k.MEDIA_SOURCE_CHOOSER_DROPBOX).loadDropboxApi(),this.dropboxApiLoadState="done"}catch(e){throw this.dropboxApiLoadState="failed",e}},preloadFontsCSS(e){const t=this.$container.get(k.STORE_SERVICE),i=e.filter(o=>!t.state.loadedFontFamilies.has(o.face.family)).map(o=>{const s=o.styles.map(l=>`${l.weight}${l.style==="italic"?"i":""}`);return`${o.face.family}:${s.join(",")}`});return new Promise(o=>{if(i.length===0){o();return}nr(()=>import("./BmyzT6Ba.js").then(s=>s.w),__vite__mapDeps([0,1,2]),import.meta.url).then(s=>{const l=this.$container.get(k.LOADED_FONTS_ADD_INTERACTOR);i[i.length-1]=`${i[i.length-1]}&display=swap`,s.load({classes:!1,google:{families:i},timeout:this.$appConfig.webFontLoadTimeout,active:()=>{o(),this.$container.get(k.PLAYER_LAYOUT_RESIZE_INTERACTOR).execute({width:this.playerLayoutSize.width,height:this.playerLayoutSize.height})},fontactive:a=>{l.execute(a)},inactive:()=>{o()}})})})},async addMediaElementsFromFilesystem(e){if(this.isFileConverterActive){if(this.mediaCollection.length>0||e.length===0)return;if(e.length>1){this.openErrorModal(new sr);return}this.uploadingFileName=e[0].name,this.isProjectSyncedAfterUpload=!1}this.switchNavigationMainTab("tab-media");try{const{backendConfig:t}=this.$container.get(k.STORE_SERVICE).state,i=(u,m)=>{const f=u.name.split(".").pop()?.toLowerCase();return f!==void 0&&m.includes(f)},o=e.filter(u=>i(u,[...t.allowedFileTypes.video,...t.allowedFileTypes.audio,...t.allowedFileTypes.image]));if(e.filter(u=>!o.includes(u)).length>0)if(this.isFileConverterActive){this.uploadingFileName="",this.openErrorModal(new ar);return}else this.openErrorModal(new rr);const l=this.$container.get(k.MEDIA_ELEMENT_ADD_INTERACTOR),a={startTime:this.isFileConverterActive?0:this.timelineCurrentTime,positionTop:0};await l.addMediaElementsFromFiles(o,this.timelineCurrentTime,void 0,()=>{this.calculateTimelineLength(),this.timelineScrollEventEmitter.fire("timeline-scroll-to",a)},()=>{this.trackElementSelectionViewModel.resetNavigationMainTabOnMobile()},()=>{},()=>{this.saveProject()})}catch(t){t instanceof It?(t.limit!==void 0&&(this.modalUpgradeUploadLimitSize=Lt(t.limit,0)),this.openUploadLimitUpgradeModal()):this.openErrorModal(t)}await this.saveProject(),this.isFileConverterActive&&(this.isProjectSyncedAfterUpload=!0,this.uploadingFileName="",this.farthestTrackElementPosition<=1e3?this.timelineCurrentTime=Math.floor(this.farthestTrackElementPosition/2):this.timelineCurrentTime=1e3)},async addMediaElementsFromRecordings(e,t){try{const i=this.$container.get(k.RECORDED_MEDIA_ADD_INTERACTOR);t?await i.addToTimeline(e,this.timelineCurrentTime,this.calculateTimelineLength,()=>{this.saveProject()}):await i.addToUploads(e,this.timelineCurrentTime,this.calculateTimelineLength,()=>{this.saveProject()})}catch(i){i instanceof It?(i.limit!==void 0&&(this.modalUpgradeUploadLimitSize=Lt(i.limit,0)),this.openUploadLimitUpgradeModal()):this.openErrorModal(i)}await this.saveProject()},showGooglePhotosPicker(){const e=this.$envConfig.googleClientId;bs.methods.chooseFromGooglePhotosPromise(e).then(t=>{this.googlePhotosController.setGooglePhotosUserAvatar(t.avatar),this.googlePhotosController.setGooglePhotosUserEmail(t.email),this.googlePhotosController.showModal()}).catch(t=>{this.openErrorModal(t)})},async uploadFilesFromGooglePhotos(e){const t=this.$container.get(k.MEDIA_ELEMENT_ADD_INTERACTOR);this.googlePhotosController.hideModal(),this.isMobileLayout&&(this.stopPlay(),this.switchNavigationMainTab("tab-media"));const i={startTime:this.timelineCurrentTime,positionTop:0};try{await t.addMediaElementsFromGooglePhotos(e,this.timelineCurrentTime,()=>{this.calculateTimelineLength(),this.timelineScrollEventEmitter.fire("timeline-scroll-to",i)},()=>{this.isMobileLayout&&this.switchNavigationMainTab(void 0)},()=>{this.saveProject()})}catch(o){o instanceof It?(o.limit!==void 0&&(this.modalUpgradeUploadLimitSize=Lt(o.limit,0)),this.openUploadLimitUpgradeModal()):this.openErrorModal(o)}await this.saveProject()},async addMediaElementsFromGoogleDrive(){try{const e=this.$container.get(k.MEDIA_ELEMENT_ADD_INTERACTOR),t=await e.chooseFilesFromGoogleDrive();if(this.switchNavigationMainTab("tab-media"),t.length>0){const i={startTime:this.timelineCurrentTime,positionTop:0};await e.addMediaElementsFromGoogleDrive(t,this.timelineCurrentTime,()=>{this.calculateTimelineLength(),this.timelineScrollEventEmitter.fire("timeline-scroll-to",i)},()=>{this.isMobileLayout&&this.switchNavigationMainTab(void 0)},()=>{this.saveProject()})}}catch(e){e instanceof It?(e.limit!==void 0&&(this.modalUpgradeUploadLimitSize=Lt(e.limit,0)),this.openUploadLimitUpgradeModal()):this.openErrorModal(e)}await this.saveProject()},async addMediaElementsFromDropbox(){try{const e=this.$container.get(k.MEDIA_ELEMENT_ADD_INTERACTOR),t=await e.chooseFilesFromDropbox();if(this.switchNavigationMainTab("tab-media"),t.length>0){const i={startTime:this.timelineCurrentTime,positionTop:0};await e.addMediaElementsFromDropbox(t,this.timelineCurrentTime,()=>{this.calculateTimelineLength(),this.timelineScrollEventEmitter.fire("timeline-scroll-to",i)},()=>{this.isMobileLayout&&this.switchNavigationMainTab(void 0)},()=>{this.saveProject()})}}catch(e){e instanceof It?(e.limit!==void 0&&(this.modalUpgradeUploadLimitSize=Lt(e.limit,0)),this.openUploadLimitUpgradeModal()):this.openErrorModal(e)}await this.saveProject()},async addMediaElementsFromStock(e,t,i,o=!0,s){const l=e.filter(a=>!this.mediaCollection.some(u=>u.stockOrigination!==void 0&&a.id===u.stockOrigination.id&&a.provider===u.stockOrigination.provider));if(l.length!==0){try{const a=this.$container.get(k.MEDIA_ELEMENT_ADD_INTERACTOR),u=this.stocksVideoStateFragment.state.stockVideoItems,m=this.stocksImageStateFragment.state.stockImageItems,{stockMusicItems:f,stockSfxItems:b}=this.stocksAudioStateFragment.state,T=[];for(const C of l)if(C.stockType===H.VIDEO){const M=u.find(L=>L.id===C.id);V(M!==void 0,"stock item not found"),T.push(M)}else if(C.stockType===H.IMAGE){const M=m.find(L=>L.id===C.id);V(M!==void 0,"stock item not found"),T.push(M)}else if(C.stockType===H.MUSIC){const M=f.find(L=>L.id===C.id);V(M!==void 0,"stock item not found"),T.push(M)}else if(C.stockType===H.SFX){const M=b.find(L=>L.id===C.id);V(M!==void 0,"stock item not found"),T.push(M)}await a.addMediaElementsFromStock(T,t,i,o,()=>{this.calculateTimelineLength()},s)}catch(a){this.openErrorModal(a)}await this.saveProject()}},async addMediaElementsFromElements(e,t,i=!0,o){if(e.filter(l=>!this.mediaCollection.some(a=>a.elementOrigination!==void 0&&l.id===a.elementOrigination.id&&l.provider===a.elementOrigination.provider)).length!==0){try{await this.$container.get(k.MEDIA_ELEMENT_ADD_INTERACTOR).addMediaElementsFromUploadableElements(e,t,i,()=>{this.calculateTimelineLength()},o)}catch(l){this.openErrorModal(l)}await this.saveProject()}},async addAudioElementByVideoElement(e,t,i,o){if(e.filter(l=>!this.mediaCollection.some(a=>a.originalMediaElementId===l.mediaElement.id)).length===0)throw new Ir;try{const l=this.$container.get(k.MEDIA_ELEMENT_ADD_INTERACTOR),a=e.map(u=>u.mediaElement);await l.addAudioFromVideo(a,t,i,o)}catch(l){this.openErrorModal(l)}await this.saveProject()},async addMediaElementsToNewTrackByButton(e,t=!0){this.stopPlay();const i=this.$container.get(k.TRACK_ELEMENT_CREATE_INTERACTOR),o=e.map(l=>({id:l,playbackStartTime:this.timelineCurrentTime}));i.createFromMediaElements(o,void 0,t,l=>{this.timelineCurrentTime=l}),this.calculateTimelineLength();const s={startTime:this.timelineCurrentTime,positionTop:0};this.timelineScrollEventEmitter.fire("timeline-scroll-to",s),await this.saveProject()},async addTextElementsToNewTrackByButton(e,t=!0){this.stopPlay();const i=this.$container.get(k.TRACK_ELEMENT_CREATE_INTERACTOR),o=e.map(l=>({type:l,playbackStartTime:this.timelineCurrentTime}));i.createFromTextElements(o,void 0,t,l=>{this.timelineCurrentTime=l}),this.calculateTimelineLength();const s={startTime:this.timelineCurrentTime,positionTop:0};this.timelineScrollEventEmitter.fire("timeline-scroll-to",s),await this.saveProject()},async timelineDropToNewTrack(e,t){this.resetTrackElementDropMarkers();const i=this.$container.get(k.TRACK_ELEMENT_DROP_ON_NEW_TRACK_INTERACTOR),o=this.$container.get(k.TRACK_ELEMENT_CREATE_INTERACTOR),s=Math.max(0,e.previewStartTime);if(e.payload.type===Q.MEDIA_ELEMENT)o.createFromMediaElements([{id:e.payload.mediaElementId,playbackStartTime:s}],t,!0);else if(e.payload.type===Q.TRACK_ELEMENT)i.execute(t,e.payload.trackElementId,s);else if(e.payload.type===Q.TEXT_ELEMENT)o.createFromTextElements([{type:e.payload.textElementPresetType,playbackStartTime:s}],t,!0);else if(e.payload.type===Q.STOCK_ITEM){const{stockItemId:l,stockItemProvider:a,stockItemType:u}=e.payload,m=this.mediaCollection.find(f=>f.stockOrigination!==void 0&&l===f.stockOrigination.id&&a===f.stockOrigination.provider);if(m!==void 0)o.createFromMediaElements([{id:m.id,playbackStartTime:s}],t,!0);else{let f=[];switch(u){case H.IMAGE:f=this.stocksImageStateFragment.state.stockImagePresenterItems;break;case H.VIDEO:f=this.stocksVideoStateFragment.state.stockVideoPresenterItems;break;case H.MUSIC:f=this.stocksAudioStateFragment.state.stockMusicItems;break;case H.SFX:f=this.stocksAudioStateFragment.state.stockSfxItems;break}const b=f.find(T=>T.id===l&&T.provider===a);V(b!==void 0,"stock item not found"),await this.addMediaElementsFromStock([b],s,t)}}else if(e.payload.type===Q.ELEMENT_ITEM)this.addElementItemToTimeline(e.payload.elementItem,"",void 0);else throw new Error("Unknown dropped element type");this.stopPlay(),this.calculateTimelineLength(),await this.saveProject()},async timelineDropToExistingTrack(e,t){const i=this.$container.get(k.TRACK_ELEMENT_MOVE_TO_EXISTING_TRACK_BY_DRAG_INTERACTOR);if(e.payload.type===Q.TRACK_ELEMENT)this.trackElementSelectionViewModel.hasSelectedMany()?this.$container.get(k.TRACK_ELEMENT_DROP_BY_MARKERS_INTERACTOR).execute({dropMarkers:this.trackElementDropMarkers,timelineScale:this.timelineScale,originPointerTime:e.pointerTimeWithoutSnap??e.pointerTime,originTrackElementId:e.payload.trackElementId}):i.dropTrackElement(e.payload.trackElementId,t,e.pointerTime,e.previewStartTime);else if(e.payload.type===Q.MEDIA_ELEMENT)i.dropMediaElement(e.payload.mediaElementId,t,e.pointerTime,e.previewStartTime);else if(e.payload.type===Q.TEXT_ELEMENT)i.dropTextElement(e.payload.textElementPresetType,t,e.pointerTime,e.previewStartTime);else if(e.payload.type===Q.STOCK_ITEM){const{stockItemId:o,stockItemProvider:s,stockItemType:l}=e.payload,a=this.mediaCollection.find(u=>u.stockOrigination!==void 0&&o===u.stockOrigination.id&&s===u.stockOrigination.provider);if(a!==void 0)i.dropMediaElement(a.id,t,e.pointerTime,e.previewStartTime);else{let u=[];switch(l){case H.IMAGE:u=this.stocksImageStateFragment.state.stockImagePresenterItems;break;case H.VIDEO:u=this.stocksVideoStateFragment.state.stockVideoPresenterItems;break;case H.MUSIC:u=this.stocksAudioStateFragment.state.stockMusicItems;break;case H.SFX:u=this.stocksAudioStateFragment.state.stockSfxItems;break}const m=u.find(f=>f.id===o&&f.provider===s);V(m!==void 0,"stock item not found"),await this.addMediaElementsFromStock([m],void 0,void 0,!1,f=>{i.dropMediaElement(f.id,t,e.pointerTime,e.previewStartTime)})}}else if(e.payload.type===Q.ELEMENT_ITEM)this.addElementItemToTimeline(e.payload.elementItem,t,e);else throw new Error("Unknown dropped element type");this.stopPlay(),this.calculateTimelineLength(),await this.saveProject()},async timelineDropToPlaceholder(e){const t=this.$container.get(k.TRACK_ELEMENT_CREATE_INTERACTOR);if(e.type===Q.MEDIA_ELEMENT)t.createFromMediaElements([{id:e.mediaElementId,playbackStartTime:0}],void 0,!0);else if(e.type===Q.TEXT_ELEMENT)t.createFromTextElements([{type:e.textElementPresetType,playbackStartTime:0}],void 0,!0);else if(e.type===Q.STOCK_ITEM){const i=this.mediaCollection.find(o=>o.stockOrigination!==void 0&&e.stockItemId===o.stockOrigination.id&&e.stockItemProvider===o.stockOrigination.provider);if(i!==void 0)t.createFromMediaElements([{id:i.id,playbackStartTime:0}],void 0,!0);else{let o=[];switch(e.stockItemType){case H.IMAGE:o=this.stocksImageStateFragment.state.stockImagePresenterItems;break;case H.VIDEO:o=this.stocksVideoStateFragment.state.stockVideoPresenterItems;break;case H.MUSIC:o=this.stocksAudioStateFragment.state.stockMusicItems;break;case H.SFX:o=this.stocksAudioStateFragment.state.stockSfxItems;break}const s=o.find(l=>l.id===e.stockItemId&&l.provider===e.stockItemProvider);V(s!==void 0,"stock item not found"),await this.addMediaElementsFromStock([s],this.timelineCurrentTime??0,void 0)}}else if(e.type===Q.ELEMENT_ITEM)this.addElementItemToTimeline(e.elementItem);else throw new Error("unexpected draggable data type");this.calculateTimelineLength(),await this.saveProject()},async mediaElementOrTextDropToPlayer(e){const t=this.$container.get(k.TRACK_ELEMENT_CREATE_INTERACTOR);if(e.type===Q.MEDIA_ELEMENT)t.createFromMediaElements([{id:e.mediaElementId,playbackStartTime:this.timelineCurrentTime??0}],void 0,!0,o=>{this.timelineCurrentTime=o});else if(e.type===Q.TEXT_ELEMENT)t.createFromTextElements([{type:e.textElementPresetType,playbackStartTime:this.timelineCurrentTime??0}],void 0,!0,o=>{this.timelineCurrentTime=o});else if(e.type===Q.STOCK_ITEM){const o=this.mediaCollection.find(s=>s.stockOrigination!==void 0&&e.stockItemId===s.stockOrigination.id&&e.stockItemProvider===s.stockOrigination.provider);if(o!==void 0)t.createFromMediaElements([{id:o.id,playbackStartTime:this.timelineCurrentTime??0}],void 0,!0);else{let s=[];switch(e.stockItemType){case H.IMAGE:s=this.stocksImageStateFragment.state.stockImagePresenterItems;break;case H.VIDEO:s=this.stocksVideoStateFragment.state.stockVideoPresenterItems;break;case H.MUSIC:s=this.stocksAudioStateFragment.state.stockMusicItems;break;case H.SFX:s=this.stocksAudioStateFragment.state.stockSfxItems;break}const l=s.find(a=>a.id===e.stockItemId&&a.provider===e.stockItemProvider);V(l!==void 0,"stock item not found"),await this.addMediaElementsFromStock([l],this.timelineCurrentTime??0,void 0)}}else if(e.type===Q.ELEMENT_ITEM)this.addElementItemToTimeline(e.elementItem);else throw new Error("unexpected draggable data type");this.calculateTimelineLength();const i={startTime:this.timelineCurrentTime,positionTop:0};this.timelineScrollEventEmitter.fire("timeline-scroll-to",i),await this.saveProject()},checkMediaElementUsedInTimeLine(e){const{state:t}=this.$container.get(k.STORE_SERVICE);return t.tracks.map(o=>o.content).flat().some(o=>ji(o)&&e.includes(o.mediaElement.id))},async deleteMediaElements(e){await this.projectCreateOnBackend();const{mediaElements:t,project:i}=this.$container.get(k.STORE_SERVICE).state;this.isMediaElementUsedInTimeline&&this.undoRedoRecordCurrentState();try{V(i!==void 0,"project is undefined");const o=e.filter(l=>t.findIndex(a=>a.id===l)!==-1);await this.$container.get(k.MEDIA_ELEMENT_DELETE_INTERACTOR).execute(o,i.id)}catch(o){this.openErrorModal(o)}this.storeTracks.length===0&&(this.changeTimelineCurrentTime(0),this.stopPlay()),this.isMediaElementUsedInTimeline=!1,this.calculateTimelineLength(),await this.saveProject()},resizeTrackElementFromStart(e,{elementLength:t,offsetFromStart:i}){const o=this.$container.get(k.TRACK_ELEMENT_RESIZE_FROM_LEFT_INTERACTOR),s=this.$container.get(k.TRACK_ELEMENT_SELECTION_VIEW_MODEL);o.resize(e,i,t,this.isRippleEnabled?!1:this.isSnapEnabled,this.timelineScale);const{playbackStartTime:l}=s.ensureActiveTrackElement().timelineOptions;this.changeTimelineCurrentTime(l)},startResizeTrackElementFromStart(e){this.trackElementSelectionViewModel.isSelected(e)||this.trackElementSelectionViewModel.selectSingle(e),this.stopPlay(),this.$container.get(k.TRACK_ELEMENT_RESIZE_FROM_LEFT_INTERACTOR).startResize(this.isRippleEnabled)},async stopResizeTrackElementFromStart(){const e=this.$container.get(k.TRACK_ELEMENT_RESIZE_FROM_LEFT_INTERACTOR),t=this.$container.get(k.TRACK_ELEMENT_SELECTION_VIEW_MODEL);e.endResize(this.isRippleEnabled);const{playbackStartTime:i}=t.ensureActiveTrackElement().timelineOptions;this.changeTimelineCurrentTime(i),await this.saveProject()},resizeTrackElementFromEnd(e,{elementLength:t}){const i=this.$container.get(k.TRACK_ELEMENT_RESIZE_FROM_RIGHT_INTERACTOR),o=this.$container.get(k.TRACK_ELEMENT_SELECTION_VIEW_MODEL);i.resize(e,t,this.isSnapEnabled,this.timelineScale),this.throttledIncreaseTimelineLengthByTrackElementExpand();const{length:s,playbackStartTime:l}=o.ensureActiveTrackElement().timelineOptions;this.changeTimelineCurrentTime(s+l,!0)},startResizeTrackElementFromEnd(e){this.trackElementSelectionViewModel.isSelected(e)||this.trackElementSelectionViewModel.selectSingle(e),this.stopPlay(),this.$container.get(k.TRACK_ELEMENT_RESIZE_FROM_RIGHT_INTERACTOR).startResize(this.isRippleEnabled)},async stopResizeTrackElementFromEnd(){const e=this.$container.get(k.TRACK_ELEMENT_RESIZE_FROM_RIGHT_INTERACTOR),t=this.$container.get(k.TRACK_ELEMENT_SELECTION_VIEW_MODEL);e.endResize(this.isRippleEnabled);const{length:i,playbackStartTime:o}=t.ensureActiveTrackElement().timelineOptions;this.changeTimelineCurrentTime(i+o,!0),this.calculateTimelineLength(),await this.saveProject()},async bringForwardTrackElement(){this.stopPlay(),this.$container.get(k.TRACK_ELEMENT_BRING_FORWARD_INTERACTOR).execute(),await this.saveProject()},async sendBackwardTrackElement(){this.stopPlay(),this.$container.get(k.TRACK_ELEMENT_SEND_BACKWARD_INTERACTOR).execute(),await this.saveProject()},async deleteTrackElements(){this.stopPlay(),this.$container.get(k.TRACK_ELEMENT_DELETE_INTERACTOR).execute(this.isRippleEnabled),this.storeTracks.length===0&&(this.changeTimelineCurrentTime(0),this.stopPlay()),this.calculateTimelineLength(),await this.saveProject()},async duplicateSelectedTrackElements(){this.stopPlay(),this.$container.get(k.TRACK_ELEMENT_DUPLICATE_INTERACTOR).execute();const t=this.trackElementSelectionViewModel.ensureActiveTrackElement();this.calculateTimelineLength(),this.changeTimelineCurrentTime(t.timelineOptions.playbackStartTime,!1);const i={startTime:t.timelineOptions.playbackStartTime};this.timelineScrollEventEmitter.fire("timeline-scroll-to",i),await this.saveProject()},async splitTrackElement(){this.stopPlay(),this.$container.get(k.TRACK_ELEMENT_SPLIT_INTERACTOR).execute(this.timelineCurrentTime),await this.saveProject()},changeTimelineCurrentTime(e,t=!1){t?this.timelineCurrentTime=Math.max(0,e):this.timelineCurrentTime=Math.max(0,Math.min(e,this.farthestTrackElementPosition))},startPlay(){if(this.trackElementSelectionViewModel.switchBackFromCropPaneTab(),this.storeTracks.length===0)return;this.isPlaying=!0,this.previousFrameTime=Date.now(),this.timelineCurrentTime>=this.farthestTrackElementPosition&&(this.timelineCurrentTime=0);const e=()=>{const t=Date.now(),i=t-this.previousFrameTime,o=this.timelineCurrentTime+=i;if(o>=this.farthestTrackElementPosition){this.stopPlay(),this.timelineCurrentTime=this.farthestTrackElementPosition;return}this.timelineCurrentTime=o,this.previousFrameTime=t,this.cursorPositionAnimationRequestId=window.requestAnimationFrame(e)};this.cursorPositionAnimationRequestId=window.requestAnimationFrame(e),this.timelinePlayEventEmitter.fire("start-play")},stopPlay(){this.isPlaying=!1,window.cancelAnimationFrame(this.cursorPositionAnimationRequestId),this.timelinePlayEventEmitter.fire("stop-play")},onTabSwitch(){document.visibilityState==="hidden"&&this.stopPlay()},togglePlay(){this.isPlaying?this.stopPlay():this.startPlay()},async moveToPreviousTrackElement(){const e=this.getPreviousTrackElementTime();V(e!==void 0,"previousTrackElement is undefined");const{isPlaying:t}=this,i=e;this.stopPlay(),this.timelineCurrentTime=i,await this.$nextTick(),t&&this.startPlay()},async moveToNextTrackElement(){const e=this.getNextTrackElementTime();V(e!==void 0,"nextTrackElementTime is undefined");const{isPlaying:t}=this;this.stopPlay(),this.timelineCurrentTime=e,await this.$nextTick(),t&&this.farthestTrackElementPosition!==this.timelineCurrentTime&&this.startPlay()},async setActiveAspectRatio(e){const t=this.playerLayoutSize.width/this.playerLayoutSize.height;this.$container.get(k.CANVAS_SET_ASPECT_RATIO_ID_INTERACTOR).execute(e),await this.$nextTick(),await this.$nextTick();const i=this.playerLayoutSize.width/this.playerLayoutSize.height;this.$container.get(k.TRACK_ELEMENTS_RESIZE_ON_ASPECT_RATIO_CHANGE_INTERACTOR).execute(t,i),await this.saveProject()},trackElementApplyDuration(e){this.$container.get(k.TRACK_ELEMENT_DURATION_SET_INTERACTOR).execute(e),this.increaseTimelineLengthByTrackElementExpand(),this.calculateTimelineLength()},videoElementApplyTransformFill(){const e=this.trackElementSelectionViewModel.getSelectedTrackElements();for(const t of e)this.$container.get(k.TRACK_ELEMENT_APPLY_FILL_FIT_INTERACTOR).execute(t.id,Re.FILL)},videoElementApplyTransformFit(){const e=this.trackElementSelectionViewModel.getSelectedTrackElements();for(const t of e)this.$container.get(k.TRACK_ELEMENT_APPLY_FILL_FIT_INTERACTOR).execute(t.id,Re.FIT)},videoElementApplyTransformFlipHorizontally(){const e=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),t=this.trackElementSelectionViewModel.getSelectedTracks();for(const i of t)for(const o of i.selectedContent){if(!ge(o)&&!$e(o)&&!Se(o)&&!Ie(o))throw new Error("active track element neither video nor image nor shape nor emoji");e.execute(i.id,o.id,{videoOptions:ge(o)?{isFlipXApplied:!o.videoOptions.isFlipXApplied}:void 0,imageOptions:$e(o)?{isFlipXApplied:!o.imageOptions.isFlipXApplied}:void 0,shapeOptions:Se(o)?{isFlipXApplied:!o.shapeOptions.isFlipXApplied}:void 0,emojiOptions:Ie(o)?{isFlipXApplied:!o.emojiOptions.isFlipXApplied}:void 0})}},videoElementApplyTransformFlipVertically(){const e=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),t=this.trackElementSelectionViewModel.getSelectedTracks();for(const i of t)for(const o of i.selectedContent){if(!ge(o)&&!$e(o)&&!Se(o)&&!Ie(o))throw new Error("track element neither video nor image nor shape nor emoji");e.execute(i.id,o.id,{videoOptions:ge(o)?{isFlipYApplied:!o.videoOptions.isFlipYApplied}:void 0,imageOptions:$e(o)?{isFlipYApplied:!o.imageOptions.isFlipYApplied}:void 0,shapeOptions:Se(o)?{isFlipYApplied:!o.shapeOptions.isFlipYApplied}:void 0,emojiOptions:Ie(o)?{isFlipYApplied:!o.emojiOptions.isFlipYApplied}:void 0})}},videoElementApplyTransformRotate(){const e=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),t=this.trackElementSelectionViewModel.getSelectedTracks();for(const i of t)for(const o of i.selectedContent){if(!ge(o)&&!$e(o)&&!Se(o)&&!Ie(o))throw new Error("trackElement neither video nor image nor shape nor emoji");const s=Be(o);let l;if(ge(o))l=o.videoOptions.rotateAngle+90;else if($e(o))l=o.imageOptions.rotateAngle+90;else if(Se(o))l=o.shapeOptions.rotateAngle+90;else if(Ie(o))l=o.emojiOptions.rotateAngle+90;else throw new Error("trackElement is not video, image, emoji or shape");l>=360&&(l=l-360),l=Math.floor(l/90)*90,e.execute(i.id,o.id,{[s]:{rotateAngle:l},playerOptions:{fillFitStrategy:Re.NONE}})}},videoElementApplyTransformRotateAngle(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){if(!ge(s)&&!$e(s)&&!Se(s)&&!Ie(s))throw new Error("trackElement is not video, image, emoji or shape");const l=Be(s);if(e%this.$appConfig.angleRotatorStep!==0){let a;if(ge(s))a=e-s.videoOptions.rotateAngle;else if($e(s))a=e-s.imageOptions.rotateAngle;else if(Se(s))a=e-s.shapeOptions.rotateAngle;else if(Ie(s))a=e-s.emojiOptions.rotateAngle;else throw new Error("trackElement is not video, image, emoji or shape");a<0&&(e+=this.$appConfig.angleRotatorStep),e=Math.floor(e/this.$appConfig.angleRotatorStep)*this.$appConfig.angleRotatorStep}e>=360&&(e=360-e),e<0&&(e=360+e),t.execute(o.id,s.id,{[l]:{rotateAngle:e},playerOptions:{fillFitStrategy:Re.NONE}})}},videoElementIncrementTransformRotateAngle(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){if(!ge(s)&&!$e(s)&&!Se(s)&&!Ie(s))throw new Error("trackElement is not video, image, emoji or shape");let l=0;if(ge(s))l=s.videoOptions.rotateAngle;else if($e(s))l=s.imageOptions.rotateAngle;else if(Se(s))l=s.shapeOptions.rotateAngle;else if(Ie(s))l=s.emojiOptions.rotateAngle;else throw new Error("trackElement is not video, image, emoji or shape");const a=Be(s);let u=Math.max(-360,Math.min(360,l+this.$appConfig.angleRotatorStep*e));u%this.$appConfig.angleRotatorStep!==0&&(u-l<0&&(u+=this.$appConfig.angleRotatorStep),u=Math.floor(u/this.$appConfig.angleRotatorStep)*this.$appConfig.angleRotatorStep),u>=360&&(u=360-u),u<0&&(u=360+u),t.execute(o.id,s.id,{[a]:{rotateAngle:u},playerOptions:{fillFitStrategy:Re.NONE}})}},videoElementApplyAdjustOpacity(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){const l=Be(s);t.execute(o.id,s.id,{[l]:{adjustOpacity:e}})}},videoElementApplyAdjustHue(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){const l=Be(s);t.execute(o.id,s.id,{[l]:{adjustHue:e}})}},videoElementApplyAdjustSaturation(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){const l=Be(s);t.execute(o.id,s.id,{[l]:{adjustSaturation:e}})}},videoElementApplyAdjustBrightness(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){const l=Be(s);t.execute(o.id,s.id,{[l]:{adjustBrightness:e}})}},videoElementApplyAdjustContrast(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){const l=Be(s);t.execute(o.id,s.id,{[l]:{adjustContrast:e}})}},videoElementApplyAdjustBlur(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){const l=Be(s);t.execute(o.id,s.id,{[l]:{adjustBlur:e}})}},videoElementAdjustReset(){const e=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),t=this.trackElementSelectionViewModel.getSelectedTracks();for(const i of t)for(const o of i.selectedContent){const s=Be(o);e.execute(i.id,o.id,{[s]:{adjustBrightness:this.$appConfig.defaultTrackElementVideoOptions.adjustBrightness,adjustContrast:this.$appConfig.defaultTrackElementVideoOptions.adjustContrast,adjustSaturation:this.$appConfig.defaultTrackElementVideoOptions.adjustSaturation,adjustHue:this.$appConfig.defaultTrackElementVideoOptions.adjustHue,adjustOpacity:this.$appConfig.defaultTrackElementVideoOptions.adjustOpacity,adjustBlur:this.$appConfig.defaultTrackElementVideoOptions.adjustBlur}})}},videoElementApplyVolume(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i={volume:e},o=this.trackElementSelectionViewModel.getSelectedTracks();for(const s of o)for(const l of s.selectedContent)t.execute(s.id,l.id,{videoOptions:i})},videoElementApplyIsNoiseReduced(e){this.undoRedoRecordCurrentState();const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i={isNoiseReduced:e};t.execute(this.trackElementSelectionViewModel.ensureActiveTrack().id,this.trackElementSelectionViewModel.ensureActiveTrackElement().id,{videoOptions:i}),this.saveProject()},videoOrAudioElementApplyBasicSpeed(e){const t=this.$container.get(k.TRACK_ELEMENT_CHANGE_SPEED_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent)t.startChange(o.id,s.id,e),this.changeTimelineCurrentTime(s.timelineOptions.playbackStartTime);this.isPlaying&&(this.stopPlay(),setTimeout(()=>{this.startPlay()})),this.throttledCalculateTimelineLength()},audioElementApplyVolume(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i={volume:e},o=this.trackElementSelectionViewModel.getSelectedTracks();for(const s of o)for(const l of s.selectedContent)t.execute(s.id,l.id,{audioOptions:i})},audioElementApplyIsNoiseReduced(e){this.undoRedoRecordCurrentState();const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i={isNoiseReduced:e};t.execute(this.trackElementSelectionViewModel.ensureActiveTrack().id,this.trackElementSelectionViewModel.ensureActiveTrackElement().id,{audioOptions:i}),this.saveProject()},audioElementApplyVolumeFadeInTime(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){const a={volumeFadeInTime:Math.ceil(Math.min(e,Zi(s.timelineOptions.length)))};t.execute(o.id,s.id,{audioOptions:a})}},audioElementApplyVolumeFadeOutTime(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){const a={volumeFadeOutTime:Math.ceil(Math.min(e,Zi(s.timelineOptions.length)))};t.execute(o.id,s.id,{audioOptions:a})}},textElementApplyTextColor(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i={textColor:e},o=this.trackElementSelectionViewModel.getSelectedTracks();for(const s of o)for(const l of s.selectedContent)t.execute(s.id,l.id,{textOptions:i})},textElementApplyTextContent(e){const t=this.trackElementSelectionViewModel.getSelectedTracks();for(const i of t)for(const o of i.selectedContent)V(ke(o),"trackElement is not text type"),this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR).execute(i.id,o.id,{textOptions:{textContent:e}}),e.length===0?this.$container.get(k.MEDIA_ELEMENT_RESIZE_INSIDE_PREVIEW_INTERACTOR).executeForPlayerOptions(i.id,o.id,o.playerOptions,"smart-transform"):this.$container.get(k.TRACK_ELEMENT_TEXT_SIZE_CHANGE_INTERACTOR).execute(i.id,o.id,{},!0)},textElementPredictFonts(){const e=this.trackElementSelectionViewModel.getSelectedTracks();for(const t of e)for(const i of t.selectedContent)this.$container.get(k.TRACK_ELEMENT_TEXT_PREDICT_FONTS_INTERACTOR).execute(t.id,i.id)},...(()=>{const e=ut(function(){this.textElementPredictFonts()},dt.ONE_FRAME_PER_SECOND,{trailing:!0});return{throttledTextElementPredictFonts:e,cancelThrottledTextElementPredictFonts:e.cancel}})(),textElementApplyFontFace(e){const t=this.$googleFonts.find(s=>s.face.family===e.family);V(t!==void 0,`Unknown Google Font ${e.family}`);const i=this.trackElementSelectionViewModel.getSelectedTracks();for(const s of i)for(const l of s.selectedContent){V(ke(l),"trackElement must be of text type");const a=l.textOptions.fontStyle,u=l.textOptions.fontWeight,m=t.styles.map(M=>M.weight).includes(u),f=t.styles.map(M=>M.style).includes(a),b={fontFace:e,fontStyle:f?a:t.styles[0].style,fontWeight:m?u:t.styles[0].weight};this.$container.get(k.TRACK_ELEMENT_TEXT_SIZE_CHANGE_INTERACTOR).execute(s.id,l.id,b),this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR).execute(s.id,l.id,{textOptions:b})}this.$container.get(k.RECENT_FONTS_ADD_INTERACTOR).execute(t)},textElementApplyFontStyle(e){const t=this.$container.get(k.TRACK_ELEMENT_TEXT_SIZE_CHANGE_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){V(ke(s),"trackElement must be of text type");const l={fontWeight:e.weight!==void 0?e.weight:s.textOptions.fontWeight,fontStyle:e.style!==void 0?e.style:s.textOptions.fontStyle};t.execute(o.id,s.id,l),this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR).execute(o.id,s.id,{textOptions:l})}},textElementApplyTextAlign(e,t){const i=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),o={align:e,justify:t},s=this.trackElementSelectionViewModel.getSelectedTracks();for(const l of s)for(const a of l.selectedContent)i.execute(l.id,a.id,{textOptions:o})},textElementApplyTextUnderline(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i={isUnderlined:e},o=this.trackElementSelectionViewModel.getSelectedTracks();for(const s of o)for(const l of s.selectedContent)t.execute(s.id,l.id,{textOptions:i})},textElementApplyTextItalic(e){const t=this.trackElementSelectionViewModel.getSelectedTracks();for(const i of t)for(const o of i.selectedContent){V(ke(o),"[textElementApplyTextItalic] not a text track element!");const s=o.textOptions.fontWeight,l=this.fonts.find(b=>b.face.family===o.textOptions.fontFace.family);if(V(l!==void 0,`Unknown font ${o.textOptions.fontFace.family}`),!l.styles.some(b=>b.weight===s&&b.style===e))continue;this.$container.get(k.TRACK_ELEMENT_TEXT_SIZE_CHANGE_INTERACTOR).execute(i.id,o.id,{fontStyle:e});const m=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),f={fontStyle:e};m.execute(i.id,o.id,{textOptions:f})}},textElementApplyTextUppercase(e){const t=this.trackElementSelectionViewModel.getSelectedTracks();for(const i of t)for(const o of i.selectedContent)this.$container.get(k.TRACK_ELEMENT_TEXT_SIZE_CHANGE_INTERACTOR).execute(i.id,o.id,{isInUppercase:e}),this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR).execute(i.id,o.id,{textOptions:{isInUppercase:e}})},textElementApplyAbsoluteFontSize(e){const t=this.trackElementSelectionViewModel.getSelectedTracks();for(const i of t)for(const o of i.selectedContent){V(ke(o),"type of active track element is not text");const s={absoluteFontSize:e};this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR).execute(i.id,o.id,{textOptions:s}),this.$container.get(k.TRACK_ELEMENT_TEXT_SIZE_CHANGE_INTERACTOR).execute(i.id,o.id)}},textElementIncrementAbsoluteFontSize(e){const t=this.trackElementSelectionViewModel.getSelectedTracks();for(const i of t)for(const o of i.selectedContent){V(ke(o),"type of active track element is not text");const s=o.textOptions.absoluteFontSize;if(e===1&&s+1>this.$appConfig.absoluteFontSizeMaximum||e===-1&&s-1<this.$appConfig.absoluteFontSizeMinimum)continue;const l={absoluteFontSize:s+e};this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR).execute(i.id,o.id,{textOptions:l}),this.$container.get(k.TRACK_ELEMENT_TEXT_SIZE_CHANGE_INTERACTOR).execute(i.id,o.id)}},textElementApplyTextLineHeight(e){const t=this.$container.get(k.TRACK_ELEMENT_TEXT_SIZE_CHANGE_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){t.execute(o.id,s.id,{lineHeight:e});const l=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),a={lineHeight:e};l.execute(o.id,s.id,{textOptions:a})}},textElementApplyAbsoluteLetterSpacing(e){const t=this.trackElementSelectionViewModel.getSelectedTracks();for(const i of t)for(const o of i.selectedContent){V(ke(o),"type of active track element is not text");const s={absoluteLetterSpacing:e};this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR).execute(i.id,o.id,{textOptions:s}),this.$container.get(k.TRACK_ELEMENT_TEXT_SIZE_CHANGE_INTERACTOR).execute(i.id,o.id)}},textElementApplyBackgroundColor(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i={backgroundFill:e},o=this.trackElementSelectionViewModel.getSelectedTracks();for(const s of o)for(const l of s.selectedContent)t.execute(s.id,l.id,{textOptions:i})},textElementApplyOpacity(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i={opacity:e};for(const o of this.trackElementSelectionViewModel.getSelectedTracks())for(const s of o.selectedContent)t.execute(o.id,s.id,{textOptions:i})},shapeElementApplyBackgroundColor(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i={backgroundFill:e},o=this.trackElementSelectionViewModel.getSelectedTracks();for(const s of o)for(const l of s.selectedContent)t.execute(s.id,l.id,{shapeOptions:i})},shapeElementApplyOpacity(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i={opacity:e};for(const o of this.trackElementSelectionViewModel.getSelectedTracks())for(const s of o.selectedContent)t.execute(o.id,s.id,{shapeOptions:i})},textElementApplyBackgroundBorderRadius(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i={backgroundBorderRadius:e},o=this.trackElementSelectionViewModel.getSelectedTracks();for(const s of o)for(const l of s.selectedContent)t.execute(s.id,l.id,{textOptions:i})},textElementUpdateComputedStyles(e,t,i){const{serviceTrackElement:o}=this.$container.get(k.STORE_SERVICE).state;t===o?.id?this.$container.get(k.SERVICE_TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR).execute({textOptions:{computedContainerStyles:i.mediaElementStyles,computedTextStyles:i.mediaElementTextStyles}}):this.$container.get(k.TRACK_ELEMENT_UPDATE_COMPUTED_STYLES_INTERACTOR).execute(e,t,i.mediaElementStyles,i.mediaElementTextStyles)},vectorBackgroundColorChange(e){const t=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),i=this.trackElementSelectionViewModel.getSelectedTracks();for(const o of i)for(const s of o.selectedContent){const l=Be(s);t.execute(o.id,s.id,{[l]:{backgroundFill:e}})}},dragMediaElementInsidePreview(e,t,i){this.stopPlay(),this.$container.get(k.MEDIA_ELEMENT_DRAG_INSIDE_PREVIEW_INTERACTOR).execute(e,t,i)},resizeMediaElementInsidePreview(e,t,i){this.$container.get(k.MEDIA_ELEMENT_RESIZE_INSIDE_PREVIEW_INTERACTOR).execute(e,t,i)},rotateActiveMediaElementInsidePreviewStart(){this.rotateMediaElementInsidePreviewStart(this.trackElementSelectionViewModel.getActiveTrack().id,this.trackElementSelectionViewModel.getActiveTrackElement().id)},rotateActiveMediaElementInsidePreviewStop(){this.rotateMediaElementInsidePreviewStop(this.trackElementSelectionViewModel.getActiveTrack().id,this.trackElementSelectionViewModel.getActiveTrackElement().id)},rotateMediaElementInsidePreviewStart(e,t){this.$container.get(k.MEDIA_ELEMENT_ROTATE_INSIDE_PREVIEW_INTERACTOR).startRotation(e,t)},rotateMediaElementInsidePreviewStop(e,t){this.$container.get(k.MEDIA_ELEMENT_ROTATE_INSIDE_PREVIEW_INTERACTOR).stopRotation(e,t)},rotateMediaElementInsidePreview(e,t,i){this.$container.get(k.MEDIA_ELEMENT_ROTATE_INSIDE_PREVIEW_INTERACTOR).execute(e,t,i)},rotateTextElementInsidePreview(e,t,i){this.$container.get(k.MEDIA_ELEMENT_ROTATE_INSIDE_PREVIEW_INTERACTOR).execute(e,t,i)},async saveProject(){let{project:e}=this.$container.get(k.STORE_SERVICE).state;e===void 0&&(e=await this.projectCreateOnBackend());let t=this.$container.get(k.PROJECT_SAVE_BROKER).getSaveBroker();if(t===void 0){const i=e.id;t=this.$container.get(k.PROJECT_SAVE_BROKER).initializeSaveBroker(()=>this.$container.get(k.PROJECT_SAVE_INTERACTOR).execute(i)),this.projectPeriodicAutoSaveTimeoutId!==void 0&&window.clearTimeout(this.projectPeriodicAutoSaveTimeoutId);try{this.projectSaveStatus=vt.IN_PROGRESS,t.requestSave(),await t.savePromise,this.projectSaveStatus=vt.SUCCESS,this.hideProjectSaveStatus(),this.debouncedGenerateProjectPreview(i)}catch(o){throw o instanceof lr?this.projectSaveErrorStateFragment.setReason(Hn.SYNC_PAUSED):this.projectSaveErrorStateFragment.setReason(void 0),o instanceof dr?(this.commonErrorController.showModal(o),o):(this.projectSaveStatus=vt.ERROR,this.isUserLoggedIn&&this.showProjectSaveStatus(),this.projectPeriodicAutoSaveTimeoutId=window.setTimeout(()=>{this.projectPeriodicAutoSaveTimeoutId=void 0,this.saveProject()},QA),o)}}else t.requestSave(),await t.savePromise},showProjectSaveStatus(){this.isProjectSaveStatusDisplayed=!0},hideProjectSaveStatus(){this.isProjectSaveStatusDisplayed=!1},...(()=>{let e,t=()=>{};const i=()=>{o(),u(),t()};function o(){e!==void 0&&(window.clearTimeout(e),e=void 0)}function s(){e=window.setTimeout(()=>{e=void 0,i()},JA)}function l(){document.visibilityState==="hidden"&&i()}function a(){window.addEventListener("beforeunload",i),window.addEventListener("visibilitychange",l)}function u(){window.removeEventListener("beforeunload",i),window.removeEventListener("visibilitychange",l)}function m(f){t=()=>this.$container.get(k.PROJECT_PREVIEW_GENERATE_INTERACTOR).execute(f),o(),u(),s(),a()}return{debouncedGenerateProjectPreview:m}})(),resizePlayerLayout(e){this.$container.get(k.PLAYER_LAYOUT_RESIZE_INTERACTOR).execute(e)},canvasBackgroundColorChange(e){this.$container.get(k.CANVAS_SET_BACKGROUND_COLOR_INTERACTOR).execute(e)},async exportChangeSettingsPreset(e){this.$container.get(k.EXPORT_SET_SETTINGS_PRESET_INTERACTOR).execute(e),await this.saveProject()},startTrackElementDrag(e){this.isTrackElementDragging=!0,this.trackElementSelectionViewModel.isSelected(e)||this.trackElementSelectionViewModel.selectSingle(e),this.resetTrackElementDropMarkers()},stopTrackElementDrag(){this.isTrackElementDragging=!1,this.resetTrackElementDropMarkers()},undoRedoRecordCurrentState(){this.$container.get(k.PROJECT_SNAPSHOT_SAVE_INTERACTOR).execute()},debouncedUndoRedoRecordCurrentState:_t(function(){this.undoRedoRecordCurrentState()},1e3,{leading:!0,trailing:!1}),async undo(){this.cropEmitter.fire("stick-up"),this.$container.get(k.PROJECT_UNDO_INTERACTOR).execute(),this.throttledCalculateTimelineLength(),await this.saveProject()},async redo(){this.cropEmitter.fire("stick-up"),this.$container.get(k.PROJECT_REDO_INTERACTOR).execute(),this.throttledCalculateTimelineLength(),await this.saveProject()},startTrackElementExpand(e){this.isTrackElementExpanding=!0,this.trackElementSelectionViewModel.isSelected(e)||this.trackElementSelectionViewModel.selectSingle(e)},stopTrackElementExpand(){this.isTrackElementExpanding=!1},increaseTimelineLengthByTrackElementMove(){const e=this.$container.get(k.CONTEXT_SERVICE),t=Math.round(e.appConfig.timelineExpandWidth/this.timelineScale*1e3);V(this.timelineLength!==void 0,"timelineLength undefined"),this.timelineLength+=t},increaseTimelineLengthByTrackElementExpand(){const e=this.$container.get(k.CONTEXT_SERVICE),{timelineExpandWidth:t}=e.appConfig,i=Math.round(t/this.timelineScale*1e3),s=en(this.storeTracks)+i;V(this.timelineLength!==void 0,"timelineLength is undefined"),this.timelineLength<s&&(this.timelineLength=s)},...(()=>{const e=ut(function(){this.increaseTimelineLengthByTrackElementExpand()},dt.FOUR_FRAMES_PER_SECOND,{trailing:!1});return{throttledIncreaseTimelineLengthByTrackElementExpand:e,cancelThrottledIncreaseTimelineLengthByTrackElementExpand:e.cancel}})(),calculateTimelineLength(){if(this.storeTracks.length===0){this.timelineLength=0;return}this.farthestTrackElementPosition=en(this.storeTracks),this.timelineLength=Math.max(this.farthestTrackElementPosition,Math.round((this.timelineWidth??0)/this.timelineScale*1e3)),this.timelineCurrentTime>this.farthestTrackElementPosition&&(this.timelineCurrentTime=this.farthestTrackElementPosition),this.validateExportPreset()},validateExportPreset(){const{exportSettingsPresets:e}=this.$container.get(k.CONTEXT_SERVICE).appConfig,{projectOptions:t}=this.$container.get(k.STORE_SERVICE).state,i=e.find(o=>o.id===t.activeExportSettingsPresetId);V(i!==void 0,"activePreset is undefined"),this.isGifExportSettingsPresetDisabled&&i.label==="gif"&&this.exportChangeSettingsPreset(e[0].id)},...(()=>{const e=ut(function(){this.calculateTimelineLength()},dt.FOUR_FRAMES_PER_SECOND,{trailing:!0});return{throttledCalculateTimelineLength:e,cancelThrottledCalculateTimelineLength:e.cancel}})(),updateTimelineWidth(e){this.timelineWidth=e},zoomInTimeline(){const{appConfig:e}=this.$container.get(k.CONTEXT_SERVICE);if(this.timelineScale<e.timelineMinimumScale)this.timelineScale=e.timelineMinimumScale;else{const t=this.timelineScale*2;this.timelineScale=Math.min(t,e.timelineMaximumScale)}this.calculateTimelineLength()},zoomOutTimeline(){const{appConfig:e}=this.$container.get(k.CONTEXT_SERVICE),t=this.timelineScale/2;this.timelineScale=Math.max(t,e.timelineMinimumScale),this.calculateTimelineLength()},zoomFitTimeline(){V(this.timelineWidth!==void 0,"timelineWidth is undefined");const{appConfig:e}=this.$container.get(k.CONTEXT_SERVICE),t=this.timelineWidth/this.farthestTrackElementPosition*1e3;this.timelineScale=Math.min(t,e.timelineMaximumScale),this.calculateTimelineLength()},changeProjectTitle(e){this.$container.get(k.PROJECT_TITLE_CHANGE_INTERACTOR).execute(e)},projectCreateOnBackend(){return this.$container.get(k.PROJECT_CREATE_INTERACTOR).ensureProjectCreated()},setForceVisibleTrackElement(){const e=le.getInstance().getData();if(e===void 0)return;const t=this.$container.get(k.SERVICE_TRACK_ELEMENT_SET_INTERACTOR);if(e.payload.type===Q.MEDIA_ELEMENT)t.addFromMediaElement(e.payload.mediaElementId,i=>{this.forceVisibleTrackElementId=i.id});else if(e.payload.type===Q.TEXT_ELEMENT)t.addFromTextElement(e.payload.textElementPresetType,i=>{this.forceVisibleTrackElementId=i.id});else if(e.payload.type===Q.TRACK_ELEMENT)this.forceVisibleTrackElementId=e.payload.trackElementId;else if(e.payload.type===Q.STOCK_ITEM){const{stockItemId:i,stockItemProvider:o}=e.payload,s=this.mediaCollection.find(l=>l.stockOrigination!==void 0&&i===l.stockOrigination.id&&o===l.stockOrigination.provider);s!==void 0&&t.addFromMediaElement(s.id,l=>{this.forceVisibleTrackElementId=l.id})}else if(e.payload.type===Q.ELEMENT_ITEM){const i=this.mediaCollection.find(o=>o.elementOrigination!==void 0&&e.payload.elementItem.id===o.elementOrigination.id);i!==void 0&&t.addFromMediaElement(i.id,o=>{this.forceVisibleTrackElementId=o.id})}else throw new Error("unknown data payload type")},resetForceVisibleTrackElement(){this.$container.get(k.SERVICE_TRACK_ELEMENT_DELETE_INTERACTOR).execute(),this.forceVisibleTrackElementId=void 0},async performHotKeyAction(e){if(this.isModalActive)return;const i=new jt(window.navigator.userAgent).getResult().browser.name==="Safari",o=this.trackElementSelectionViewModel.getActiveTrackElement(),s={hasActiveTrackElement:this.trackElementSelectionViewModel.hasActive(),isCanRedo:this.isCanRedo,isCanUndo:this.isCanUndo,hasActiveGaps:this.selectedGapIds.length>0,isBringTrackElementForwardAvailable:this.isBringTrackElementForwardAvailable,isSendTrackElementBackwardAvailable:this.isSendTrackElementBackwardAvailable,isSplitTrackElementAvailable:this.isSplitTrackElementAvailable,isNextTrackElementAvailable:this.isNextTrackElementShouldBeAvailable,isPreviousTrackElementAvailable:this.isPreviousTrackElementShouldBeAvailable,isActiveTrackElementHasPlayerOptions:o!==void 0?_e(o):!1,isFullscreenPreviewAvailable:this.storeTracks.length>0,isFullscreenPreviewEnabled:this.isFullscreenEnabled,isZoomInDisabled:this.isZoomInTimelineButtonDisabled,isZoomOutDisabled:this.isZoomOutTimelineButtonDisabled,isZoomFitDisabled:this.isZoomFitTimelineButtonDisabled,isSafari:i},l=this.$container.get(k.HOTKEYS_SERVICE),a=this.$container.get(k.CONTEXT_SERVICE),u=l.getHotkey(a.appConfig.hotkeysMap,e,s);if(u===void 0)return;u.isDefaultPreventing===!0&&e.preventDefault();const m=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),f=this.isPlaying,b=function(I){return[{minTimelineLength:0,skip:500},{minTimelineLength:3e3,skip:1e3},{minTimelineLength:1e4,skip:2e3},{minTimelineLength:2e4,skip:5e3},{minTimelineLength:6e4,skip:1e4}].reduce((j,B)=>I>j.minTimelineLength&&I>B.minTimelineLength?B:j).skip},T=100/this.playerLayoutSize.width,C=100/this.playerLayoutSize.height,M=T*10,L=C*10;switch(u.action){case se.TRACK_ELEMENT_RESET_SELECTION:this.selectedGapIds=[],this.trackElementSelectionViewModel.resetSelection();break;case se.ZOOM_IN:this.zoomInTimeline();break;case se.ZOOM_OUT:this.zoomOutTimeline();break;case se.FIT_TO_SCREEN:this.zoomFitTimeline();break;case se.UNDO:this.undo();break;case se.REDO:this.redo();break;case se.PLAY_PAUSE:this.togglePlay();break;case se.TRACK_ELEMENT_SPLIT:this.undoRedoRecordCurrentState(),await this.splitTrackElement();break;case se.TRACK_ELEMENT_DUPLICATE:this.undoRedoRecordCurrentState(),await this.duplicateSelectedTrackElements();break;case se.TRACK_ELEMENT_BRING_FORWARD:this.undoRedoRecordCurrentState(),await this.bringForwardTrackElement();break;case se.TRACK_ELEMENT_SEND_BACKWARD:this.undoRedoRecordCurrentState(),await this.sendBackwardTrackElement();break;case se.TRACK_ELEMENT_DELETE:this.undoRedoRecordCurrentState(),await this.deleteTrackElements();break;case se.GAP_DELETE:this.undoRedoRecordCurrentState(),this.deleteGaps();break;case se.MOVE_TO_NEXT_TRACK_ELEMENT:this.moveToNextTrackElement();break;case se.MOVE_TO_PREVIOUS_TRACK_ELEMENT:this.moveToPreviousTrackElement();break;case se.SKIP_FORWARD:this.stopPlay(),this.changeTimelineCurrentTime(this.timelineCurrentTime+b(this.timelineLength)),await this.$nextTick(),f&&this.farthestTrackElementPosition!==this.timelineCurrentTime&&this.startPlay();break;case se.SKIP_BACKWARD:this.stopPlay(),this.changeTimelineCurrentTime(this.timelineCurrentTime-b(this.timelineLength)),await this.$nextTick(),f&&this.startPlay();break;case se.SEEK_TO_START:this.changeTimelineCurrentTime(0),this.stopPlay();break;case se.SEEK_TO_END:this.changeTimelineCurrentTime(this.timelineLength),this.stopPlay();break;case se.TRACK_ELEMENT_MOVE_UP:{const I=this.trackElementSelectionViewModel.ensureActiveTrack(),P=this.trackElementSelectionViewModel.ensureActiveTrackElement();V(_e(P),"activeTrackElement.playerOptions is undefined at TRACK_ELEMENT_MOVE_UP"),this.debouncedUndoRedoRecordCurrentState(),m.execute(I.id,P.id,{playerOptions:{positionStartY:P.playerOptions.positionStartY-C,positionFinishY:P.playerOptions.positionFinishY-C,fillFitStrategy:Re.NONE}}),this.saveProject();break}case se.TRACK_ELEMENT_MOVE_UP_STRONGER:{const I=this.trackElementSelectionViewModel.ensureActiveTrack(),P=this.trackElementSelectionViewModel.ensureActiveTrackElement();V(_e(P),"activeTrackElement.playerOptions is undefined at TRACK_ELEMENT_MOVE_UP"),this.debouncedUndoRedoRecordCurrentState(),m.execute(I.id,P.id,{playerOptions:{positionStartY:P.playerOptions.positionStartY-L,positionFinishY:P.playerOptions.positionFinishY-L,fillFitStrategy:Re.NONE}}),this.saveProject();break}case se.TRACK_ELEMENT_MOVE_DOWN:{const I=this.trackElementSelectionViewModel.ensureActiveTrack(),P=this.trackElementSelectionViewModel.ensureActiveTrackElement();V(_e(P),"activeTrackElement.playerOptions is undefined at TRACK_ELEMENT_MOVE_DOWN"),this.debouncedUndoRedoRecordCurrentState(),m.execute(I.id,P.id,{playerOptions:{positionStartY:P.playerOptions.positionStartY+C,positionFinishY:P.playerOptions.positionFinishY+C,fillFitStrategy:Re.NONE}}),this.saveProject();break}case se.TRACK_ELEMENT_MOVE_DOWN_STRONGER:{const I=this.trackElementSelectionViewModel.ensureActiveTrack(),P=this.trackElementSelectionViewModel.ensureActiveTrackElement();V(_e(P),"activeTrackElement.playerOptions is undefined at TRACK_ELEMENT_MOVE_DOWN"),this.debouncedUndoRedoRecordCurrentState(),m.execute(I.id,P.id,{playerOptions:{positionStartY:P.playerOptions.positionStartY+L,positionFinishY:P.playerOptions.positionFinishY+L,fillFitStrategy:Re.NONE}}),this.saveProject();break}case se.TRACK_ELEMENT_MOVE_LEFT:{const I=this.trackElementSelectionViewModel.ensureActiveTrack(),P=this.trackElementSelectionViewModel.ensureActiveTrackElement();V(_e(P),"activeTrackElement.playerOptions is undefined at TRACK_ELEMENT_MOVE_LEFT"),this.debouncedUndoRedoRecordCurrentState(),m.execute(I.id,P.id,{playerOptions:{positionStartX:P.playerOptions.positionStartX-T,positionFinishX:P.playerOptions.positionFinishX-T,fillFitStrategy:Re.NONE}}),this.saveProject();break}case se.TRACK_ELEMENT_MOVE_LEFT_STRONGER:{const I=this.trackElementSelectionViewModel.ensureActiveTrack(),P=this.trackElementSelectionViewModel.ensureActiveTrackElement();V(_e(P),"activeTrackElement.playerOptions is undefined at TRACK_ELEMENT_MOVE_LEFT"),this.debouncedUndoRedoRecordCurrentState(),m.execute(I.id,P.id,{playerOptions:{positionStartX:P.playerOptions.positionStartX-M,positionFinishX:P.playerOptions.positionFinishX-M,fillFitStrategy:Re.NONE}}),this.saveProject();break}case se.TRACK_ELEMENT_MOVE_RIGHT:{const I=this.trackElementSelectionViewModel.ensureActiveTrack(),P=this.trackElementSelectionViewModel.ensureActiveTrackElement();V(_e(P),"activeTrackElement.playerOptions is undefined at TRACK_ELEMENT_MOVE_RIGHT"),this.debouncedUndoRedoRecordCurrentState(),m.execute(I.id,P.id,{playerOptions:{positionStartX:P.playerOptions.positionStartX+T,positionFinishX:P.playerOptions.positionFinishX+T,fillFitStrategy:Re.NONE}}),this.saveProject();break}case se.TRACK_ELEMENT_MOVE_RIGHT_STRONGER:{const I=this.trackElementSelectionViewModel.ensureActiveTrack(),P=this.trackElementSelectionViewModel.ensureActiveTrackElement();V(_e(P),"activeTrackElement.playerOptions is undefined at TRACK_ELEMENT_MOVE_RIGHT"),this.debouncedUndoRedoRecordCurrentState(),m.execute(I.id,P.id,{playerOptions:{positionStartX:P.playerOptions.positionStartX+M,positionFinishX:P.playerOptions.positionFinishX+M,fillFitStrategy:Re.NONE}}),this.saveProject();break}case se.FULLSCREEN_PREVIEW_ENABLE:this.enableFullscreen();break;case se.FULLSCREEN_PREVIEW_DISABLE:this.disableFullscreen();break}},openDeleteMediaElementModal(e){this.stopPlay(),this.isMediaElementUsedInTimeline=this.checkMediaElementUsedInTimeLine(e),this.isModalDeleteMediaElementVisible=!0,this.mediaElementIdsForDelete=e},closeDeleteMediaElementModal(){this.isModalDeleteMediaElementVisible=!1},openExportModal(){this.stopPlay(),this.projectSaveStatus===vt.ERROR?this.projectSaveErrorController.showModal():this.isModalExportVisible=!0},closeExportModal(){this.isModalExportVisible=!1},openLoginSocialNetworksModal(){this.stopPlay(),this.loginViaSocialNetworksController.showModal()},openUpgradeAccountModal(){this.stopPlay(),this.isModalUpgradeAccountVisible=!0},closeUpgradeAccountModal(){this.isModalUpgradeAccountVisible=!1},async finishAccountUpgrade(){await this.$container.get(k.USER_LOAD_INTERACTOR).execute(),this.closeUpgradeAccountModal()},openErrorModal(e){this.stopPlay(),this.commonErrorController.showModal(e)},async initiateExportProcess(){this.$container.get(k.PERFORMANCE_EXERCISE_SERVICE).launch();const{appConfig:t}=this.$container.get(k.CONTEXT_SERVICE),{projectOptions:i}=this.$container.get(k.STORE_SERVICE).state,o=t.exportSettingsPresets.find(l=>l.id===i.activeExportSettingsPresetId);if(V(o!==void 0,"unknown preset"),o.doesRequireSubscription&&!this.isUserPremiumMember){this.isUserLoggedIn?this.openUpgradeAccountModal():this.openLoginSocialNetworksModal();return}this.isContinueExportButtonInLoadingState=!0,await this.projectCreateOnBackend();const{project:s}=this.$container.get(k.STORE_SERVICE).state;V(s!==void 0,"project is undefined");try{await this.$container.get(k.PROJECT_CHECK_DELETED_STATUS_INTERACTOR).execute(s.id)}catch(l){this.commonErrorController.showModal(l);return}try{const{project:l}=this.$container.get(k.STORE_SERVICE).state;V(l!==void 0,"project is undefined"),ur({name:"export-progress",params:{projectId:l.id},query:{runNewExport:"true"}})}catch(l){this.openErrorModal(l)}},enableFullscreen(){this.isFullscreenEnabled=!0,this.playerFullscreenEventEmitter.fire("enter-fullscreen"),this.$nextTick().then(()=>{this.trackElementSelectionViewModel.resetSelection(),this.isDesktopBackgroundColorPickerDropdownVisible=!1,this.isMobileBackgroundColorPickerDropdownVisible=!1,this.isMobileLayout&&this.switchNavigationMainTab(void 0)})},disableFullscreen(){this.isFullscreenEnabled=!1,this.playerFullscreenEventEmitter.fire("exit-fullscreen")},toggleDropZoneVisibility(e){this.isFileConverterActive&&this.mediaCollection.length>0&&e||(this.isAppDropZoneVisible=e,e&&(this.isModalDeleteMediaElementVisible=!1,this.isModalExportVisible=!1,this.leaveEditorModalController.hide(),this.loginViaEmailController.hideModal(),this.loginViaSocialNetworksController.hideModal(),this.isModalUpgradeAccountVisible=!1,this.isModalUploadLimitUpgradeVisible=!1,this.projectSaveErrorController.hideModal()))},openUploadLimitUpgradeModal(){this.stopPlay(),this.isModalUploadLimitUpgradeVisible=!0},closeUploadLimitUpgradeModal(){this.isModalUploadLimitUpgradeVisible=!1,this.modalUpgradeUploadLimitSize=""},focusConsoleSettingsTextAreaOnDoubleClick:Qi(async function(){this.switchNavigationTextSettingsPaneTab("tab-content"),await this.$nextTick(),this.playerMediaElementTextEventTarget.fire("focus")}),focusConsoleSettingsShapeOnDoubleClick:Qi(function(){this.switchNavigationShapeSettingsPaneTab("tab-transform")}),selectAtopElement(e){let t,i;e instanceof MouseEvent?[t,i]=[e.pageX,e.pageY]:[t,i]=[e.touches[0].pageX,e.touches[0].pageY];const o=this.playerLayoutSize.offsetLeft,s=this.playerLayoutSize.offsetTop;V(o!==void 0,"playerOffsetLeft is undefined"),V(s!==void 0,"playerOffsetTop is undefined");let l;if((()=>{for(const a of this.storeTracks)for(const u of a.content){const m=this.timelineCurrentTime>=u.timelineOptions.playbackStartTime&&this.timelineCurrentTime<=u.timelineOptions.playbackStartTime+u.timelineOptions.length;if(!_e(u)||!m)continue;const f=this.playerLayoutSize.width/100*u.playerOptions.positionStartX,b=this.playerLayoutSize.width/100*u.playerOptions.positionFinishX,T=this.playerLayoutSize.height/100*u.playerOptions.positionStartY,C=this.playerLayoutSize.height/100*u.playerOptions.positionFinishY;let M;if(ge(u))M=u.videoOptions.rotateAngle;else if($e(u))M=u.imageOptions.rotateAngle;else if(Se(u))M=u.shapeOptions.rotateAngle;else if(Ie(u))M=u.emojiOptions.rotateAngle;else if(ke(u))M=u.textOptions.rotateAngle;else throw new Error("unknown track element type");if(pr({x:t-o,y:i-s},{center:{x:f+(b-f)/2,y:T+(C-T)/2},size:{width:b-f,height:C-T}},M)){l=u;return}}})(),l!==void 0){const a=this.trackElementsEventEmitters.get(l.id);V(a!==void 0,"elementEventEmitter is undefined"),a.fire("mousedown",e),ke(l)?this.focusConsoleSettingsTextAreaOnDoubleClick(e):Se(l)&&this.focusConsoleSettingsShapeOnDoubleClick(e)}else this.trackElementSelectionViewModel.resetSelection()},showModalOrRedirectToLink(e,t){this.isPageExitConfirmationShouldBeDisplayed?(this.stopPlay(),this.loginViaSocialNetworksController.hideModal(),this.leaveEditorModalController.show(e,t)):this.navigateToUrl(e,this.calculateHistoryState(t,e,this.projectId,this._.provides[Me]||this.$route,this.$router))},navigateToUrl:cr,calculateHistoryState:mr,callCallbackOnlyIfTimeIsWithinFarthestTrackElementPosition(e,t){t<this.farthestTrackElementPosition&&e()},getPreviousTrackElement(){const e=this.timelineCurrentTime,t=[];if(this.storeTracks.forEach(s=>{s.content.forEach(l=>{l.timelineOptions.playbackStartTime<e&&t.push(l)})}),t.length===0)return;const i=t.sort((s,l)=>l.timelineOptions.playbackStartTime-s.timelineOptions.playbackStartTime);if(i.length===1)return this.isPlaying?void 0:i[0];const{timelineOptions:o}=i[0];return this.isPlaying&&o.playbackStartTime+o.length>e?i[1]:i[0]},getPreviousTrackElementTime(){const e=this.getPreviousTrackElement();if(e!==void 0)return e.timelineOptions.playbackStartTime;if(this.timelineCurrentTime!==0)return 0},getNextTrackElement(){const e=this.timelineCurrentTime,t=[];return this.storeTracks.forEach(i=>{i.content.forEach(o=>{o.timelineOptions.playbackStartTime>e&&t.push(o)})}),t.sort((i,o)=>i.timelineOptions.playbackStartTime-o.timelineOptions.playbackStartTime)?.[0]},getNextTrackElementTime(){const e=this.getNextTrackElement();if(e!==void 0)return e.timelineOptions.playbackStartTime;if(this.timelineCurrentTime!==this.farthestTrackElementPosition)return this.farthestTrackElementPosition},timelineCursorMoveStart(){this.isCursorDragging=!0},timelineCursorMoveStop(){this.isCursorDragging=!1},reloadPage(){window.location.reload()},startProjectDualOpenDetection(){const{project:e}=this.$container.get(k.STORE_SERVICE).state;e!==void 0&&this.$container.get(k.PROJECT_DUAL_OPEN_DETECTOR).startDetection(e.id,()=>{this.isModalProjectAlreadyOpenedVisible=!0})},stopProjectDualOpenDetection(){this.$container.get(k.PROJECT_DUAL_OPEN_DETECTOR).stopDetection()},deleteEmptyActiveTextElement(){const e=this.trackElementSelectionViewModel.getActiveTrackElement();e!==void 0&&ke(e)&&(e.textOptions.textContent===""||/^\s+$/.test(e.textOptions.textContent))&&(this.cancelThrottledTextElementPredictFonts(),this.$container.get(k.TRACK_ELEMENT_DELETE_INTERACTOR).execute(this.isRippleEnabled))},openMobileUploadTabOnMobile(){this.isMobileLayout&&this.stopPlay()},toggleSnap(){this.isSnapEnabled=!this.isSnapEnabled},toggleRipple(){this.isRippleEnabled=!this.isRippleEnabled},simulateDropEvent(e){const t=le.getInstance().getData();V(t!==void 0,"DragDropDataTransfer data is undefined"),t.lastDropTargetDOMElement!==void 0&&Ki(t.lastDropTargetDOMElement,"drop",e)},async ensureFontsLoaded(e){const t=this.trackElementSelectionViewModel.getSelectedTrackElements();for(const i of t){V(ke(i),"[ensureFontsLoaded] not a text track element!");const{fontFace:o,fontStyle:s,fontWeight:l}=i.textOptions,a=e?.fontFace?.family??o.family,u=this.$googleFonts.find(L=>L.face.family===a);V(u!==void 0,`Unknown Google Font ${a}`);const m=e?.fontStyle??e?.fontFaceStyle?.style??s,f=e?.fontFaceStyle?.weight??l,b=u.styles.map(L=>L.weight).includes(l),C=u.styles.map(L=>L.style).includes(s)?m:u.styles[0].style,M=b?f:u.styles[0].weight;try{const L=[];for(const I of document.fonts.values())I.family===a&&I.style===C&&I.weight===String(M)&&L.push(I);await Promise.allSettled(L.map(I=>I.load()))}catch{}}},async handleFontFaceChange(e){this.undoRedoRecordCurrentState();const t=this.$googleFonts.find(i=>i.face.family===e.family);V(t!==void 0,`Unknown Google Font ${e.family}`),await Promise.race([this.preloadFontsCSS([t]),io(1e3)]),await this.ensureFontsLoaded({fontFace:e}),this.textElementApplyFontFace(e),this.saveProject()},async handleFontStyleChange(e){this.undoRedoRecordCurrentState(),await this.ensureFontsLoaded({fontFaceStyle:e}),this.textElementApplyFontStyle(e),await this.saveProject()},async handleTextItalicsChange(e){this.undoRedoRecordCurrentState(),await this.ensureFontsLoaded({fontStyle:e}),this.textElementApplyTextItalic(e),await this.saveProject()},addMediaElementByClickOnThumb(e){if(xo())return;const{state:t}=this.$container.get(k.STORE_SERVICE),i=t.mediaElements.find(o=>o.id===e);V(i!==void 0,"mediaElement is undefined"),i.isPlayable&&(this.undoRedoRecordCurrentState(),this.addMediaElementsToNewTrackByButton([e],!1))},addTextElementByClickOnThumb(e){this.undoRedoRecordCurrentState(),this.addTextElementsToNewTrackByButton([e],!1)},canvasSnapStartMoving(e){this.$container.get(k.SNAP_DETECTOR_SERVICE).initSnaps(e,this.timelineCurrentTime,zi.MOVING)},startScaling(e){this.$container.get(k.SNAP_DETECTOR_SERVICE).initSnaps(e,this.timelineCurrentTime,zi.SCALING),this.$container.get(k.MEDIA_ELEMENT_RESIZE_INSIDE_PREVIEW_INTERACTOR).start(e)},canvasSnapStartRotating(e){this.$container.get(k.SNAP_DETECTOR_SERVICE).initSnaps(e,this.timelineCurrentTime,zi.ROTATING)},canvasSnapStop(){const e=this.$container.get(k.STORE_SERVICE),t=this.$container.get(k.SNAP_DETECTOR_SERVICE);t.clearSnaps(),e.canvasSnapSetState(t.getSnapState())},async removeProcessingMediaElements(){const{project:e,mediaElements:t}=this.$container.get(k.STORE_SERVICE).state,i=t.filter(s=>s.status!==yi.READY).map(s=>s.id);await this.$container.get(k.MEDIA_ELEMENT_DELETE_INTERACTOR).execute(i,e?.id)},unregisterLeaveConfirmation(){this.$container.get(k.EXIT_CONFIRMATION).unregister()},async confirmLeaveEditor(){V(this.leaveEditorModalStateFragment.state.leaveUrl!==void 0,"leaveUrl is undefined"),this.unregisterLeaveConfirmation(),await this.removeProcessingMediaElements(),this.navigateToUrl(this.leaveEditorModalStateFragment.state.leaveUrl,this.calculateHistoryState(this.leaveEditorModalStateFragment.state.additionalQueryParameters,this.leaveEditorModalStateFragment.state.leaveUrl,this.projectId,this._.provides[Me]||this.$route,this.$router))},openStockPreviewModal(e){this.selectedStockItem=e,this.isModalStockPreviewVisible=!0},closeStockPreviewModal(){this.selectedStockItem=void 0,this.isModalStockPreviewVisible=!1},showStockItemInUploads(){this.closeStockPreviewModal(),this.switchNavigationMainTab("tab-media")},addStockItemToTimeline(e){(e.stockType===H.IMAGE||e.stockType===H.VIDEO)&&this.closeStockPreviewModal(),this.isMobileLayout&&this.switchNavigationMainTab(void 0);const t=this.mediaCollection.find(o=>o.stockOrigination!==void 0&&e.id===o.stockOrigination.id&&e.provider===o.stockOrigination.provider),i=this.$container.get(k.TRACK_ELEMENT_CREATE_INTERACTOR);if(t!==void 0)i.createFromMediaElements([{id:t.id,playbackStartTime:this.timelineCurrentTime??0}],void 0,!1),this.saveProject();else{let o=[];switch(e.stockType){case H.IMAGE:o=this.stocksImageStateFragment.state.stockImagePresenterItems;break;case H.VIDEO:o=this.stocksVideoStateFragment.state.stockVideoPresenterItems;break;case H.MUSIC:o=this.stocksAudioStateFragment.state.stockMusicItems;break;case H.SFX:o=this.stocksAudioStateFragment.state.stockSfxItems;break}const s=o.find(l=>l.id===e.id&&l.provider===e.provider);V(s!==void 0,"stock item not found"),this.addMediaElementsFromStock([s],this.timelineCurrentTime??0,void 0)}},handleGooglePhotosError(){this.googlePhotosController.hideModal(),this.commonErrorController.showModal(new hr)},extractAudio(e){V(ge(e),"videoElement is not a video"),this.stopPlay(),this.isMobileLayout&&this.switchNavigationMainTab(void 0);const t=this.$container.get(k.TRACK_ELEMENT_CREATE_INTERACTOR),i=this.$container.get(k.TRACK_ELEMENT_SETTINGS_APPLY_INTERACTOR),o=this.mediaCollection.find(a=>a.originalMediaElementId===e.mediaElement.id),s=e.videoOptions.volume,l=this.storeTracks.find(a=>a.content.some(u=>u.id===e.id));V(l!==void 0,"videoTrack is undefined");try{i.execute(l.id,e.id,{videoOptions:{volume:0}});const a={trimFromStartTime:e.timelineOptions.trimFromStartTime,trimFromEndTime:e.timelineOptions.trimFromEndTime,length:e.timelineOptions.length},u=(m,f)=>{i.execute(m,f,{timelineOptions:a,audioOptions:{basicSpeed:e.videoOptions.basicSpeed,volume:s}})};if(o!==void 0){t.createFromMediaElements([{id:o.id,playbackStartTime:e.timelineOptions.playbackStartTime}],l.id,!0);const m=this.trackElementSelectionViewModel.ensureActiveTrackElement(),f=this.trackElementSelectionViewModel.ensureActiveTrack();i.execute(f.id,m.id,{timelineOptions:a}),u(f.id,m.id),this.calculateTimelineLength(),this.saveProject()}else this.addAudioElementByVideoElement([e],e.timelineOptions.playbackStartTime,l.id,m=>{const f=this.storeTracks.find(C=>C.content.some(M=>ji(M)&&M.mediaElement.id===m.id));V(f!==void 0,"track is undefined");const b=f.content.find(C=>ji(C)&&C.mediaElement.id===m.id);V(b!==void 0,"trackElementAudio is undefined");const T=this.trackElementSelectionViewModel.getActiveTrackElement();T!==void 0&&T.id===e.id&&this.trackElementSelectionViewModel.selectSingle(b.id),i.execute(f.id,b.id,{timelineOptions:a}),u(f.id,b.id),this.calculateTimelineLength()})}catch{i.execute(l.id,e.id,{videoOptions:{volume:s}})}},async createAudioFromTextTrackElement(){this.textToSpeechStateFragment.setIsElementCreationLoading(!0),this.textToSpeechStateFragment.setErrorState(!1),this.stopPlay();try{let{project:e}=this.$container.get(k.STORE_SERVICE).state;e===void 0&&(e=await this.projectCreateOnBackend());const i=await this.$container.get(k.MEDIA_ELEMENT_ADD_INTERACTOR).addAudioFromText({text:this.textToSpeechStateFragment.state.text,voice:this.textToSpeechStateFragment.state.selectedVoice?.name,mood:this.textToSpeechStateFragment.state.selectedMood?.mood,languageCode:this.textToSpeechStateFragment.state.selectedLanguage?.languageCode});this.undoRedoRecordCurrentState(),this.$container.get(k.TRACK_ELEMENT_CREATE_INTERACTOR).createFromMediaElements([{id:i.id,playbackStartTime:this.timelineCurrentTime}],void 0,!0),this.appLayout==="mobile"&&this.switchNavigationAudioSettingsPaneTab(void 0),this.calculateTimelineLength(),this.saveProject()}catch(e){this.textToSpeechStateFragment.setErrorState(!0),this.$container.get(k.EXCEPTION_HANDLER_SERVICE).handle(e)}finally{this.textToSpeechStateFragment.setIsElementCreationLoading(!1)}},async updateAudioFromTextTrackElement(){this.textToSpeechStateFragment.setIsElementCreationLoading(!0),this.textToSpeechStateFragment.setErrorState(!1),this.stopPlay();try{let{project:e,tracks:t}=this.$container.get(k.STORE_SERVICE).state;e===void 0&&(e=await this.projectCreateOnBackend()),this.undoRedoRecordCurrentState(),V(this.activeTrackElement!==void 0&&Ni(this.activeTrackElement),"active track element is not a tts element");const i=this.trackElementSelectionViewModel.ensureActiveTrack(),o=this.activeTrackElement.mediaElement;let s=0;t.forEach(m=>m.content.forEach(f=>{Ni(f)&&f.mediaElement.id===o.id&&s++}));const l=this.activeTrackElement.timelineOptions.playbackStartTime,a=i.id;await this.$container.get(k.MEDIA_ELEMENT_ADD_INTERACTOR).addAudioFromText({text:this.textToSpeechStateFragment.state.text,voice:this.textToSpeechStateFragment.state.selectedVoice?.name,mood:this.textToSpeechStateFragment.state.selectedMood?.mood,languageCode:this.textToSpeechStateFragment.state.selectedLanguage?.languageCode},{trackId:a,playbackStartTime:l,beforeCreationCallback:()=>{this.$container.get(k.TRACK_ELEMENT_DELETE_INTERACTOR).execute(this.isRippleEnabled,!1)}}),s<=1&&await this.$container.get(k.MEDIA_ELEMENT_DELETE_INTERACTOR).execute([o.id],e.id),this.appLayout==="mobile"&&this.switchNavigationAudioSettingsPaneTab(void 0),this.calculateTimelineLength(),this.saveProject()}catch(e){this.textToSpeechStateFragment.setErrorState(!0),this.$container.get(k.EXCEPTION_HANDLER_SERVICE).handle(e)}finally{this.textToSpeechStateFragment.setIsElementCreationLoading(!1)}},addElementItemToTimeline(e,t="",i=void 0){this.appLayout==="mobile"&&this.switchNavigationMainTab(void 0),this.undoRedoRecordCurrentState(),Yi(e)||Ji(e)?this.addVectorElementToTimeline(e,!1):(Kt(e)||Yt(e))&&this.addRasterElementToTimeline(e,t,i)},addRasterElementToTimeline(e,t="",i=void 0){const{state:o}=this.$container.get(k.STORE_SERVICE),s=m=>m.elementOrigination!==void 0&&e.id===m.elementOrigination.id&&(Yt(e)||Kt(e))&&e.provider===m.elementOrigination.provider,l=o.mediaElements.find(s),a=this.$container.get(k.TRACK_ELEMENT_CREATE_INTERACTOR),u=this.$container.get(k.TRACK_ELEMENT_MOVE_TO_EXISTING_TRACK_BY_DRAG_INTERACTOR);if(l!==void 0&&l.status===yi.READY)t!==""&&i!==void 0?u.dropMediaElement(l.id,t,i.pointerTime,i.previewStartTime):a.createFromMediaElements([{id:l.id,playbackStartTime:this.timelineCurrentTime??0}],void 0,!1),this.saveProject();else{const m=i===void 0?this.timelineCurrentTime??0:void 0,f=t!==""&&i!==void 0;this.addMediaElementsFromElements([e],m,!f,b=>{f&&u.dropMediaElement(b.id,t,i.pointerTime,i.previewStartTime)})}},async addVectorElementToTimeline(e,t=!0){this.stopPlay(),this.$container.get(k.TRACK_ELEMENT_CREATE_INTERACTOR).createFromVectorElement({elementItem:e,playbackStartTime:this.timelineCurrentTime},void 0,t,this.appLayout,s=>{this.timelineCurrentTime=s}),this.calculateTimelineLength();const o={startTime:this.timelineCurrentTime,positionTop:0};this.timelineScrollEventEmitter.fire("timeline-scroll-to",o),t&&Yi(e)&&this.switchNavigationShapeSettingsPaneTab("tab-transform"),t&&Ji(e)&&this.switchNavigationEmojiSettingsPaneTab("tab-transform"),await this.saveProject()},async freezeFrame(){this.stopPlay();const e=this.trackElementSelectionViewModel.ensureActiveTrack(),t=this.trackElementSelectionViewModel.ensureActiveTrackElement();V(ge(t),"activeTrackElement is not a video");const i=this.isSplitTrackElementAvailable,o=this.trackElementsMediaElements.get(t.id);V(o!==void 0,"videoHTMLElement is undefined");try{i&&this.splitTrackElement(),await this.$container.get(k.MEDIA_ELEMENT_ADD_INTERACTOR).addFrameFromVideo(o,t,i,e.id,this.timelineCurrentTime,l=>{this.calculateTimelineLength();const a={startTime:l,positionTop:0};this.timelineScrollEventEmitter.fire("timeline-scroll-to",a)},()=>{this.appLayout==="mobile"&&this.switchNavigationMainTab(void 0)},l=>{const a=e.content.find(u=>$e(u)&&u.mediaElement.id===l[0].id);V(a!==void 0,"trackElement is undefined"),this.timelineCurrentTime=a.timelineOptions.playbackStartTime})}catch(s){s instanceof It?(s.limit!==void 0&&(this.modalUpgradeUploadLimitSize=Lt(s.limit,0)),this.openUploadLimitUpgradeModal()):this.openErrorModal(s)}await this.saveProject()},isTrackElementLoopableAnimatedImage(e){return this.$container.get(k.IMAGE_ANIMATION_SERVICE).isTrackElementLoopableAnimatedImage(e)},selectGap(e){this.trackElementSelectionViewModel.resetSelection(),this.selectedGapIds=[e]},unselectGaps(){this.selectedGapIds=[]},deleteGaps(){this.stopPlay();const e=this.$container.get(k.TRACK_ELEMENT_GAP_DELETE_INTERACTOR),t=this.nonServiceTracks.filter(i=>(i.content=i.content.filter(o=>this.selectedGapIds.includes(o.id)),i.content.length>0));for(const i of t)for(const o of i.content)e.execute(i.id,o.timelineOptions.playbackStartTime,o.timelineOptions.length);this.unselectGaps(),this.calculateTimelineLength(),this.saveProject()},handlePaste(e){const t=document.activeElement;if(tn(t)||this.isModalActive||this.isFullscreenEnabled)return;const i=Array.from(e.clipboardData?.files??[]);i.length>0?(this.stopPlay(),this.addMediaElementsFromFilesystem(i)):this.$container.get(k.TRACK_ELEMENT_CREATE_FROM_CLIPBOARD_INTERACTOR).execute(this.timelineCurrentTime,e,()=>{this.undoRedoRecordCurrentState()},s=>{if(this.calculateTimelineLength(),this.trackElementSelectionViewModel.selectMany(s),s.length>0){const l=this.trackElementSelectionViewModel.ensureLastSelectedTrackElement();this.changeTimelineCurrentTime(l.timelineOptions.playbackStartTime,!1);const a={startTime:l.timelineOptions.playbackStartTime,positionTop:0};this.timelineScrollEventEmitter.fire("timeline-scroll-to",a)}this.saveProject()})},handleCopy(e){const t=document.activeElement,i=this.trackElementSelectionViewModel.getSelectedTrackElements();if(tn(t)||this.isModalActive||this.isFullscreenEnabled||i.length===0)return;this.$container.get(k.TRACK_ELEMENT_COPY_TO_CLIPBOARD_INTERACTOR).execute(i,e)},handleCut(e){this.handleCopy(e),this.undoRedoRecordCurrentState(),this.deleteTrackElements()},setTrackElementStartTiming(e){V(this.activeTrackElement!==void 0,"this.activeTrackElement is undefined"),this.stopPlay(),this.undoRedoRecordCurrentState();const t=this.isSnapEnabled;this.isSnapEnabled=!1,this.resizeTrackElementFromStart(this.activeTrackElement.id,e),this.isSnapEnabled=t,this.stopResizeTrackElementFromStart()},setTrackElementEndTiming(e){V(this.activeTrackElement!==void 0,"this.activeTrackElement is undefined"),this.stopPlay(),this.undoRedoRecordCurrentState();const t=this.isSnapEnabled;this.isSnapEnabled=!1,this.resizeTrackElementFromEnd(this.activeTrackElement.id,e),this.isSnapEnabled=t,this.stopResizeTrackElementFromEnd()},closeFileConverter(){this.isFileConverterActive=!1;const e=(this._.provides[Me]||this.$route).query;delete e.convertTo;const t=(this._.provides[Me]||this.$route).params;this.projectId!==void 0&&(t.projectId=this.projectId);const i=this.$router.resolve({name:"editor",params:t,query:{...e}}),o=this.$router.resolve(i).href;window.history.pushState({route:o},this.projectTitle,o)},resetFileConverter(){this.isFileConverterActive=!1,window.location.href=this.$router.resolve({name:"editor",query:{convertTo:this.fileConverterDesiredOutput}}).href},openCropTab(){this.stopPlay(),this.switchNavigationMainTab("tab-crop",!1)}}},"$Vi9CAO6TpJ");function eM(e,t,i,o,s,l){const a=Vr,u=Cr,m=D("AppSvgSymbol"),f=D("AppButton"),b=Hr,T=Qr,C=hl,M=bl,L=Sl,I=wl,P=Yl,j=Jl,B=id,Y=sd,ve=pd,x=hd,He=Td,it=Od,ce=tt,me=Wn,ne=Jd,gt=lu,Gt=Su,Mi=ei,Co=Mu,ys=zu,oi=qu,Ri=Xu,Pi=Qu,ni=Sp,Es=Xc,To=tm,Ii=yo,$o=fh,re=Sh,ot=Kh,Mt=lg,wo=bg,si=Tg,Le=Ng,Oe=Wg,Fe=Jg,Rt=tv,Pt=rv,Ao=Hv,Mo=Qv,Ro=nf,ai=df,Po=Tf,Ss=Af,ks=ib,Cs=lb,Li=_b,Ts=p1,$s=gs,ws=D1,As=H1,ee=q1,Ae=Y1,be=J1,Ms=ty,nt=ry,Io=vy,Rs=Ty,ri=ti,li=ii,Ps=Vy,Is=jy,Ls=_y,Os=Qy,te=i0,Lo=a0,Fs=p0,Te=h0,Ds=E0,Vs=$0,Oi=L0,Ns=z0,Bs=q0,js=Y0,zs=x0,Oo=lE,Hs=EE,_s=$E,Us=OE,qs=VE,Ws=jE,Gs=_E,Xs=XE,Fo=ZE,di=mo,Do=nS,Vo=pS,Ys=gS,No=bS,Ks=kS,Zs=RS,Qs=OS,Js=jS,xs=XT,Ke=D("AppOverlay"),ea=D("GooglePhotosPreviewLoader"),st=D("AppModal"),Bo=i$,jo=d$,zo=D("AppModalContentConfirm"),ta=Tr,ia=b$,oa=w$,Ho=P$,_o=_n,Uo=O$,qo=W$,na=Y$,sa=Q$,aa=D("WidgetCommonError"),ra=D("WidgetSocialLoginError"),la=D("WidgetLoginViaEmail"),da=D("WidgetLoginViaSocialNetworks"),ua=$w,pa=D("WidgetCookies"),ca=Dw;return d(),S(ca,{onToggleDropZoneVisibility:e.toggleDropZoneVisibility,onMediaFilesAddFromLocal:t[316]||(t[316]=R=>{e.addMediaElementsFromFilesystem(R)}),onExtendMenuHeight:t[317]||(t[317]=R=>e.isConsoleMenuHeightExtended=!0),onReduceMenuHeight:t[318]||(t[318]=R=>e.isConsoleMenuHeightExtended=!1)},{"upload-drop-zone":n(()=>[e.isAppDropZoneVisible?(d(),S(a,{key:0})):E("",!0)]),header:n(()=>[r(C,{onMousedownOnFreeSpace:t[5]||(t[5]=R=>e.trackElementSelectionViewModel.resetSelection())},G({logo:n(()=>[r(u,{href:`${e.$envConfig.backendBaseUrlClient}${e.logoHrefPath}`,"link-type":"native",onClick:t[0]||(t[0]=_(R=>e.showModalOrRedirectToLink(`${e.$envConfig.backendBaseUrlClient}${e.logoHrefPath}`,{}),["prevent"]))},null,8,["href"])]),"button-back":n(()=>[r(f,{tag:"a",href:`${e.$envConfig.backendBaseUrlClient}${e.logoHrefPath}`,"fixed-width":44,"fixed-height":44,variant:"icon-back-mobile",onClick:t[1]||(t[1]=_(R=>e.showModalOrRedirectToLink(`${e.$envConfig.backendBaseUrlClient}${e.logoHrefPath}`,{}),["prevent"]))},{default:n(()=>[r(m,{symbol:"mobile-back-icon","is-block":"",width:24,height:24})]),_:1},8,["href"])]),"project-name":n(R=>[r(b,{maxlength:e.backendConfig.projectTitleMaxLength,placeholder:e.$t("header.labels.project.untitledProject"),value:e.projectTitle,"is-mobile":e.appLayout==="mobile",onInput:e.changeProjectTitle,onBlur:e.saveProject,onFocus:e.hideProjectSaveStatus,onSetWidth:R.setWidth},null,8,["maxlength","placeholder","value","is-mobile","onInput","onBlur","onFocus","onSetWidth"])]),"undo-button-desktop":n(()=>[r(f,{variant:"icon-header","is-disabled":!e.isCanUndo,"aria-label":e.$t("header.aria.history.undo"),"fixed-height":32,"fixed-width":32,layout:e.appLayout,onClick:e.undo},{default:n(()=>[r(m,{width:24,height:24,symbol:"svg-header-undo"})]),_:1},8,["is-disabled","aria-label","layout","onClick"])]),"undo-button-mobile":n(()=>[r(f,{variant:"icon-header","is-disabled":!e.isCanUndo,"aria-label":e.$t("header.aria.history.undo"),"fixed-height":44,"fixed-width":44,layout:e.appLayout,onClick:e.undo},{default:n(()=>[r(m,{width:24,height:24,symbol:"undo-mobile"})]),_:1},8,["is-disabled","aria-label","layout","onClick"])]),"redo-button-desktop":n(()=>[r(f,{variant:"icon-header","is-disabled":!e.isCanRedo,"aria-label":e.$t("header.aria.history.redo"),"fixed-height":32,"fixed-width":32,layout:e.appLayout,onClick:e.redo},{default:n(()=>[r(m,{width:24,height:24,symbol:"svg-header-redo"})]),_:1},8,["is-disabled","aria-label","layout","onClick"])]),"redo-button-mobile":n(()=>[r(f,{variant:"icon-header","is-disabled":!e.isCanRedo,"aria-label":e.$t("header.aria.history.redo"),"fixed-height":44,"fixed-width":44,layout:e.appLayout,onClick:e.redo},{default:n(()=>[r(m,{width:24,height:24,symbol:"redo-mobile"})]),_:1},8,["is-disabled","aria-label","layout","onClick"])]),"export-button-desktop":n(()=>[r(f,{variant:"export","rounding-value":5,"is-disabled":e.isExportButtonDisabled,onClick:e.openExportModal},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-export",width:14,height:20})]),default:n(()=>[y(" "+g(e.$t("header.actions.export")),1)]),_:1},8,["is-disabled","onClick"])]),"export-button-mobile":n(()=>[r(f,{variant:"icon-header","is-disabled":e.isExportButtonDisabled,"fixed-width":44,"fixed-height":44,onClick:e.openExportModal},{icon:n(()=>[r(m,{"is-block":"",symbol:"header-export-icon-mobile",width:24,height:24})]),_:1},8,["is-disabled","onClick"])]),_:2},[e.isUserLoggedIn?{name:"saving-status-desktop",fn:n(()=>[r(T,{status:e.projectSaveStatus,"is-mobile":!1,onClick:t[2]||(t[2]=R=>{e.stopPlay(),e.projectSaveErrorController.showModal()})},null,8,["status"])]),key:"0"}:void 0,e.isUserPremiumMember?void 0:{name:"upgrade-button",fn:n(()=>[r(f,{variant:"upgrade","rounding-value":5,onClick:t[3]||(t[3]=R=>e.isUserLoggedIn?e.openUpgradeAccountModal():e.openLoginSocialNetworksModal())},{icon:n(()=>[r(m,{"is-block":"",width:20,height:20,symbol:"crown"})]),_:1})]),key:"1"},e.isProjectSaveStatusDisplayed?{name:"saving-status-mobile",fn:n(()=>[r(T,{status:e.projectSaveStatus,"is-mobile":"",onClick:t[4]||(t[4]=R=>{e.stopPlay(),e.projectSaveErrorController.showModal()})},null,8,["status"])]),key:"2"}:void 0]),1024)]),player:n(()=>[r(He,{ref:"player","is-play-available":e.tracks.length>0,"is-playing":e.isPlaying,"aspect-ratio-value":e.activeAspectRatio.value,"background-color":e.canvasBackgroundColor,"is-fullscreen-button-disabled":e.tracks.length===0,"is-fullscreen-enabled":e.isFullscreenEnabled,"is-in-crop-mode":e.isInCropMode,"data-testid":"player",onTogglePlay:e.togglePlay,onPlayerLayoutResize:e.resizePlayerLayout,onClickOnCanvas:t[33]||(t[33]=R=>e.switchNavigationMainTab("tab-canvas-settings")),onMousedownOutsideCanvas:t[34]||(t[34]=R=>e.trackElementSelectionViewModel.resetSelection()),onPlayerFullscreenEnable:t[35]||(t[35]=R=>e.enableFullscreen()),onPlayerFullscreenDisable:t[36]||(t[36]=R=>e.disableFullscreen()),onDropOnPlayer:t[37]||(t[37]=R=>{e.undoRedoRecordCurrentState(),e.mediaElementOrTextDropToPlayer(R)})},G({"snap-renderer":n(()=>[r(M,{"canvas-snap-state":e.canvasSnapState,"player-layout-width":e.playerLayoutSize.width,"player-layout-height":e.playerLayoutSize.height},null,8,["canvas-snap-state","player-layout-width","player-layout-height"])]),timeline:n(()=>[r(L,{"timeline-length":e.isFullscreenEnabled?e.videoLength:e.timelineLength,"current-time":e.timelineCurrentTime,"is-playing":e.isPlaying,onCurrentTimeUpdate:t[6]||(t[6]=R=>e.changeTimelineCurrentTime(R)),onStopPlay:e.stopPlay,onStartPlay:e.startPlay},null,8,["timeline-length","current-time","is-playing","onStopPlay","onStartPlay"])]),timings:n(()=>[r(I,{"current-time":e.timelineCurrentTime,"total-time":e.videoLength},null,8,["current-time","total-time"])]),"crop-box":n(()=>[(d(!0),h(N,null,q(e.trackElementSelectionViewModel.getCroppableTracks(),R=>(d(),h(N,null,[(d(!0),h(N,null,q(R.content,v=>(d(),h(N,{key:`crop-box-player-element-${v.id}`},[v.type==="video"?(d(),S(P,{key:0,"track-element-id":v.id,variant:e.isInCropMode?"crop-preview":"smart-transform","is-selected":e.trackElementSelectionViewModel.isSingleSelected(v.id),source:v.mediaElement.location,"converted-source":v.mediaElement.convertedWebmLocation!==void 0&&e.isTransparentWebmSupports?v.mediaElement.convertedWebmLocation:v.mediaElement.convertedLocation,"converted-source-type":v.mediaElement.convertedWebmLocation!==void 0&&e.isTransparentWebmSupports?"video/webm":"video/mp4","mime-type":v.mediaElement.mimeType,"preview-image":v.mediaElement.previewImage,"position-start-x":v.playerOptions.positionStartX,"position-start-y":v.playerOptions.positionStartY,"position-finish-x":v.playerOptions.positionFinishX,"position-finish-y":v.playerOptions.positionFinishY,"content-start-x":v.playerOptions.contentStartX,"content-start-y":v.playerOptions.contentStartY,"content-finish-x":v.playerOptions.contentFinishX,"content-finish-y":v.playerOptions.contentFinishY,"content-rotate-angle":v.playerOptions.contentRotateAngle,"crop-strategy":v.playerOptions.cropStrategy,"media-width":v.mediaElement.width,"media-height":v.mediaElement.height,"playback-start-time":v.timelineOptions.playbackStartTime,"playback-length":v.timelineOptions.length,"trim-from-start-time":v.timelineOptions.trimFromStartTime,"current-time":e.timelineCurrentTime,"is-playing":e.isPlaying,"is-force-active":v.id===e.forceVisibleTrackElementId,"player-size-width":e.playerLayoutSize.width,"player-size-height":e.playerLayoutSize.height,"is-flip-x-applied":v.videoOptions.isFlipXApplied,"is-flip-y-applied":v.videoOptions.isFlipYApplied,"adjust-opacity":v.videoOptions.adjustOpacity,"adjust-hue":v.videoOptions.adjustHue,"adjust-saturation":v.videoOptions.adjustSaturation,"adjust-brightness":v.videoOptions.adjustBrightness,"adjust-contrast":v.videoOptions.adjustContrast,"adjust-blur":v.videoOptions.adjustBlur,"rotate-angle":v.videoOptions.rotateAngle,volume:v.videoOptions.volume,"basic-speed":v.videoOptions.basicSpeed,"drag-resize-rotate-event-target":e.trackElementsEventEmitters.get(v.id),"base-abstract-width-for-scale-blur":e.baseAbstractWidthForScaleBlur,"is-should-loop":e.isTrackElementLoopableAnimatedImage(v),"loop-cycle-length":v.mediaElement.duration,"is-noise-reduced":v.videoOptions.isNoiseReduced,"is-crop-master":!1,"rnnoise-adapter":e.rnnoiseAdapter,style:z(e.trackElementSelectionViewModel.isSelected(v.id)?{}:{opacity:0,pointerEvents:"none"}),"crop-emitter":e.cropEmitter,onMediaElementSelect:c=>e.trackElementSelectionViewModel.selectSingle(v.id),onMediaElementDragStart:c=>{e.canvasSnapStartMoving(v.id),e.undoRedoRecordCurrentState()},onMediaElementDrag:c=>e.dragMediaElementInsidePreview(R.id,v.id,c),onMediaElementDragStop:t[7]||(t[7]=c=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementResizeStart:c=>{e.startScaling(v.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementResize:c=>e.resizeMediaElementInsidePreview(R.id,v.id,c),onMediaElementResizeStop:t[8]||(t[8]=c=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementRotateStart:c=>{e.rotateMediaElementInsidePreviewStart(R.id,v.id),e.canvasSnapStartRotating(v.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementRotate:c=>e.rotateMediaElementInsidePreview(R.id,v.id,c),onMediaElementRotateStop:c=>{e.rotateMediaElementInsidePreviewStop(R.id,v.id),e.canvasSnapStop(),e.saveProject()},onUiInteractionStart:e.selectAtopElement,onMediaElementMounted:c=>e.trackElementsMediaElements.set(v.id,c),onMediaElementUnmounted:c=>e.trackElementsMediaElements.delete(v.id),onOpenCropTab:t[9]||(t[9]=c=>e.openCropTab())},null,8,["track-element-id","variant","is-selected","source","converted-source","converted-source-type","mime-type","preview-image","position-start-x","position-start-y","position-finish-x","position-finish-y","content-start-x","content-start-y","content-finish-x","content-finish-y","content-rotate-angle","crop-strategy","media-width","media-height","playback-start-time","playback-length","trim-from-start-time","current-time","is-playing","is-force-active","player-size-width","player-size-height","is-flip-x-applied","is-flip-y-applied","adjust-opacity","adjust-hue","adjust-saturation","adjust-brightness","adjust-contrast","adjust-blur","rotate-angle","volume","basic-speed","drag-resize-rotate-event-target","base-abstract-width-for-scale-blur","is-should-loop","loop-cycle-length","is-noise-reduced","rnnoise-adapter","style","crop-emitter","onMediaElementSelect","onMediaElementDragStart","onMediaElementDrag","onMediaElementResizeStart","onMediaElementResize","onMediaElementRotateStart","onMediaElementRotate","onMediaElementRotateStop","onUiInteractionStart","onMediaElementMounted","onMediaElementUnmounted"])):v.type==="image"?(d(),S(j,{key:1,variant:e.isInCropMode?"crop-preview":"smart-transform","is-selected":e.trackElementSelectionViewModel.isSingleSelected(v.id),"is-force-active":v.id===e.forceVisibleTrackElementId,source:v.mediaElement.location,"converted-source":v.mediaElement.convertedLocation,"position-start-x":v.playerOptions.positionStartX,"position-start-y":v.playerOptions.positionStartY,"position-finish-x":v.playerOptions.positionFinishX,"position-finish-y":v.playerOptions.positionFinishY,"content-start-x":v.playerOptions.contentStartX,"content-start-y":v.playerOptions.contentStartY,"content-finish-x":v.playerOptions.contentFinishX,"content-finish-y":v.playerOptions.contentFinishY,"content-rotate-angle":v.playerOptions.contentRotateAngle,"crop-strategy":v.playerOptions.cropStrategy,"media-width":v.mediaElement.width,"media-height":v.mediaElement.height,"playback-start-time":v.timelineOptions.playbackStartTime,"playback-length":v.timelineOptions.length,"current-time":e.timelineCurrentTime,"player-size-width":e.playerLayoutSize.width,"player-size-height":e.playerLayoutSize.height,"is-flip-x-applied":v.imageOptions.isFlipXApplied,"is-flip-y-applied":v.imageOptions.isFlipYApplied,"adjust-opacity":v.imageOptions.adjustOpacity,"adjust-hue":v.imageOptions.adjustHue,"adjust-saturation":v.imageOptions.adjustSaturation,"adjust-brightness":v.imageOptions.adjustBrightness,"adjust-contrast":v.imageOptions.adjustContrast,"adjust-blur":v.imageOptions.adjustBlur,"rotate-angle":v.imageOptions.rotateAngle,"drag-resize-rotate-event-target":e.trackElementsEventEmitters.get(v.id),"base-abstract-width-for-scale-blur":e.baseAbstractWidthForScaleBlur,"crop-emitter":e.cropEmitter,style:z(e.trackElementSelectionViewModel.isSelected(v.id)?{}:{opacity:0,pointerEvents:"none"}),onMediaElementSelect:c=>e.trackElementSelectionViewModel.selectSingle(v.id),onMediaElementDragStart:c=>{e.canvasSnapStartMoving(v.id),e.undoRedoRecordCurrentState()},onMediaElementDrag:c=>e.dragMediaElementInsidePreview(R.id,v.id,c),onMediaElementDragStop:t[10]||(t[10]=c=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementResizeStart:c=>{e.startScaling(v.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementResize:c=>e.resizeMediaElementInsidePreview(R.id,v.id,c),onMediaElementResizeStop:t[11]||(t[11]=c=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementRotateStart:c=>{e.rotateMediaElementInsidePreviewStart(R.id,v.id),e.canvasSnapStartRotating(v.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementRotate:c=>e.rotateMediaElementInsidePreview(R.id,v.id,c),onMediaElementRotateStop:c=>{e.rotateMediaElementInsidePreviewStop(R.id,v.id),e.canvasSnapStop(),e.saveProject()},onUiInteractionStart:e.selectAtopElement,onMediaElementMounted:c=>e.trackElementsMediaElements.set(v.id,c),onMediaElementUnmounted:c=>e.trackElementsMediaElements.delete(v.id),onOpenCropTab:t[12]||(t[12]=c=>e.openCropTab())},null,8,["variant","is-selected","is-force-active","source","converted-source","position-start-x","position-start-y","position-finish-x","position-finish-y","content-start-x","content-start-y","content-finish-x","content-finish-y","content-rotate-angle","crop-strategy","media-width","media-height","playback-start-time","playback-length","current-time","player-size-width","player-size-height","is-flip-x-applied","is-flip-y-applied","adjust-opacity","adjust-hue","adjust-saturation","adjust-brightness","adjust-contrast","adjust-blur","rotate-angle","drag-resize-rotate-event-target","base-abstract-width-for-scale-blur","crop-emitter","style","onMediaElementSelect","onMediaElementDragStart","onMediaElementDrag","onMediaElementResizeStart","onMediaElementResize","onMediaElementRotateStart","onMediaElementRotate","onMediaElementRotateStop","onUiInteractionStart","onMediaElementMounted","onMediaElementUnmounted"])):E("",!0),v.type==="video"?(d(),S(P,{key:2,"track-element-id":v.id,variant:e.isInCropMode?"crop-box":"smart-transform","is-selected":e.trackElementSelectionViewModel.isSingleSelected(v.id),source:v.mediaElement.location,"converted-source":v.mediaElement.convertedWebmLocation!==void 0&&e.isTransparentWebmSupports?v.mediaElement.convertedWebmLocation:v.mediaElement.convertedLocation,"converted-source-type":v.mediaElement.convertedWebmLocation!==void 0&&e.isTransparentWebmSupports?"video/webm":"video/mp4","mime-type":v.mediaElement.mimeType,"preview-image":v.mediaElement.previewImage,"position-start-x":v.playerOptions.positionStartX,"position-start-y":v.playerOptions.positionStartY,"position-finish-x":v.playerOptions.positionFinishX,"position-finish-y":v.playerOptions.positionFinishY,"content-start-x":v.playerOptions.contentStartX,"content-start-y":v.playerOptions.contentStartY,"content-finish-x":v.playerOptions.contentFinishX,"content-finish-y":v.playerOptions.contentFinishY,"content-rotate-angle":v.playerOptions.contentRotateAngle,"crop-strategy":v.playerOptions.cropStrategy,"media-width":v.mediaElement.width,"media-height":v.mediaElement.height,"playback-start-time":v.timelineOptions.playbackStartTime,"playback-length":v.timelineOptions.length,"trim-from-start-time":v.timelineOptions.trimFromStartTime,"current-time":e.timelineCurrentTime,"is-playing":e.isPlaying,"is-force-active":v.id===e.forceVisibleTrackElementId,"player-size-width":e.playerLayoutSize.width,"player-size-height":e.playerLayoutSize.height,"is-flip-x-applied":v.videoOptions.isFlipXApplied,"is-flip-y-applied":v.videoOptions.isFlipYApplied,"adjust-opacity":v.videoOptions.adjustOpacity,"adjust-hue":v.videoOptions.adjustHue,"adjust-saturation":v.videoOptions.adjustSaturation,"adjust-brightness":v.videoOptions.adjustBrightness,"adjust-contrast":v.videoOptions.adjustContrast,"adjust-blur":v.videoOptions.adjustBlur,"rotate-angle":v.videoOptions.rotateAngle,volume:v.videoOptions.volume,"basic-speed":v.videoOptions.basicSpeed,"drag-resize-rotate-event-target":e.trackElementsEventEmitters.get(v.id),"base-abstract-width-for-scale-blur":e.baseAbstractWidthForScaleBlur,"is-should-loop":e.isTrackElementLoopableAnimatedImage(v),"loop-cycle-length":v.mediaElement.duration,"is-noise-reduced":v.videoOptions.isNoiseReduced,"rnnoise-adapter":e.rnnoiseAdapter,"is-crop-master":!1,style:z(e.trackElementSelectionViewModel.isSelected(v.id)?{}:{opacity:0,pointerEvents:"none"}),"crop-emitter":e.cropEmitter,onMediaElementSelect:c=>e.trackElementSelectionViewModel.selectSingle(v.id),onMediaElementDragStart:c=>{e.canvasSnapStartMoving(v.id),e.undoRedoRecordCurrentState()},onMediaElementDrag:c=>e.dragMediaElementInsidePreview(R.id,v.id,c),onMediaElementDragStop:t[13]||(t[13]=c=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementResizeStart:c=>{e.startScaling(v.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementResize:c=>e.resizeMediaElementInsidePreview(R.id,v.id,c),onMediaElementResizeStop:t[14]||(t[14]=c=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementRotateStart:c=>{e.rotateMediaElementInsidePreviewStart(R.id,v.id),e.canvasSnapStartRotating(v.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementRotate:c=>e.rotateMediaElementInsidePreview(R.id,v.id,c),onMediaElementRotateStop:c=>{e.rotateMediaElementInsidePreviewStop(R.id,v.id),e.canvasSnapStop(),e.saveProject()},onUiInteractionStart:e.selectAtopElement},null,8,["track-element-id","variant","is-selected","source","converted-source","converted-source-type","mime-type","preview-image","position-start-x","position-start-y","position-finish-x","position-finish-y","content-start-x","content-start-y","content-finish-x","content-finish-y","content-rotate-angle","crop-strategy","media-width","media-height","playback-start-time","playback-length","trim-from-start-time","current-time","is-playing","is-force-active","player-size-width","player-size-height","is-flip-x-applied","is-flip-y-applied","adjust-opacity","adjust-hue","adjust-saturation","adjust-brightness","adjust-contrast","adjust-blur","rotate-angle","volume","basic-speed","drag-resize-rotate-event-target","base-abstract-width-for-scale-blur","is-should-loop","loop-cycle-length","is-noise-reduced","rnnoise-adapter","style","crop-emitter","onMediaElementSelect","onMediaElementDragStart","onMediaElementDrag","onMediaElementResizeStart","onMediaElementResize","onMediaElementRotateStart","onMediaElementRotate","onMediaElementRotateStop","onUiInteractionStart"])):v.type==="image"?(d(),S(j,{key:3,variant:e.isInCropMode?"crop-box":"smart-transform","is-selected":e.trackElementSelectionViewModel.isSingleSelected(v.id),"is-force-active":v.id===e.forceVisibleTrackElementId,source:v.mediaElement.location,"converted-source":v.mediaElement.convertedLocation,"position-start-x":v.playerOptions.positionStartX,"position-start-y":v.playerOptions.positionStartY,"position-finish-x":v.playerOptions.positionFinishX,"position-finish-y":v.playerOptions.positionFinishY,"content-start-x":v.playerOptions.contentStartX,"content-start-y":v.playerOptions.contentStartY,"content-finish-x":v.playerOptions.contentFinishX,"content-finish-y":v.playerOptions.contentFinishY,"content-rotate-angle":v.playerOptions.contentRotateAngle,"crop-strategy":v.playerOptions.cropStrategy,"media-width":v.mediaElement.width,"media-height":v.mediaElement.height,"playback-start-time":v.timelineOptions.playbackStartTime,"playback-length":v.timelineOptions.length,"current-time":e.timelineCurrentTime,"player-size-width":e.playerLayoutSize.width,"player-size-height":e.playerLayoutSize.height,"is-flip-x-applied":v.imageOptions.isFlipXApplied,"is-flip-y-applied":v.imageOptions.isFlipYApplied,"adjust-opacity":v.imageOptions.adjustOpacity,"adjust-hue":v.imageOptions.adjustHue,"adjust-saturation":v.imageOptions.adjustSaturation,"adjust-brightness":v.imageOptions.adjustBrightness,"adjust-contrast":v.imageOptions.adjustContrast,"adjust-blur":v.imageOptions.adjustBlur,"rotate-angle":v.imageOptions.rotateAngle,"drag-resize-rotate-event-target":e.trackElementsEventEmitters.get(v.id),"base-abstract-width-for-scale-blur":e.baseAbstractWidthForScaleBlur,style:z(e.trackElementSelectionViewModel.isSelected(v.id)?{}:{opacity:0,pointerEvents:"none"}),"crop-emitter":e.cropEmitter,onMediaElementDragStart:c=>{e.canvasSnapStartMoving(v.id),e.undoRedoRecordCurrentState()},onMediaElementSelect:c=>e.trackElementSelectionViewModel.selectSingle(v.id),onMediaElementResizeStart:c=>{e.startScaling(v.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementResize:c=>e.resizeMediaElementInsidePreview(R.id,v.id,c),onMediaElementResizeStop:t[15]||(t[15]=c=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementDragStop:t[16]||(t[16]=c=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementRotateStart:c=>{e.rotateMediaElementInsidePreviewStart(R.id,v.id),e.canvasSnapStartRotating(v.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementRotate:c=>e.rotateMediaElementInsidePreview(R.id,v.id,c),onMediaElementRotateStop:c=>{e.rotateMediaElementInsidePreviewStop(R.id,v.id),e.canvasSnapStop(),e.saveProject()},onUiInteractionStart:e.selectAtopElement},null,8,["variant","is-selected","is-force-active","source","converted-source","position-start-x","position-start-y","position-finish-x","position-finish-y","content-start-x","content-start-y","content-finish-x","content-finish-y","content-rotate-angle","crop-strategy","media-width","media-height","playback-start-time","playback-length","current-time","player-size-width","player-size-height","is-flip-x-applied","is-flip-y-applied","adjust-opacity","adjust-hue","adjust-saturation","adjust-brightness","adjust-contrast","adjust-blur","rotate-angle","drag-resize-rotate-event-target","base-abstract-width-for-scale-blur","style","crop-emitter","onMediaElementDragStart","onMediaElementSelect","onMediaElementResizeStart","onMediaElementResize","onMediaElementRotateStart","onMediaElementRotate","onMediaElementRotateStop","onUiInteractionStart"])):E("",!0)],64))),128))],64))),256))]),default:n(()=>[(d(!0),h(N,null,q(e.reversedTracks,(R,v)=>(d(),h(N,null,[(d(!0),h(N,null,q(R.content,c=>(d(),h(N,{key:`player-element-${c.id}`},[c.type==="video"?(d(),S(P,{key:0,"track-element-id":c.id,variant:"smart-transform","is-selected":e.isInCropMode?!1:e.trackElementSelectionViewModel.isSingleSelected(c.id),source:c.mediaElement.location,"converted-source":c.mediaElement.convertedWebmLocation!==void 0&&e.isTransparentWebmSupports?c.mediaElement.convertedWebmLocation:c.mediaElement.convertedLocation,"converted-source-type":c.mediaElement.convertedWebmLocation!==void 0&&e.isTransparentWebmSupports?"video/webm":"video/mp4","is-rendering-cached-video-blob":!1,"mime-type":c.mediaElement.mimeType,"preview-image":c.mediaElement.previewImage,"position-start-x":c.playerOptions.positionStartX,"position-start-y":c.playerOptions.positionStartY,"position-finish-x":c.playerOptions.positionFinishX,"position-finish-y":c.playerOptions.positionFinishY,"content-start-x":c.playerOptions.contentStartX,"content-start-y":c.playerOptions.contentStartY,"content-finish-x":c.playerOptions.contentFinishX,"content-finish-y":c.playerOptions.contentFinishY,"content-rotate-angle":c.playerOptions.contentRotateAngle,"crop-strategy":c.playerOptions.cropStrategy,"media-width":c.mediaElement.width,"media-height":c.mediaElement.height,"playback-start-time":c.timelineOptions.playbackStartTime,"playback-length":c.timelineOptions.length,"trim-from-start-time":c.timelineOptions.trimFromStartTime,"current-time":e.timelineCurrentTime,"is-playing":e.isPlaying,"is-force-active":c.id===e.forceVisibleTrackElementId,"player-size-width":e.playerLayoutSize.width,"player-size-height":e.playerLayoutSize.height,"is-flip-x-applied":c.videoOptions.isFlipXApplied,"is-flip-y-applied":c.videoOptions.isFlipYApplied,"adjust-opacity":c.videoOptions.adjustOpacity,"adjust-hue":c.videoOptions.adjustHue,"adjust-saturation":c.videoOptions.adjustSaturation,"adjust-brightness":c.videoOptions.adjustBrightness,"adjust-contrast":c.videoOptions.adjustContrast,"adjust-blur":c.videoOptions.adjustBlur,"rotate-angle":c.videoOptions.rotateAngle,volume:c.videoOptions.volume,"basic-speed":c.videoOptions.basicSpeed,"drag-resize-rotate-event-target":e.trackElementsEventEmitters.get(c.id),"base-abstract-width-for-scale-blur":e.baseAbstractWidthForScaleBlur,"is-should-loop":e.isTrackElementLoopableAnimatedImage(c),"loop-cycle-length":c.mediaElement.duration,"is-noise-reduced":c.videoOptions.isNoiseReduced,"rnnoise-adapter":e.rnnoiseAdapter,"is-crop-master":!0,"crop-emitter":e.cropEmitter,onMediaElementSelect:O=>e.trackElementSelectionViewModel.selectSingle(c.id),onMediaElementDragStart:O=>{e.canvasSnapStartMoving(c.id),e.undoRedoRecordCurrentState()},onMediaElementDrag:O=>e.dragMediaElementInsidePreview(R.id,c.id,O),onMediaElementDragStop:t[17]||(t[17]=O=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementResizeStart:O=>{e.startScaling(c.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementResize:O=>e.resizeMediaElementInsidePreview(R.id,c.id,O),onMediaElementResizeStop:t[18]||(t[18]=O=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementRotateStart:O=>{e.rotateMediaElementInsidePreviewStart(R.id,c.id),e.canvasSnapStartRotating(c.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementRotate:O=>e.rotateMediaElementInsidePreview(R.id,c.id,O),onMediaElementRotateStop:O=>{e.rotateMediaElementInsidePreviewStop(R.id,c.id),e.canvasSnapStop(),e.saveProject()},onUiInteractionStart:e.selectAtopElement,onMediaElementMounted:O=>e.trackElementsMediaElements.set(c.id,O),onMediaElementUnmounted:O=>e.trackElementsMediaElements.delete(c.id),onOpenCropTab:t[19]||(t[19]=O=>e.openCropTab())},null,8,["track-element-id","is-selected","source","converted-source","converted-source-type","mime-type","preview-image","position-start-x","position-start-y","position-finish-x","position-finish-y","content-start-x","content-start-y","content-finish-x","content-finish-y","content-rotate-angle","crop-strategy","media-width","media-height","playback-start-time","playback-length","trim-from-start-time","current-time","is-playing","is-force-active","player-size-width","player-size-height","is-flip-x-applied","is-flip-y-applied","adjust-opacity","adjust-hue","adjust-saturation","adjust-brightness","adjust-contrast","adjust-blur","rotate-angle","volume","basic-speed","drag-resize-rotate-event-target","base-abstract-width-for-scale-blur","is-should-loop","loop-cycle-length","is-noise-reduced","rnnoise-adapter","crop-emitter","onMediaElementSelect","onMediaElementDragStart","onMediaElementDrag","onMediaElementResizeStart","onMediaElementResize","onMediaElementRotateStart","onMediaElementRotate","onMediaElementRotateStop","onUiInteractionStart","onMediaElementMounted","onMediaElementUnmounted"])):c.type==="audio"||c.type==="tts"?(d(),S(B,{key:1,source:c.mediaElement.location,"converted-source":c.mediaElement.convertedLocation,"playback-start-time":c.timelineOptions.playbackStartTime,"playback-length":c.timelineOptions.length,"trim-from-start-time":c.timelineOptions.trimFromStartTime,"current-time":e.timelineCurrentTime,"is-playing":e.isPlaying,"is-force-active":c.id===e.forceVisibleTrackElementId,volume:c.audioOptions.volume,"volume-fade-in-time":c.audioOptions.volumeFadeInTime,"volume-fade-out-time":c.audioOptions.volumeFadeOutTime,"is-noise-reduced":c.audioOptions.isNoiseReduced,"rnnoise-adapter":e.rnnoiseAdapter,"basic-speed":c.audioOptions.basicSpeed},null,8,["source","converted-source","playback-start-time","playback-length","trim-from-start-time","current-time","is-playing","is-force-active","volume","volume-fade-in-time","volume-fade-out-time","is-noise-reduced","rnnoise-adapter","basic-speed"])):c.type==="image"?(d(),S(j,{key:2,variant:"smart-transform","is-selected":e.isInCropMode?!1:e.trackElementSelectionViewModel.isSingleSelected(c.id),"is-force-active":c.id===e.forceVisibleTrackElementId,source:c.mediaElement.location,"converted-source":c.mediaElement.convertedLocation,"position-start-x":c.playerOptions.positionStartX,"position-start-y":c.playerOptions.positionStartY,"position-finish-x":c.playerOptions.positionFinishX,"position-finish-y":c.playerOptions.positionFinishY,"content-start-x":c.playerOptions.contentStartX,"content-start-y":c.playerOptions.contentStartY,"content-finish-x":c.playerOptions.contentFinishX,"content-finish-y":c.playerOptions.contentFinishY,"content-rotate-angle":c.playerOptions.contentRotateAngle,"crop-strategy":c.playerOptions.cropStrategy,"media-width":c.mediaElement.width,"media-height":c.mediaElement.height,"playback-start-time":c.timelineOptions.playbackStartTime,"playback-length":c.timelineOptions.length,"current-time":e.timelineCurrentTime,"player-size-width":e.playerLayoutSize.width,"player-size-height":e.playerLayoutSize.height,"is-flip-x-applied":c.imageOptions.isFlipXApplied,"is-flip-y-applied":c.imageOptions.isFlipYApplied,"adjust-opacity":c.imageOptions.adjustOpacity,"adjust-hue":c.imageOptions.adjustHue,"adjust-saturation":c.imageOptions.adjustSaturation,"adjust-brightness":c.imageOptions.adjustBrightness,"adjust-contrast":c.imageOptions.adjustContrast,"adjust-blur":c.imageOptions.adjustBlur,"rotate-angle":c.imageOptions.rotateAngle,"drag-resize-rotate-event-target":e.trackElementsEventEmitters.get(c.id),"base-abstract-width-for-scale-blur":e.baseAbstractWidthForScaleBlur,"crop-emitter":e.cropEmitter,onMediaElementSelect:O=>e.trackElementSelectionViewModel.selectSingle(c.id),onMediaElementDragStart:O=>{e.canvasSnapStartMoving(c.id),e.undoRedoRecordCurrentState()},onMediaElementDrag:O=>e.dragMediaElementInsidePreview(R.id,c.id,O),onMediaElementDragStop:t[20]||(t[20]=O=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementResizeStart:O=>{e.startScaling(c.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementResize:O=>e.resizeMediaElementInsidePreview(R.id,c.id,O),onMediaElementResizeStop:t[21]||(t[21]=O=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementRotateStart:O=>{e.rotateMediaElementInsidePreviewStart(R.id,c.id),e.canvasSnapStartRotating(c.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementRotate:O=>e.rotateMediaElementInsidePreview(R.id,c.id,O),onMediaElementRotateStop:O=>{e.rotateMediaElementInsidePreviewStop(R.id,c.id),e.canvasSnapStop(),e.saveProject()},onUiInteractionStart:e.selectAtopElement,onMediaElementMounted:O=>e.trackElementsMediaElements.set(c.id,O),onMediaElementUnmounted:O=>e.trackElementsMediaElements.delete(c.id),onOpenCropTab:t[22]||(t[22]=O=>e.openCropTab())},null,8,["is-selected","is-force-active","source","converted-source","position-start-x","position-start-y","position-finish-x","position-finish-y","content-start-x","content-start-y","content-finish-x","content-finish-y","content-rotate-angle","crop-strategy","media-width","media-height","playback-start-time","playback-length","current-time","player-size-width","player-size-height","is-flip-x-applied","is-flip-y-applied","adjust-opacity","adjust-hue","adjust-saturation","adjust-brightness","adjust-contrast","adjust-blur","rotate-angle","drag-resize-rotate-event-target","base-abstract-width-for-scale-blur","crop-emitter","onMediaElementSelect","onMediaElementDragStart","onMediaElementDrag","onMediaElementResizeStart","onMediaElementResize","onMediaElementRotateStart","onMediaElementRotate","onMediaElementRotateStop","onUiInteractionStart","onMediaElementMounted","onMediaElementUnmounted"])):c.type==="text"?(d(),S(Y,{key:3,"is-selected":e.trackElementSelectionViewModel.isSingleSelected(c.id),"is-force-active":c.id===e.forceVisibleTrackElementId,content:c.textOptions.textContent,"position-start-x":c.playerOptions.positionStartX,"position-start-y":c.playerOptions.positionStartY,"position-finish-x":c.playerOptions.positionFinishX,"position-finish-y":c.playerOptions.positionFinishY,"playback-start-time":c.timelineOptions.playbackStartTime,"playback-length":c.timelineOptions.length,"current-time":e.timelineCurrentTime,"player-size-width":e.playerLayoutSize.width,"player-size-height":e.playerLayoutSize.height,"text-color":c.textOptions.textColor,"text-font-face":c.textOptions.fontFace,"text-font-style":c.textOptions.fontStyle,"text-font-weight":c.textOptions.fontWeight,"text-font-families-predicted":c.textOptions.fontFamiliesPredicted,"text-align":c.textOptions.align,"justify-content":c.textOptions.justify,"is-text-underlined":c.textOptions.isUnderlined,"is-in-uppercase":c.textOptions.isInUppercase,"text-relative-font-size":c.textOptions.relativeFontSize,"text-line-height":c.textOptions.lineHeight,"text-relative-letter-spacing":c.textOptions.relativeLetterSpacing,"outline-color":c.textOptions.outlineColor,"outline-width":c.textOptions.outlineWidth,"background-color":c.textOptions.backgroundFill,"background-border-radius":c.textOptions.backgroundBorderRadius,"box-to-background-gap":c.textOptions.boxToBackgroundGap,"background-to-text-gap":c.textOptions.backgroundToTextGap,"rotate-angle":c.textOptions.rotateAngle,opacity:c.textOptions.opacity,"drag-resize-rotate-event-target":e.trackElementsEventEmitters.get(c.id),"data-testid":`player-element-${v}-${c.testIdIndex}`,onMediaElementSelect:O=>e.trackElementSelectionViewModel.selectSingle(c.id),onMediaElementDragStart:O=>{e.canvasSnapStartMoving(c.id),e.undoRedoRecordCurrentState()},onMediaElementDrag:O=>e.dragMediaElementInsidePreview(R.id,c.id,O),onMediaElementDragStop:t[23]||(t[23]=O=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementResizeStart:O=>{e.startScaling(c.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementResize:O=>e.resizeMediaElementInsidePreview(R.id,c.id,O),onMediaElementResizeStop:t[24]||(t[24]=O=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementRotateStart:O=>{e.canvasSnapStartRotating(c.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementRotate:O=>e.rotateTextElementInsidePreview(R.id,c.id,O),onMediaElementRotateStop:t[25]||(t[25]=O=>{e.canvasSnapStop(),e.saveProject()}),onTextComputedStylesUpdate:O=>e.textElementUpdateComputedStyles(R.id,c.id,O),onUiInteractionStart:e.selectAtopElement},null,8,["is-selected","is-force-active","content","position-start-x","position-start-y","position-finish-x","position-finish-y","playback-start-time","playback-length","current-time","player-size-width","player-size-height","text-color","text-font-face","text-font-style","text-font-weight","text-font-families-predicted","text-align","justify-content","is-text-underlined","is-in-uppercase","text-relative-font-size","text-line-height","text-relative-letter-spacing","outline-color","outline-width","background-color","background-border-radius","box-to-background-gap","background-to-text-gap","rotate-angle","opacity","drag-resize-rotate-event-target","data-testid","onMediaElementSelect","onMediaElementDragStart","onMediaElementDrag","onMediaElementResizeStart","onMediaElementResize","onMediaElementRotateStart","onMediaElementRotate","onTextComputedStylesUpdate","onUiInteractionStart"])):c.type==="shape"?(d(),S(ve,{key:4,"is-selected":e.trackElementSelectionViewModel.isSingleSelected(c.id),"is-force-active":c.id===e.forceVisibleTrackElementId,"element-id":c.shapeOptions.elementId,"position-start-x":c.playerOptions.positionStartX,"position-start-y":c.playerOptions.positionStartY,"position-finish-x":c.playerOptions.positionFinishX,"position-finish-y":c.playerOptions.positionFinishY,"playback-start-time":c.timelineOptions.playbackStartTime,"playback-length":c.timelineOptions.length,"current-time":e.timelineCurrentTime,"player-size-width":e.playerLayoutSize.width,"player-size-height":e.playerLayoutSize.height,"is-flip-x-applied":c.shapeOptions.isFlipXApplied,"is-flip-y-applied":c.shapeOptions.isFlipYApplied,"background-color":c.shapeOptions.backgroundFill,"rotate-angle":c.shapeOptions.rotateAngle,opacity:c.shapeOptions.opacity,"base-abstract-width-for-scale-blur":e.baseAbstractWidthForScaleBlur,"drag-resize-rotate-event-target":e.trackElementsEventEmitters.get(c.id),"shape-source-base-url":e.$appConfig.shapeSourceBaseUrl,"emoji-source-base-url":e.$appConfig.emojiSourceBaseUrl,onMediaElementSelect:O=>e.trackElementSelectionViewModel.selectSingle(c.id),onMediaElementDragStart:O=>{e.canvasSnapStartMoving(c.id),e.undoRedoRecordCurrentState()},onMediaElementDrag:O=>e.dragMediaElementInsidePreview(R.id,c.id,O),onMediaElementDragStop:t[26]||(t[26]=O=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementResizeStart:O=>{e.startScaling(c.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementResize:O=>e.resizeMediaElementInsidePreview(R.id,c.id,O),onMediaElementResizeStop:t[27]||(t[27]=O=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementRotateStart:O=>{e.canvasSnapStartRotating(c.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementRotate:O=>e.rotateMediaElementInsidePreview(R.id,c.id,O),onMediaElementRotateStop:t[28]||(t[28]=O=>{e.canvasSnapStop(),e.saveProject()}),onUiInteractionStart:e.selectAtopElement},null,8,["is-selected","is-force-active","element-id","position-start-x","position-start-y","position-finish-x","position-finish-y","playback-start-time","playback-length","current-time","player-size-width","player-size-height","is-flip-x-applied","is-flip-y-applied","background-color","rotate-angle","opacity","base-abstract-width-for-scale-blur","drag-resize-rotate-event-target","shape-source-base-url","emoji-source-base-url","onMediaElementSelect","onMediaElementDragStart","onMediaElementDrag","onMediaElementResizeStart","onMediaElementResize","onMediaElementRotateStart","onMediaElementRotate","onUiInteractionStart"])):c.type==="emoji"?(d(),S(x,{key:5,"is-selected":e.trackElementSelectionViewModel.isSingleSelected(c.id),"is-force-active":c.id===e.forceVisibleTrackElementId,"element-id":c.emojiOptions.elementId,"position-start-x":c.playerOptions.positionStartX,"position-start-y":c.playerOptions.positionStartY,"position-finish-x":c.playerOptions.positionFinishX,"position-finish-y":c.playerOptions.positionFinishY,"playback-start-time":c.timelineOptions.playbackStartTime,"playback-length":c.timelineOptions.length,"current-time":e.timelineCurrentTime,"player-size-width":e.playerLayoutSize.width,"player-size-height":e.playerLayoutSize.height,"is-flip-x-applied":c.emojiOptions.isFlipXApplied,"is-flip-y-applied":c.emojiOptions.isFlipYApplied,"adjust-opacity":c.emojiOptions.adjustOpacity,"adjust-hue":c.emojiOptions.adjustHue,"adjust-saturation":c.emojiOptions.adjustSaturation,"adjust-brightness":c.emojiOptions.adjustBrightness,"adjust-contrast":c.emojiOptions.adjustContrast,"adjust-blur":c.emojiOptions.adjustBlur,"rotate-angle":c.emojiOptions.rotateAngle,"base-abstract-width-for-scale-blur":e.baseAbstractWidthForScaleBlur,"drag-resize-rotate-event-target":e.trackElementsEventEmitters.get(c.id),"shape-source-base-url":e.$appConfig.shapeSourceBaseUrl,"emoji-source-base-url":e.$appConfig.emojiSourceBaseUrl,onMediaElementSelect:O=>e.trackElementSelectionViewModel.selectSingle(c.id),onMediaElementDragStart:O=>{e.canvasSnapStartMoving(c.id),e.undoRedoRecordCurrentState()},onMediaElementDrag:O=>e.dragMediaElementInsidePreview(R.id,c.id,O),onMediaElementDragStop:t[29]||(t[29]=O=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementResizeStart:O=>{e.startScaling(c.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementResize:O=>e.resizeMediaElementInsidePreview(R.id,c.id,O),onMediaElementResizeStop:t[30]||(t[30]=O=>{e.canvasSnapStop(),e.saveProject()}),onMediaElementRotateStart:O=>{e.canvasSnapStartRotating(c.id),e.undoRedoRecordCurrentState(),e.stopPlay()},onMediaElementRotate:O=>e.rotateMediaElementInsidePreview(R.id,c.id,O),onMediaElementRotateStop:t[31]||(t[31]=O=>{e.canvasSnapStop(),e.saveProject()}),onClick:t[32]||(t[32]=O=>e.focusConsoleSettingsShapeOnDoubleClick(O)),onUiInteractionStart:e.selectAtopElement},null,8,["is-selected","is-force-active","element-id","position-start-x","position-start-y","position-finish-x","position-finish-y","playback-start-time","playback-length","current-time","player-size-width","player-size-height","is-flip-x-applied","is-flip-y-applied","adjust-opacity","adjust-hue","adjust-saturation","adjust-brightness","adjust-contrast","adjust-blur","rotate-angle","base-abstract-width-for-scale-blur","drag-resize-rotate-event-target","shape-source-base-url","emoji-source-base-url","onMediaElementSelect","onMediaElementDragStart","onMediaElementDrag","onMediaElementResizeStart","onMediaElementResize","onMediaElementRotateStart","onMediaElementRotate","onUiInteractionStart"])):E("",!0)],64))),128))],64))),256))]),_:2},[e.preloadersInPlayer.length>0?{name:"preloader",fn:n(()=>[r(m,{symbol:"loading-spinner-stocks",width:14,height:14})]),key:"0"}:void 0]),1032,["is-play-available","is-playing","aspect-ratio-value","background-color","is-fullscreen-button-disabled","is-fullscreen-enabled","is-in-crop-mode","onTogglePlay","onPlayerLayoutResize"])]),"options-panel":n(R=>[e.appLayout==="desktop"||e.appLayout===void 0?(d(),S(ws,{key:0,"active-tab":e.navigationState.mainTab,variant:e.mediaCollection.length===0&&e.navigationState.mainTab==="tab-media"?"dashed":"solid","is-menu-extended-height":e.isConsoleMenuHeightExtended,"fixed-height":R.consoleMenuFixedHeight,onSetRawMenuHeight:R.setMenuHeight,onClick:t[117]||(t[117]=v=>{e.unselectGaps()})},G({upload:n(()=>[r(ce,{offset:-7,align:"right"},{text:n(()=>[y(g(e.$t("editor.console.upload")),1)]),anchor:n(()=>[r(it,{"allowed-extensions":e.fileExtensionsAllowedToUpload,onMediaFilesAddFromLocal:t[38]||(t[38]=v=>e.addMediaElementsFromFilesystem(v))},null,8,["allowed-extensions"])]),_:1})]),buttons:n(()=>[r(me,{"is-active":e.navigationState.mainTab==="tab-media","data-testid":"console-menu-button-media",onClick:t[39]||(t[39]=v=>e.switchNavigationMainTab("tab-media"))},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-media","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.media")),1)]),_:1},8,["is-active"]),r(me,{"is-active":e.navigationState.mainTab==="tab-canvas-settings","data-testid":"console-menu-button-aspect-settings",onClick:t[40]||(t[40]=v=>e.switchNavigationMainTab("tab-canvas-settings"))},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-settings","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.settings")),1)]),_:1},8,["is-active"]),r(me,{"is-active":e.navigationState.mainTab==="tab-text","data-testid":"console-menu-button-text",onClick:t[41]||(t[41]=v=>e.switchNavigationMainTab("tab-text"))},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-text","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.text")),1)]),_:1},8,["is-active"]),r(me,{"is-active":e.navigationState.mainTab==="tab-stock-audio","data-testid":"console-menu-button-stock-audio",onClick:t[42]||(t[42]=v=>e.switchNavigationMainTab("tab-stock-audio"))},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-stock-audio","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.audio")),1)]),_:1},8,["is-active"]),e.isFeatureStocksVideoImageEnabled?(d(),S(me,{key:0,"is-active":e.navigationState.mainTab==="tab-stock-video","data-testid":"console-menu-button-stock-video",onClick:t[43]||(t[43]=v=>e.switchNavigationMainTab("tab-stock-video"))},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-stock-videos","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.videos")),1)]),_:1},8,["is-active"])):E("",!0),e.isFeatureStocksVideoImageEnabled?(d(),S(me,{key:1,"is-active":e.navigationState.mainTab==="tab-stock-image","data-testid":"console-menu-button-stock-image",onClick:t[44]||(t[44]=v=>e.switchNavigationMainTab("tab-stock-image"))},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-stock-images","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.images")),1)]),_:1},8,["is-active"])):E("",!0),r(me,{"is-active":e.navigationState.mainTab==="tab-elements","data-testid":"console-menu-button-elements",onClick:t[45]||(t[45]=v=>e.switchNavigationMainTab("tab-elements"))},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-elements","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.elements")),1)]),_:1},8,["is-active"]),r(me,{"is-active":e.navigationState.mainTab==="tab-recording","data-testid":"console-menu-button-recording",onClick:t[46]||(t[46]=v=>e.switchNavigationMainTab("tab-recording"))},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-recording","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.recording")),1)]),_:1},8,["is-active"]),r(me,{"is-active":e.navigationState.mainTab==="tab-tts","data-testid":"console-menu-button-tts",onClick:t[47]||(t[47]=v=>e.switchNavigationMainTab("tab-tts"))},{icon:n(()=>[r(m,{symbol:"media-tts","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.TTS")),1)]),_:1},8,["is-active"])]),content:n(v=>[e.canCrop&&e.trackElementSelectionViewModel.getFirstSelectedTrackElement()!==void 0&&e.navigationState.mainTab==="tab-crop"?(d(),S(ne,{key:0,"rotate-angle":-e.trackElementSelectionViewModel.ensureFirstSelectedTrackElement().playerOptions.contentRotateAngle,strategy:e.trackElementSelectionViewModel.ensureFirstSelectedTrackElement().playerOptions.cropStrategy,"is-mobile":e.isMobileLayout,"crop-emitter":e.cropEmitter,onApply:t[48]||(t[48]=c=>e.trackElementSelectionViewModel.switchBackFromCropPaneTab()),onRevertToOriginal:e.trackElementCropRevertToOriginal,onStrategyChange:e.trackElementCropSetStrategy,onRotateAngleChangeStart:t[49]||(t[49]=c=>{e.rotateActiveMediaElementInsidePreviewStart(),e.undoRedoRecordCurrentState()}),onRotateAngleChange:e.trackElementCropSetRotateAngle,onRotateAngleChangeFinish:t[50]||(t[50]=c=>{e.rotateActiveMediaElementInsidePreviewStop(),e.saveProject()})},null,8,["rotate-angle","strategy","is-mobile","crop-emitter","onRevertToOriginal","onStrategyChange","onRotateAngleChange"])):E("",!0),e.trackElementSelectionViewModel.hasSelectedMany()&&!e.trackElementSelectionViewModel.isSelectedHasSameType()?(d(),S(gt,{key:1,count:e.trackElementSelectionViewModel.getSelectedTrackElementsCount()},null,8,["count"])):E("",!0),e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-media"?(d(),h(N,{key:2},[e.mediaCollection.length>0?(d(),S(Co,{key:0,"item-variant":"media"},G({_:2},[q(e.mediaCollection,(c,O)=>({name:`${O}-${c.id}`,fn:n(()=>[c.status==="initializing"?(d(),S(Gt,{key:`media-element-placeholder-${c.id}-creation-date-${c.creationDate}`,name:c.fileName,"preview-aspect-ratio":"120:80",status:"initializing","data-testid":`console-media-element-${O}`},{"remove-button":n(()=>[r(f,{"fixed-width":24,"fixed-height":24,variant:"shaded",onClick:he=>e.openDeleteMediaElementModal([c.id])},{default:n(()=>[r(m,{width:16,height:16,symbol:"trash","is-block":""})]),_:2},1032,["onClick"])]),_:2},1032,["name","data-testid"])):(d(),S(Mi,{key:`media-element-${c.id}-creation-date-${c.creationDate}`,"draggable-data":{mediaElementId:c.id,mediaElementType:c.type,duration:c.duration,type:"media-element"},"is-source-element-hiding-required":!1,onBeforeDragStop:t[51]||(t[51]=he=>e.isShouldSimulateDropOnDragEnd?e.simulateDropEvent(he):void 0)},{default:n(he=>[r(Gt,{type:c.type,duration:c.duration,name:c.fileName,"preview-image":c.previewImage||void 0,"upload-progress":c.uploadProgress,"is-playable":c.isPlayable,status:c.status,"is-buttons-hidden":he.isDragging,"preview-aspect-ratio":"120:80","data-testid":`console-media-element-${O}`,"is-audio-from-text":c.ttsOptions!==void 0,onPlayableStatusChange:fe=>fe?he.enableDrag():he.disableDrag(),onClick:fe=>e.addMediaElementByClickOnThumb(c.id)},G({"remove-button":n(()=>[r(f,{"fixed-width":24,"fixed-height":24,variant:"shaded",onClick:_(fe=>e.openDeleteMediaElementModal([c.id]),["stop"])},{default:n(()=>[r(m,{width:16,height:16,symbol:"trash","is-block":""})]),_:2},1032,["onClick"])]),_:2},[c.isPlayable&&e.isTouchDevice?{name:"add-button",fn:n(()=>[r(f,{variant:"accent","fixed-width":24,"fixed-height":24,onClick:fe=>{e.undoRedoRecordCurrentState(),e.addMediaElementsToNewTrackByButton([c.id],!1)}},{default:n(()=>[r(m,{width:10,height:10,symbol:"svg-plus-smooth-xs","is-block":""})]),_:2},1032,["onClick"])]),key:"0"}:void 0]),1032,["type","duration","name","preview-image","upload-progress","is-playable","status","is-buttons-hidden","data-testid","is-audio-from-text","onPlayableStatusChange","onClick"])]),preview:n(()=>[r(Gt,{"is-drag-preview":"",type:c.type,duration:c.duration,name:c.fileName,"preview-image":c.previewImage||void 0,"is-playable":c.isPlayable,"is-audio-from-text":c.ttsOptions!==void 0,"preview-aspect-ratio":"120:80","data-testid":`console-media-element-${O}`},null,8,["type","duration","name","preview-image","is-playable","is-audio-from-text","data-testid"])]),_:2},1032,["draggable-data"]))])}))]),1024)):(d(),S(ys,{key:1,"is-inactive":v.isImportButtonHovered,"allowed-extensions":e.fileExtensionsAllowedToUpload,onMediaFilesAddFromLocal:t[52]||(t[52]=c=>e.addMediaElementsFromFilesystem(c))},null,8,["is-inactive","allowed-extensions"])),r(Ri,{onMouseenter:c=>v.setImportButtonHovered(!0),onMouseleave:c=>v.setImportButtonHovered(!1)},{"1-google-drive":n(()=>[r(ce,{offset:11},{text:n(()=>[e.googlePhotosApiLoadState==="uninitiated"?(d(),h(N,{key:0},[y(g(e.$t("loading")),1)],64)):(d(),h(N,{key:1},[y(g(e.$t("editor.modalUpload.googleDrive")),1)],64))]),anchor:n(()=>[r(oi,{"is-loading":e.googleApiLoadState==="uninitiated","is-disabled":e.googleApiLoadState==="failed","rounded-edges":"left",onClick:t[53]||(t[53]=c=>e.addMediaElementsFromGoogleDrive())},{default:n(()=>[r(m,{symbol:"upload-modal-google-drive-color",width:24,height:24})]),_:1},8,["is-loading","is-disabled"])]),_:1})]),"3-dropbox":n(()=>[r(ce,{offset:11},{text:n(()=>[e.googlePhotosApiLoadState==="uninitiated"?(d(),h(N,{key:0},[y(g(e.$t("loading")),1)],64)):(d(),h(N,{key:1},[y(g(e.$t("editor.modalUpload.dropbox")),1)],64))]),anchor:n(()=>[r(oi,{"is-loading":e.dropboxApiLoadState==="uninitiated","is-disabled":e.dropboxApiLoadState==="failed",onClick:t[54]||(t[54]=c=>e.addMediaElementsFromDropbox())},{default:n(()=>[r(m,{symbol:"upload-modal-dropbox-color",width:24,height:24})]),_:1},8,["is-loading","is-disabled"])]),_:1})]),"4-records":n(()=>[r(ce,{offset:11},{text:n(()=>[y(g(e.$t("editor.console.recording")),1)]),anchor:n(()=>[r(oi,{onClick:c=>{e.switchNavigationMainTab("tab-recording"),v.setImportButtonHovered(!1)}},{default:n(()=>[r(m,{symbol:"svg-records-color",width:24,height:24})]),_:2},1032,["onClick"])]),_:2},1024)]),"5-tts":n(()=>[r(ce,{offset:11},{text:n(()=>[y(g(e.$t("editor.console.textToSpeech")),1)]),anchor:n(()=>[r(oi,{"rounded-edges":"right",onClick:c=>{e.switchNavigationMainTab("tab-tts"),v.setImportButtonHovered(!1)}},{default:n(()=>[r(m,{symbol:"media-tts-color",width:24,height:24})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onMouseenter","onMouseleave"])],64)):E("",!0),e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-text"?(d(),S(Co,{key:3,"item-variant":"text"},G({_:2},[q(e.textElementPresets,(c,O)=>({name:`${O}-${c.type}`,fn:n(()=>[r(Mi,{"draggable-data":{textElementPresetType:c.type,type:"text-element"},"is-source-element-hiding-required":!1,onBeforeDragStop:t[55]||(t[55]=he=>e.isShouldSimulateDropOnDragEnd?e.simulateDropEvent(he):void 0)},{default:n(()=>[r(Pi,{preset:c,"app-layout":e.appLayout,onClick:he=>e.addTextElementByClickOnThumb(c.type)},null,8,["preset","app-layout","onClick"])]),preview:n(()=>[r(Pi,{"is-drag-preview":"",preset:c,"app-layout":e.appLayout},null,8,["preset","app-layout"])]),_:2},1032,["draggable-data"])])}))]),1024)):E("",!0),!e.trackElementSelectionViewModel.hasActive()&&e.navigationState.mainTab==="tab-tts"?(d(),S(ni,{key:4,state:e.textToSpeechStateFragment.state,controller:e.textToSpeechController,"is-moods-enabled":e.backendConfig.isMoodsEnabled,onTtsElementCreate:e.createAudioFromTextTrackElement},null,8,["state","controller","is-moods-enabled","onTtsElementCreate"])):E("",!0),!e.trackElementSelectionViewModel.hasActive()&&e.navigationState.mainTab==="tab-elements"?(d(),S(Es,{key:5,state:e.elementStateFragment.state,controller:e.elementsController,onItemSelect:e.addElementItemToTimeline,onBeforeDragStop:t[56]||(t[56]=c=>e.isShouldSimulateDropOnDragEnd?e.simulateDropEvent(c):void 0)},null,8,["state","controller","onItemSelect"])):E("",!0),!e.trackElementSelectionViewModel.hasSelectedMany()&&e.navigationState.mainTab==="tab-canvas-settings"?(d(),S($o,{key:6},{"aspect-ratio-picker":n(()=>[r(To,{"aspect-ratios":e.canvasAspectRatios,"active-aspect-ratio-id":e.activeAspectRatio.id,onPick:t[57]||(t[57]=c=>{e.undoRedoRecordCurrentState(),e.setActiveAspectRatio(c)})},null,8,["aspect-ratios","active-aspect-ratio-id"])]),"background-picker":n(()=>[r(Ii,{color:e.canvasBackgroundColor,"color-presets":e.canvasBackgroundColorPresets,"is-alpha-enabled":!1,"is-dropdown-visible":e.isDesktopBackgroundColorPickerDropdownVisible,"app-layout":e.appLayout,"default-solid-color":e.$appConfig.defaultCustomColor,"default-gradient-color":e.$appConfig.defaultTextBackgroundColor,"custom-color-pane":"canvas-background-color",onColorChangeStart:e.undoRedoRecordCurrentState,onColorChange:e.canvasBackgroundColorChange,onColorChangeFinish:e.saveProject,onShowColorPicker:t[58]||(t[58]=c=>e.isDesktopBackgroundColorPickerDropdownVisible=!0),onHideColorPicker:t[59]||(t[59]=c=>e.isDesktopBackgroundColorPickerDropdownVisible=!1)},null,8,["color","color-presets","is-dropdown-visible","app-layout","default-solid-color","default-gradient-color","onColorChangeStart","onColorChange","onColorChangeFinish"])]),_:1})):E("",!0),e.trackElementSelectionViewModel.isSelectedHasSameType()&&e.navigationState.mainTab==="tab-settings-video"?(d(),S(Pt,{key:7,onSelectTab:e.switchNavigationVideoSettingsPaneTab},{"tab-buttons":n(({tabClicked:c})=>[r(re,{"is-active":e.navigationState.videoSettingsPaneTab==="tab-transform","data-testid":"desktop-console-video-transform-tab",onClick:O=>c(O,"tab-transform")},{default:n(()=>[y(g(e.$t("editor.videoSettings.transform")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.videoSettingsPaneTab==="tab-adjust","data-testid":"desktop-console-video-adjust-tab",onClick:O=>c(O,"tab-adjust")},{default:n(()=>[y(g(e.$t("editor.videoSettings.adjust")),1)]),_:2},1032,["is-active","onClick"]),e.trackElementSelectionViewModel.isSomeSelectedTrackElementsHasType("image")?E("",!0):(d(),h(N,{key:0},[e.trackElementSelectionViewModel.getSelectedTrackElements().some(O=>O.mediaElement.hasAudio)?(d(),S(re,{key:0,"is-active":e.navigationState.videoSettingsPaneTab==="tab-volume","data-testid":"desktop-console-video-volume-tab",onClick:O=>c(O,"tab-volume")},{default:n(()=>[y(g(e.$t("editor.videoSettings.volume")),1)]),_:2},1032,["is-active","onClick"])):E("",!0),r(re,{"is-active":e.navigationState.videoSettingsPaneTab==="tab-speed","data-testid":"desktop-console-video-speed-tab",onClick:O=>c(O,"tab-speed")},{default:n(()=>[y(g(e.$t("editor.videoSettings.speed")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.videoSettingsPaneTab==="tab-timing","data-testid":"desktop-console-video-timing-tab",onClick:O=>c(O,"tab-timing")},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:2},1032,["is-active","onClick"])],64))]),"tab-content":n(()=>[r(Rt,{"is-full-height":e.navigationState.videoSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.videoSettingsPaneTab==="tab-transform"?(d(),S(ot,{key:0,"rotate-angle":e.trackElementSelectionViewModel.getActiveTrackElement().videoOptions.rotateAngle,"angle-rotator-step":e.$appConfig.angleRotatorStep,"track-element-selection-view-model":e.trackElementSelectionViewModel,"can-crop":e.canCrop,onCropButtonClick:t[60]||(t[60]=c=>{e.stopPlay(),e.openCropTab()}),onFillButtonClick:t[61]||(t[61]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFill(),e.saveProject()}),onFitButtonClick:t[62]||(t[62]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFit(),e.saveProject()}),onFlipHorizontallyButtonClick:t[63]||(t[63]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipHorizontally(),e.saveProject()}),onFlipVerticallyButtonClick:t[64]||(t[64]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipVertically(),e.saveProject()}),onRotateButtonClick:t[65]||(t[65]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotate(),e.saveProject()}),onRotateAngleChange:t[66]||(t[66]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotateAngle(c),e.saveProject()}),onRotateAngleIncrement:t[67]||(t[67]=c=>{e.undoRedoRecordCurrentState(),e.videoElementIncrementTransformRotateAngle(1),e.saveProject()}),onRotateAngleDecrement:t[68]||(t[68]=c=>{e.undoRedoRecordCurrentState(),e.videoElementIncrementTransformRotateAngle(-1),e.saveProject()})},null,8,["rotate-angle","angle-rotator-step","track-element-selection-view-model","can-crop"])):E("",!0),e.navigationState.videoSettingsPaneTab==="tab-adjust"?(d(),S(Mt,{key:1,opacity:e.trackElementSelectionViewModel.getActiveTrackElement().videoOptions.adjustOpacity,hue:e.trackElementSelectionViewModel.getActiveTrackElement().videoOptions.adjustHue,saturation:e.trackElementSelectionViewModel.getActiveTrackElement().videoOptions.adjustSaturation,brightness:e.trackElementSelectionViewModel.getActiveTrackElement().videoOptions.adjustBrightness,contrast:e.trackElementSelectionViewModel.getActiveTrackElement().videoOptions.adjustContrast,blur:e.trackElementSelectionViewModel.getActiveTrackElement().videoOptions.adjustBlur,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-opacity":e.$appConfig.defaultTrackElementVideoOptions.adjustOpacity,"default-hue":e.$appConfig.defaultTrackElementVideoOptions.adjustHue,"default-saturation":e.$appConfig.defaultTrackElementVideoOptions.adjustSaturation,"default-brightness":e.$appConfig.defaultTrackElementVideoOptions.adjustBrightness,"default-contrast":e.$appConfig.defaultTrackElementVideoOptions.adjustContrast,"default-blur":e.$appConfig.defaultTrackElementVideoOptions.adjustBlur,onOpacityChange:e.videoElementApplyAdjustOpacity,onHueChange:e.videoElementApplyAdjustHue,onSaturationChange:e.videoElementApplyAdjustSaturation,onBrightnessChange:e.videoElementApplyAdjustBrightness,onContrastChange:e.videoElementApplyAdjustContrast,onBlurChange:e.videoElementApplyAdjustBlur,onVideoAdjustReset:t[69]||(t[69]=c=>{e.undoRedoRecordCurrentState(),e.videoElementAdjustReset(),e.saveProject()}),onVideoAdjustChangeStart:e.undoRedoRecordCurrentState,onVideoAdjustChangeFinish:e.saveProject},null,8,["opacity","hue","saturation","brightness","contrast","blur","track-element-selection-view-model","default-opacity","default-hue","default-saturation","default-brightness","default-contrast","default-blur","onOpacityChange","onHueChange","onSaturationChange","onBrightnessChange","onContrastChange","onBlurChange","onVideoAdjustChangeStart","onVideoAdjustChangeFinish"])):E("",!0),e.navigationState.videoSettingsPaneTab==="tab-volume"?(d(),S(wo,{key:2,volume:e.trackElementSelectionViewModel.getActiveTrackElement().videoOptions.volume,"is-noise-reduced":e.activeTrackElement.videoOptions.isNoiseReduced,"is-noise-reduction-supported":e.isNoiseReductionSupported,"is-noise-reduction-ready":e.isNoiseReductionReady,"is-noise-reduction-visible":e.activeTrackElement.mediaElement.hasAudio!==!1,"is-extract-audio-disabled":e.trackElementSelectionViewModel.getActiveTrackElement().mediaElement.status!=="ready"||e.trackElementSelectionViewModel.hasSelectedMany(),"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-volume":e.$appConfig.defaultTrackElementVideoOptions.volume,onVideoVolumeChangeStart:e.undoRedoRecordCurrentState,onVideoVolumeChange:e.videoElementApplyVolume,onVideoVolumeChangeFinish:e.saveProject,onVideoNoiseReducedChange:e.videoElementApplyIsNoiseReduced,onExtractAudio:t[70]||(t[70]=c=>{e.undoRedoRecordCurrentState(),e.extractAudio(e.trackElementSelectionViewModel.getActiveTrackElement())})},null,8,["volume","is-noise-reduced","is-noise-reduction-supported","is-noise-reduction-ready","is-noise-reduction-visible","is-extract-audio-disabled","track-element-selection-view-model","default-volume","onVideoVolumeChangeStart","onVideoVolumeChange","onVideoVolumeChangeFinish","onVideoNoiseReducedChange"])):E("",!0),e.navigationState.videoSettingsPaneTab==="tab-speed"?(d(),S(si,{key:3,speed:e.trackElementSelectionViewModel.getActiveTrackElement().videoOptions.basicSpeed,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-speed":e.$appConfig.defaultTrackElementVideoOptions.basicSpeed,onSpeedChangeStart:e.undoRedoRecordCurrentState,onSpeedChange:e.videoOrAudioElementApplyBasicSpeed,onSpeedChangeFinish:e.saveProject},null,8,["speed","track-element-selection-view-model","default-speed","onSpeedChangeStart","onSpeedChange","onSpeedChangeFinish"])):E("",!0),e.navigationState.videoSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:4,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-duration-unlimited","is-input-hidden","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["is-full-height"])]),_:1},8,["onSelectTab"])):E("",!0),e.trackElementSelectionViewModel.isSelectedHasSameType()&&e.navigationState.mainTab==="tab-settings-text"?(d(),S(Pt,{key:8,onSelectTab:e.switchNavigationTextSettingsPaneTab},{"tab-buttons":n(({tabClicked:c})=>[r(re,{"is-active":e.navigationState.textSettingsPaneTab==="tab-content",onClick:O=>c(O,"tab-content")},{default:n(()=>[y(g(e.$t("editor.textSettings.edit")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.textSettingsPaneTab==="tab-adjust",onClick:O=>c(O,"tab-adjust")},{default:n(()=>[y(g(e.$t("editor.textSettings.adjust")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.textSettingsPaneTab==="tab-background","data-testid":"desktop-console-text-background-tab",onClick:O=>c(O,"tab-background")},{default:n(()=>[y(g(e.$t("editor.textSettings.background")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.textSettingsPaneTab==="tab-opacity","data-testid":"desktop-console-text-opacity-tab",onClick:O=>c(O,"tab-opacity")},{default:n(()=>[y(g(e.$t("appConsoleSettingsOpacity.title")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.textSettingsPaneTab==="tab-timing","data-testid":"desktop-console-text-timing-tab",onClick:O=>c(O,"tab-timing")},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:2},1032,["is-active","onClick"])]),"tab-content":n(()=>[r(Rt,{"is-full-height":e.navigationState.textSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.textSettingsPaneTab==="tab-content"?(d(),S(Ao,{key:0,"color-presets":e.textColorPresets,fonts:e.fonts,"google-fonts":e.$googleFonts,"recent-fonts":e.recentFonts,"text-content":e.activeTrackElement.textOptions.textContent,"text-color":e.activeTrackElement.textOptions.textColor,"text-font-face":e.activeTrackElement.textOptions.fontFace,"text-font-style":e.activeTrackElement.textOptions.fontStyle,"text-font-weight":e.activeTrackElement.textOptions.fontWeight,"text-element-event-target":e.playerMediaElementTextEventTarget,"text-absolute-font-size":e.activeTrackElement.textOptions.absoluteFontSize,"text-absolute-font-size-maximum":e.$appConfig.absoluteFontSizeMaximum,"text-absolute-font-size-minimum":e.$appConfig.absoluteFontSizeMinimum,"text-absolute-font-sizes":e.$appConfig.absoluteFontSizes,"default-color":e.$appConfig.defaultCustomColor,"track-element-selection-view-model":e.trackElementSelectionViewModel,onTextChange:t[71]||(t[71]=c=>{e.undoRedoRecordCurrentState(),e.textElementApplyTextContent(c),e.throttledTextElementPredictFonts(),e.saveProject()}),onTextChangeFinish:t[72]||(t[72]=c=>{e.deleteEmptyActiveTextElement(),e.saveProject()}),onColorChangeStart:e.undoRedoRecordCurrentState,onColorChange:e.textElementApplyTextColor,onColorChangeFinish:e.saveProject,onFontFaceChange:e.handleFontFaceChange,onFontStyleChange:e.handleFontStyleChange,onNewFontsShowed:e.preloadFontsCSS,onTextAbsoluteFontSizeChange:t[73]||(t[73]=c=>{e.undoRedoRecordCurrentState(),e.textElementApplyAbsoluteFontSize(c),e.saveProject()}),onTextAbsoluteFontSizeIncrement:t[74]||(t[74]=c=>{e.undoRedoRecordCurrentState(),e.textElementIncrementAbsoluteFontSize(1),e.saveProject()}),onTextAbsoluteFontSizeDecrement:t[75]||(t[75]=c=>{e.undoRedoRecordCurrentState(),e.textElementIncrementAbsoluteFontSize(-1),e.saveProject()})},null,8,["color-presets","fonts","google-fonts","recent-fonts","text-content","text-color","text-font-face","text-font-style","text-font-weight","text-element-event-target","text-absolute-font-size","text-absolute-font-size-maximum","text-absolute-font-size-minimum","text-absolute-font-sizes","default-color","track-element-selection-view-model","onColorChangeStart","onColorChange","onColorChangeFinish","onFontFaceChange","onFontStyleChange","onNewFontsShowed"])):E("",!0),e.navigationState.textSettingsPaneTab==="tab-adjust"?(d(),S(Mo,{key:1,"text-align":e.activeTrackElement.textOptions.align,"is-text-underlined":e.activeTrackElement.textOptions.isUnderlined,"is-in-uppercase":e.activeTrackElement.textOptions.isInUppercase,"text-line-height":e.activeTrackElement.textOptions.lineHeight,"text-absolute-letter-spacing":e.activeTrackElement.textOptions.absoluteLetterSpacing,"text-font-style":e.activeTrackElement.textOptions.fontStyle,"text-font-weight":e.activeTrackElement.textOptions.fontWeight,"text-font-face":e.activeTrackElement.textOptions.fontFace,fonts:e.fonts,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-line-height":e.$appConfig.defaultTrackElementTextOptions.lineHeight,"default-absolute-letter-spacing":e.$appConfig.defaultTrackElementTextOptions.absoluteLetterSpacing,onTextAbsoluteFontSizeChangeStart:e.undoRedoRecordCurrentState,onTextAbsoluteFontSizeChange:e.textElementApplyAbsoluteFontSize,onTextAbsoluteFontSizeChangeFinish:e.saveProject,onTextLineHeightChangeStart:e.undoRedoRecordCurrentState,onTextLineHeightChange:e.textElementApplyTextLineHeight,onTextLineHeightChangeFinish:e.saveProject,onTextAbsoluteLetterSpacingChangeStart:e.undoRedoRecordCurrentState,onTextAbsoluteLetterSpacingChange:e.textElementApplyAbsoluteLetterSpacing,onTextAbsoluteLetterSpacingChangeFinish:e.saveProject,onTextAlignChange:t[76]||(t[76]=c=>{e.undoRedoRecordCurrentState(),e.textElementApplyTextAlign(c.textAlign,c.justifyContent),e.saveProject()}),onTextUnderlineChange:t[77]||(t[77]=c=>{e.undoRedoRecordCurrentState(),e.textElementApplyTextUnderline(c),e.saveProject()}),onTextItalicsChange:e.handleTextItalicsChange,onTextUppercaseChange:t[78]||(t[78]=c=>{e.undoRedoRecordCurrentState(),e.textElementApplyTextUppercase(c),e.saveProject()})},null,8,["text-align","is-text-underlined","is-in-uppercase","text-line-height","text-absolute-letter-spacing","text-font-style","text-font-weight","text-font-face","fonts","track-element-selection-view-model","default-line-height","default-absolute-letter-spacing","onTextAbsoluteFontSizeChangeStart","onTextAbsoluteFontSizeChange","onTextAbsoluteFontSizeChangeFinish","onTextLineHeightChangeStart","onTextLineHeightChange","onTextLineHeightChangeFinish","onTextAbsoluteLetterSpacingChangeStart","onTextAbsoluteLetterSpacingChange","onTextAbsoluteLetterSpacingChangeFinish","onTextItalicsChange"])):E("",!0),e.navigationState.textSettingsPaneTab==="tab-background"?(d(),S(Ro,{key:2,"color-presets":e.textBackgroundColorPresets,"background-color":e.activeTrackElement.textOptions.backgroundFill,"background-border-radius":e.activeTrackElement.textOptions.backgroundBorderRadius,"text-color":e.activeTrackElement.textOptions.textColor,"app-layout":e.appLayout,"default-solid-color":e.$appConfig.defaultCustomColor,"default-multi-edit-color":e.$appConfig.defaultMultiEditSolidColor,"default-gradient-color":e.$appConfig.defaultTextBackgroundColor,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-background-border-radius":e.$appConfig.defaultTrackElementTextOptions.backgroundBorderRadius,onBackgroundColorChangeStart:e.undoRedoRecordCurrentState,onBackgroundColorChange:e.textElementApplyBackgroundColor,onBackgroundColorChangeFinish:e.saveProject,onBackgroundBorderRadiusChangeStart:e.undoRedoRecordCurrentState,onBackgroundBorderRadiusChange:e.textElementApplyBackgroundBorderRadius,onBackgroundBorderRadiusChangeFinish:e.saveProject},null,8,["color-presets","background-color","background-border-radius","text-color","app-layout","default-solid-color","default-multi-edit-color","default-gradient-color","track-element-selection-view-model","default-background-border-radius","onBackgroundColorChangeStart","onBackgroundColorChange","onBackgroundColorChangeFinish","onBackgroundBorderRadiusChangeStart","onBackgroundBorderRadiusChange","onBackgroundBorderRadiusChangeFinish"])):E("",!0),e.navigationState.textSettingsPaneTab==="tab-opacity"?(d(),S(ai,{key:3,opacity:e.trackElementMultiEditAttributeAccessorRegistry.textOpacity.getValue(),"is-label-grayed-out":e.trackElementMultiEditAttributeAccessorRegistry.textOpacity.isMixed(),onOpacityChangeStart:e.undoRedoRecordCurrentState,onOpacityChange:e.textElementApplyOpacity,onOpacityChangeFinish:e.saveProject},null,8,["opacity","is-label-grayed-out","onOpacityChangeStart","onOpacityChange","onOpacityChangeFinish"])):E("",!0),e.navigationState.textSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:4,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-duration-unlimited","is-input-hidden","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["is-full-height"])]),_:1},8,["onSelectTab"])):E("",!0),e.trackElementSelectionViewModel.isSelectedHasSameType()&&e.navigationState.mainTab==="tab-settings-audio"?(d(),S(Pt,{key:9,onSelectTab:e.switchNavigationAudioSettingsPaneTab},{"tab-buttons":n(({tabClicked:c})=>[e.trackElementSelectionViewModel.hasSelectedSingle()&&e.activeTrackElement.mediaElement.ttsOptions!==void 0?(d(),S(re,{key:0,"is-active":e.navigationState.audioSettingsPaneTab==="tab-text-to-speech","data-testid":"desktop-console-audio-text-to-speech-tab",onClick:O=>c(O,"tab-text-to-speech")},{default:n(()=>[y(g(e.$t("export.actions.edit")),1)]),_:2},1032,["is-active","onClick"])):E("",!0),r(re,{"is-active":e.navigationState.audioSettingsPaneTab==="tab-volume","data-testid":"desktop-console-audio-volume-tab",onClick:O=>c(O,"tab-volume")},{default:n(()=>[y(g(e.$t("editor.videoSettings.volume")),1)]),_:2},1032,["is-active","onClick"]),e.activeTrackElement.mediaElement.ttsOptions===void 0?(d(),S(re,{key:1,"is-active":e.navigationState.audioSettingsPaneTab==="tab-speed","data-testid":"desktop-console-audio-speed-tab",onClick:O=>c(O,"tab-speed")},{default:n(()=>[y(g(e.$t("editor.videoSettings.speed")),1)]),_:2},1032,["is-active","onClick"])):E("",!0),r(re,{"is-active":e.navigationState.audioSettingsPaneTab==="tab-timing","data-testid":"desktop-console-audio-timing-tab",onClick:O=>c(O,"tab-timing")},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:2},1032,["is-active","onClick"])]),"tab-content":n(()=>[r(Rt,{"is-expanded":e.trackElementSelectionViewModel.hasSelectedSingle()&&e.activeTrackElement.mediaElement.ttsOptions!==void 0&&e.navigationState.audioSettingsPaneTab==="tab-text-to-speech","is-full-height":e.navigationState.audioSettingsPaneTab==="tab-timing"},{default:n(()=>[e.trackElementSelectionViewModel.hasSelectedSingle()&&e.activeTrackElement.mediaElement.ttsOptions!==void 0&&e.navigationState.audioSettingsPaneTab==="tab-text-to-speech"?(d(),S(ni,{key:0,state:e.textToSpeechStateFragment.state,controller:e.textToSpeechController,"is-moods-enabled":e.backendConfig.isMoodsEnabled,"is-built-in":"",onTtsElementUpdate:e.updateAudioFromTextTrackElement},null,8,["state","controller","is-moods-enabled","onTtsElementUpdate"])):E("",!0),e.navigationState.audioSettingsPaneTab==="tab-volume"?(d(),S(Po,{key:1,volume:e.trackElementSelectionViewModel.getActiveTrackElement().audioOptions.volume,"volume-fade-in-time":e.trackElementSelectionViewModel.getActiveTrackElement().audioOptions.volumeFadeInTime,"volume-fade-out-time":e.trackElementSelectionViewModel.getActiveTrackElement().audioOptions.volumeFadeOutTime,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-volume":e.$appConfig.defaultTrackElementAudioOptions.volume,"default-volume-fade-in-time":e.$appConfig.defaultTrackElementAudioOptions.volumeFadeInTime,"default-volume-fade-out-time":e.$appConfig.defaultTrackElementAudioOptions.volumeFadeOutTime,"is-noise-reduced":e.activeTrackElement.audioOptions.isNoiseReduced,"is-noise-reduction-supported":e.isNoiseReductionSupported,"is-noise-reduction-ready":e.isNoiseReductionReady,"is-fade-settings-visible":!0,"playback-duration":e.trackElementSelectionViewModel.getActiveTrackElement().timelineOptions.length,onAudioVolumeChangeStart:e.undoRedoRecordCurrentState,onAudioVolumeChange:e.audioElementApplyVolume,onAudioVolumeChangeFinish:e.saveProject,onAudioVolumeFadeInTimeChangeStart:e.undoRedoRecordCurrentState,onAudioVolumeFadeInTimeChange:e.audioElementApplyVolumeFadeInTime,onAudioVolumeFadeInTimeChangeFinish:e.saveProject,onAudioVolumeFadeOutTimeChangeStart:e.undoRedoRecordCurrentState,onAudioVolumeFadeOutTimeChange:e.audioElementApplyVolumeFadeOutTime,onAudioVolumeFadeOutTimeChangeFinish:e.saveProject,onAudioNoiseReducedChange:e.audioElementApplyIsNoiseReduced},null,8,["volume","volume-fade-in-time","volume-fade-out-time","track-element-selection-view-model","default-volume","default-volume-fade-in-time","default-volume-fade-out-time","is-noise-reduced","is-noise-reduction-supported","is-noise-reduction-ready","playback-duration","onAudioVolumeChangeStart","onAudioVolumeChange","onAudioVolumeChangeFinish","onAudioVolumeFadeInTimeChangeStart","onAudioVolumeFadeInTimeChange","onAudioVolumeFadeInTimeChangeFinish","onAudioVolumeFadeOutTimeChangeStart","onAudioVolumeFadeOutTimeChange","onAudioVolumeFadeOutTimeChangeFinish","onAudioNoiseReducedChange"])):E("",!0),e.navigationState.audioSettingsPaneTab==="tab-speed"&&e.activeTrackElement.mediaElement.ttsOptions===void 0?(d(),S(si,{key:2,speed:e.trackElementSelectionViewModel.getActiveTrackElement().audioOptions.basicSpeed,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-speed":e.$appConfig.defaultTrackElementVideoOptions.basicSpeed,onSpeedChangeStart:e.undoRedoRecordCurrentState,onSpeedChange:e.videoOrAudioElementApplyBasicSpeed,onSpeedChangeFinish:e.saveProject},null,8,["speed","track-element-selection-view-model","default-speed","onSpeedChangeStart","onSpeedChange","onSpeedChangeFinish"])):E("",!0),e.navigationState.audioSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:3,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-input-hidden","is-duration-unlimited","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["is-expanded","is-full-height"])]),_:1},8,["onSelectTab"])):E("",!0),e.trackElementSelectionViewModel.isSelectedHasSameType()&&e.navigationState.mainTab==="tab-settings-image"?(d(),S(Pt,{key:10,onSelectTab:e.switchNavigationImageSettingsPaneTab},{"tab-buttons":n(({tabClicked:c})=>[r(re,{"is-active":e.navigationState.imageSettingsPaneTab==="tab-transform","data-testid":"desktop-console-image-transform-tab",onClick:O=>c(O,"tab-transform")},{default:n(()=>[y(g(e.$t("editor.imageSettings.transform")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.imageSettingsPaneTab==="tab-adjust","data-testid":"desktop-console-image-adjust-tab",onClick:O=>c(O,"tab-adjust")},{default:n(()=>[y(g(e.$t("editor.imageSettings.adjust")),1)]),_:2},1032,["is-active","onClick"]),e.trackElementSelectionViewModel.isSomeSelectedTrackElementsHasType("video")?E("",!0):(d(),S(re,{key:0,"is-active":e.navigationState.imageSettingsPaneTab==="tab-timing","data-testid":"desktop-console-image-timing-tab",onClick:O=>c(O,"tab-timing")},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:2},1032,["is-active","onClick"]))]),"tab-content":n(()=>[r(Rt,{"is-full-height":e.navigationState.imageSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.imageSettingsPaneTab==="tab-transform"?(d(),S(ot,{key:0,"rotate-angle":e.activeTrackElement.imageOptions.rotateAngle,"angle-rotator-step":e.$appConfig.angleRotatorStep,"track-element-selection-view-model":e.trackElementSelectionViewModel,"can-crop":e.canCrop,onCropButtonClick:t[79]||(t[79]=c=>e.openCropTab()),onFillButtonClick:t[80]||(t[80]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFill(),e.saveProject()}),onFitButtonClick:t[81]||(t[81]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFit(),e.saveProject()}),onFlipHorizontallyButtonClick:t[82]||(t[82]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipHorizontally(),e.saveProject()}),onFlipVerticallyButtonClick:t[83]||(t[83]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipVertically(),e.saveProject()}),onRotateButtonClick:t[84]||(t[84]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotate(),e.saveProject()}),onRotateAngleChange:t[85]||(t[85]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotateAngle(c),e.saveProject()}),onRotateAngleIncrement:t[86]||(t[86]=c=>{e.undoRedoRecordCurrentState(),e.videoElementIncrementTransformRotateAngle(1),e.saveProject()}),onRotateAngleDecrement:t[87]||(t[87]=c=>{e.undoRedoRecordCurrentState(),e.videoElementIncrementTransformRotateAngle(-1),e.saveProject()})},null,8,["rotate-angle","angle-rotator-step","track-element-selection-view-model","can-crop"])):E("",!0),e.navigationState.imageSettingsPaneTab==="tab-adjust"?(d(),S(Mt,{key:1,opacity:e.activeTrackElement.imageOptions.adjustOpacity,hue:e.activeTrackElement.imageOptions.adjustHue,saturation:e.activeTrackElement.imageOptions.adjustSaturation,brightness:e.activeTrackElement.imageOptions.adjustBrightness,contrast:e.activeTrackElement.imageOptions.adjustContrast,blur:e.activeTrackElement.imageOptions.adjustBlur,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-opacity":e.$appConfig.defaultTrackElementVideoOptions.adjustOpacity,"default-hue":e.$appConfig.defaultTrackElementVideoOptions.adjustHue,"default-saturation":e.$appConfig.defaultTrackElementVideoOptions.adjustSaturation,"default-brightness":e.$appConfig.defaultTrackElementVideoOptions.adjustBrightness,"default-contrast":e.$appConfig.defaultTrackElementVideoOptions.adjustContrast,"default-blur":e.$appConfig.defaultTrackElementVideoOptions.adjustBlur,onOpacityChange:e.videoElementApplyAdjustOpacity,onHueChange:e.videoElementApplyAdjustHue,onSaturationChange:e.videoElementApplyAdjustSaturation,onBrightnessChange:e.videoElementApplyAdjustBrightness,onContrastChange:e.videoElementApplyAdjustContrast,onBlurChange:e.videoElementApplyAdjustBlur,onVideoAdjustReset:t[88]||(t[88]=c=>{e.undoRedoRecordCurrentState(),e.videoElementAdjustReset(),e.saveProject()}),onVideoAdjustChangeStart:e.undoRedoRecordCurrentState,onVideoAdjustChangeFinish:e.saveProject},null,8,["opacity","hue","saturation","brightness","contrast","blur","track-element-selection-view-model","default-opacity","default-hue","default-saturation","default-brightness","default-contrast","default-blur","onOpacityChange","onHueChange","onSaturationChange","onBrightnessChange","onContrastChange","onBlurChange","onVideoAdjustChangeStart","onVideoAdjustChangeFinish"])):E("",!0),e.navigationState.imageSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:2,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-input-hidden","is-duration-unlimited","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["is-full-height"])]),_:1},8,["onSelectTab"])):E("",!0),e.trackElementSelectionViewModel.isSelectedHasSameType()&&e.navigationState.mainTab==="tab-settings-shape"?(d(),S(Pt,{key:11,onSelectTab:e.switchNavigationShapeSettingsPaneTab},{"tab-buttons":n(({tabClicked:c})=>[r(re,{"is-active":e.navigationState.shapeSettingsPaneTab==="tab-transform",onClick:O=>c(O,"tab-transform")},{default:n(()=>[y(g(e.$t("editor.elementSettings.transform")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.shapeSettingsPaneTab==="tab-background",onClick:O=>c(O,"tab-background")},{default:n(()=>[y(g(e.$t("editor.elementSettings.color")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.shapeSettingsPaneTab==="tab-opacity","data-testid":"desktop-console-text-opacity-tab",onClick:O=>c(O,"tab-opacity")},{default:n(()=>[y(g(e.$t("appConsoleSettingsOpacity.title")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.shapeSettingsPaneTab==="tab-timing","data-testid":"desktop-console-shape-timing-tab",onClick:O=>c(O,"tab-timing")},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:2},1032,["is-active","onClick"])]),"tab-content":n(()=>[r(Rt,{"is-full-height":e.navigationState.shapeSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.shapeSettingsPaneTab==="tab-transform"?(d(),S(ot,{key:0,"rotate-angle":e.activeTrackElement.shapeOptions.rotateAngle,"angle-rotator-step":e.$appConfig.angleRotatorStep,"track-element-selection-view-model":e.trackElementSelectionViewModel,"can-crop":e.canCrop,onCropButtonClick:t[89]||(t[89]=c=>e.openCropTab()),onFillButtonClick:t[90]||(t[90]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFill(),e.saveProject()}),onFitButtonClick:t[91]||(t[91]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFit(),e.saveProject()}),onFlipHorizontallyButtonClick:t[92]||(t[92]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipHorizontally(),e.saveProject()}),onFlipVerticallyButtonClick:t[93]||(t[93]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipVertically(),e.saveProject()}),onRotateButtonClick:t[94]||(t[94]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotate(),e.saveProject()}),onRotateAngleChange:t[95]||(t[95]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotateAngle(c),e.saveProject()}),onRotateAngleIncrement:t[96]||(t[96]=c=>{e.undoRedoRecordCurrentState(),e.videoElementIncrementTransformRotateAngle(1),e.saveProject()}),onRotateAngleDecrement:t[97]||(t[97]=c=>{e.undoRedoRecordCurrentState(),e.videoElementIncrementTransformRotateAngle(-1),e.saveProject()})},null,8,["rotate-angle","angle-rotator-step","track-element-selection-view-model","can-crop"])):E("",!0),e.navigationState.shapeSettingsPaneTab==="tab-background"?(d(),S(Ss,{key:1,"color-presets":e.shapeBackgroundColorPresets,"background-color":e.activeTrackElement.shapeOptions.backgroundFill,"app-layout":e.appLayout,"default-solid-color":e.$appConfig.defaultCustomColor,"default-multi-edit-color":e.$appConfig.defaultMultiEditSolidColor,"default-gradient-color":e.$appConfig.defaultTextBackgroundColor,"track-element-selection-view-model":e.trackElementSelectionViewModel,onBackgroundColorChangeStart:e.undoRedoRecordCurrentState,onBackgroundColorChange:e.vectorBackgroundColorChange,onBackgroundColorChangeFinish:e.saveProject,onSetCustomColorPane:t[98]||(t[98]=c=>e.switchMobileNavigationCustomColorPaneTab("shape-background-color"))},null,8,["color-presets","background-color","app-layout","default-solid-color","default-multi-edit-color","default-gradient-color","track-element-selection-view-model","onBackgroundColorChangeStart","onBackgroundColorChange","onBackgroundColorChangeFinish"])):E("",!0),e.navigationState.shapeSettingsPaneTab==="tab-opacity"?(d(),S(ai,{key:2,opacity:e.trackElementMultiEditAttributeAccessorRegistry.shapeOpacity.getValue(),"is-label-grayed-out":e.trackElementMultiEditAttributeAccessorRegistry.shapeOpacity.isMixed(),onOpacityChangeStart:e.undoRedoRecordCurrentState,onOpacityChange:e.shapeElementApplyOpacity,onOpacityChangeFinish:e.saveProject},null,8,["opacity","is-label-grayed-out","onOpacityChangeStart","onOpacityChange","onOpacityChangeFinish"])):E("",!0),e.navigationState.shapeSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:3,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-input-hidden","is-duration-unlimited","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["is-full-height"])]),_:1},8,["onSelectTab"])):E("",!0),e.trackElementSelectionViewModel.isSelectedHasSameType()&&e.navigationState.mainTab==="tab-settings-emoji"?(d(),S(Pt,{key:12,onSelectTab:e.switchNavigationEmojiSettingsPaneTab},{"tab-buttons":n(({tabClicked:c})=>[r(re,{"is-active":e.navigationState.emojiSettingsPaneTab==="tab-transform",onClick:O=>c(O,"tab-transform")},{default:n(()=>[y(g(e.$t("editor.elementSettings.transform")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.emojiSettingsPaneTab==="tab-adjust",onClick:O=>c(O,"tab-adjust")},{default:n(()=>[y(g(e.$t("editor.elementSettings.adjust")),1)]),_:2},1032,["is-active","onClick"]),r(re,{"is-active":e.navigationState.emojiSettingsPaneTab==="tab-timing","data-testid":"desktop-console-emoji-timing-tab",onClick:O=>c(O,"tab-timing")},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:2},1032,["is-active","onClick"])]),"tab-content":n(()=>[r(Rt,{"is-full-height":e.navigationState.emojiSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.emojiSettingsPaneTab==="tab-transform"?(d(),S(ot,{key:0,"rotate-angle":e.activeTrackElement.emojiOptions.rotateAngle,"angle-rotator-step":e.$appConfig.angleRotatorStep,"track-element-selection-view-model":e.trackElementSelectionViewModel,"can-crop":e.canCrop,onCropButtonClick:t[99]||(t[99]=c=>e.openCropTab()),onFillButtonClick:t[100]||(t[100]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFill(),e.saveProject()}),onFitButtonClick:t[101]||(t[101]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFit(),e.saveProject()}),onFlipHorizontallyButtonClick:t[102]||(t[102]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipHorizontally(),e.saveProject()}),onFlipVerticallyButtonClick:t[103]||(t[103]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipVertically(),e.saveProject()}),onRotateButtonClick:t[104]||(t[104]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotate(),e.saveProject()}),onRotateAngleChange:t[105]||(t[105]=c=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotateAngle(c),e.saveProject()}),onRotateAngleIncrement:t[106]||(t[106]=c=>{e.undoRedoRecordCurrentState(),e.videoElementIncrementTransformRotateAngle(1),e.saveProject()}),onRotateAngleDecrement:t[107]||(t[107]=c=>{e.undoRedoRecordCurrentState(),e.videoElementIncrementTransformRotateAngle(-1),e.saveProject()})},null,8,["rotate-angle","angle-rotator-step","track-element-selection-view-model","can-crop"])):E("",!0),e.navigationState.emojiSettingsPaneTab==="tab-adjust"?(d(),S(Mt,{key:1,opacity:e.activeTrackElement.emojiOptions.adjustOpacity,hue:e.activeTrackElement.emojiOptions.adjustHue,saturation:e.activeTrackElement.emojiOptions.adjustSaturation,brightness:e.activeTrackElement.emojiOptions.adjustBrightness,contrast:e.activeTrackElement.emojiOptions.adjustContrast,blur:e.activeTrackElement.emojiOptions.adjustBlur,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-opacity":e.$appConfig.defaultTrackElementEmojiOptions.adjustOpacity,"default-hue":e.$appConfig.defaultTrackElementEmojiOptions.adjustHue,"default-saturation":e.$appConfig.defaultTrackElementEmojiOptions.adjustSaturation,"default-brightness":e.$appConfig.defaultTrackElementEmojiOptions.adjustBrightness,"default-contrast":e.$appConfig.defaultTrackElementEmojiOptions.adjustContrast,"default-blur":e.$appConfig.defaultTrackElementEmojiOptions.adjustBlur,onOpacityChange:e.videoElementApplyAdjustOpacity,onHueChange:e.videoElementApplyAdjustHue,onSaturationChange:e.videoElementApplyAdjustSaturation,onBrightnessChange:e.videoElementApplyAdjustBrightness,onContrastChange:e.videoElementApplyAdjustContrast,onBlurChange:e.videoElementApplyAdjustBlur,onVideoAdjustReset:t[108]||(t[108]=c=>{e.undoRedoRecordCurrentState(),e.videoElementAdjustReset(),e.saveProject()}),onVideoAdjustChangeStart:e.undoRedoRecordCurrentState,onVideoAdjustChangeFinish:e.saveProject},null,8,["opacity","hue","saturation","brightness","contrast","blur","track-element-selection-view-model","default-opacity","default-hue","default-saturation","default-brightness","default-contrast","default-blur","onOpacityChange","onHueChange","onSaturationChange","onBrightnessChange","onContrastChange","onBlurChange","onVideoAdjustChangeStart","onVideoAdjustChangeFinish"])):E("",!0),e.navigationState.emojiSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:2,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-input-hidden","is-duration-unlimited","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["is-full-height"])]),_:1},8,["onSelectTab"])):E("",!0),e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-stock-video"?(d(),S(ks,{key:13,state:e.stocksVideoStateFragment.state,controller:e.stocksVideoController,onSelect:t[109]||(t[109]=c=>{e.undoRedoRecordCurrentState(),e.addStockItemToTimeline(c)}),onFullScreen:t[110]||(t[110]=c=>{e.stopPlay(),e.openStockPreviewModal(c)}),onBeforeDragStop:t[111]||(t[111]=c=>e.isShouldSimulateDropOnDragEnd?e.simulateDropEvent(c):void 0)},null,8,["state","controller"])):E("",!0),e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-stock-image"?(d(),S(Cs,{key:14,state:e.stocksImageStateFragment.state,controller:e.stocksImageController,onSelect:t[112]||(t[112]=c=>{e.undoRedoRecordCurrentState(),e.addStockItemToTimeline(c)}),onFullScreen:t[113]||(t[113]=c=>{e.stopPlay(),e.openStockPreviewModal(c)}),onBeforeDragStop:t[114]||(t[114]=c=>e.isShouldSimulateDropOnDragEnd?e.simulateDropEvent(c):void 0)},null,8,["state","controller"])):e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-recording"?(d(),S(Li,{key:15,"is-mobile-view":e.appLayout==="mobile",controller:e.recordingManagerController,padding:39,onStopPlay:e.stopPlay},null,8,["is-mobile-view","controller","onStopPlay"])):E("",!0),e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-stock-audio"?(d(),S(Ts,{key:16,state:e.stocksAudioStateFragment.state,"filter-state":e.stocksAudioFilterStateFragment.state,controller:e.stocksAudioController,"filter-controller":e.stocksAudioFilterController,"timeline-play-event-emitter":e.timelinePlayEventEmitter,"player-fullscreen-event-emitter":e.playerFullscreenEventEmitter,onBeforeDragStop:t[115]||(t[115]=c=>e.isShouldSimulateDropOnDragEnd?e.simulateDropEvent(c):void 0),onItemSelect:t[116]||(t[116]=c=>{e.undoRedoRecordCurrentState(),e.addStockItemToTimeline(c)}),onItemPlayed:e.stopPlay},null,8,["state","filter-state","controller","filter-controller","timeline-play-event-emitter","player-fullscreen-event-emitter","onItemPlayed"])):E("",!0)]),_:2},[e.stocksAudioFilterStateFragment.state.isVisible?{name:"content-overlay",fn:n(()=>[r($s,{state:e.stocksAudioFilterStateFragment.state,"stocks-state":e.stocksAudioStateFragment.state,controller:e.stocksAudioFilterController,"stocks-controller":e.stocksAudioController,"app-layout":e.appLayout},null,8,["state","stocks-state","controller","stocks-controller","app-layout"])]),key:"0"}:void 0]),1032,["active-tab","variant","is-menu-extended-height","fixed-height","onSetRawMenuHeight"])):E("",!0),e.appLayout==="mobile"||e.appLayout===void 0?(d(),S(Ns,{key:1},{menu:n(()=>[r(As,null,{upload:n(()=>[r(it,{"allowed-extensions":e.fileExtensionsAllowedToUpload,onMediaFilesAddFromLocal:t[118]||(t[118]=v=>e.addMediaElementsFromFilesystem(v))},null,8,["allowed-extensions"])]),buttons:n(()=>[r(me,{onClick:t[119]||(t[119]=v=>{e.stopPlay(),e.switchNavigationMainTab("tab-media")})},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-media","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.media")),1)]),_:1}),r(me,{onClick:t[120]||(t[120]=v=>e.switchNavigationMainTab("tab-canvas-settings"))},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-settings","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.settings")),1)]),_:1}),r(me,{onClick:t[121]||(t[121]=v=>{e.stopPlay(),e.switchNavigationMainTab("tab-text")})},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-text","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.text")),1)]),_:1}),r(me,{onClick:t[122]||(t[122]=v=>{e.stopPlay(),e.switchNavigationMainTab("tab-stock-audio")})},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-stock-audio","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.audio")),1)]),_:1}),e.isFeatureStocksVideoImageEnabled?(d(),S(me,{key:0,onClick:t[123]||(t[123]=v=>{e.stopPlay(),e.switchNavigationMainTab("tab-stock-video")})},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-stock-videos","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.videos")),1)]),_:1})):E("",!0),e.isFeatureStocksVideoImageEnabled?(d(),S(me,{key:1,onClick:t[124]||(t[124]=v=>{e.stopPlay(),e.switchNavigationMainTab("tab-stock-image")})},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-stock-images","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.images")),1)]),_:1})):E("",!0),r(me,{onClick:t[125]||(t[125]=v=>{e.stopPlay(),e.switchNavigationMainTab("tab-elements")})},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-elements","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.elements")),1)]),_:1}),r(me,{onClick:t[126]||(t[126]=v=>e.switchNavigationMainTab("tab-recording"))},{icon:n(()=>[r(m,{symbol:"svg-main-navigation-tab-icon-recording","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.recording")),1)]),_:1}),r(me,{onClick:t[127]||(t[127]=v=>e.switchNavigationMainTab("tab-tts"))},{icon:n(()=>[r(m,{symbol:"media-tts","is-block":""})]),text:n(()=>[y(g(e.$t("editor.console.TTS")),1)]),_:1})]),_:1})]),"shadow-overlay":n(()=>[r(Ms,{"is-visible":e.isRecordsTabVisibleOverMediaTab,onClose:t[129]||(t[129]=v=>e.isRecordsTabVisibleOverMediaTab=!1)},{default:n(()=>[r(be,{"is-visible":e.isRecordsTabVisibleOverMediaTab,"padding-vertical":16,"padding-horizontal":16,onClose:t[128]||(t[128]=v=>e.isRecordsTabVisibleOverMediaTab=!1)},{"tab-buttons":n(()=>[r(Ae,null,{"0-record":n(()=>[r(ee,{"is-active":!0},{default:n(()=>[y(g(e.$t("editor.console.recording")),1)]),_:1})]),_:1})]),"tab-content":n(()=>[r(Li,{"is-mobile-view":e.appLayout==="mobile",controller:e.recordingManagerController,padding:0,onStopPlay:e.stopPlay},null,8,["is-mobile-view","controller","onStopPlay"])]),_:1},8,["is-visible"])]),_:1},8,["is-visible"])]),"opaque-overlay":n(()=>[e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-media"&&e.appLayout!==void 0?(d(),S(li,{key:0},{default:n(()=>[r(ri,{onClose:t[140]||(t[140]=v=>e.switchNavigationMainTab(void 0))},{title:n(()=>[y(g(e.$t("editor.mobile.mediaTab.title")),1)]),default:n(()=>[e.mediaCollection.length>0?(d(),S(Io,{key:0,items:e.mediaCollection,"item-variant":"media"},{item:n(v=>[v.item.status==="initializing"?(d(),S(Gt,{key:v.item.id,name:v.item.name,"preview-aspect-ratio":"175:100",status:"initializing"},null,8,["name"])):(d(),S(Gt,{key:v.item.id,type:v.item.type,duration:v.item.duration,name:v.item.fileName,"preview-image":v.item.previewImage||void 0,"upload-progress":v.item.uploadProgress,"is-playable":v.item.isPlayable,"is-audio-from-text":v.item.ttsOptions!==void 0,status:v.item.status,"preview-aspect-ratio":"175:100",onClick:c=>v.toggleSelectItem(v.item)},null,8,["type","duration","name","preview-image","upload-progress","is-playable","is-audio-from-text","status","onClick"]))]),"delete-button":n(v=>[v.selectedItems.length!==0?(d(),S(f,{key:0,"fixed-width":40,"fixed-height":40,"rounding-value":6,variant:"mobile-delete-media-element",onClick:c=>e.openDeleteMediaElementModal(v.selectedItems.map(O=>O.id))},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-del-large"})]),_:2},1032,["onClick"])):E("",!0)]),"add-button":n(v=>[r(f,{"fixed-height":40,"font-weight":600,"is-disabled":v.selectedItems.length===0||v.selectedItems.some(c=>!c.isPlayable)||v.selectedItems.some(c=>c.state==="initializing"),variant:"accent-add-to-timeline",onClick:c=>{e.undoRedoRecordCurrentState(),e.addMediaElementsToNewTrackByButton(v.selectedItems.map(O=>O.id)),e.switchNavigationMainTab(void 0)}},{default:n(()=>[y(g(e.$t("editor.mobile.mediaTab.addToTimeline")),1)]),_:2},1032,["is-disabled","onClick"])]),"upload-button":n(()=>[r(it,{variant:"bottom-panel","allowed-extensions":e.fileExtensionsAllowedToUpload,onMediaFilesAddFromLocal:t[130]||(t[130]=v=>e.addMediaElementsFromFilesystem(v))},null,8,["allowed-extensions"])]),"import-buttons":n(()=>[r(Ri,{"is-mobile":e.appLayout==="mobile"},{"1-google-drive":n(()=>[r(nt,{"is-loading":e.googleApiLoadState==="uninitiated","is-disabled":e.googleApiLoadState==="failed",onClick:t[131]||(t[131]=v=>e.addMediaElementsFromGoogleDrive())},{icon:n(()=>[r(m,{symbol:"upload-modal-google-drive-color-mobile",width:24,height:24})]),_:1},8,["is-loading","is-disabled"])]),"2-dropbox":n(()=>[r(nt,{"is-loading":e.dropboxApiLoadState==="uninitiated","is-disabled":e.dropboxApiLoadState==="failed",onClick:t[132]||(t[132]=v=>e.addMediaElementsFromDropbox())},{icon:n(()=>[r(m,{symbol:"upload-modal-dropbox-color-mobile",width:24,height:24})]),_:1},8,["is-loading","is-disabled"])]),"3-records":n(()=>[r(nt,{onClick:t[133]||(t[133]=v=>e.isRecordsTabVisibleOverMediaTab=!0)},{icon:n(()=>[r(m,{symbol:"svg-records-color-large",width:24,height:24})]),_:1})]),"4-tts":n(()=>[r(nt,{onClick:t[134]||(t[134]=v=>e.switchNavigationMainTab("tab-tts"))},{icon:n(()=>[r(m,{symbol:"media-tts-color-mobile",width:25,height:24})]),_:1})]),_:1},8,["is-mobile"])]),_:1},8,["items"])):(d(),S(Rs,{key:1},{"upload-button":n(()=>[r(it,{variant:"bottom-panel","allowed-extensions":e.fileExtensionsAllowedToUpload,onMediaFilesAddFromLocal:t[135]||(t[135]=v=>e.addMediaElementsFromFilesystem(v))},null,8,["allowed-extensions"])]),"import-buttons":n(()=>[r(Ri,{"is-mobile":e.appLayout==="mobile"},{"1-google-drive":n(()=>[r(nt,{"is-loading":e.googleApiLoadState==="uninitiated","is-disabled":e.googleApiLoadState==="failed",onClick:t[136]||(t[136]=v=>e.addMediaElementsFromGoogleDrive())},{icon:n(()=>[r(m,{symbol:"upload-modal-google-drive-color-mobile",width:24,height:24})]),_:1},8,["is-loading","is-disabled"])]),"2-dropbox":n(()=>[r(nt,{"is-loading":e.dropboxApiLoadState==="uninitiated","is-disabled":e.dropboxApiLoadState==="failed",onClick:t[137]||(t[137]=v=>e.addMediaElementsFromDropbox())},{icon:n(()=>[r(m,{symbol:"upload-modal-dropbox-color-mobile",width:24,height:24})]),_:1},8,["is-loading","is-disabled"])]),"3-records":n(()=>[r(nt,{onClick:t[138]||(t[138]=v=>e.isRecordsTabVisibleOverMediaTab=!0)},{icon:n(()=>[r(m,{symbol:"svg-records-color-large",width:24,height:24})]),_:1})]),"4-tts":n(()=>[r(nt,{onClick:t[139]||(t[139]=v=>e.switchNavigationMainTab("tab-tts"))},{icon:n(()=>[r(m,{symbol:"media-tts-color-mobile",width:25,height:24})]),_:1})]),_:1},8,["is-mobile"])]),_:1}))]),_:1})]),_:1})):E("",!0),e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-text"?(d(),S(li,{key:1},{default:n(()=>[r(ri,{onClose:t[141]||(t[141]=v=>e.switchNavigationMainTab(void 0))},{title:n(()=>[y(g(e.$t("editor.mobile.textTab.title")),1)]),default:n(()=>[r(Io,{"item-variant":"text",items:e.textElementPresets.map(v=>({...v,id:v.type}))},{item:n(v=>[r(Pi,{preset:v.item,"app-layout":e.appLayout,onClick:c=>{e.undoRedoRecordCurrentState(),e.addTextElementsToNewTrackByButton([v.item.type]),e.switchNavigationMainTab(void 0)}},null,8,["preset","app-layout","onClick"])]),_:1},8,["items"])]),_:1})]),_:1})):E("",!0),e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-stock-video"?(d(),S(Ps,{key:2,state:e.stocksVideoStateFragment.state,controller:e.stocksVideoController,onClose:t[142]||(t[142]=v=>{e.switchNavigationMainTab(void 0)}),onSelect:t[143]||(t[143]=v=>{e.stopPlay(),e.openStockPreviewModal(v)})},null,8,["state","controller"])):E("",!0),e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-stock-image"?(d(),S(Is,{key:3,state:e.stocksImageStateFragment.state,controller:e.stocksImageController,onClose:t[144]||(t[144]=v=>{e.switchNavigationMainTab(void 0)}),onSelect:t[145]||(t[145]=v=>{e.stopPlay(),e.openStockPreviewModal(v)})},null,8,["state","controller"])):E("",!0),e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-stock-audio"?(d(),S(Ls,{key:4,state:e.stocksAudioStateFragment.state,"filter-state":e.stocksAudioFilterStateFragment.state,controller:e.stocksAudioController,"filter-controller":e.stocksAudioFilterController,"app-layout":e.appLayout,"timeline-play-event-emitter":e.timelinePlayEventEmitter,"player-fullscreen-event-emitter":e.playerFullscreenEventEmitter,onClose:t[146]||(t[146]=v=>e.switchNavigationMainTab(void 0)),onItemSelect:t[147]||(t[147]=v=>{e.undoRedoRecordCurrentState(),e.addStockItemToTimeline(v)}),onItemPlayed:e.stopPlay},null,8,["state","filter-state","controller","filter-controller","app-layout","timeline-play-event-emitter","player-fullscreen-event-emitter","onItemPlayed"])):E("",!0),!e.trackElementSelectionViewModel.hasActive()&&e.navigationState.mainTab==="tab-elements"?(d(),S(Os,{key:5,state:e.elementStateFragment.state,controller:e.elementsController,onItemSelect:e.addElementItemToTimeline,onClose:t[148]||(t[148]=v=>e.switchNavigationMainTab(void 0))},null,8,["state","controller","onItemSelect"])):E("",!0)]),"popup-toolbar":n(()=>[r(Fs,{"is-visible":e.trackElementSelectionViewModel.hasAnySelected()||e.selectedGapIds.length>0,onClose:t[179]||(t[179]=v=>{e.trackElementSelectionViewModel.resetSelection(),e.unselectGaps(),e.switchNavigationMainTab(void 0)})},{default:n(()=>[e.trackElementSelectionViewModel.hasActive()&&e.selectedGapIds.length===0?(d(),S(Lo,{key:0},G({"1-split":n(()=>[r(te,{"is-disabled":e.isPlaying||!e.isSplitTrackElementAvailable,onClick:t[150]||(t[150]=v=>{e.undoRedoRecordCurrentState(),e.splitTrackElement()})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-split-large"})]),text:n(()=>[y(g(e.$t("editor.mobile.trackElementActions.split")),1)]),_:1},8,["is-disabled"])]),"33-front":n(()=>[r(te,{"is-disabled":!e.isBringTrackElementForwardAvailable,onClick:t[176]||(t[176]=v=>{e.undoRedoRecordCurrentState(),e.bringForwardTrackElement()})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-front-large"})]),text:n(()=>[y(g(e.$t("editor.mobile.trackElementActions.front")),1)]),_:1},8,["is-disabled"])]),"34-back":n(()=>[r(te,{"is-disabled":!e.isSendTrackElementBackwardAvailable,onClick:t[177]||(t[177]=v=>{e.undoRedoRecordCurrentState(),e.sendBackwardTrackElement()})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-back-large"})]),text:n(()=>[y(g(e.$t("editor.mobile.trackElementActions.back")),1)]),_:1},8,["is-disabled"])]),_:2},[e.navigationState.mainTab==="tab-settings-audio"&&e.activeTrackElement.mediaElement.ttsOptions!==void 0?{name:"0-audio-tts",fn:n(()=>[r(te,{onClick:t[149]||(t[149]=v=>{e.undoRedoRecordCurrentState(),e.switchNavigationAudioSettingsPaneTab("tab-text-to-speech")})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-edit"})]),text:n(()=>[y(g(e.$t("export.actions.edit")),1)]),_:1})]),key:"0"}:void 0,e.navigationState.mainTab==="tab-settings-video"?{name:"2-video-adjust",fn:n(()=>[r(te,{onClick:t[151]||(t[151]=v=>e.switchNavigationVideoSettingsPaneTab("tab-adjust"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-adjust"})]),text:n(()=>[y(g(e.$t("editor.mobile.videoSettings.adjust")),1)]),_:1})]),key:"1"}:void 0,e.navigationState.mainTab==="tab-settings-image"?{name:"3-image-adjust",fn:n(()=>[r(te,{onClick:t[152]||(t[152]=v=>e.switchNavigationImageSettingsPaneTab("tab-adjust"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-adjust"})]),text:n(()=>[y(g(e.$t("editor.mobile.textSettings.adjust")),1)]),_:1})]),key:"2"}:void 0,e.navigationState.mainTab==="tab-settings-video"&&e.trackElementSelectionViewModel.hasActive()&&e.trackElementSelectionViewModel.getActiveTrackElement().mediaElement.hasAudio?{name:"4-video-volume",fn:n(()=>[r(te,{onClick:t[153]||(t[153]=v=>e.switchNavigationVideoSettingsPaneTab("tab-volume"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-volume"})]),text:n(()=>[y(g(e.$t("editor.mobile.videoSettings.volume")),1)]),_:1})]),key:"3"}:void 0,e.navigationState.mainTab==="tab-settings-audio"?{name:"5-audio-volume",fn:n(()=>[r(te,{onClick:t[154]||(t[154]=v=>e.switchNavigationAudioSettingsPaneTab("tab-volume"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-volume"})]),text:n(()=>[y(g(e.$t("editor.mobile.audioSettings.volume")),1)]),_:1})]),key:"4"}:void 0,e.navigationState.mainTab==="tab-settings-audio"?{name:"6-audio-fade",fn:n(()=>[r(te,{onClick:t[155]||(t[155]=v=>e.switchNavigationAudioSettingsPaneTab("tab-fade"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-adjust-2"})]),text:n(()=>[y(g(e.$t("editor.mobile.audioSettings.fade")),1)]),_:1})]),key:"5"}:void 0,e.navigationState.mainTab==="tab-settings-video"||e.navigationState.mainTab==="tab-settings-audio"&&e.activeTrackElement.ttsOptions===void 0?{name:"7-video-or-audio-speed",fn:n(()=>[r(te,{onClick:t[156]||(t[156]=v=>e.navigationState.mainTab==="tab-settings-video"?e.switchNavigationVideoSettingsPaneTab("tab-speed"):e.switchNavigationAudioSettingsPaneTab("tab-speed"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-speed"})]),text:n(()=>[y(g(e.$t("editor.mobile.videoSettings.speed")),1)]),_:1})]),key:"6"}:void 0,e.navigationState.mainTab==="tab-settings-text"?{name:"8-text-edit",fn:n(()=>[r(te,{onClick:t[157]||(t[157]=v=>e.switchNavigationTextSettingsPaneTab("tab-content"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-edit-large"})]),text:n(()=>[y(g(e.$t("editor.mobile.textSettings.edit")),1)]),_:1})]),key:"7"}:void 0,e.navigationState.mainTab==="tab-settings-video"?{name:"9-video-delete",fn:n(()=>[r(te,{"is-disabled":e.trackElementSelectionViewModel.isEmpty(),onClick:t[158]||(t[158]=v=>{e.undoRedoRecordCurrentState(),e.deleteTrackElements()})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-del-large"})]),text:n(()=>[y(g(e.$t("editor.mobile.trackElementActions.delete")),1)]),_:1},8,["is-disabled"])]),key:"8"}:void 0,e.navigationState.mainTab==="tab-settings-video"?{name:"10-video-transform",fn:n(()=>[r(te,{onClick:t[159]||(t[159]=v=>e.switchNavigationVideoSettingsPaneTab("tab-transform"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-transform"})]),text:n(()=>[y(g(e.$t("editor.mobile.videoSettings.transform")),1)]),_:1})]),key:"9"}:void 0,e.navigationState.mainTab==="tab-settings-image"?{name:"11-image-transform",fn:n(()=>[r(te,{onClick:t[160]||(t[160]=v=>e.switchNavigationImageSettingsPaneTab("tab-transform"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-transform"})]),text:n(()=>[y(g(e.$t("editor.mobile.imageSettings.transform")),1)]),_:1})]),key:"10"}:void 0,e.navigationState.mainTab==="tab-settings-video"&&e.isFreezeFrameTrackElementVisible?{name:"12-freeze-frame",fn:n(()=>[r(te,{"is-disabled":e.isPlaying||!e.isFreezeFrameTrackElementAvailable,onClick:t[161]||(t[161]=v=>{e.undoRedoRecordCurrentState(),e.freezeFrame()})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-freeze-frame-large"})]),text:n(()=>[y(g(e.$t("editor.mobile.trackElementActions.freezeFrame")),1)]),_:1},8,["is-disabled"])]),key:"11"}:void 0,e.navigationState.mainTab==="tab-settings-shape"?{name:"13-shape-color",fn:n(()=>[r(te,{onClick:t[162]||(t[162]=v=>e.switchNavigationShapeSettingsPaneTab("tab-background"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"color-drop"})]),text:n(()=>[y(g(e.$t("editor.elementSettings.color")),1)]),_:1})]),key:"12"}:void 0,e.navigationState.mainTab==="tab-settings-shape"?{name:"14-shape-opacity",fn:n(()=>[r(te,{onClick:t[163]||(t[163]=v=>e.switchNavigationShapeSettingsPaneTab("tab-opacity"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-opacity"})]),text:n(()=>[y(g(e.$t("appConsoleSettingsOpacity.title")),1)]),_:1})]),key:"13"}:void 0,e.navigationState.mainTab==="tab-settings-shape"?{name:"15-shape-transform",fn:n(()=>[r(te,{onClick:t[164]||(t[164]=v=>e.switchNavigationShapeSettingsPaneTab("tab-transform"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-transform"})]),text:n(()=>[y(g(e.$t("editor.elementSettings.transform")),1)]),_:1})]),key:"14"}:void 0,e.navigationState.mainTab==="tab-settings-emoji"?{name:"16-emoji-adjust",fn:n(()=>[r(te,{onClick:t[165]||(t[165]=v=>e.switchNavigationEmojiSettingsPaneTab("tab-adjust"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-adjust"})]),text:n(()=>[y(g(e.$t("editor.elementSettings.adjust")),1)]),_:1})]),key:"15"}:void 0,e.navigationState.mainTab==="tab-settings-emoji"?{name:"17-emoji-transform",fn:n(()=>[r(te,{onClick:t[166]||(t[166]=v=>e.switchNavigationEmojiSettingsPaneTab("tab-transform"))},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tool-transform"})]),text:n(()=>[y(g(e.$t("editor.elementSettings.transform")),1)]),_:1})]),key:"16"}:void 0,e.navigationState.mainTab==="tab-settings-text"||e.navigationState.mainTab==="tab-settings-image"||e.navigationState.mainTab==="tab-settings-audio"||e.navigationState.mainTab==="tab-settings-shape"||e.navigationState.mainTab==="tab-settings-emoji"?{name:"18-duplicate",fn:n(()=>[r(te,{"is-disabled":e.trackElementSelectionViewModel.isEmpty(),onClick:t[167]||(t[167]=v=>{e.undoRedoRecordCurrentState(),e.duplicateSelectedTrackElements()})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-copy-large"})]),text:n(()=>[y(g(e.$t("editor.mobile.trackElementActions.duplicate")),1)]),_:1},8,["is-disabled"])]),key:"17"}:void 0,e.navigationState.mainTab==="tab-settings-text"||e.navigationState.mainTab==="tab-settings-image"||e.navigationState.mainTab==="tab-settings-audio"||e.navigationState.mainTab==="tab-settings-shape"||e.navigationState.mainTab==="tab-settings-emoji"?{name:"19-delete",fn:n(()=>[r(te,{"is-disabled":e.trackElementSelectionViewModel.isEmpty(),onClick:t[168]||(t[168]=v=>{e.undoRedoRecordCurrentState(),e.deleteTrackElements()})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-del-large"})]),text:n(()=>[y(g(e.$t("editor.mobile.trackElementActions.delete")),1)]),_:1},8,["is-disabled"])]),key:"18"}:void 0,e.navigationState.mainTab==="tab-settings-image"?{name:"20-image-timing",fn:n(()=>[r(te,{onClick:t[169]||(t[169]=v=>{e.undoRedoRecordCurrentState(),e.switchNavigationImageSettingsPaneTab("tab-timing")})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-timing"})]),text:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1})]),key:"19"}:void 0,e.navigationState.mainTab==="tab-settings-video"?{name:"21-video-timing",fn:n(()=>[r(te,{onClick:t[170]||(t[170]=v=>{e.undoRedoRecordCurrentState(),e.switchNavigationVideoSettingsPaneTab("tab-timing")})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-timing"})]),text:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1})]),key:"20"}:void 0,e.navigationState.mainTab==="tab-settings-audio"?{name:"22-audio-timing",fn:n(()=>[r(te,{onClick:t[171]||(t[171]=v=>{e.undoRedoRecordCurrentState(),e.switchNavigationAudioSettingsPaneTab("tab-timing")})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-timing"})]),text:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1})]),key:"21"}:void 0,e.navigationState.mainTab==="tab-settings-text"?{name:"23-text-timing",fn:n(()=>[r(te,{onClick:t[172]||(t[172]=v=>{e.undoRedoRecordCurrentState(),e.switchNavigationTextSettingsPaneTab("tab-timing")})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-timing"})]),text:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1})]),key:"22"}:void 0,e.navigationState.mainTab==="tab-settings-shape"?{name:"24-shape-timing",fn:n(()=>[r(te,{onClick:t[173]||(t[173]=v=>{e.undoRedoRecordCurrentState(),e.switchNavigationShapeSettingsPaneTab("tab-timing")})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-timing"})]),text:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1})]),key:"23"}:void 0,e.navigationState.mainTab==="tab-settings-emoji"?{name:"25-emoji-timing",fn:n(()=>[r(te,{onClick:t[174]||(t[174]=v=>{e.undoRedoRecordCurrentState(),e.switchNavigationEmojiSettingsPaneTab("tab-timing")})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-timing"})]),text:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1})]),key:"24"}:void 0,e.navigationState.mainTab==="tab-settings-video"?{name:"32-video-duplicate",fn:n(()=>[r(te,{"is-disabled":e.trackElementSelectionViewModel.isEmpty(),onClick:t[175]||(t[175]=v=>{e.undoRedoRecordCurrentState(),e.duplicateSelectedTrackElements()})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-copy-large"})]),text:n(()=>[y(g(e.$t("editor.mobile.trackElementActions.duplicate")),1)]),_:1},8,["is-disabled"])]),key:"25"}:void 0]),1024)):!e.trackElementSelectionViewModel.hasActive()&&e.selectedGapIds.length>0?(d(),S(Lo,{key:1},{"0-delete":n(()=>[r(te,{"is-disabled":e.selectedGapIds.length===0,onClick:t[178]||(t[178]=v=>{e.undoRedoRecordCurrentState(),e.deleteGaps()})},{icon:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-del-large"})]),text:n(()=>[y(g(e.$t("editor.mobile.trackElementActions.delete")),1)]),_:1},8,["is-disabled"])]),_:1})):E("",!0)]),_:1},8,["is-visible"])]),"popup-settings":n(()=>[r(be,{"is-visible":e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-recording","padding-vertical":16,"padding-horizontal":16,onClose:t[180]||(t[180]=v=>e.switchNavigationMainTab(void 0))},{"tab-buttons":n(()=>[r(Ae,null,{"0-record":n(()=>[r(ee,{"is-active":!0},{default:n(()=>[y(g(e.$t("editor.console.recording")),1)]),_:1})]),_:1})]),"tab-content":n(()=>[r(Li,{"is-mobile-view":e.appLayout==="mobile",controller:e.recordingManagerController,padding:0,onStopPlay:e.stopPlay},null,8,["is-mobile-view","controller","onStopPlay"])]),_:1},8,["is-visible"]),r(be,{"is-visible":e.canCrop&&e.trackElementSelectionViewModel.getFirstSelectedTrackElement()!==void 0&&e.navigationState.mainTab==="tab-crop","padding-vertical":0,"padding-horizontal":0,onClose:t[183]||(t[183]=v=>e.trackElementSelectionViewModel.switchBackFromCropPaneTab())},{"tab-buttons":n(()=>[r(Ae,null,{"canvas-settings":n(()=>[r(ee,{"is-active":!0},{default:n(()=>[y(g(e.$t("widgetCropSettings.crop")),1)]),_:1})]),_:1})]),"tab-content":n(()=>[e.canCrop&&e.trackElementSelectionViewModel.getFirstSelectedTrackElement()!==void 0&&e.navigationState.mainTab==="tab-crop"?(d(),S(ne,{key:0,"rotate-angle":-e.trackElementSelectionViewModel.ensureFirstSelectedTrackElement().playerOptions.contentRotateAngle,strategy:e.trackElementSelectionViewModel.ensureFirstSelectedTrackElement().playerOptions.cropStrategy,"is-mobile":e.isMobileLayout,"crop-emitter":e.cropEmitter,onRevertToOriginal:e.trackElementCropRevertToOriginal,onStrategyChange:e.trackElementCropSetStrategy,onRotateAngleChangeStart:t[181]||(t[181]=v=>{e.rotateActiveMediaElementInsidePreviewStart(),e.undoRedoRecordCurrentState()}),onRotateAngleChange:e.trackElementCropSetRotateAngle,onRotateAngleChangeFinish:t[182]||(t[182]=v=>{e.rotateActiveMediaElementInsidePreviewStop(),e.saveProject()})},null,8,["rotate-angle","strategy","is-mobile","crop-emitter","onRevertToOriginal","onStrategyChange","onRotateAngleChange"])):E("",!0)]),_:1},8,["is-visible"]),r(be,{"is-visible":e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-canvas-settings",onClose:t[188]||(t[188]=v=>e.switchNavigationMainTab(void 0))},{"tab-buttons":n(()=>[r(Ae,null,{"0-canvas-settings":n(()=>[r(ee,{"is-active":!0},{default:n(()=>[y(g(e.$t("editor.mobile.canvasSettings")),1)]),_:1})]),_:1})]),"tab-content":n(()=>[e.navigationState.mainTab==="tab-canvas-settings"?(d(),S(Te,{key:0,width:"wide","is-full-height":e.navigationState.mainTab==="tab-timing"},{default:n(()=>[r($o,{"is-mobile":!0},{"aspect-ratio-picker":n(()=>[r(To,{"aspect-ratios":e.canvasAspectRatios,"active-aspect-ratio-id":e.activeAspectRatio.id,onPick:t[184]||(t[184]=v=>{e.undoRedoRecordCurrentState(),e.setActiveAspectRatio(v)})},null,8,["aspect-ratios","active-aspect-ratio-id"])]),"background-picker":n(()=>[r(Ii,{color:e.canvasBackgroundColor,"color-presets":e.canvasBackgroundColorPresets,"is-alpha-enabled":!1,"is-dropdown-visible":e.isMobileBackgroundColorPickerDropdownVisible,"app-layout":e.appLayout,"default-solid-color":e.$appConfig.defaultCustomColor,"default-gradient-color":e.$appConfig.defaultTextBackgroundColor,"custom-color-pane":"canvas-background-color",onColorChangeStart:e.undoRedoRecordCurrentState,onColorChange:e.canvasBackgroundColorChange,onColorChangeFinish:e.saveProject,onShowColorPicker:t[185]||(t[185]=v=>e.isMobileBackgroundColorPickerDropdownVisible=!0),onHideColorPicker:t[186]||(t[186]=v=>e.isMobileBackgroundColorPickerDropdownVisible=!1),onSetCustomColorPane:t[187]||(t[187]=v=>e.switchMobileNavigationCustomColorPaneTab("canvas-background-color"))},null,8,["color","color-presets","is-dropdown-visible","app-layout","default-solid-color","default-gradient-color","onColorChangeStart","onColorChange","onColorChangeFinish"])]),_:1})]),_:1},8,["is-full-height"])):E("",!0)]),_:1},8,["is-visible"]),r(be,{"is-visible":e.trackElementSelectionViewModel.hasAnySelected()&&e.navigationState.mainTab==="tab-settings-video"&&e.navigationState.videoSettingsPaneTab!==void 0,onClose:t[198]||(t[198]=v=>e.switchNavigationVideoSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[r(Ae,null,G({_:2},[e.navigationState.videoSettingsPaneTab==="tab-transform"?{name:"0-transform",fn:n(()=>[r(ee,{"is-active":e.navigationState.videoSettingsPaneTab==="tab-transform"},{default:n(()=>[y(g(e.$t("editor.mobile.videoSettings.transform")),1)]),_:1},8,["is-active"])]),key:"0"}:void 0,e.navigationState.videoSettingsPaneTab==="tab-adjust"?{name:"1-adjust",fn:n(()=>[r(ee,{"is-active":e.navigationState.videoSettingsPaneTab==="tab-adjust"},{default:n(()=>[y(g(e.$t("editor.mobile.videoSettings.adjust")),1)]),_:1},8,["is-active"])]),key:"1"}:void 0,e.navigationState.videoSettingsPaneTab==="tab-volume"?{name:"2-volume",fn:n(()=>[r(ee,{"is-active":e.navigationState.videoSettingsPaneTab==="tab-volume"},{default:n(()=>[y(g(e.$t("editor.mobile.videoSettings.changeVolume")),1)]),_:1},8,["is-active"])]),key:"2"}:void 0,e.navigationState.videoSettingsPaneTab==="tab-speed"?{name:"3-speed",fn:n(()=>[r(ee,{"is-active":e.navigationState.videoSettingsPaneTab==="tab-speed"},{default:n(()=>[y(g(e.$t("editor.mobile.videoSettings.changeSpeed")),1)]),_:1},8,["is-active"])]),key:"3"}:void 0,e.navigationState.videoSettingsPaneTab==="tab-timing"?{name:"4-timing",fn:n(()=>[r(ee,{"is-active":e.navigationState.videoSettingsPaneTab==="tab-timing"},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1},8,["is-active"])]),key:"4"}:void 0]),1024)]),"tab-content":n(()=>[r(Te,{"is-full-height":e.navigationState.videoSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.videoSettingsPaneTab==="tab-transform"?(d(),S(ot,{key:0,"rotate-angle":e.activeTrackElement.videoOptions.rotateAngle,"angle-rotator-step":e.$appConfig.angleRotatorStep,"track-element-selection-view-model":e.trackElementSelectionViewModel,"can-crop":e.canCrop,onCropButtonClick:t[189]||(t[189]=v=>e.openCropTab()),onFillButtonClick:t[190]||(t[190]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFill(),e.saveProject()}),onFitButtonClick:t[191]||(t[191]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFit(),e.saveProject()}),onFlipHorizontallyButtonClick:t[192]||(t[192]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipHorizontally(),e.saveProject()}),onFlipVerticallyButtonClick:t[193]||(t[193]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipVertically(),e.saveProject()}),onRotateButtonClick:t[194]||(t[194]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotate(),e.saveProject()}),onRotateAngleChange:t[195]||(t[195]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotateAngle(v),e.saveProject()})},null,8,["rotate-angle","angle-rotator-step","track-element-selection-view-model","can-crop"])):E("",!0),e.navigationState.videoSettingsPaneTab==="tab-adjust"?(d(),S(Mt,{key:1,opacity:e.activeTrackElement.videoOptions.adjustOpacity,hue:e.activeTrackElement.videoOptions.adjustHue,saturation:e.activeTrackElement.videoOptions.adjustSaturation,brightness:e.activeTrackElement.videoOptions.adjustBrightness,contrast:e.activeTrackElement.videoOptions.adjustContrast,blur:e.activeTrackElement.videoOptions.adjustBlur,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-opacity":e.$appConfig.defaultTrackElementVideoOptions.adjustOpacity,"default-hue":e.$appConfig.defaultTrackElementVideoOptions.adjustHue,"default-saturation":e.$appConfig.defaultTrackElementVideoOptions.adjustSaturation,"default-brightness":e.$appConfig.defaultTrackElementVideoOptions.adjustBrightness,"default-contrast":e.$appConfig.defaultTrackElementVideoOptions.adjustContrast,"default-blur":e.$appConfig.defaultTrackElementVideoOptions.adjustBlur,onOpacityChange:e.videoElementApplyAdjustOpacity,onHueChange:e.videoElementApplyAdjustHue,onSaturationChange:e.videoElementApplyAdjustSaturation,onBrightnessChange:e.videoElementApplyAdjustBrightness,onContrastChange:e.videoElementApplyAdjustContrast,onBlurChange:e.videoElementApplyAdjustBlur,onVideoAdjustReset:t[196]||(t[196]=v=>{e.undoRedoRecordCurrentState(),e.videoElementAdjustReset(),e.saveProject()}),onVideoAdjustChangeStart:e.undoRedoRecordCurrentState,onVideoAdjustChangeFinish:e.saveProject},null,8,["opacity","hue","saturation","brightness","contrast","blur","track-element-selection-view-model","default-opacity","default-hue","default-saturation","default-brightness","default-contrast","default-blur","onOpacityChange","onHueChange","onSaturationChange","onBrightnessChange","onContrastChange","onBlurChange","onVideoAdjustChangeStart","onVideoAdjustChangeFinish"])):E("",!0),e.navigationState.videoSettingsPaneTab==="tab-volume"?(d(),S(wo,{key:2,volume:e.activeTrackElement.videoOptions.volume,"is-extract-audio-disabled":e.activeTrackElement.mediaElement.status!=="ready","track-element-selection-view-model":e.trackElementSelectionViewModel,"default-volume":e.$appConfig.defaultTrackElementVideoOptions.volume,"is-noise-reduced":e.activeTrackElement.videoOptions.isNoiseReduced,"is-noise-reduction-supported":e.isNoiseReductionSupported,"is-noise-reduction-ready":e.isNoiseReductionReady,"is-noise-reduction-visible":e.activeTrackElement.mediaElement.hasAudio!==!1,onVideoVolumeChangeStart:e.undoRedoRecordCurrentState,onVideoVolumeChange:e.videoElementApplyVolume,onVideoVolumeChangeFinish:e.saveProject,onVideoNoiseReducedChange:e.videoElementApplyIsNoiseReduced,onExtractAudio:t[197]||(t[197]=v=>{e.undoRedoRecordCurrentState(),e.extractAudio(e.activeTrackElement)})},null,8,["volume","is-extract-audio-disabled","track-element-selection-view-model","default-volume","is-noise-reduced","is-noise-reduction-supported","is-noise-reduction-ready","is-noise-reduction-visible","onVideoVolumeChangeStart","onVideoVolumeChange","onVideoVolumeChangeFinish","onVideoNoiseReducedChange"])):E("",!0),e.navigationState.videoSettingsPaneTab==="tab-speed"?(d(),S(si,{key:3,speed:e.activeTrackElement.videoOptions.basicSpeed,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-speed":e.$appConfig.defaultTrackElementVideoOptions.basicSpeed,onSpeedChangeStart:e.undoRedoRecordCurrentState,onSpeedChange:e.videoOrAudioElementApplyBasicSpeed,onSpeedChangeFinish:e.saveProject},null,8,["speed","track-element-selection-view-model","default-speed","onSpeedChangeStart","onSpeedChange","onSpeedChangeFinish"])):E("",!0),e.navigationState.videoSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:4,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-input-hidden","is-duration-unlimited","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["is-full-height"])]),_:1},8,["is-visible"]),r(be,{"is-visible":e.trackElementSelectionViewModel.hasAnySelected()&&e.navigationState.mainTab==="tab-settings-image"&&e.navigationState.imageSettingsPaneTab!==void 0,onClose:t[207]||(t[207]=v=>e.switchNavigationImageSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[r(Ae,null,G({_:2},[e.navigationState.imageSettingsPaneTab==="tab-transform"?{name:"0-transform",fn:n(()=>[r(ee,{"is-active":e.navigationState.imageSettingsPaneTab==="tab-transform"},{default:n(()=>[y(g(e.$t("editor.mobile.imageSettings.transform")),1)]),_:1},8,["is-active"])]),key:"0"}:void 0,e.navigationState.imageSettingsPaneTab==="tab-adjust"?{name:"1-adjust",fn:n(()=>[r(ee,{"is-active":e.navigationState.imageSettingsPaneTab==="tab-adjust"},{default:n(()=>[y(g(e.$t("editor.mobile.imageSettings.adjust")),1)]),_:1},8,["is-active"])]),key:"1"}:void 0,e.navigationState.imageSettingsPaneTab==="tab-timing"?{name:"2-timing",fn:n(()=>[r(ee,{"is-active":e.navigationState.imageSettingsPaneTab==="tab-timing"},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1},8,["is-active"])]),key:"2"}:void 0]),1024)]),"tab-content":n(()=>[r(Te,{"is-full-height":e.navigationState.imageSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.imageSettingsPaneTab==="tab-transform"?(d(),S(ot,{key:0,"rotate-angle":e.activeTrackElement.imageOptions.rotateAngle,"angle-rotator-step":e.$appConfig.angleRotatorStep,"track-element-selection-view-model":e.trackElementSelectionViewModel,"can-crop":e.canCrop,onCropButtonClick:t[199]||(t[199]=v=>e.openCropTab()),onFillButtonClick:t[200]||(t[200]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFill(),e.saveProject()}),onFitButtonClick:t[201]||(t[201]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFit(),e.saveProject()}),onFlipHorizontallyButtonClick:t[202]||(t[202]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipHorizontally(),e.saveProject()}),onFlipVerticallyButtonClick:t[203]||(t[203]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipVertically(),e.saveProject()}),onRotateButtonClick:t[204]||(t[204]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotate(),e.saveProject()}),onRotateAngleChange:t[205]||(t[205]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotateAngle(v),e.saveProject()})},null,8,["rotate-angle","angle-rotator-step","track-element-selection-view-model","can-crop"])):E("",!0),e.navigationState.imageSettingsPaneTab==="tab-adjust"?(d(),S(Mt,{key:1,opacity:e.activeTrackElement.imageOptions.adjustOpacity,hue:e.activeTrackElement.imageOptions.adjustHue,saturation:e.activeTrackElement.imageOptions.adjustSaturation,brightness:e.activeTrackElement.imageOptions.adjustBrightness,contrast:e.activeTrackElement.imageOptions.adjustContrast,blur:e.activeTrackElement.imageOptions.adjustBlur,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-opacity":e.$appConfig.defaultTrackElementVideoOptions.adjustOpacity,"default-hue":e.$appConfig.defaultTrackElementVideoOptions.adjustHue,"default-saturation":e.$appConfig.defaultTrackElementVideoOptions.adjustSaturation,"default-brightness":e.$appConfig.defaultTrackElementVideoOptions.adjustBrightness,"default-contrast":e.$appConfig.defaultTrackElementVideoOptions.adjustContrast,"default-blur":e.$appConfig.defaultTrackElementVideoOptions.adjustBlur,onOpacityChange:e.videoElementApplyAdjustOpacity,onHueChange:e.videoElementApplyAdjustHue,onSaturationChange:e.videoElementApplyAdjustSaturation,onBrightnessChange:e.videoElementApplyAdjustBrightness,onContrastChange:e.videoElementApplyAdjustContrast,onBlurChange:e.videoElementApplyAdjustBlur,onVideoAdjustReset:t[206]||(t[206]=v=>{e.undoRedoRecordCurrentState(),e.videoElementAdjustReset(),e.saveProject()}),onVideoAdjustChangeStart:e.undoRedoRecordCurrentState,onVideoAdjustChangeFinish:e.saveProject},null,8,["opacity","hue","saturation","brightness","contrast","blur","track-element-selection-view-model","default-opacity","default-hue","default-saturation","default-brightness","default-contrast","default-blur","onOpacityChange","onHueChange","onSaturationChange","onBrightnessChange","onContrastChange","onBlurChange","onVideoAdjustChangeStart","onVideoAdjustChangeFinish"])):E("",!0),e.navigationState.imageSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:2,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-input-hidden","is-duration-unlimited","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["is-full-height"])]),_:1},8,["is-visible"]),r(be,{"is-visible":e.trackElementSelectionViewModel.hasAnySelected()&&e.navigationState.mainTab==="tab-settings-audio"&&e.navigationState.audioSettingsPaneTab!==void 0,variant:e.navigationState.audioSettingsPaneTab==="tab-text-to-speech"?"tts":"default","padding-horizontal":e.navigationState.audioSettingsPaneTab==="tab-text-to-speech"?0:void 0,"padding-vertical":e.navigationState.audioSettingsPaneTab==="tab-text-to-speech"?0:void 0,onClose:t[208]||(t[208]=v=>e.switchNavigationAudioSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[r(Ae,null,G({_:2},[e.navigationState.audioSettingsPaneTab==="tab-text-to-speech"?{name:"0-text-to-speech",fn:n(()=>[r(ee,{"is-active":e.navigationState.audioSettingsPaneTab==="tab-text-to-speech"},{default:n(()=>[y(g(e.$t("export.actions.edit")),1)]),_:1},8,["is-active"])]),key:"0"}:void 0,e.navigationState.audioSettingsPaneTab==="tab-volume"?{name:"1-volume",fn:n(()=>[r(ee,{"is-active":e.navigationState.audioSettingsPaneTab==="tab-volume"},{default:n(()=>[y(g(e.$t("editor.mobile.audioSettings.changeVolume")),1)]),_:1},8,["is-active"])]),key:"1"}:void 0,e.navigationState.audioSettingsPaneTab==="tab-speed"&&e.activeTrackElement.mediaElement.ttsOptions===void 0?{name:"2-speed",fn:n(()=>[r(ee,{"is-active":e.navigationState.audioSettingsPaneTab==="tab-speed"},{default:n(()=>[y(g(e.$t("editor.mobile.videoSettings.changeSpeed")),1)]),_:1},8,["is-active"])]),key:"2"}:void 0,e.navigationState.audioSettingsPaneTab==="tab-fade"?{name:"3-fade",fn:n(()=>[r(ee,{"is-active":e.navigationState.audioSettingsPaneTab==="tab-volume"},{default:n(()=>[y(g(e.$t("editor.mobile.audioSettings.fade")),1)]),_:1},8,["is-active"])]),key:"3"}:void 0,e.navigationState.audioSettingsPaneTab==="tab-timing"?{name:"4-timing",fn:n(()=>[r(ee,{"is-active":e.navigationState.audioSettingsPaneTab==="tab-timing"},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1},8,["is-active"])]),key:"4"}:void 0]),1024)]),"tab-content":n(()=>[r(Te,{width:e.navigationState.audioSettingsPaneTab==="tab-text-to-speech"?"full":"default","is-full-height":e.navigationState.audioSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.audioSettingsPaneTab==="tab-text-to-speech"?(d(),S(ni,{key:0,state:e.textToSpeechStateFragment.state,controller:e.textToSpeechController,"is-moods-enabled":e.backendConfig.isMoodsEnabled,"is-built-in":"","is-mobile-layout":"",onTtsElementUpdate:e.updateAudioFromTextTrackElement},null,8,["state","controller","is-moods-enabled","onTtsElementUpdate"])):E("",!0),e.navigationState.audioSettingsPaneTab==="tab-volume"?(d(),S(Po,{key:1,volume:e.activeTrackElement.audioOptions.volume,"volume-fade-in-time":e.activeTrackElement.audioOptions.volumeFadeInTime,"volume-fade-out-time":e.activeTrackElement.audioOptions.volumeFadeOutTime,"is-noise-reduced":e.activeTrackElement.audioOptions.isNoiseReduced,"is-noise-reduction-supported":e.isNoiseReductionSupported,"is-noise-reduction-ready":e.isNoiseReductionReady,"is-fade-settings-visible":!1,"playback-duration":e.activeTrackElement.timelineOptions.length,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-volume":e.$appConfig.defaultTrackElementAudioOptions.volume,"default-volume-fade-in-time":e.$appConfig.defaultTrackElementAudioOptions.volumeFadeInTime,"default-volume-fade-out-time":e.$appConfig.defaultTrackElementAudioOptions.volumeFadeOutTime,onAudioVolumeChangeStart:e.undoRedoRecordCurrentState,onAudioVolumeChange:e.audioElementApplyVolume,onAudioVolumeChangeFinish:e.saveProject,onAudioVolumeFadeInTimeChangeStart:e.undoRedoRecordCurrentState,onAudioVolumeFadeInTimeChange:e.audioElementApplyVolumeFadeInTime,onAudioVolumeFadeInTimeChangeFinish:e.saveProject,onAudioVolumeFadeOutTimeChangeStart:e.undoRedoRecordCurrentState,onAudioVolumeFadeOutTimeChange:e.audioElementApplyVolumeFadeOutTime,onAudioVolumeFadeOutTimeChangeFinish:e.saveProject,onAudioNoiseReducedChange:e.audioElementApplyIsNoiseReduced},null,8,["volume","volume-fade-in-time","volume-fade-out-time","is-noise-reduced","is-noise-reduction-supported","is-noise-reduction-ready","playback-duration","track-element-selection-view-model","default-volume","default-volume-fade-in-time","default-volume-fade-out-time","onAudioVolumeChangeStart","onAudioVolumeChange","onAudioVolumeChangeFinish","onAudioVolumeFadeInTimeChangeStart","onAudioVolumeFadeInTimeChange","onAudioVolumeFadeInTimeChangeFinish","onAudioVolumeFadeOutTimeChangeStart","onAudioVolumeFadeOutTimeChange","onAudioVolumeFadeOutTimeChangeFinish","onAudioNoiseReducedChange"])):E("",!0),e.navigationState.audioSettingsPaneTab==="tab-speed"&&e.activeTrackElement.mediaElement.ttsOptions===void 0?(d(),S(si,{key:2,speed:e.activeTrackElement.audioOptions.basicSpeed,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-speed":e.$appConfig.defaultTrackElementVideoOptions.basicSpeed,onSpeedChangeStart:e.undoRedoRecordCurrentState,onSpeedChange:e.videoOrAudioElementApplyBasicSpeed,onSpeedChangeFinish:e.saveProject},null,8,["speed","track-element-selection-view-model","default-speed","onSpeedChangeStart","onSpeedChange","onSpeedChangeFinish"])):E("",!0),e.navigationState.audioSettingsPaneTab==="tab-fade"?(d(),S(Ds,{key:3,"volume-fade-in-time":e.activeTrackElement.audioOptions.volumeFadeInTime,"volume-fade-out-time":e.activeTrackElement.audioOptions.volumeFadeOutTime,"playback-duration":e.activeTrackElement.timelineOptions.length,onAudioVolumeFadeInTimeChangeStart:e.undoRedoRecordCurrentState,onAudioVolumeFadeInTimeChange:e.audioElementApplyVolumeFadeInTime,onAudioVolumeFadeInTimeChangeFinish:e.saveProject,onAudioVolumeFadeOutTimeChangeStart:e.undoRedoRecordCurrentState,onAudioVolumeFadeOutTimeChange:e.audioElementApplyVolumeFadeOutTime,onAudioVolumeFadeOutTimeChangeFinish:e.saveProject},null,8,["volume-fade-in-time","volume-fade-out-time","playback-duration","onAudioVolumeFadeInTimeChangeStart","onAudioVolumeFadeInTimeChange","onAudioVolumeFadeInTimeChangeFinish","onAudioVolumeFadeOutTimeChangeStart","onAudioVolumeFadeOutTimeChange","onAudioVolumeFadeOutTimeChangeFinish"])):E("",!0),e.navigationState.audioSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:4,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-input-hidden","is-duration-unlimited","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["width","is-full-height"])]),_:1},8,["is-visible","variant","padding-horizontal","padding-vertical"]),r(be,{"is-visible":e.trackElementSelectionViewModel.hasAnySelected()&&e.navigationState.mainTab==="tab-settings-text"&&e.navigationState.textSettingsPaneTab!==void 0&&e.navigationState.textSettingsPaneTab!=="tab-timing",variant:"text-settings",onClose:t[221]||(t[221]=v=>e.switchNavigationTextSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[r(Ae,{variant:"icon"},{"0-content":n(()=>[r(ee,{variant:"icon","is-active":e.navigationState.textSettingsPaneTab==="tab-content",onClick:t[209]||(t[209]=v=>e.switchNavigationTextSettingsPaneTab("tab-content"))},{default:n(()=>[r(m,{symbol:"svg-tool-text"})]),_:1},8,["is-active"])]),"1-font":n(()=>[r(ee,{variant:"icon","is-active":e.navigationState.textSettingsPaneTab==="tab-adjust",onClick:t[210]||(t[210]=v=>e.switchNavigationTextSettingsPaneTab("tab-adjust"))},{default:n(()=>[r(m,{symbol:"svg-tool-text-adjust"})]),_:1},8,["is-active"])]),"2-background":n(()=>[r(ee,{variant:"icon","is-active":e.navigationState.textSettingsPaneTab==="tab-background",onClick:t[211]||(t[211]=v=>e.switchNavigationTextSettingsPaneTab("tab-background"))},{default:n(()=>[r(m,{symbol:"svg-tool-bg"})]),_:1},8,["is-active"])]),"3-opacity":n(()=>[r(ee,{variant:"icon","is-active":e.navigationState.textSettingsPaneTab==="tab-opacity",onClick:t[212]||(t[212]=v=>e.switchNavigationTextSettingsPaneTab("tab-opacity"))},{default:n(()=>[r(m,{symbol:"svg-tool-opacity"})]),_:1},8,["is-active"])]),_:1})]),"tab-content":n(()=>[r(Te,{width:"wide","is-full-height":e.navigationState.textSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.textSettingsPaneTab==="tab-content"?(d(),S(Ao,{key:0,"color-presets":e.textColorPresets,fonts:e.fonts,"google-fonts":e.$googleFonts,"recent-fonts":e.recentFonts,"text-content":e.activeTrackElement.textOptions.textContent,"text-color":e.activeTrackElement.textOptions.textColor,"text-font-face":e.activeTrackElement.textOptions.fontFace,"text-font-style":e.activeTrackElement.textOptions.fontStyle,"text-font-weight":e.activeTrackElement.textOptions.fontWeight,"text-absolute-font-size":e.activeTrackElement.textOptions.absoluteFontSize,"text-absolute-font-size-maximum":e.$appConfig.absoluteFontSizeMaximum,"text-absolute-font-size-minimum":e.$appConfig.absoluteFontSizeMinimum,"text-absolute-font-sizes":e.$appConfig.absoluteFontSizes,"default-color":e.$appConfig.defaultCustomColor,"track-element-selection-view-model":e.trackElementSelectionViewModel,"is-mobile-layout":"",onTextChange:t[213]||(t[213]=v=>{e.undoRedoRecordCurrentState(),e.textElementApplyTextContent(v),e.throttledTextElementPredictFonts(),e.saveProject()}),onTextChangeFinish:t[214]||(t[214]=v=>{e.deleteEmptyActiveTextElement(),e.saveProject()}),onColorChangeStart:e.undoRedoRecordCurrentState,onColorChange:e.textElementApplyTextColor,onColorChangeFinish:e.saveProject,onFontFaceChange:e.handleFontFaceChange,onFontStyleChange:e.handleFontStyleChange,onNewFontsShowed:e.preloadFontsCSS,onTextAbsoluteFontSizeChange:t[215]||(t[215]=v=>{e.undoRedoRecordCurrentState(),e.textElementApplyAbsoluteFontSize(v),e.saveProject()}),onSetCustomColorPane:t[216]||(t[216]=v=>e.switchMobileNavigationCustomColorPaneTab("text-color"))},null,8,["color-presets","fonts","google-fonts","recent-fonts","text-content","text-color","text-font-face","text-font-style","text-font-weight","text-absolute-font-size","text-absolute-font-size-maximum","text-absolute-font-size-minimum","text-absolute-font-sizes","default-color","track-element-selection-view-model","onColorChangeStart","onColorChange","onColorChangeFinish","onFontFaceChange","onFontStyleChange","onNewFontsShowed"])):E("",!0),e.navigationState.textSettingsPaneTab==="tab-adjust"?(d(),S(Mo,{key:1,"text-align":e.activeTrackElement.textOptions.align,"is-text-underlined":e.activeTrackElement.textOptions.isUnderlined,"is-in-uppercase":e.activeTrackElement.textOptions.isInUppercase,"text-line-height":e.activeTrackElement.textOptions.lineHeight,"text-absolute-letter-spacing":e.activeTrackElement.textOptions.absoluteLetterSpacing,"text-font-style":e.activeTrackElement.textOptions.fontStyle,"text-font-weight":e.activeTrackElement.textOptions.fontWeight,"text-font-face":e.activeTrackElement.textOptions.fontFace,fonts:e.fonts,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-line-height":e.$appConfig.defaultTrackElementTextOptions.lineHeight,"default-absolute-letter-spacing":e.$appConfig.defaultTrackElementTextOptions.absoluteLetterSpacing,onTextAbsoluteFontSizeChangeStart:e.undoRedoRecordCurrentState,onTextAbsoluteFontSizeChange:e.textElementApplyAbsoluteFontSize,onTextAbsoluteFontSizeChangeFinish:e.saveProject,onTextLineHeightChangeStart:e.undoRedoRecordCurrentState,onTextLineHeightChange:e.textElementApplyTextLineHeight,onTextLineHeightChangeFinish:e.saveProject,onTextAbsoluteLetterSpacingChangeStart:e.undoRedoRecordCurrentState,onTextAbsoluteLetterSpacingChange:e.textElementApplyAbsoluteLetterSpacing,onTextAbsoluteLetterSpacingChangeFinish:e.saveProject,onTextAlignChange:t[217]||(t[217]=v=>{e.undoRedoRecordCurrentState(),e.textElementApplyTextAlign(v.textAlign,v.justifyContent),e.saveProject()}),onTextUnderlineChange:t[218]||(t[218]=v=>{e.undoRedoRecordCurrentState(),e.textElementApplyTextUnderline(v),e.saveProject()}),onTextItalicsChange:e.handleTextItalicsChange,onTextUppercaseChange:t[219]||(t[219]=v=>{e.undoRedoRecordCurrentState(),e.textElementApplyTextUppercase(v),e.saveProject()})},null,8,["text-align","is-text-underlined","is-in-uppercase","text-line-height","text-absolute-letter-spacing","text-font-style","text-font-weight","text-font-face","fonts","track-element-selection-view-model","default-line-height","default-absolute-letter-spacing","onTextAbsoluteFontSizeChangeStart","onTextAbsoluteFontSizeChange","onTextAbsoluteFontSizeChangeFinish","onTextLineHeightChangeStart","onTextLineHeightChange","onTextLineHeightChangeFinish","onTextAbsoluteLetterSpacingChangeStart","onTextAbsoluteLetterSpacingChange","onTextAbsoluteLetterSpacingChangeFinish","onTextItalicsChange"])):E("",!0),e.navigationState.textSettingsPaneTab==="tab-background"?(d(),S(Ro,{key:2,"color-presets":e.textBackgroundColorPresets,"background-color":e.activeTrackElement.textOptions.backgroundFill,"background-border-radius":e.activeTrackElement.textOptions.backgroundBorderRadius,"text-color":e.activeTrackElement.textOptions.textColor,"app-layout":e.appLayout,"default-solid-color":e.$appConfig.defaultCustomColor,"default-multi-edit-color":e.$appConfig.defaultMultiEditSolidColor,"default-gradient-color":e.$appConfig.defaultTextBackgroundColor,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-background-border-radius":e.$appConfig.defaultTrackElementTextOptions.backgroundBorderRadius,onBackgroundColorChangeStart:e.undoRedoRecordCurrentState,onBackgroundColorChange:e.textElementApplyBackgroundColor,onBackgroundColorChangeFinish:e.saveProject,onBackgroundBorderRadiusChangeStart:e.undoRedoRecordCurrentState,onBackgroundBorderRadiusChange:e.textElementApplyBackgroundBorderRadius,onBackgroundBorderRadiusChangeFinish:e.saveProject,onSetCustomColorPane:t[220]||(t[220]=v=>e.switchMobileNavigationCustomColorPaneTab("text-background-color"))},null,8,["color-presets","background-color","background-border-radius","text-color","app-layout","default-solid-color","default-multi-edit-color","default-gradient-color","track-element-selection-view-model","default-background-border-radius","onBackgroundColorChangeStart","onBackgroundColorChange","onBackgroundColorChangeFinish","onBackgroundBorderRadiusChangeStart","onBackgroundBorderRadiusChange","onBackgroundBorderRadiusChangeFinish"])):E("",!0),e.navigationState.textSettingsPaneTab==="tab-opacity"?(d(),S(ai,{key:3,opacity:e.trackElementMultiEditAttributeAccessorRegistry.textOpacity.getValue(),"is-label-grayed-out":e.trackElementMultiEditAttributeAccessorRegistry.textOpacity.isMixed(),onOpacityChangeStart:e.undoRedoRecordCurrentState,onOpacityChange:e.textElementApplyOpacity,onOpacityChangeFinish:e.saveProject},null,8,["opacity","is-label-grayed-out","onOpacityChangeStart","onOpacityChange","onOpacityChangeFinish"])):E("",!0)]),_:1},8,["is-full-height"])]),_:1},8,["is-visible"]),r(be,{"is-visible":e.trackElementSelectionViewModel.hasSelectedSingle()&&e.navigationState.mainTab==="tab-settings-text"&&e.navigationState.textSettingsPaneTab==="tab-timing",onClose:t[222]||(t[222]=v=>e.switchNavigationTextSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[r(Ae,null,{"0-timing":n(()=>[r(ee,{"is-active":e.navigationState.textSettingsPaneTab==="tab-timing"},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1},8,["is-active"])]),_:1})]),"tab-content":n(()=>[r(Te,{"is-full-height":e.navigationState.textSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.textSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:0,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-input-hidden","is-duration-unlimited","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["is-full-height"])]),_:1},8,["is-visible"]),r(be,{"is-visible":e.trackElementSelectionViewModel.isEmpty()&&e.navigationState.mainTab==="tab-tts","padding-horizontal":0,"padding-vertical":0,variant:"tts",onClose:t[223]||(t[223]=v=>e.switchNavigationMainTab(void 0))},{"tab-buttons":n(()=>[r(Ae,null,{"0-timing":n(()=>[r(ee,{"is-active":""},{default:n(()=>[y(g(e.$t("editor.console.textToSpeech")),1)]),_:1})]),_:1})]),"tab-content":n(()=>[r(Te,{width:"full"},{default:n(()=>[r(ni,{"is-mobile-layout":!0,state:e.textToSpeechStateFragment.state,controller:e.textToSpeechController,"is-moods-enabled":e.backendConfig.isMoodsEnabled,onTtsElementCreate:e.createAudioFromTextTrackElement},null,8,["state","controller","is-moods-enabled","onTtsElementCreate"])]),_:1})]),_:1},8,["is-visible"]),r(be,{"is-visible":e.navigationState.mainTab==="tab-mobile-custom-color",variant:e.navigationState.mobileCustomColorPaneTab==="canvas-background-color"?"custom-color-short":"custom-color","padding-vertical":16,onClose:t[231]||(t[231]=v=>e.switchBackFromMobileNavigationCustomColorPaneTab())},{"tab-buttons":n(()=>[r(Ae,null,G({_:2},[e.navigationState.mainTab==="tab-mobile-custom-color"&&e.navigationState.mobileCustomColorPaneTab==="text-color"?{name:"0-custom-color",fn:n(()=>[r(ee,{onClick:t[224]||(t[224]=v=>e.switchCustomColorTab("text-color"))},{default:n(()=>[y(g(e.$t("appConsoleSettings.customColor")),1)]),_:1})]),key:"0"}:void 0,e.navigationState.mobileCustomColorPaneTab==="text-background-color"?{name:"1-text-background-solid",fn:n(()=>[r(ee,{"is-active":e.activeTrackElement.textOptions.backgroundFill.type==="solid",onClick:t[225]||(t[225]=v=>e.switchTextBackgroundColorTab("solid"))},{default:n(()=>[y(g(e.$t("appConsoleSettings.solid")),1)]),_:1},8,["is-active"])]),key:"1"}:void 0,e.navigationState.mobileCustomColorPaneTab==="text-background-color"?{name:"2-text-background-gradient",fn:n(()=>[r(ee,{"is-active":e.activeTrackElement.textOptions.backgroundFill.type==="linear-gradient",onClick:t[226]||(t[226]=v=>e.switchTextBackgroundColorTab("linear-gradient"))},{default:n(()=>[y(g(e.$t("appConsoleSettings.gradient")),1)]),_:1},8,["is-active"])]),key:"2"}:void 0,e.navigationState.mobileCustomColorPaneTab==="canvas-background-color"?{name:"3-canvas-background-solid",fn:n(()=>[r(ee,{"is-active":e.canvasBackgroundColor.type==="solid",onClick:t[227]||(t[227]=v=>e.switchCanvasBackgroundColorTab("solid"))},{default:n(()=>[y(g(e.$t("appConsoleSettings.solid")),1)]),_:1},8,["is-active"])]),key:"3"}:void 0,e.navigationState.mobileCustomColorPaneTab==="canvas-background-color"?{name:"4-canvas-background-gradient",fn:n(()=>[r(ee,{"is-active":e.canvasBackgroundColor.type==="linear-gradient",onClick:t[228]||(t[228]=v=>e.switchCanvasBackgroundColorTab("linear-gradient"))},{default:n(()=>[y(g(e.$t("appConsoleSettings.gradient")),1)]),_:1},8,["is-active"])]),key:"4"}:void 0,e.navigationState.mobileCustomColorPaneTab==="shape-background-color"?{name:"5-shape-background-solid",fn:n(()=>[r(ee,{"is-active":e.activeTrackElement.shapeOptions.backgroundFill.type==="solid",onClick:t[229]||(t[229]=v=>e.switchShapeBackgroundColorTab("solid"))},{default:n(()=>[y(g(e.$t("appConsoleSettings.solid")),1)]),_:1},8,["is-active"])]),key:"5"}:void 0,e.navigationState.mobileCustomColorPaneTab==="shape-background-color"?{name:"6-shape-background-gradient",fn:n(()=>[r(ee,{"is-active":e.activeTrackElement.shapeOptions.backgroundFill.type==="linear-gradient",onClick:t[230]||(t[230]=v=>e.switchShapeBackgroundColorTab("linear-gradient"))},{default:n(()=>[y(g(e.$t("appConsoleSettings.gradient")),1)]),_:1},8,["is-active"])]),key:"6"}:void 0]),1024)]),"tab-content":n(()=>[r(Te,{width:"wide"},{default:n(()=>[e.navigationState.mobileCustomColorPaneTab==="text-color"?(d(),S(Vs,{key:0,"is-alpha-enabled":!0,color:e.activeTrackElement.textOptions.textColor,"spectrum-size":"large",onColorChangeStart:e.undoRedoRecordCurrentState,onColorChange:e.textElementApplyTextColor,onColorChangeFinish:e.saveProject},null,8,["color","onColorChangeStart","onColorChange","onColorChangeFinish"])):E("",!0),e.navigationState.mobileCustomColorPaneTab==="text-background-color"?(d(),S(Oi,{key:1,"is-gradient-enabled":!0,"is-alpha-enabled":!0,color:e.activeTrackElement.textOptions.backgroundFill,"solid-spectrum-size":"large","gradient-spectrum-size":"small",onColorChangeStart:e.undoRedoRecordCurrentState,onColorChange:e.textElementApplyBackgroundColor,onColorChangeFinish:e.saveProject},null,8,["color","onColorChangeStart","onColorChange","onColorChangeFinish"])):E("",!0),e.navigationState.mobileCustomColorPaneTab==="shape-background-color"?(d(),S(Oi,{key:2,"is-gradient-enabled":!0,"is-alpha-enabled":!0,color:e.activeTrackElement.shapeOptions.backgroundFill,"solid-spectrum-size":"large","gradient-spectrum-size":"small",onColorChangeStart:e.undoRedoRecordCurrentState,onColorChange:e.vectorBackgroundColorChange,onColorChangeFinish:e.saveProject},null,8,["color","onColorChangeStart","onColorChange","onColorChangeFinish"])):E("",!0),e.navigationState.mobileCustomColorPaneTab==="canvas-background-color"?(d(),S(Oi,{key:3,"is-gradient-enabled":!0,"is-alpha-enabled":!1,color:e.canvasBackgroundColor,"solid-spectrum-size":"medium","gradient-spectrum-size":"tiny",onColorChangeStart:e.undoRedoRecordCurrentState,onColorChange:e.canvasBackgroundColorChange,onColorChangeFinish:e.saveProject},null,8,["color","onColorChangeStart","onColorChange","onColorChangeFinish"])):E("",!0)]),_:1})]),_:1},8,["is-visible","variant"]),r(be,{"is-visible":e.navigationState.mainTab==="tab-settings-shape"&&e.navigationState.shapeSettingsPaneTab==="tab-background",onClose:t[235]||(t[235]=v=>e.switchNavigationShapeSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[y(g(e.$t("editor.elementSettings.color")),1)]),"tab-content":n(()=>[r(Te,{width:"wide"},{default:n(()=>[r(Ii,{color:e.activeTrackElement.shapeOptions.backgroundFill,"color-presets":e.shapeBackgroundColorPresets,"is-alpha-enabled":!0,"is-dropdown-visible":e.isMobileBackgroundColorPickerDropdownVisible,"app-layout":e.appLayout,"default-solid-color":e.$appConfig.defaultCustomColor,"default-gradient-color":e.$appConfig.defaultTextBackgroundColor,"custom-color-pane":"shape-background-color",onColorChangeStart:e.undoRedoRecordCurrentState,onColorChange:e.vectorBackgroundColorChange,onColorChangeFinish:e.saveProject,onShowColorPicker:t[232]||(t[232]=v=>e.isMobileBackgroundColorPickerDropdownVisible=!0),onHideColorPicker:t[233]||(t[233]=v=>e.isMobileBackgroundColorPickerDropdownVisible=!1),onSetCustomColorPane:t[234]||(t[234]=v=>e.switchMobileNavigationCustomColorPaneTab("shape-background-color"))},null,8,["color","color-presets","is-dropdown-visible","app-layout","default-solid-color","default-gradient-color","onColorChangeStart","onColorChange","onColorChangeFinish"])]),_:1})]),_:1},8,["is-visible"]),r(be,{"is-visible":e.navigationState.mainTab==="tab-settings-shape"&&e.navigationState.shapeSettingsPaneTab==="tab-opacity",onClose:t[236]||(t[236]=v=>e.switchNavigationShapeSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[y(g(e.$t("appConsoleSettingsOpacity.mobilePaneTitle")),1)]),"tab-content":n(()=>[r(Te,null,{default:n(()=>[r(ai,{opacity:e.trackElementMultiEditAttributeAccessorRegistry.shapeOpacity.getValue(),"is-label-grayed-out":e.trackElementMultiEditAttributeAccessorRegistry.shapeOpacity.isMixed(),onOpacityChangeStart:e.undoRedoRecordCurrentState,onOpacityChange:e.shapeElementApplyOpacity,onOpacityChangeFinish:e.saveProject},null,8,["opacity","is-label-grayed-out","onOpacityChangeStart","onOpacityChange","onOpacityChangeFinish"])]),_:1})]),_:1},8,["is-visible"]),r(be,{"is-visible":e.navigationState.mainTab==="tab-settings-shape"&&e.navigationState.shapeSettingsPaneTab==="tab-transform",onClose:t[244]||(t[244]=v=>e.switchNavigationShapeSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[y(g(e.$t("editor.elementSettings.transform")),1)]),"tab-content":n(()=>[r(Te,null,{default:n(()=>[r(ot,{"rotate-angle":e.activeTrackElement.shapeOptions.rotateAngle,"angle-rotator-step":e.$appConfig.angleRotatorStep,"track-element-selection-view-model":e.trackElementSelectionViewModel,"can-crop":e.canCrop,onCropButtonClick:t[237]||(t[237]=v=>e.openCropTab()),onFillButtonClick:t[238]||(t[238]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFill(),e.saveProject()}),onFitButtonClick:t[239]||(t[239]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFit(),e.saveProject()}),onFlipHorizontallyButtonClick:t[240]||(t[240]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipHorizontally(),e.saveProject()}),onFlipVerticallyButtonClick:t[241]||(t[241]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipVertically(),e.saveProject()}),onRotateButtonClick:t[242]||(t[242]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotate(),e.saveProject()}),onRotateAngleChange:t[243]||(t[243]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotateAngle(v),e.saveProject()})},null,8,["rotate-angle","angle-rotator-step","track-element-selection-view-model","can-crop"])]),_:1})]),_:1},8,["is-visible"]),r(be,{"is-visible":e.trackElementSelectionViewModel.hasSelectedSingle()&&e.navigationState.mainTab==="tab-settings-shape"&&e.navigationState.shapeSettingsPaneTab==="tab-timing",onClose:t[245]||(t[245]=v=>e.switchNavigationShapeSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[r(Ae,null,{"0-timing":n(()=>[r(ee,{"is-active":e.navigationState.shapeSettingsPaneTab==="tab-timing"},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1},8,["is-active"])]),_:1})]),"tab-content":n(()=>[r(Te,{"is-full-height":e.navigationState.shapeSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.shapeSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:0,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-input-hidden","is-duration-unlimited","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["is-full-height"])]),_:1},8,["is-visible"]),r(be,{"is-visible":e.navigationState.mainTab==="tab-settings-emoji"&&e.navigationState.emojiSettingsPaneTab==="tab-adjust",onClose:t[247]||(t[247]=v=>e.switchNavigationEmojiSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[y(g(e.$t("editor.elementSettings.adjust")),1)]),"tab-content":n(()=>[r(Te,null,{default:n(()=>[r(Mt,{opacity:e.activeTrackElement.emojiOptions.adjustOpacity,hue:e.activeTrackElement.emojiOptions.adjustHue,saturation:e.activeTrackElement.emojiOptions.adjustSaturation,brightness:e.activeTrackElement.emojiOptions.adjustBrightness,contrast:e.activeTrackElement.emojiOptions.adjustContrast,blur:e.activeTrackElement.emojiOptions.adjustBlur,"track-element-selection-view-model":e.trackElementSelectionViewModel,"default-opacity":e.$appConfig.defaultTrackElementVideoOptions.adjustOpacity,"default-hue":e.$appConfig.defaultTrackElementVideoOptions.adjustHue,"default-saturation":e.$appConfig.defaultTrackElementVideoOptions.adjustSaturation,"default-brightness":e.$appConfig.defaultTrackElementVideoOptions.adjustBrightness,"default-contrast":e.$appConfig.defaultTrackElementVideoOptions.adjustContrast,"default-blur":e.$appConfig.defaultTrackElementVideoOptions.adjustBlur,onOpacityChange:e.videoElementApplyAdjustOpacity,onHueChange:e.videoElementApplyAdjustHue,onSaturationChange:e.videoElementApplyAdjustSaturation,onBrightnessChange:e.videoElementApplyAdjustBrightness,onContrastChange:e.videoElementApplyAdjustContrast,onBlurChange:e.videoElementApplyAdjustBlur,onVideoAdjustReset:t[246]||(t[246]=v=>{e.undoRedoRecordCurrentState(),e.videoElementAdjustReset(),e.saveProject()}),onVideoAdjustChangeStart:e.undoRedoRecordCurrentState,onVideoAdjustChangeFinish:e.saveProject},null,8,["opacity","hue","saturation","brightness","contrast","blur","track-element-selection-view-model","default-opacity","default-hue","default-saturation","default-brightness","default-contrast","default-blur","onOpacityChange","onHueChange","onSaturationChange","onBrightnessChange","onContrastChange","onBlurChange","onVideoAdjustChangeStart","onVideoAdjustChangeFinish"])]),_:1})]),_:1},8,["is-visible"]),r(be,{"is-visible":e.navigationState.mainTab==="tab-settings-emoji"&&e.navigationState.emojiSettingsPaneTab==="tab-transform",onClose:t[255]||(t[255]=v=>e.switchNavigationEmojiSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[y(g(e.$t("editor.elementSettings.transform")),1)]),"tab-content":n(()=>[r(Te,null,{default:n(()=>[r(ot,{"rotate-angle":e.activeTrackElement.emojiOptions.rotateAngle,"angle-rotator-step":e.$appConfig.angleRotatorStep,"track-element-selection-view-model":e.trackElementSelectionViewModel,"can-crop":e.canCrop,onCropButtonClick:t[248]||(t[248]=v=>e.openCropTab()),onFillButtonClick:t[249]||(t[249]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFill(),e.saveProject()}),onFitButtonClick:t[250]||(t[250]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFit(),e.saveProject()}),onFlipHorizontallyButtonClick:t[251]||(t[251]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipHorizontally(),e.saveProject()}),onFlipVerticallyButtonClick:t[252]||(t[252]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformFlipVertically(),e.saveProject()}),onRotateButtonClick:t[253]||(t[253]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotate(),e.saveProject()}),onRotateAngleChange:t[254]||(t[254]=v=>{e.undoRedoRecordCurrentState(),e.videoElementApplyTransformRotateAngle(v),e.saveProject()})},null,8,["rotate-angle","angle-rotator-step","track-element-selection-view-model","can-crop"])]),_:1})]),_:1},8,["is-visible"]),r(be,{"is-visible":e.trackElementSelectionViewModel.hasSelectedSingle()&&e.navigationState.mainTab==="tab-settings-emoji"&&e.navigationState.emojiSettingsPaneTab==="tab-timing",onClose:t[256]||(t[256]=v=>e.switchNavigationEmojiSettingsPaneTab(void 0))},{"tab-buttons":n(()=>[r(Ae,null,{"0-timing":n(()=>[r(ee,{"is-active":e.navigationState.emojiSettingsPaneTab==="tab-timing"},{default:n(()=>[y(g(e.consoleSettingsTimingLabel),1)]),_:1},8,["is-active"])]),_:1})]),"tab-content":n(()=>[r(Te,{"is-full-height":e.navigationState.emojiSettingsPaneTab==="tab-timing"},{default:n(()=>[e.navigationState.emojiSettingsPaneTab==="tab-timing"?(d(),S(Fe,{key:0,"is-duration-hidden":e.isConsoleTabDurationHidden,"is-timing-hidden":e.trackElementSelectionViewModel.hasSelectedMany()},G({_:2},[e.trackElementSelectionViewModel.hasSelectedMany()?void 0:{name:"timing",fn:n(()=>[r(Le,{"timeline-length":e.timelineLength,"is-mobile":e.appLayout==="mobile","playback-start-time":e.activeTrackElement.timelineOptions.playbackStartTime,duration:e.activeTrackElement.timelineOptions.length,"track-element-minimum-duration":e.trackElementMinimumDuration,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"timeline-current-time":e.timelineCurrentTime,onStartTimeChange:e.setTrackElementStartTiming,onEndTimeChange:e.setTrackElementEndTiming},null,8,["timeline-length","is-mobile","playback-start-time","duration","track-element-minimum-duration","is-duration-unlimited","timeline-current-time","onStartTimeChange","onEndTimeChange"])]),key:"0"},e.isConsoleTabDurationHidden?void 0:{name:"duration",fn:n(()=>[r(Oe,{"can-decrease":e.canDecreaseDuration,"can-increase":e.canIncreaseDuration,presets:e.trackElementMultiEditAttributeAccessorRegistry.duration.getPresets(),"is-mixed":e.trackElementMultiEditAttributeAccessorRegistry.duration.isMixed(),"is-mobile":e.appLayout==="mobile","timeline-length":e.timelineLength,"is-input-hidden":e.isSelectedTrackElementsBothInfiniteAndFinite,"is-duration-unlimited":e.activeTrackElement.mediaElement===void 0||e.activeTrackElement.mediaElement.duration===0,"is-extend-to-the-end-visible":e.canExtendToTheEnd,"is-expand-to-project-visible":e.canExpandToProject,duration:e.trackElementMultiEditAttributeAccessorRegistry.duration.getValue(),onChangeStart:e.undoRedoRecordCurrentState,onChange:e.trackElementApplyDuration,onChangeEnd:e.saveProject,onIncrease:e.trackElementIncreaseDuration,onDecrease:e.trackElementDecreaseDuration,onExtendToTheEnd:e.trackElementExtendToTheEnd,onExpandToProject:e.trackElementExpandToProject},null,8,["can-decrease","can-increase","presets","is-mixed","is-mobile","timeline-length","is-input-hidden","is-duration-unlimited","is-extend-to-the-end-visible","is-expand-to-project-visible","duration","onChangeStart","onChange","onChangeEnd","onIncrease","onDecrease","onExtendToTheEnd","onExpandToProject"])]),key:"1"}]),1032,["is-duration-hidden","is-timing-hidden"])):E("",!0)]),_:1},8,["is-full-height"])]),_:1},8,["is-visible"])]),_:1})):E("",!0)]),timeline:n(()=>[r(Js,{"is-console-menu-height-extended":e.isConsoleMenuHeightExtended},{"toolbar-desktop":n(()=>[r(Hs,{"is-console-menu-height-extended":e.isConsoleMenuHeightExtended,onMousedownOnFreeSpace:t[266]||(t[266]=R=>e.trackElementSelectionViewModel.resetSelection())},{"track-element-options":n(()=>[r(Bs,null,G({"0-split":n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.trackElementActions.split")),1)]),anchor:n(()=>[r(f,{"fixed-width":32,"fixed-height":30,"is-disabled":e.isPlaying||!e.isSplitTrackElementAvailable,"rounding-value":5,variant:"icon-timeline","data-testid":"timeline-toolbar-split",onClick:t[257]||(t[257]=R=>{e.undoRedoRecordCurrentState(),e.splitTrackElement()})},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-split"})]),_:1},8,["is-disabled"])]),_:1})]),"2-duplicate":n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.trackElementActions.duplicate")),1)]),anchor:n(()=>[r(f,{"fixed-width":32,"fixed-height":30,"is-disabled":e.trackElementSelectionViewModel.isEmpty(),variant:"icon-timeline","data-testid":"timeline-toolbar-duplicate",onClick:t[259]||(t[259]=R=>{e.undoRedoRecordCurrentState(),e.duplicateSelectedTrackElements()})},{default:n(()=>[r(m,{symbol:"svg-tl-copy"})]),_:1},8,["is-disabled"])]),_:1})]),"5-delete":n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.trackElementActions.delete")),1)]),anchor:n(()=>[r(f,{"fixed-width":32,"fixed-height":30,"is-disabled":e.trackElementSelectionViewModel.isEmpty()&&e.selectedGapIds.length===0,variant:"icon-timeline","data-testid":"timeline-toolbar-delete",onClick:t[262]||(t[262]=()=>{e.undoRedoRecordCurrentState(),e.selectedGapIds.length>0?e.deleteGaps():e.deleteTrackElements(),e.switchNavigationMainTab("tab-media")})},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-del"})]),_:1},8,["is-disabled"])]),_:1})]),_:2},[e.isFreezeFrameTrackElementVisible?{name:"1-freeze-frame",fn:n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.trackElementActions.freezeFrame")),1)]),anchor:n(()=>[r(f,{"fixed-width":32,"fixed-height":30,"is-disabled":e.isPlaying||!e.isFreezeFrameTrackElementAvailable,variant:"icon-timeline","data-testid":"timeline-toolbar-freeze-frame",onClick:t[258]||(t[258]=R=>{e.undoRedoRecordCurrentState(),e.freezeFrame()})},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-freeze-frame"})]),_:1},8,["is-disabled"])]),_:1})]),key:"0"}:void 0,e.nonServiceTracks.length>0?{name:"3-bring-forward",fn:n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.trackElementActions.front")),1)]),anchor:n(()=>[r(f,{"fixed-width":32,"fixed-height":30,"is-disabled":!e.isBringTrackElementForwardAvailable,variant:"icon-timeline","data-testid":"timeline-toolbar-bring-forward",onClick:t[260]||(t[260]=R=>{e.undoRedoRecordCurrentState(),e.bringForwardTrackElement()})},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-front"})]),_:1},8,["is-disabled"])]),_:1})]),key:"1"}:void 0,e.nonServiceTracks.length>0?{name:"4-send-backward",fn:n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.trackElementActions.back")),1)]),anchor:n(()=>[r(f,{"fixed-width":32,"fixed-height":30,"is-disabled":!e.isSendTrackElementBackwardAvailable,variant:"icon-timeline","data-testid":"timeline-toolbar-send-backward",onClick:t[261]||(t[261]=R=>{e.undoRedoRecordCurrentState(),e.sendBackwardTrackElement()})},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-back"})]),_:1},8,["is-disabled"])]),_:1})]),key:"2"}:void 0]),1024)]),"player-controls":n(()=>[r(js,{"is-playing":e.isPlaying,"is-play-available":e.tracks.length>0,"is-previous-available":e.isPreviousTrackElementShouldBeAvailable,"is-next-available":e.isNextTrackElementShouldBeAvailable,onTogglePlay:e.togglePlay,onMoveToPreviousPosition:e.moveToPreviousTrackElement,onMoveToNextPosition:e.moveToNextTrackElement},null,8,["is-playing","is-play-available","is-previous-available","is-next-available","onTogglePlay","onMoveToPreviousPosition","onMoveToNextPosition"])]),timings:n(()=>[r(zs,{"current-time":e.timelineCurrentTime,"timeline-length":e.videoLength,"is-disabled":e.nonServiceTracks.length===0},null,8,["current-time","timeline-length","is-disabled"])]),"timeline-settings":n(()=>[r(Oo,{variant:"desktop","is-snap-enabled":e.isSnapEnabled,"is-ripple-enabled":e.isRippleEnabled,onSnapSettingChange:t[263]||(t[263]=R=>e.isSnapEnabled=R),onRippleSettingChange:t[264]||(t[264]=R=>e.isRippleEnabled=R)},{button:n(R=>[r(f,{ref:"timelineSettingsButton",variant:"icon-timeline","fixed-width":32,"fixed-height":30,"is-active":R.isDropdownVisible,onClick:R.toggleDropdown},{default:n(()=>[r(m,{symbol:"timeline-settings",width:20,height:20})]),_:2},1032,["is-active","onClick"])]),_:1},8,["is-snap-enabled","is-ripple-enabled"])]),"zoom-out":n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.timelineActions.zoomOut")),1)]),anchor:n(()=>[r(f,{"fixed-width":32,"fixed-height":30,"is-disabled":e.isZoomOutTimelineButtonDisabled,variant:"icon-timeline","data-testid":"timeline-toolbar-zoom-out",onClick:e.zoomOutTimeline},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-zoom-out"})]),_:1},8,["is-disabled","onClick"])]),_:1})]),"zoom-in":n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.timelineActions.zoomIn")),1)]),anchor:n(()=>[r(f,{"fixed-width":32,"fixed-height":30,"is-disabled":e.isZoomInTimelineButtonDisabled,variant:"icon-timeline","data-testid":"timeline-toolbar-zoom-in",onClick:e.zoomInTimeline},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-zoom-in"})]),_:1},8,["is-disabled","onClick"])]),_:1})]),"fit-to-screen":n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.timelineActions.fit")),1)]),anchor:n(()=>[r(f,{"fixed-width":32,"fixed-height":30,"is-disabled":e.isZoomFitTimelineButtonDisabled,variant:"icon-timeline","data-testid":"timeline-toolbar-zoom-fit",onClick:e.zoomFitTimeline},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-zoom-fit"})]),_:1},8,["is-disabled","onClick"])]),_:1})]),fullscreen:n(()=>[r(ce,null,{text:n(()=>[y(g(e.isFullscreenEnabled?e.$t("appPlayer.fullScreenExit"):e.$t("appPlayer.fullScreenEnter")),1)]),anchor:n(()=>[r(f,{"fixed-width":32,"fixed-height":30,variant:"icon-timeline","is-disabled":e.tracks.length===0&&!e.isFullscreenEnabled,onClick:t[265]||(t[265]=R=>e.enableFullscreen())},{default:n(()=>[r(m,{symbol:"player-enter-fullscreen",width:20,height:20})]),_:1},8,["is-disabled"])]),_:1})]),_:1},8,["is-console-menu-height-extended"])]),"toolbar-mobile":n(()=>[r(_s,{onMousedownOnFreeSpace:t[269]||(t[269]=R=>e.trackElementSelectionViewModel.resetSelection())},{"timeline-settings":n(()=>[r(Oo,{variant:"mobile","is-snap-enabled":e.isSnapEnabled,"is-ripple-enabled":e.isRippleEnabled,onSnapSettingChange:t[267]||(t[267]=R=>e.isSnapEnabled=R),onRippleSettingChange:t[268]||(t[268]=R=>e.isRippleEnabled=R)},{button:n(R=>[r(f,{ref:"timelineSettingsButton",variant:"icon-timeline","fixed-width":34,"fixed-height":34,"is-active":R.isDropdownVisible,onClick:R.toggleDropdown},{default:n(()=>[r(m,{symbol:"timeline-settings",width:20,height:20})]),_:2},1032,["is-active","onClick"])]),_:1},8,["is-snap-enabled","is-ripple-enabled"])]),"zoom-out":n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.timelineActions.zoomOut")),1)]),anchor:n(()=>[r(f,{"fixed-width":34,"fixed-height":34,"is-disabled":e.isZoomOutTimelineButtonDisabled,variant:"icon-timeline",onClick:e.zoomOutTimeline},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-zoom-out"})]),_:1},8,["is-disabled","onClick"])]),_:1})]),"zoom-in":n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.timelineActions.zoomIn")),1)]),anchor:n(()=>[r(f,{"fixed-width":34,"fixed-height":34,"is-disabled":e.isZoomInTimelineButtonDisabled,variant:"icon-timeline",onClick:e.zoomInTimeline},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-zoom-in"})]),_:1},8,["is-disabled","onClick"])]),_:1})]),"fit-to-screen":n(()=>[r(ce,null,{text:n(()=>[y(g(e.$t("editor.timelineActions.fit")),1)]),anchor:n(()=>[r(f,{"fixed-width":34,"fixed-height":34,"is-disabled":e.isZoomFitTimelineButtonDisabled,variant:"icon-timeline",onClick:e.zoomFitTimeline},{default:n(()=>[r(m,{"is-block":"",symbol:"svg-tl-zoom-fit"})]),_:1},8,["is-disabled","onClick"])]),_:1})]),_:1})]),trackpad:n(()=>[e.tracks.length>0?(d(),S(Zs,{key:0,"selectable-disabled":e.isMobileLayout||e.isTouchDevice,"current-time":e.timelineCurrentTime,"timeline-scale":e.timelineScale,"timeline-length":e.timelineLength,"scroll-event-emitter":e.timelineScrollEventEmitter,"is-timeline-cursor-pointer-events-disabled":e.isTrackElementDragging||e.isTrackElementExpanding,"is-edge-scrolling-enabled":e.isTrackElementExpanding,"track-element-selection-view-model":e.trackElementSelectionViewModel,"is-auto-scrolling-enabled":!e.isTrackElementExpanding&&!e.isCursorDragging,"is-cursor-dragging":e.isCursorDragging,onCurrentTimeUpdate:t[274]||(t[274]=R=>{e.changeTimelineCurrentTime(R,!0),e.stopPlay()}),onCurrentTimeUpdateOnDrag:e.changeTimelineCurrentTimeOnDrag,onClickOnTrackpad:t[275]||(t[275]=R=>{e.callCallbackOnlyIfTimeIsWithinFarthestTrackElementPosition(()=>{e.changeTimelineCurrentTime(R,e.isTrackElementDragging),e.stopPlay()},R)}),onTrackElementSelectMany:t[276]||(t[276]=R=>e.trackElementSelectionViewModel.selectMany(R)),onTrackElementDeselectAll:t[277]||(t[277]=R=>{e.trackElementSelectionViewModel.resetSelection(),e.unselectGaps()}),onTimelineLengthIncrease:e.increaseTimelineLengthByTrackElementMove,onTrackpadWidthUpdate:t[278]||(t[278]=R=>{e.updateTimelineWidth(R),e.throttledCalculateTimelineLength()}),onTrackpadDragenter:e.setForceVisibleTrackElement,onTrackpadDragleave:t[279]||(t[279]=R=>{e.resetForceVisibleTrackElement(),e.changeTimelineCurrentTime(e.timelineCurrentTime),e.stopPlay()}),onTrackpadDrop:t[280]||(t[280]=R=>{e.resetForceVisibleTrackElement(),e.stopTrackElementDrag(),e.changeTimelineCurrentTime(e.timelineCurrentTime,!0),e.stopPlay()})},{ruler:n(R=>[r(Us,{"timeline-scale":e.timelineScale,"timeline-length":e.timelineLength,"is-pointer-cursor-active":R.isPointerCursorActive,onCurrentTimeUpdate:t[270]||(t[270]=v=>{e.changeTimelineCurrentTime(v),e.stopPlay()}),onTimelineCursorMoveStart:v=>{R.activatePointerCursor(),R.showCursorAlert("follow-pointer",0)},onTimelineCursorMoveStop:v=>{R.deactivatePointerCursor(),R.hideCursorAlert()}},null,8,["timeline-scale","timeline-length","is-pointer-cursor-active","onTimelineCursorMoveStart","onTimelineCursorMoveStop"])]),cursor:n(R=>[r(qs,{"current-time":e.timelineCurrentTime,"timeline-scale":e.timelineScale,"is-pointer-cursor-active":R.isPointerCursorActive,onCurrentTimeUpdate:t[271]||(t[271]=v=>{e.changeTimelineCurrentTime(v),e.stopPlay()}),onTimelineCursorMoveStart:v=>{R.activatePointerCursor(),R.showCursorAlert("follow-pointer",v.y),e.timelineCursorMoveStart()},onTimelineCursorMove:v=>R.calculateCursorAlertYPositionInPointerMode(v.y),onTimelineCursorMoveStop:v=>{R.deactivatePointerCursor(),R.hideCursorAlert(),e.timelineCursorMoveStop()}},null,8,["current-time","timeline-scale","is-pointer-cursor-active","onTimelineCursorMoveStart","onTimelineCursorMove","onTimelineCursorMoveStop"])]),tracks:n(R=>[(d(!0),h(N,null,q(e.nonServiceTracksWithSpacers,v=>(d(),h(N,{key:`track-${v.key}`},[v.type==="spacer"?(d(),S(Ws,{key:0,"timeline-scale":e.timelineScale,"get-timeline-scroll-position-function":R.getTimelineScrollPosition,"track-page-left-offset":R.trackPageLeftOffset,position:v.position,onDragOver:e.resetTrackElementDropMarkers,onDrop:c=>{e.undoRedoRecordCurrentState(),e.timelineDropToNewTrack(c,v.previousTrackId)}},null,8,["timeline-scale","get-timeline-scroll-position-function","track-page-left-offset","position","onDragOver","onDrop"])):E("",!0),v.type==="track"?(d(),S(Ks,{key:1,type:v.value.type,"timeline-scale":e.timelineScale,"get-timeline-scroll-position-function":R.getTimelineScrollPosition,"track-element-fallback-duration":e.trackElementFallbackDuration,"is-should-listen-for-native-drop-event":!e.isShouldSimulateDropOnDragEnd,"is-snap-enabled":e.isSnapEnabled,"snap-points":e.elementsSnapPoints,"snap-threshold":e.$appConfig.timelineSnapThreshold,"drag-drop-event-emitter":e.trackElementDragAndDropEventEmitter,"track-page-left-offset":R.trackPageLeftOffset,"force-visible-drop-markers":e.trackElementDropMarkers[v.value.id]!==void 0&&e.trackElementDropMarkers[v.value.id].length>0&&e.trackElementSelectionViewModel.hasAnySelected(),onDragEnter:c=>e.calculateTrackElementDropMarkers(v.value.id,c,!0),onDragOver:c=>e.calculateTrackElementDropMarkers(v.value.id,c,!1),onDrop:c=>{e.undoRedoRecordCurrentState(),e.timelineDropToExistingTrack(c,v.value.id)}},G({content:n(()=>[(d(!0),h(N,null,q(v.value.content,c=>(d(),h(N,{key:`track-element-${c.id}`},[c.type==="placeholder"?(d(),S(Gs,{key:0,"timeline-scale":e.timelineScale,length:c.timelineOptions.length,"playback-start-time":c.timelineOptions.playbackStartTime,"is-active":e.selectedGapIds.includes(c.id),"is-multi-select-in-progress":R.isMultiSelectInProgress,onSelect:O=>e.selectGap(c.id)},null,8,["timeline-scale","length","playback-start-time","is-active","is-multi-select-in-progress","onSelect"])):(d(),S(Ys,{key:1,"data-track-element-id":c.id,"data-track-element-type":c.type,"timeline-scale":e.timelineScale,"playback-start-time":c.timelineOptions.playbackStartTime,"track-element-length":c.timelineOptions.length},{default:n(O=>[c.type==="preloader"?(d(),S(Xs,{key:0,"data-testid":`track-${v.trackIndex}-track-element-${c.testIdIndex}`,"media-element-status":c.mediaElement.status,"media-element-upload-progress":c.mediaElement.uploadProgress},null,8,["data-testid","media-element-status","media-element-upload-progress"])):(d(),S(Mi,{key:1,"draggable-id":c.id,"draggable-data":{trackElementId:c.id,trackElementType:c.type,trackElementLength:c.timelineOptions.length,type:"track-element"},"force-disabled":e.trackElementDropMarkersCalculationFailed,"is-source-element-hiding-required":!0,"is-has-selected-many":e.trackElementSelectionViewModel.hasSelectedMany(),"drag-drop-event-emitter":e.trackElementSelectionViewModel.isEmpty()||e.trackElementSelectionViewModel.hasAnySelected()&&!e.trackElementSelectionViewModel.isSelected(c.id)?void 0:e.trackElementDragAndDropEventEmitter,onDragStart:he=>{e.stopPlay(),e.startTrackElementDrag(c.id)},onBeforeDragStop:t[272]||(t[272]=he=>e.isShouldSimulateDropOnDragEnd?e.simulateDropEvent(he):void 0),onDragStop:t[273]||(t[273]=he=>{e.stopTrackElementDrag(),e.changeTimelineCurrentTime(e.timelineCurrentTime,!0),e.stopPlay()})},{default:n(he=>[r(Vo,{"disable-toggle-selection":e.isMobileLayout||e.isTouchDevice,"timeline-scale":e.timelineScale,type:c.type,"is-active":e.trackElementSelectionViewModel.isSelected(c.id),"playback-start-time":c.timelineOptions.playbackStartTime,"track-element-length":c.timelineOptions.length,"preview-image":(c.type==="image"||c.type==="video")&&c.mediaElement.previewImage||void 0,"get-timeline-scroll-position-function":R.getTimelineScrollPosition,"current-time":e.timelineCurrentTime,"cursor-event-target":R.cursorEventTarget,"data-testid":`track-${v.trackIndex}-track-element-${c.testIdIndex}`,width:O.width,"is-dragging":he.isDragging,onTrackElementSelectSingle:fe=>(!he.isDragging||!e.trackElementSelectionViewModel.isSelected(c.id))&&e.trackElementSelectionViewModel.selectSingle(c.id),onTrackElementToggleSelection:fe=>e.trackElementSelectionViewModel.toggle(c.id),onRectAccessorAddOnMounted:fe=>R.addCursorAlertAnchorRectAccessor(c.id,fe),onRectAccessorDeleteOnDestroy:fe=>R.deleteCursorAlertAnchorRectAccessor(c.id),onLeftStickStartDrag:fe=>{e.stopPlay(),e.undoRedoRecordCurrentState(),e.trackElementSelectionViewModel.setActiveId(c.id),R.showCursorAlert("fixed"),he.disableDrag(),e.startTrackElementExpand(c.id),e.startResizeTrackElementFromStart(c.id)},onLeftStickDrag:fe=>e.resizeTrackElementFromStart(c.id,fe),onLeftStickStopDrag:fe=>{e.stopTrackElementExpand(),R.hideCursorAlert(),he.enableDrag(),e.stopResizeTrackElementFromStart()},onRightStickStartDrag:fe=>{e.stopPlay(),e.undoRedoRecordCurrentState(),e.trackElementSelectionViewModel.setActiveId(c.id),R.showCursorAlert("fixed"),he.disableDrag(),e.startTrackElementExpand(c.id),e.startResizeTrackElementFromEnd(c.id)},onRightStickDrag:fe=>e.resizeTrackElementFromEnd(c.id,fe),onRightStickStopDrag:fe=>{e.stopTrackElementExpand(),R.hideCursorAlert(),he.enableDrag(),e.stopResizeTrackElementFromEnd()}},G({_:2},[c.type==="video"?{name:"frames",fn:n(()=>[r(Fo,{"timeline-scale":e.timelineScale,"trim-from-start-time":c.timelineOptions.trimFromStartTime,"basic-speed":c.videoOptions.basicSpeed,width:c.mediaElement.width,height:c.mediaElement.height,frames:c.mediaElement.frames,duration:c.mediaElement.duration,length:c.timelineOptions.length,"frame-height":e.appLayout==="mobile"?40:54,"is-should-loop":e.isTrackElementLoopableAnimatedImage(c)},null,8,["timeline-scale","trim-from-start-time","basic-speed","width","height","frames","duration","length","frame-height","is-should-loop"])]),key:"0"}:void 0,c.type==="text"?{name:"text",fn:n(()=>[y(g(c.textOptions.textContent),1)]),key:"1"}:void 0,c.type==="shape"||c.type==="emoji"?{name:"element",fn:n(()=>[y(g(c.type==="shape"?c.shapeOptions.title:c.emojiOptions.title),1)]),key:"2"}:void 0,c.type==="shape"||c.type==="emoji"?{name:"miniature",fn:n(()=>[c.type==="shape"?(d(),S(di,{key:0,"element-id":c.shapeOptions.elementId,"element-type":c.shapeOptions.elementType,"shape-source-base-url":e.$appConfig.shapeSourceBaseUrl,"emoji-source-base-url":e.$appConfig.emojiSourceBaseUrl,style:{width:"14px"}},null,8,["element-id","element-type","shape-source-base-url","emoji-source-base-url"])):(d(),S(di,{key:1,"element-id":c.emojiOptions.elementId,"element-type":c.emojiOptions.elementType,"shape-source-base-url":e.$appConfig.shapeSourceBaseUrl,"emoji-source-base-url":e.$appConfig.emojiSourceBaseUrl,style:{width:"14px"}},null,8,["element-id","element-type","shape-source-base-url","emoji-source-base-url"]))]),key:"3"}:c.type==="audio"||c.type==="tts"?{name:"audio",fn:n(fe=>[r(Do,{"is-active":e.trackElementSelectionViewModel.isSelected(c.id),"timeline-scale":e.timelineScale,"basic-speed":c.audioOptions.basicSpeed,"trim-from-start-time":c.timelineOptions.trimFromStartTime,"get-trackpad-container":R.getTrackpadContainer,"waveform-array-buffer":c.mediaElement.waveformRawData,"is-audio-from-text":c.mediaElement.ttsOptions!==void 0},G({_:2},[fe.isTextVisible?{name:"text",fn:n(()=>[y(g(c.mediaElement.fileName),1)]),key:"0"}:void 0]),1032,["is-active","timeline-scale","basic-speed","trim-from-start-time","get-trackpad-container","waveform-array-buffer","is-audio-from-text"])]),key:"4"}:void 0]),1032,["disable-toggle-selection","timeline-scale","type","is-active","playback-start-time","track-element-length","preview-image","get-timeline-scroll-position-function","current-time","cursor-event-target","data-testid","width","is-dragging","onTrackElementSelectSingle","onTrackElementToggleSelection","onRectAccessorAddOnMounted","onRectAccessorDeleteOnDestroy","onLeftStickStartDrag","onLeftStickDrag","onLeftStickStopDrag","onRightStickStartDrag","onRightStickDrag","onRightStickStopDrag"])]),preview:n(()=>[r(Vo,{"is-drag-preview":"",type:c.type,"preview-image":(c.type==="image"||c.type==="video")&&c.mediaElement.previewImage||void 0,"timeline-element":R.timelineElement,width:O.width},G({_:2},[c.type==="video"?{name:"frames",fn:n(()=>[r(Fo,{"timeline-scale":e.timelineScale,"trim-from-start-time":c.timelineOptions.trimFromStartTime,"basic-speed":c.videoOptions.basicSpeed,width:c.mediaElement.width,height:c.mediaElement.height,frames:c.mediaElement.frames,duration:c.mediaElement.duration,length:c.timelineOptions.length,"frame-height":e.appLayout==="mobile"?40:54,"is-should-loop":e.isTrackElementLoopableAnimatedImage(c)},null,8,["timeline-scale","trim-from-start-time","basic-speed","width","height","frames","duration","length","frame-height","is-should-loop"])]),key:"0"}:void 0,c.type==="text"?{name:"text",fn:n(()=>[y(g(c.textOptions.textContent),1)]),key:"1"}:void 0,c.type==="shape"||c.type==="emoji"?{name:"element",fn:n(()=>[y(g(c.type==="shape"?c.shapeOptions.title:c.emojiOptions.title),1)]),key:"2"}:void 0,c.type==="shape"||c.type==="emoji"?{name:"miniature",fn:n(()=>[c.type==="shape"?(d(),S(di,{key:0,"element-id":c.shapeOptions.elementId,"element-type":c.shapeOptions.elementType,"shape-source-base-url":e.$appConfig.shapeSourceBaseUrl,"emoji-source-base-url":e.$appConfig.emojiSourceBaseUrl},null,8,["element-id","element-type","shape-source-base-url","emoji-source-base-url"])):(d(),S(di,{key:1,"element-id":c.emojiOptions.elementId,"element-type":c.emojiOptions.elementType,"shape-source-base-url":e.$appConfig.shapeSourceBaseUrl,"emoji-source-base-url":e.$appConfig.emojiSourceBaseUrl},null,8,["element-id","element-type","shape-source-base-url","emoji-source-base-url"]))]),key:"3"}:c.type==="audio"||c.type==="tts"?{name:"audio",fn:n(()=>[r(Do,{"is-active":e.trackElementSelectionViewModel.isSelected(c.id),"timeline-scale":e.timelineScale,"trim-from-start-time":c.timelineOptions.trimFromStartTime,"basic-speed":c.audioOptions.basicSpeed,"get-trackpad-container":R.getTrackpadContainer,"waveform-array-buffer":c.mediaElement.waveformRawData,label:c.mediaElement.fileName,"is-audio-from-text":c.mediaElement.ttsOptions!==void 0},null,8,["is-active","timeline-scale","trim-from-start-time","basic-speed","get-trackpad-container","waveform-array-buffer","label","is-audio-from-text"])]),key:"4"}:void 0]),1032,["type","preview-image","timeline-element","width"])]),_:2},1032,["draggable-id","draggable-data","force-disabled","is-has-selected-many","drag-drop-event-emitter","onDragStart"]))]),_:2},1032,["data-track-element-id","data-track-element-type","timeline-scale","playback-start-time","track-element-length"]))],64))),128))]),_:2},[e.trackElementDropMarkersCalculationFailed?void 0:{name:"drop-zone-marker",fn:n(c=>[e.trackElementDropMarkers[v.value.id]!==void 0&&e.trackElementDropMarkers[v.value.id].length>0&&e.trackElementSelectionViewModel.hasAnySelected()?(d(!0),h(N,{key:0},q(e.trackElementDropMarkers[v.value.id],O=>(d(),h(N,null,[O.mistype?E("",!0):(d(),S(No,{key:O.trackElementId,width:O.width,offset:O.offset},null,8,["width","offset"]))],64))),256)):(d(),S(No,{key:"something-to-be-named",offset:c.offset,width:c.width()},null,8,["offset","width"]))]),key:"0"}]),1032,["type","timeline-scale","get-timeline-scroll-position-function","track-element-fallback-duration","is-should-listen-for-native-drop-event","is-snap-enabled","snap-points","snap-threshold","drag-drop-event-emitter","track-page-left-offset","force-visible-drop-markers","onDragEnter","onDragOver","onDrop"])):E("",!0)],64))),128))]),_:1},8,["selectable-disabled","current-time","timeline-scale","timeline-length","scroll-event-emitter","is-timeline-cursor-pointer-events-disabled","is-edge-scrolling-enabled","track-element-selection-view-model","is-auto-scrolling-enabled","is-cursor-dragging","onCurrentTimeUpdateOnDrag","onTimelineLengthIncrease","onTrackpadDragenter"])):(d(),S(Qs,{key:1,onDropOnPlaceholder:e.timelineDropToPlaceholder,onClick:e.openMobileUploadTabOnMobile},null,8,["onDropOnPlaceholder","onClick"]))]),_:1},8,["is-console-menu-height-extended"])]),modals:n(()=>[r(Ke,{"is-transition-enabled":!1,"is-visible":e.isMediaRecorderOpened,variant:e.recordingManagerController.stateFragment.state.currentPhase==="critical-error-displayed"?"modal-recording":e.appLayout==="mobile"?"default":"modal-blur-recording",height:e.appLayout==="mobile"?"100%":void 0},{default:n(()=>[r(xs,{controller:e.recordingManagerController,"is-mobile-view":e.appLayout==="mobile","maximum-file-size":e.uploadFileSizeLimit,"maximum-recording-duration":e.isUserPremiumMember?60:15,onAddToTimeline:t[281]||(t[281]=R=>{e.addMediaElementsFromRecordings(R,!0),e.isRecordsTabVisibleOverMediaTab=!1}),onAddToUploads:t[282]||(t[282]=R=>{e.addMediaElementsFromRecordings(R,!1),e.switchNavigationMainTab("tab-media"),e.isRecordsTabVisibleOverMediaTab=!1})},null,8,["controller","is-mobile-view","maximum-file-size","maximum-recording-duration"])]),_:1},8,["is-visible","variant","height"]),r(Ke,{"is-visible":e.googlePhotosStateFragment.state.isGooglePhotosModalVisible,variant:"modal-blur"},{default:n(()=>[r(st,{"is-close-button-visible":!1,"modal-variant":"google-photos","is-expand-on-mobile":""},{default:n(()=>[e.googlePhotosStateFragment.state.isGooglePhotosModalVisible?(d(),S(ea,{key:0,"is-allow-images":"","is-allow-videos":"","is-allow-multiple-select":"",avatar:e.googlePhotosStateFragment.state.googlePhotosUserAvatar,email:e.googlePhotosStateFragment.state.googlePhotosUserEmail,onImageError:e.handleGooglePhotosError,onLoadAlbumListError:e.handleGooglePhotosError,onLoadMediaListError:e.handleGooglePhotosError,onClose:t[283]||(t[283]=R=>e.googlePhotosController.hideModal()),onDownload:t[284]||(t[284]=R=>e.uploadFilesFromGooglePhotos(R)),onLogout:t[285]||(t[285]=R=>e.googlePhotosController.hideModal())},null,8,["avatar","email","onImageError","onLoadAlbumListError","onLoadMediaListError"])):E("",!0)]),_:1})]),_:1},8,["is-visible"]),r(Ke,{"is-visible":e.isModalExportVisible&&e.appLayout==="desktop",variant:"modal-blur"},{default:n(()=>[r(st,{"modal-position":"top-right",onClose:e.closeExportModal},{default:n(()=>[r(jo,{"is-export-disabled":!e.isAllMediaElementsUploaded},{title:n(()=>[y(g(e.$t("editor.modalExport.title")),1)]),"resolution-buttons":n(()=>[r(Bo,{"is-gif-preset-disabled":e.isGifExportSettingsPresetDisabled,"active-settings-preset-id":e.activeExportSettingsPresetId,"settings-presets":e.exportSettingsPresets,"does-user-have-subscription":e.isUserPremiumMember,onPresetChange:e.exportChangeSettingsPreset},null,8,["is-gif-preset-disabled","active-settings-preset-id","settings-presets","does-user-have-subscription","onPresetChange"])]),"export-disabled-text":n(()=>[y(g(e.$t("editor.modalExport.filesUploading1")),1),t[319]||(t[319]=p("br",null,null,-1)),y(" "+g(e.$t("editor.modalExport.filesUploading2")),1)]),"export-button":n(()=>[r(f,{variant:"export-settings","font-weight":600,size:"large","rounding-value":6,"fixed-height":44,"is-loading":e.isContinueExportButtonInLoadingState||!e.isAllMediaElementsUploaded,onClick:e.initiateExportProcess},G({_:2},[e.isAllMediaElementsUploaded?{name:"default",fn:n(()=>[y(g(e.$t("editor.modalExport.continue")),1)]),key:"1"}:{name:"default",fn:n(()=>[y(g(e.$t("editor.modalExport.wait")),1)]),key:"0"}]),1032,["is-loading","onClick"])]),_:1},8,["is-export-disabled"])]),_:1},8,["onClose"])]),_:1},8,["is-visible"]),e.isModalExportVisible&&e.appLayout==="mobile"?(d(),S(li,{key:0},{default:n(()=>[r(ri,{variant:"export-settings",onClose:e.closeExportModal},{title:n(()=>[y(g(e.$t("editor.mobile.modalExport.title")),1)]),default:n(()=>[r(jo,{"is-export-disabled":!e.isAllMediaElementsUploaded},{"resolution-buttons":n(()=>[r(Bo,{"is-mobile-variant":"","is-gif-preset-disabled":e.isGifExportSettingsPresetDisabled,"active-settings-preset-id":e.activeExportSettingsPresetId,"settings-presets":e.exportSettingsPresets,"does-user-have-subscription":e.isUserPremiumMember,"is-mobile":"",onPresetChange:e.exportChangeSettingsPreset},null,8,["is-gif-preset-disabled","active-settings-preset-id","settings-presets","does-user-have-subscription","onPresetChange"])]),"export-disabled-text":n(()=>[y(g(e.$t("editor.mobile.modalExport.filesUploading1")),1),t[320]||(t[320]=p("br",null,null,-1)),y(" "+g(e.$t("editor.mobile.modalExport.filesUploading2")),1)]),"export-button":n(()=>[r(f,{variant:"export-settings","font-weight":500,size:"huge","rounding-value":6,"fixed-height":48,"is-loading":e.isContinueExportButtonInLoadingState||!e.isAllMediaElementsUploaded,onClick:e.initiateExportProcess},G({_:2},[e.isAllMediaElementsUploaded?{name:"default",fn:n(()=>[y(g(e.$t("editor.mobile.modalExport.continue")),1)]),key:"1"}:{name:"default",fn:n(()=>[y(g(e.$t("editor.mobile.modalExport.wait")),1)]),key:"0"}]),1032,["is-loading","onClick"])]),_:1},8,["is-export-disabled"])]),_:1},8,["onClose"])]),_:1})):E("",!0),r(Ke,{"is-visible":e.isModalDeleteMediaElementVisible,variant:"modal"},{default:n(()=>[r(st,{"is-expand-on-mobile":!0,onClose:e.closeDeleteMediaElementModal},{default:n(()=>[r(zo,null,{title:n(()=>[y(g(e.$t("editor.modalDeleteMedia.title")),1)]),subtitle:n(()=>[e.isMediaElementUsedInTimeline?(d(),h(N,{key:0},[p("strong",null,g(e.$t("editor.modalDeleteMedia.messageWarning1")),1),y(" "+g(e.$t("editor.modalDeleteMedia.messageWarning2")),1)],64)):(d(),h(N,{key:1},[y(g(e.$t("editor.modalDeleteMedia.messageSure")),1)],64))]),"left-button":n(()=>[r(f,{variant:"outline",size:"modal","font-weight":600,"rounding-value":6,onClick:e.closeDeleteMediaElementModal},{default:n(()=>[y(g(e.$t("editor.modalDeleteMedia.cancel")),1)]),_:1},8,["onClick"])]),"right-button":n(()=>[r(f,{variant:"error",size:"modal","font-weight":600,"rounding-value":6,onClick:t[286]||(t[286]=R=>{e.deleteMediaElements(e.mediaElementIdsForDelete),e.closeDeleteMediaElementModal()})},{default:n(()=>[y(g(e.$t("editor.modalDeleteMedia.delete")),1)]),_:1})]),_:1})]),_:1},8,["onClose"])]),_:1},8,["is-visible"]),r(Ke,{"is-visible":e.leaveEditorModalStateFragment.state.isLeaveEditorModalVisible,variant:"modal"},{default:n(()=>[r(st,{"is-expand-on-mobile":!0,onClose:t[288]||(t[288]=R=>e.leaveEditorModalController.hide())},{default:n(()=>[r(zo,null,{title:n(()=>[y(g(e.$t("editor.modalLeaveEditor.title")),1)]),subtitle:n(()=>[y(g(e.$t("editor.modalLeaveEditor.message")),1)]),"left-button":n(()=>[r(f,{variant:"outline",size:"modal","font-weight":600,"rounding-value":6,onClick:t[287]||(t[287]=R=>e.leaveEditorModalController.hide())},{default:n(()=>[y(g(e.$t("editor.modalLeaveEditor.cancel")),1)]),_:1})]),"right-button":n(()=>[r(f,{variant:"accent",size:"modal","font-weight":600,"rounding-value":6,onClick:e.confirmLeaveEditor},{default:n(()=>[y(g(e.$t("editor.modalLeaveEditor.leave")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["is-visible"]),r(Ke,{"is-visible":e.isModalUpgradeAccountVisible,variant:"modal"},{default:n(()=>[r(st,{"modal-variant":"seamless",onClose:e.closeUpgradeAccountModal},{default:n(()=>[r(ta,{"project-id":e.projectId,"pricing-page-path":e.backendConfig.pages.pricing,"pricing-page-title":e.$t("editor.modalUpgradeAccount.pricingTitle"),onPaymentFlowComplete:e.finishAccountUpgrade},null,8,["project-id","pricing-page-path","pricing-page-title","onPaymentFlowComplete"])]),_:1},8,["onClose"])]),_:1},8,["is-visible"]),r(Ke,{"is-visible":e.isModalUploadLimitUpgradeVisible,variant:"modal"},{default:n(()=>[r(st,{"is-expand-on-mobile":!0,onClose:e.closeUploadLimitUpgradeModal},{default:n(()=>[r(ia,null,{title:n(()=>[y(g(e.$t("editor.modalUploadLimitUpgrade.title")),1)]),subtitle:n(()=>[y(g(e.$t("editor.modalUploadLimitUpgrade.subtitle1"))+" ",1),e.modalUpgradeUploadLimitSize.length>0?(d(),h(N,{key:0},[y(g(e.$t("editor.modalUploadLimitUpgrade.subtitle2"))+" ",1),p("strong",null,g(e.modalUpgradeUploadLimitSize),1)],64)):E("",!0),y(" "+g(e.$t("editor.modalUploadLimitUpgrade.subtitle3")),1)]),"left-button":n(()=>[r(f,{variant:"outline",size:"modal","font-weight":600,"rounding-value":6,onClick:e.closeUploadLimitUpgradeModal},{default:n(()=>[y(g(e.$t("editor.modalUploadLimitUpgrade.cancel")),1)]),_:1},8,["onClick"])]),"right-button":n(()=>[r(f,{variant:"accent",size:"modal","font-weight":600,"rounding-value":6,onClick:t[289]||(t[289]=R=>{e.closeUploadLimitUpgradeModal(),e.isUserLoggedIn?e.openUpgradeAccountModal():e.openLoginSocialNetworksModal()})},{default:n(()=>[y(g(e.$t("editor.modalUploadLimitUpgrade.upgrade")),1)]),_:1})]),_:1})]),_:1},8,["onClose"])]),_:1},8,["is-visible"]),r(Ke,{variant:"modal-blur","is-visible":e.isModalProjectAlreadyOpenedVisible},{default:n(()=>[r(st,{"is-expand-on-mobile":!0,"is-close-button-visible":!1},{default:n(()=>[r(oa,null,{title:n(()=>[y(g(e.$t("editor.modalProjectAlreadyOpened.title")),1)]),subtitle:n(()=>[y(g(e.$t("editor.modalProjectAlreadyOpened.subtitle")),1)]),"refresh-button":n(()=>[r(f,{variant:"accent",size:"modal","font-weight":600,"rounding-value":6,onClick:e.reloadPage},{default:n(()=>[y(g(e.$t("editor.modalProjectAlreadyOpened.refresh")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["is-visible"]),r(Ke,{"is-visible":e.isModalStockPreviewVisible&&e.appLayout==="desktop",variant:"modal"},{default:n(()=>[r(st,{"modal-variant":"default",onClose:e.closeStockPreviewModal},{default:n(()=>[e.selectedStockItem!==void 0?(d(),S(qo,{key:0,provider:e.selectedStockItem.provider,"stock-type":e.selectedStockItem.stockType,link:e.selectedStockItem.pageUrl},{media:n(()=>[e.selectedStockItem.stockType==="image"?(d(),S(Ho,{key:0,item:e.selectedStockItem},null,8,["item"])):(d(),S(_o,{key:1,variant:"stocks",source:e.selectedStockItem.assetLarge.source.sourceUrl,poster:e.selectedStockItem.assetLarge.source.posterUrl,"poster-small":e.selectedStockItem.assetPreview.source.posterUrl,"video-width":e.selectedStockItem.assetLarge.width,"video-height":e.selectedStockItem.assetLarge.height},null,8,["source","poster","poster-small","video-width","video-height"]))]),title:n(()=>[y(g(e.selectedStockItem.title),1)]),"button-add-timeline":n(()=>[r(f,{variant:"stocks-add-accent",size:"full-width","font-weight":500,"rounding-value":6,"horizontal-align":"left",onClick:t[290]||(t[290]=R=>{e.undoRedoRecordCurrentState(),e.addStockItemToTimeline(e.selectedStockItem)})},{icon:n(()=>[r(m,{symbol:"stocks-plus",width:20,height:16})]),default:n(()=>[y(" "+g(e.$t("editor.modalStockItemPreview.addToTimeline")),1)]),_:1})]),"button-add-uploads":n(()=>[r(Uo,{size:"full-width","font-weight":500,"horizontal-align":"left",state:e.mediaCollection.some(R=>R.stockOrigination!==void 0&&R.stockOrigination.id===e.selectedStockItem.id&&R.stockOrigination.provider===e.selectedStockItem.provider)?"added":"default",onClick:t[291]||(t[291]=R=>R==="added"?e.showStockItemInUploads():e.addMediaElementsFromStock([e.selectedStockItem]))},null,8,["state"])]),_:1},8,["provider","stock-type","link"])):E("",!0)]),_:1},8,["onClose"])]),_:1},8,["is-visible"]),e.isModalStockPreviewVisible&&e.appLayout==="mobile"&&e.selectedStockItem!==void 0?(d(),S(li,{key:1},{default:n(()=>[r(ri,{variant:"stock-video-player",onClose:t[294]||(t[294]=R=>e.closeStockPreviewModal())},{title:n(()=>[y(g(e.selectedStockItem.title),1)]),default:n(()=>[r(qo,{provider:e.selectedStockItem.provider,"stock-type":e.selectedStockItem.stockType,link:e.selectedStockItem.pageUrl,"app-layout":e.appLayout},{media:n(()=>[e.selectedStockItem.stockType==="image"?(d(),S(Ho,{key:0,item:e.selectedStockItem},null,8,["item"])):(d(),S(_o,{key:1,variant:"stocks",source:e.selectedStockItem.assetLarge.source.sourceUrl,poster:e.selectedStockItem.assetLarge.source.posterUrl,"poster-small":e.selectedStockItem.assetPreview.source.posterUrl,"video-width":e.selectedStockItem.assetLarge.width,"video-height":e.selectedStockItem.assetLarge.height},null,8,["source","poster","poster-small","video-width","video-height"]))]),"button-add-timeline":n(()=>[r(f,{variant:"stocks-add-accent",size:"large","font-weight":600,"rounding-value":6,onClick:t[292]||(t[292]=R=>{e.undoRedoRecordCurrentState(),e.addStockItemToTimeline(e.selectedStockItem)})},{default:n(()=>[y(g(e.$t("editor.modalStockItemPreview.addToTimeline")),1)]),_:1})]),"button-add-uploads":n(()=>[r(Uo,{size:"large","font-weight":600,"is-icon-visible":!1,state:e.mediaCollection.some(R=>R.stockOrigination!==void 0&&R.stockOrigination.id===e.selectedStockItem.id&&R.stockOrigination.provider===e.selectedStockItem.provider)?"added":"default",onClick:t[293]||(t[293]=R=>R==="added"?e.showStockItemInUploads():e.addMediaElementsFromStock([e.selectedStockItem]))},null,8,["state"])]),_:1},8,["provider","stock-type","link","app-layout"])]),_:1})]),_:1})):E("",!0),r(na,{state:e.projectNotFoundStateFragment.state,onClose:t[295]||(t[295]=R=>e.projectNotFoundController.navigateToLandingPage())},null,8,["state"]),r(sa,{state:e.projectSaveErrorStateFragment.state,onClose:t[296]||(t[296]=R=>e.projectSaveErrorController.hideModal())},null,8,["state"]),r(aa,{state:e.commonErrorStateFragment.state,localize:e.$t.bind(this),onClose:t[297]||(t[297]=R=>e.commonErrorController.hideModal())},null,8,["state","localize"]),r(ra,{state:e.socialLoginErrorStateFragment.state,localize:e.$t.bind(this),onClose:t[298]||(t[298]=R=>e.socialLoginErrorController.hideModal()),onSignIn:t[299]||(t[299]=R=>{e.socialLoginErrorController.hideModal(),e.loginViaSocialNetworksController.showModal()})},null,8,["state","localize"]),r(la,{state:e.loginViaEmailStateFragment.state,locale:e.$i18n.locale,localize:e.$t.bind(this),onClose:t[300]||(t[300]=R=>{e.loginViaEmailController.hideModal(),e.loginViaEmailController.reset()}),onSignInViaSocialNetworks:t[301]||(t[301]=R=>{e.loginViaEmailController.hideModal(),e.loginViaEmailController.reset(),e.loginViaSocialNetworksController.showModal()}),onSetOtpEmail:t[302]||(t[302]=R=>e.loginViaEmailController.setEmail(R)),onSetOtpCode:t[303]||(t[303]=R=>e.loginViaEmailController.setCode(R)),onRequestOtpCode:t[304]||(t[304]=R=>e.loginViaEmailController.sendOTPCode()),onVerifyOtpCode:t[305]||(t[305]=R=>e.loginViaEmailController.verifyOTPCode().then(()=>{e.isUserPremiumMember||e.openUpgradeAccountModal()}).catch(()=>{})),onReenterOtpEmail:t[306]||(t[306]=R=>e.loginViaEmailController.reset())},null,8,["state","locale","localize"]),r(da,{state:e.loginViaSocialNetworksStateFragment.state,"link-origin":e.$envConfig.backendBaseUrlClient,localize:e.$t.bind(this),onClose:t[307]||(t[307]=R=>e.loginViaSocialNetworksController.hideModal()),onRedirect:t[308]||(t[308]=R=>e.showModalOrRedirectToLink(R,{openModalUpgrade:"true"})),onLoginViaEmail:t[309]||(t[309]=R=>{e.loginViaSocialNetworksController.hideModal(),e.loginViaEmailController.showModal()})},null,8,["state","link-origin","localize"]),e.isFileConverterVisible?(d(),S(ua,{key:2,"convert-to":e.fileConverterDesiredOutput,"uploading-file-name":e.uploadingFileName,"project-id":e.projectId,"media-element":e.mediaCollection.length===1?e.mediaCollection[0]:null,"media-elements-count":e.mediaCollection.length,"is-mobile":e.isMobileLayout,"is-project-synced-after-upload":e.isProjectSyncedAfterUpload,onMediaFilesAddFromLocal:t[310]||(t[310]=R=>e.addMediaElementsFromFilesystem(R)),onFileConverterClose:e.closeFileConverter,onFileConverterReset:e.resetFileConverter},null,8,["convert-to","uploading-file-name","project-id","media-element","media-elements-count","is-mobile","is-project-synced-after-upload","onFileConverterClose","onFileConverterReset"])):E("",!0),e.cookiesStateFragment.state.isModalVisible?(d(),S(pa,{key:3,state:e.cookiesStateFragment.state,localize:e.$t.bind(this),"link-origin":e.$envConfig.backendBaseUrlClient,onAcceptAll:t[311]||(t[311]=R=>e.cookiesController.acceptAll()),onRejectAll:t[312]||(t[312]=R=>e.cookiesController.rejectAll()),onSaveAndClose:t[313]||(t[313]=R=>e.cookiesController.saveAndClose()),onToggleAnalytics:t[314]||(t[314]=R=>e.cookiesController.toggleAnalytics()),onToggleMarketing:t[315]||(t[315]=R=>e.cookiesController.toggleMarketing())},null,8,["state","localize","link-origin"])):E("",!0)]),portal:n(()=>t[321]||(t[321]=[p("div",{id:"teleport-target-drag-preview"},null,-1)])),_:1},8,["onToggleDropZoneVisibility"])}const sM=$(xA,[["render",eM]]);export{sM as default};
//# sourceMappingURL=Dinkbu3m.js.map
